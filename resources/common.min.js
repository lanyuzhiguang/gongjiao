(function(A){A.fn.formSubmit=function(B){var D=this,C=B.submitHandler;A.extend(B,{submitHandler:function(E){A(".my_ueditor").each(function(){var H=A(this);var F=H.attrObj("ueditor");if(F){var G=F.getContent();H.val(G)}});if(C){C(E)}}});D.validate(B)}})(jQuery);$().ready(function(){$(".comp").each(function(){$(this).compThis()});$.codeoption();$.autofillform({fillmaps:$.ctx.fillmaps});$.codetext();$(window).load(function(){$("select").trigger("change")});Waves.attach(".btn:not(.btn-icon):not(.btn-float)");Waves.attach(".btn-icon, .btn-float",["waves-circle","waves-float"]);Waves.init();$(".switcher").each(function(){new Switchery(this,{color:"#1AB394"})});$(".switcher-red").each(function(){new Switchery(this,{color:"#ED5565"})});if($(".fg-line")[0]){$("body").on("focus",".fg-line .form-control",function(){$(this).closest(".fg-line").addClass("fg-toggled")});$("body").on("blur",".form-control",function(){var B=$(this).closest(".form-group, .input-group"),A=B.find(".form-control").val();B.hasClass("fg-float")?0==A.length&&$(this).closest(".fg-line").removeClass("fg-toggled"):$(this).closest(".fg-line").removeClass("fg-toggled")})}if($(".fg-float")[0]){$(".fg-float .form-control").each(function(){var A=$(this).val();if(0==!A.length){$(this).closest(".fg-line").addClass("fg-toggled")}})}if($(".auto-size")[0]){autosize($(".auto-size"))}$(".layer-date").each(function(){var D=$(this);var C={event:"focus",format:"YYYY-MM-DD",min:laydate.now(),max:"2099-06-16 23:59:59",istime:false,istoday:true};var B=D.attr("laydate");if(B){var A=$.parseJSON(B);C=$.extend(C,A)}C.elem="#"+D.attr("id");laydate(C)});$(".suggest").each(function(){var G=$(this);var E={showBtn:false,idField:"_id",keyField:"name"};var F=G.attr("suggest");if(F){var C=$.parseJSON(F);E=$.extend(E,C)}E.data={value:E.data};if(!E.effectiveFields){E.effectiveFields=[E.keyField]}if(!E.searchFields){E.searchFields=[]}E.searchFields.push("zjfCode");var B=$('<input type="hidden"/>'),A=G.attr("id");var D=$('<div class="input-group"><div class="input-group-btn"><button type="button" class="btn btn-white dropdown-toggle"data-toggle="dropdown"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu"></ul></div></div>');G.after(D);B.attr("id",A);B.attr("name",A);G.attr("id","sg_"+A);G.attr("rawId",A);G.attr("name","sg_"+A);D.prepend(G);D.prepend(B);G.keyup(function(){var H=$(this);if(H.val()==""){$("#"+H.attr("rawId")).val("")}});B.data("suggest_raw",G);B.data("suggest_name",E.keyField);B.data("suggest_data",E.data.value);G.bsSuggest(E).on("onSetSelectValue",function(J,H){for(var I=0;I<E.data.value.length;I++){if(E.data.value[I][E.idField]==H.id){B.attr("selectedIndex",I);break}}B.val(H.id);B.trigger("change")}).on("onUnsetSelectValue",function(H){B.val("");B.attr("selectedIndex","");B.trigger("change")});if(E.style2){$("ul",D).css("min-width","");$("ul",D).css("left","");$("ul",D).css("right","");$("ul",D).css("margin-top","15px")}else{if(E.style3){$(".input-group-btn",D).css("position","absolute");$(".input-group-btn",D).css("margin-left","150px");$(".input-group-btn",D).css("margin-top","20px");$("ul",D).css("min-width","");$("ul",D).css("left","");$("ul",D).css("right","");$("ul",D).css("margin-top","15px")}else{$("ul",D).css("min-width","");$("ul",D).css("margin-top","36px");$(".input-group-btn",D).css("display","inline")}}});$.jgrid.defaults.styleUI="Bootstrap"});(function(A){jQuery.validator.addMethod("mobile",function(E,C){var D=E.length;return this.optional(C)||(D==11&&/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\d{8})$/.test(E))},"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801");jQuery.validator.addMethod("isIdCardNo",function(D,C){return this.optional(C)||idCardNoUtil.checkIdCardNo(D)},"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801");A.fn.disable=function(){this.each(function(C){A(this).find(":input button").add(this).each(function(){var E=this.id,D=A(this);switch(this.tagName.toLowerCase()){case"button":case"textarea":case"select":case"input":this.disabled=true;if(D.data("suggest_raw")){D.data("suggest_raw").disable()}break}})})};A.fn.enable=function(){this.each(function(C){A(this).find(":input,a.common_button").add(this).each(function(){var E=this.id,D=A(this);switch(this.tagName.toLowerCase()){case"textarea":case"select":case"input":if(D.data("suggest_raw")){D.data("suggest_raw").enable()}this.disabled=null;break}})})};var B=[];A.fn.attrObj=function(C,E){var F;for(var D=0;D<B.length;D++){if(B[D].o==this[0]){F=B[D];break}}if(!F){F=new Object();F.o=this[0];F.v=new Object();B.push(F)}if(E){F.v[C]=E}else{return F.v[C]}};A.fn.removeAttrObj=function(C){for(var D=0;D<B.length;D++){if(B[D].o==this[0]){var E=B[D];E.v[C]=null;break}}};A.fn.grid=function(D){var S=this,K=S.attr("id")+"_pager";var T={datatype:"json",height:350,mtype:"POST",autowidth:true,autoCode:true,rowNum:10,rowList:[10,20,30],jsonReader:{root:"data",page:"page",total:"pages",records:"total"},gridview:false,afterInsertRow:function(W,X,V){A("#"+W,A(this)).data("rawData",V)},viewrecords:true};var C=D.noPager?false:true;if(C){var U=A("<div></div>");U.attr("id",K);S.after(U);T.pager="#"+K}D=A.extend(T,D);if(D.autoCode){D.gridComplete=function(V){S.codetext();S.codeoption()}}if(!D.colMenu){D.colMenu=D.menu}var J=D.colModel,R=D.colNames;if(!R){D.colNames=[]}for(var Q=0;Q<J.length;Q++){var M=J[Q];if(M.codecfg){M.classes="codecfg";M.cellattr=function(Y,Z,W,X,V,a){return'codecfg="'+X.codecfg.replace(/"/g,"'")+'"'}}if(!M.coloptions){M.coloptions={sorting:true,columns:true,filtering:false,seraching:false,grouping:false,freeze:false}}if(!R){D.colNames.push(M.name);M.name=M.index}}if(D.tableCfg&&D.tableCfg.length>0){var I=D.tableCfg;var H=D.colNames;var F=[],E=[];for(var Q=0;Q<I.length;Q++){var L=I[Q];for(var O=0;O<J.length;O++){var N=J[O];if(N.index==L.id){if(L.display=="none"){N.hidden=true}else{N.hidden=false}if(N.width<L.width){N.width=L.width}F.push(N);E.push(H[O])}}}for(var O=0;O<J.length;O++){var N=J[O],P=false;for(var Q=0;Q<F.length;Q++){var G=F[Q];if(G.index==N.index){P=true;break}}if(!P){F.push(N);E.push(H[O])}}D.colModel=F;J=D.colModel;D.colNames=E}S.attr("isGrid",true);S.jqGrid(D);if(D.searchbar){S.jqGrid("filterToolbar")}A(window).bind("resize",function(){var V=A(".jqGrid_wrapper").width();S.setGridWidth(V)})};A.fn.reloadGrid=function(C){var D={page:1};C=A.extend(D,C);if(!C.postData){C.postData=C.data}this.jqGrid("setGridParam",C).trigger("reloadGrid")}})(jQuery);Array.prototype.remove=function(D){for(var C=0;C<this.length;C++){var A=this[C];if(C==D||A==D){for(var B=C;B<this.length;B++){this[B]=this[B+1]}this.length=this.length-1}}};Array.prototype.contains=function(B){var A=this.length;while(A--){if(this[A]===B){return true}}return false};String.prototype.parseDate=function(){var A=this.replace(/-/g,"/");if(!A||A===""){return undefined}else{return new Date(A)}};Date.prototype.format=function(A){var C={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(!A){A="yyyy-MM-dd"}if(/(y+)/.test(A)){A=A.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var B in C){if(new RegExp("("+B+")").test(A)){A=A.replace(RegExp.$1,(RegExp.$1.length==1)?(C[B]):(("00"+C[B]).substr((""+C[B]).length)))}}return A};Date.prototype.addDate=function(A){this.setDate(this.getDate()+A);return this};var idCardNoUtil={provinceAndCitys:{11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"},powers:["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],parityBit:["1","0","X","9","8","7","6","5","4","3","2"],genders:{male:"\u7537",female:"\u5973"},checkAddressCode:function(B){var A=/^[1-9]\d{5}$/.test(B);if(!A){return false}if(idCardNoUtil.provinceAndCitys[parseInt(B.substring(0,2))]){return true}else{return false}},checkBirthDayCode:function(F){var C=/^[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))$/.test(F);if(!C){return false}var E=parseInt(F.substring(0,4),10);var D=parseInt(F.substring(4,6),10);var A=parseInt(F.substring(6),10);var B=new Date(E,D-1,A);if(B>new Date()){return false}else{if((B.getFullYear()==E)&&(B.getMonth()==D-1)&&(B.getDate()==A)){return true}else{return false}}},getParityBit:function(D){var E=D.substring(0,17);var C=0;for(var B=0;B<17;B++){C+=parseInt(E.charAt(B),10)*parseInt(idCardNoUtil.powers[B])}var A=C%11;return idCardNoUtil.parityBit[A]},checkParityBit:function(B){var A=B.charAt(17).toUpperCase();if(idCardNoUtil.getParityBit(B)==A){return true}else{return false}},checkIdCardNo:function(B){var A=/^\d{15}|(\d{17}(\d|x|X))$/.test(B);if(!A){return false}if(B.length==15){return idCardNoUtil.check15IdCardNo(B)}else{if(B.length==18){return idCardNoUtil.check18IdCardNo(B)}else{return false}}},check15IdCardNo:function(C){var A=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(C);if(!A){return false}var B=C.substring(0,6);A=idCardNoUtil.checkAddressCode(B);if(!A){return false}var D="19"+C.substring(6,12);return idCardNoUtil.checkBirthDayCode(D)},check18IdCardNo:function(C){var A=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(C);if(!A){return false}var B=C.substring(0,6);A=idCardNoUtil.checkAddressCode(B);if(!A){return false}var D=C.substring(6,14);A=idCardNoUtil.checkBirthDayCode(D);if(!A){return false}return idCardNoUtil.checkParityBit(C)},formateDateCN:function(B){var D=B.substring(0,4);var C=B.substring(4,6);var A=B.substring(6);return D+"-"+C+"-"+A},getIdCardInfo:function(B){var A={gender:"",birthday:""};if(B.length==15){var C="19"+B.substring(6,12);A.birthday=idCardNoUtil.formateDateCN(C);if(parseInt(B.charAt(14))%2==0){A.gender=idCardNoUtil.genders.female}else{A.gender=idCardNoUtil.genders.male}}else{if(B.length==18){var C=B.substring(6,14);A.birthday=idCardNoUtil.formateDateCN(C);if(parseInt(B.charAt(16))%2==0){A.gender=idCardNoUtil.genders.female}else{A.gender=idCardNoUtil.genders.male}}}return A},getId15:function(A){if(A.length==15){return A}else{if(A.length==18){return A.substring(0,6)+A.substring(8,17)}else{return null}}},getId18:function(B){if(B.length==15){var C=B.substring(0,6)+"19"+B.substring(6);var A=idCardNoUtil.getParityBit(C);return C+A}else{if(B.length==18){return B}else{return null}}}};