(function(A){if(typeof define==="function"&&define.amd){define(["jquery"],A)}else{if(typeof exports==="object"){A(require("jquery"))}else{A(jQuery)}}}(function(I,E){function M(){return new Date(Date.UTC.apply(Date,arguments))}function F(){var R=new Date();return M(R.getFullYear(),R.getMonth(),R.getDate())}function Q(S,R){return(S.getUTCFullYear()===R.getUTCFullYear()&&S.getUTCMonth()===R.getUTCMonth()&&S.getUTCDate()===R.getUTCDate())}function K(R){return function(){return this[R].apply(this,arguments)}}var D=(function(){var R={get:function(S){return this.slice(S)[0]},contains:function(V){var U=V&&V.valueOf();for(var T=0,S=this.length;T<S;T++){if(this[T].valueOf()===U){return T}}return -1},remove:function(S){this.splice(S,1)},replace:function(S){if(!S){return }if(!I.isArray(S)){S=[S]}this.clear();this.push.apply(this,S)},clear:function(){this.length=0},copy:function(){var S=new D();S.replace(this);return S}};return function(){var S=[];S.push.apply(S,arguments);I.extend(S,R);return S}})();var J=function(S,R){this._process_options(R);this.dates=new D();this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=I(S);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.picker=I(L.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl")}this.viewMode=this.o.startView;if(this.o.calendarWeeks){this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(T,U){return parseInt(U)+1})}this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted);this.setDatesDisabled(this.o.datesDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};J.prototype={constructor:J,_process_options:function(R){this._o=I.extend({},this._o,R);var T=this.o=I.extend({},this._o);var U=T.language;if(!B[U]){U=U.split("-")[0];if(!B[U]){U=G.language}}T.language=U;switch(T.startView){case 2:case"decade":T.startView=2;break;case 1:case"year":T.startView=1;break;default:T.startView=0}switch(T.minViewMode){case 1:case"months":T.minViewMode=1;break;case 2:case"years":T.minViewMode=2;break;default:T.minViewMode=0}switch(T.maxViewMode){case 0:case"days":T.maxViewMode=0;break;case 1:case"months":T.maxViewMode=1;break;default:T.maxViewMode=2}T.startView=Math.min(T.startView,T.maxViewMode);T.startView=Math.max(T.startView,T.minViewMode);if(T.multidate!==true){T.multidate=Number(T.multidate)||false;if(T.multidate!==false){T.multidate=Math.max(0,T.multidate)}}T.multidateSeparator=String(T.multidateSeparator);T.weekStart%=7;T.weekEnd=((T.weekStart+6)%7);var a=L.parseFormat(T.format);if(T.startDate!==-Infinity){if(!!T.startDate){if(T.startDate instanceof Date){T.startDate=this._local_to_utc(this._zero_time(T.startDate))}else{T.startDate=L.parseDate(T.startDate,a,T.language)}}else{T.startDate=-Infinity}}if(T.endDate!==Infinity){if(!!T.endDate){if(T.endDate instanceof Date){T.endDate=this._local_to_utc(this._zero_time(T.endDate))}else{T.endDate=L.parseDate(T.endDate,a,T.language)}}else{T.endDate=Infinity}}T.daysOfWeekDisabled=T.daysOfWeekDisabled||[];if(!I.isArray(T.daysOfWeekDisabled)){T.daysOfWeekDisabled=T.daysOfWeekDisabled.split(/[,\s]*/)}T.daysOfWeekDisabled=I.map(T.daysOfWeekDisabled,function(b){return parseInt(b,10)});T.daysOfWeekHighlighted=T.daysOfWeekHighlighted||[];if(!I.isArray(T.daysOfWeekHighlighted)){T.daysOfWeekHighlighted=T.daysOfWeekHighlighted.split(/[,\s]*/)}T.daysOfWeekHighlighted=I.map(T.daysOfWeekHighlighted,function(b){return parseInt(b,10)});T.datesDisabled=T.datesDisabled||[];if(!I.isArray(T.datesDisabled)){var S=[];S.push(L.parseDate(T.datesDisabled,a,T.language));T.datesDisabled=S}T.datesDisabled=I.map(T.datesDisabled,function(b){return L.parseDate(b,a,T.language)});var V=String(T.orientation).toLowerCase().split(/\s+/g),X=T.orientation.toLowerCase();V=I.grep(V,function(b){return/^auto|left|right|top|bottom$/.test(b)});T.orientation={x:"auto",y:"auto"};if(!X||X==="auto"){}else{if(V.length===1){switch(V[0]){case"top":case"bottom":T.orientation.y=V[0];break;case"left":case"right":T.orientation.x=V[0];break}}else{X=I.grep(V,function(b){return/^left|right$/.test(b)});T.orientation.x=X[0]||"auto";X=I.grep(V,function(b){return/^top|bottom$/.test(b)});T.orientation.y=X[0]||"auto"}}if(T.defaultViewDate){var Y=T.defaultViewDate.year||new Date().getFullYear();var W=T.defaultViewDate.month||0;var Z=T.defaultViewDate.day||1;T.defaultViewDate=M(Y,W,Z)}else{T.defaultViewDate=F()}T.showOnFocus=T.showOnFocus!==E?T.showOnFocus:true},_events:[],_secondaryEvents:[],_applyEvents:function(R){for(var S=0,U,T,V;S<R.length;S++){U=R[S][0];if(R[S].length===2){T=E;V=R[S][1]}else{if(R[S].length===3){T=R[S][1];V=R[S][2]}}U.on(V,T)}},_unapplyEvents:function(R){for(var S=0,U,V,T;S<R.length;S++){U=R[S][0];if(R[S].length===2){T=E;V=R[S][1]}else{if(R[S].length===3){T=R[S][1];V=R[S][2]}}U.off(V,T)}},_buildEvents:function(){var R={keyup:I.proxy(function(S){if(I.inArray(S.keyCode,[27,37,39,38,40,32,13,9])===-1){this.update()}},this),keydown:I.proxy(this.keydown,this),paste:I.proxy(this.paste,this)};if(this.o.showOnFocus===true){R.focus=I.proxy(this.show,this)}if(this.isInput){this._events=[[this.element,R]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),R],[this.component,{click:I.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:I.proxy(this.show,this)}]]}}}this._events.push([this.element,"*",{blur:I.proxy(function(S){this._focused_from=S.target},this)}],[this.element,{blur:I.proxy(function(S){this._focused_from=S.target},this)}]);if(this.o.immediateUpdates){this._events.push([this.element,{"changeYear changeMonth":I.proxy(function(S){this.update(S.date)},this)}])}this._secondaryEvents=[[this.picker,{click:I.proxy(this.click,this)}],[I(window),{resize:I.proxy(this.place,this)}],[I(document),{mousedown:I.proxy(function(S){if(!(this.element.is(S.target)||this.element.find(S.target).length||this.picker.is(S.target)||this.picker.find(S.target).length||this.picker.hasClass("datepicker-inline"))){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(T,U){var S=U||this.dates.get(-1),R=this._utc_to_local(S);this.element.trigger({type:T,date:R,dates:I.map(this.dates,this._utc_to_local),format:I.proxy(function(V,X){if(arguments.length===0){V=this.dates.length-1;X=this.o.format}else{if(typeof V==="string"){X=V;V=this.dates.length-1}}X=X||this.o.format;var W=this.dates.get(V);return L.formatDate(W,X,this.o.language)},this)})},show:function(){if(this.element.attr("readonly")&&this.o.enableOnReadonly===false){return }if(!this.isInline){this.picker.appendTo(this.o.container)}this.place();this.picker.show();this._attachSecondaryEvents();this._trigger("show");if((window.navigator.msMaxTouchPoints||"ontouchstart" in document)&&this.o.disableTouchKeyboard){I(this.element).blur()}return this},hide:function(){if(this.isInline){return this}if(!this.picker.is(":visible")){return this}this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this._trigger("hide");return this},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}return this},paste:function(R){var S;if(R.originalEvent.clipboardData&&R.originalEvent.clipboardData.types&&I.inArray("text/plain",R.originalEvent.clipboardData.types)!==-1){S=R.originalEvent.clipboardData.getData("text/plain")}else{if(window.clipboardData){S=window.clipboardData.getData("Text")}else{return }}this.setDate(S);this.update();R.preventDefault()},_utc_to_local:function(R){return R&&new Date(R.getTime()+(R.getTimezoneOffset()*60000))},_local_to_utc:function(R){return R&&new Date(R.getTime()-(R.getTimezoneOffset()*60000))},_zero_time:function(R){return R&&new Date(R.getFullYear(),R.getMonth(),R.getDate())},_zero_utc_time:function(R){return R&&new Date(Date.UTC(R.getUTCFullYear(),R.getUTCMonth(),R.getUTCDate()))},getDates:function(){return I.map(this.dates,this._utc_to_local)},getUTCDates:function(){return I.map(this.dates,function(R){return new Date(R)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var R=this.dates.get(-1);if(typeof R!=="undefined"){return new Date(R)}else{return null}},clearDates:function(){var R;if(this.isInput){R=this.element}else{if(this.component){R=this.element.find("input")}}if(R){R.val("")}this.update();this._trigger("changeDate");if(this.o.autoclose){this.hide()}},setDates:function(){var R=I.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,R);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var R=I.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,I.map(R,this._utc_to_local));this._trigger("changeDate");this.setValue();return this},setDate:K("setDates"),setUTCDate:K("setUTCDates"),setValue:function(){var R=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(R)}}else{this.element.val(R)}return this},getFormattedDate:function(R){if(R===E){R=this.o.format}var S=this.o.language;return I.map(this.dates,function(T){return L.formatDate(T,R,S)}).join(this.o.multidateSeparator)},setStartDate:function(R){this._process_options({startDate:R});this.update();this.updateNavArrows();return this},setEndDate:function(R){this._process_options({endDate:R});this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(R){this._process_options({daysOfWeekDisabled:R});this.update();this.updateNavArrows();return this},setDaysOfWeekHighlighted:function(R){this._process_options({daysOfWeekHighlighted:R});this.update();return this},setDatesDisabled:function(R){this._process_options({datesDisabled:R});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return this}var g=this.picker.outerWidth(),c=this.picker.outerHeight(),Z=10,X=I(this.o.container),j=X.width(),W=X.height(),R=X.scrollTop(),f=X.offset();var V=[];this.element.parents().each(function(){var k=I(this).css("z-index");if(k!=="auto"&&k!==0){V.push(parseInt(k))}});var b=Math.max.apply(Math,V)+10;var U=this.component?this.component.parent().offset():this.element.offset();var a=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var e=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var T=U.left-f.left,Y=U.top-f.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");if(this.o.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);if(this.o.orientation.x==="right"){T-=g-e}}else{if(U.left<0){this.picker.addClass("datepicker-orient-left");T-=U.left-Z}else{if(T+g>j){this.picker.addClass("datepicker-orient-right");T=U.left+e-g}else{this.picker.addClass("datepicker-orient-left")}}}var d=this.o.orientation.y,h,S;if(d==="auto"){h=-R+Y-c;S=R+W-(Y+a+c);if(Math.max(h,S)===S){d="top"}else{d="bottom"}}this.picker.addClass("datepicker-orient-"+d);if(d==="top"){Y-=c+parseInt(this.picker.css("padding-top"))}else{Y+=a}if(this.o.rtl){var i=j-(T+e);this.picker.css({top:Y,right:i,zIndex:b})}else{this.picker.css({top:Y,left:T,zIndex:b})}return this},_allow_update:true,update:function(){if(!this._allow_update){return this}var S=this.dates.copy(),T=[],R=false;if(arguments.length){I.each(arguments,I.proxy(function(V,U){if(U instanceof Date){U=this._local_to_utc(U)}T.push(U)},this));R=true}else{T=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(T&&this.o.multidate){T=T.split(this.o.multidateSeparator)}else{T=[T]}delete this.element.data().date}T=I.map(T,I.proxy(function(U){return L.parseDate(U,this.o.format,this.o.language)},this));T=I.grep(T,I.proxy(function(U){return(U<this.o.startDate||U>this.o.endDate||!U)},this),true);this.dates.replace(T);if(this.dates.length){this.viewDate=new Date(this.dates.get(-1))}else{if(this.viewDate<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else{if(this.viewDate>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=this.o.defaultViewDate}}}if(R){this.setValue()}else{if(T.length){if(String(S)!==String(this.dates)){this._trigger("changeDate")}}}if(!this.dates.length&&S.length){this._trigger("clearDate")}this.fill();this.element.change();return this},fillDow:function(){var R=this.o.weekStart,S="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(T,U){return parseInt(U)+1});S+='<th class="cw">&#160;</th>'}while(R<this.o.weekStart+7){S+='<th class="dow">'+B[this.o.language].daysMin[(R++)%7]+"</th>"}S+="</tr>";this.picker.find(".datepicker-days thead").append(S)},fillMonths:function(){var S="",R=0;while(R<12){S+='<span class="month">'+B[this.o.language].monthsShort[R++]+"</span>"}this.picker.find(".datepicker-months td").html(S)},setRange:function(R){if(!R||!R.length){delete this.range}else{this.range=I.map(R,function(S){return S.valueOf()})}this.fill()},getClassNames:function(T){var R=[],U=this.viewDate.getUTCFullYear(),V=this.viewDate.getUTCMonth(),S=new Date();if(T.getUTCFullYear()<U||(T.getUTCFullYear()===U&&T.getUTCMonth()<V)){R.push("old")}else{if(T.getUTCFullYear()>U||(T.getUTCFullYear()===U&&T.getUTCMonth()>V)){R.push("new")}}if(this.focusDate&&T.valueOf()===this.focusDate.valueOf()){R.push("focused")}if(this.o.todayHighlight&&T.getUTCFullYear()===S.getFullYear()&&T.getUTCMonth()===S.getMonth()&&T.getUTCDate()===S.getDate()){R.push("today")}if(this.dates.contains(T)!==-1){R.push("active")}if(T.valueOf()<this.o.startDate||T.valueOf()>this.o.endDate||I.inArray(T.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){R.push("disabled")}if(T.valueOf()<this.o.startDate||T.valueOf()>this.o.endDate||I.inArray(T.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1){R.push("highlighted")}if(this.o.datesDisabled.length>0&&I.grep(this.o.datesDisabled,function(W){return Q(T,W)}).length>0){R.push("disabled","disabled-date")}if(this.range){if(T>this.range[0]&&T<this.range[this.range.length-1]){R.push("range")}if(I.inArray(T.valueOf(),this.range)!==-1){R.push("selected")}}return R},fill:function(){var r=new Date(this.viewDate),c=r.getUTCFullYear(),s=r.getUTCMonth(),l=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,p=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,Z=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,m=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,a=B[this.o.language].today||B.en.today||"",T=B[this.o.language].clear||B.en.clear||"",j=B[this.o.language].titleFormat||B.en.titleFormat,V;if(isNaN(c)||isNaN(s)){return }this.picker.find(".datepicker-days thead .datepicker-switch").text(L.formatDate(new Date(c,s),j,this.o.language));this.picker.find("tfoot .today").text(a).toggle(this.o.todayBtn!==false);this.picker.find("tfoot .clear").text(T).toggle(this.o.clearBtn!==false);this.picker.find("thead .datepicker-title").text(this.o.title).toggle(this.o.title!=="");this.updateNavArrows();this.fillMonths();var u=M(c,s-1,28),o=L.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(o);u.setUTCDate(o-(u.getUTCDay()-this.o.weekStart+7)%7);var R=new Date(u);R.setUTCDate(R.getUTCDate()+42);R=R.valueOf();var b=[];var h;while(u.valueOf()<R){if(u.getUTCDay()===this.o.weekStart){b.push("<tr>");if(this.o.calendarWeeks){var S=new Date(+u+(this.o.weekStart-u.getUTCDay()-7)%7*86400000),W=new Date(Number(S)+(7+4-S.getUTCDay())%7*86400000),U=new Date(Number(U=M(W.getUTCFullYear(),0,1))+(7+4-U.getUTCDay())%7*86400000),e=(W-U)/86400000/7+1;b.push('<td class="cw">'+e+"</td>")}}h=this.getClassNames(u);h.push("day");if(this.o.beforeShowDay!==I.noop){var g=this.o.beforeShowDay(this._utc_to_local(u));if(g===E){g={}}else{if(typeof (g)==="boolean"){g={enabled:g}}else{if(typeof (g)==="string"){g={classes:g}}}}if(g.enabled===false){h.push("disabled")}if(g.classes){h=h.concat(g.classes.split(/\s+/))}if(g.tooltip){V=g.tooltip}}h=I.unique(h);b.push('<td class="'+h.join(" ")+'"'+(V?' title="'+V+'"':"")+">"+u.getUTCDate()+"</td>");V=null;if(u.getUTCDay()===this.o.weekEnd){b.push("</tr>")}u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var Y=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?"Months":c).end().find("span").removeClass("active");I.each(this.dates,function(v,w){if(w.getUTCFullYear()===c){Y.eq(w.getUTCMonth()).addClass("active")}});if(c<l||c>Z){Y.addClass("disabled")}if(c===l){Y.slice(0,p).addClass("disabled")}if(c===Z){Y.slice(m+1).addClass("disabled")}if(this.o.beforeShowMonth!==I.noop){var X=this;I.each(Y,function(d,w){if(!I(w).hasClass("disabled")){var x=new Date(c,d,1);var v=X.o.beforeShowMonth(x);if(v===false){I(w).addClass("disabled")}}})}b="";c=parseInt(c/10,10)*10;var t=this.picker.find(".datepicker-years").find(".datepicker-switch").text(c+"-"+(c+9)).end().find("td");c-=1;var k=I.map(this.dates,function(i){return i.getUTCFullYear()}),q;for(var n=-1;n<11;n++){q=["year"];V=null;if(n===-1){q.push("old")}else{if(n===10){q.push("new")}}if(I.inArray(c,k)!==-1){q.push("active")}if(c<l||c>Z){q.push("disabled")}if(this.o.beforeShowYear!==I.noop){var f=this.o.beforeShowYear(new Date(c,0,1));if(f===E){f={}}else{if(typeof (f)==="boolean"){f={enabled:f}}else{if(typeof (f)==="string"){f={classes:f}}}}if(f.enabled===false){q.push("disabled")}if(f.classes){q=q.concat(f.classes.split(/\s+/))}if(f.tooltip){V=f.tooltip}}b+='<span class="'+q.join(" ")+'"'+(V?' title="'+V+'"':"")+">"+c+"</span>";c+=1}t.html(b)},updateNavArrows:function(){if(!this._allow_update){return }var T=new Date(this.viewDate),R=T.getUTCFullYear(),S=T.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&R<=this.o.startDate.getUTCFullYear()&&S<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&R>=this.o.endDate.getUTCFullYear()&&S>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&R<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&R>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(X){X.preventDefault();X.stopPropagation();var W=I(X.target).closest("span, td, th"),U,V,R;if(W.length===1){switch(W[0].nodeName.toLowerCase()){case"th":switch(W[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var T=L.modes[this.viewMode].navStep*(W[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,T);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,T);if(this.viewMode===1){this._trigger("changeYear",this.viewDate)}break}this.fill();break;case"today":var S=new Date();S=M(S.getFullYear(),S.getMonth(),S.getDate(),0,0,0);this.showMode(-2);var Y=this.o.todayBtn==="linked"?null:"view";this._setDate(S,Y);break;case"clear":this.clearDates();break}break;case"span":if(!W.hasClass("disabled")){this.viewDate.setUTCDate(1);if(W.hasClass("month")){R=1;V=W.parent().find("span").index(W);U=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(V);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(M(U,V,R));this.showMode()}else{this.showMode(-1)}}else{R=1;V=0;U=parseInt(W.text(),10)||0;this.viewDate.setUTCFullYear(U);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(M(U,V,R))}this.showMode(-1)}this.fill()}break;case"td":if(W.hasClass("day")&&!W.hasClass("disabled")){R=parseInt(W.text(),10)||1;U=this.viewDate.getUTCFullYear();V=this.viewDate.getUTCMonth();if(W.hasClass("old")){if(V===0){V=11;U-=1}else{V-=1}}else{if(W.hasClass("new")){if(V===11){V=0;U+=1}else{V+=1}}}this._setDate(M(U,V,R))}break}}if(this.picker.is(":visible")&&this._focused_from){I(this._focused_from).focus()}delete this._focused_from},_toggle_multidate:function(S){var R=this.dates.contains(S);if(!S){this.dates.clear()}if(R!==-1){if(this.o.multidate===true||this.o.multidate>1||this.o.toggleActive){this.dates.remove(R)}}else{if(this.o.multidate===false){this.dates.clear();this.dates.push(S)}else{this.dates.push(S)}}if(typeof this.o.multidate==="number"){while(this.dates.length>this.o.multidate){this.dates.remove(0)}}},_setDate:function(R,T){if(!T||T==="date"){this._toggle_multidate(R&&new Date(R))}if(!T||T==="view"){this.viewDate=R&&new Date(R)}this.fill();this.setValue();if(!T||T!=="view"){this._trigger("changeDate")}var S;if(this.isInput){S=this.element}else{if(this.component){S=this.element.find("input")}}if(S){S.change()}if(this.o.autoclose&&(!T||T==="date")){this.hide()}},moveMonth:function(R,S){if(!R){return E}if(!S){return R}var V=new Date(R.valueOf()),Z=V.getUTCDate(),W=V.getUTCMonth(),U=Math.abs(S),Y,X;S=S>0?1:-1;if(U===1){X=S===-1?function(){return V.getUTCMonth()===W}:function(){return V.getUTCMonth()!==Y};Y=W+S;V.setUTCMonth(Y);if(Y<0||Y>11){Y=(Y+12)%12}}else{for(var T=0;T<U;T++){V=this.moveMonth(V,S)}Y=V.getUTCMonth();V.setUTCDate(Z);X=function(){return Y!==V.getUTCMonth()}}while(X()){V.setUTCDate(--Z);V.setUTCMonth(Y)}return V},moveYear:function(S,R){return this.moveMonth(S,R*12)},dateWithinRange:function(R){return R>=this.o.startDate&&R<=this.o.endDate},keydown:function(X){if(!this.picker.is(":visible")){if(X.keyCode===40||X.keyCode===27){this.show()}return }var T=false,S,R,V,W=this.focusDate||this.viewDate;switch(X.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else{this.hide()}X.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}S=X.keyCode===37?-1:1;if(X.ctrlKey){R=this.moveYear(this.dates.get(-1)||F(),S);V=this.moveYear(W,S);this._trigger("changeYear",this.viewDate)}else{if(X.shiftKey){R=this.moveMonth(this.dates.get(-1)||F(),S);V=this.moveMonth(W,S);this._trigger("changeMonth",this.viewDate)}else{R=new Date(this.dates.get(-1)||F());R.setUTCDate(R.getUTCDate()+S);V=new Date(W);V.setUTCDate(W.getUTCDate()+S)}}if(this.dateWithinRange(V)){this.focusDate=this.viewDate=V;this.setValue();this.fill();X.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation){break}S=X.keyCode===38?-1:1;if(X.ctrlKey){R=this.moveYear(this.dates.get(-1)||F(),S);V=this.moveYear(W,S);this._trigger("changeYear",this.viewDate)}else{if(X.shiftKey){R=this.moveMonth(this.dates.get(-1)||F(),S);V=this.moveMonth(W,S);this._trigger("changeMonth",this.viewDate)}else{R=new Date(this.dates.get(-1)||F());R.setUTCDate(R.getUTCDate()+S*7);V=new Date(W);V.setUTCDate(W.getUTCDate()+S*7)}}if(this.dateWithinRange(V)){this.focusDate=this.viewDate=V;this.setValue();this.fill();X.preventDefault()}break;case 32:break;case 13:W=this.focusDate||this.dates.get(-1)||this.viewDate;if(this.o.keyboardNavigation){this._toggle_multidate(W);T=true}this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(":visible")){X.preventDefault();if(typeof X.stopPropagation==="function"){X.stopPropagation()}else{X.cancelBubble=true}if(this.o.autoclose){this.hide()}}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(T){if(this.dates.length){this._trigger("changeDate")}else{this._trigger("clearDate")}var U;if(this.isInput){U=this.element}else{if(this.component){U=this.element.find("input")}}if(U){U.change()}}},showMode:function(R){if(R){this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+R))}this.picker.children("div").hide().filter(".datepicker-"+L.modes[this.viewMode].clsName).show();this.updateNavArrows()}};var P=function(S,R){this.element=I(S);this.inputs=I.map(R.inputs,function(T){return T.jquery?T[0]:T});delete R.inputs;N.call(I(this.inputs),R).on("changeDate",I.proxy(this.dateUpdated,this));this.pickers=I.map(this.inputs,function(T){return I(T).data("datepicker")});this.updateDates()};P.prototype={updateDates:function(){this.dates=I.map(this.pickers,function(R){return R.getUTCDate()});this.updateRanges()},updateRanges:function(){var R=I.map(this.dates,function(S){return S.valueOf()});I.each(this.pickers,function(S,T){T.setRange(R)})},dateUpdated:function(W){if(this.updating){return }this.updating=true;var X=I(W.target).data("datepicker");if(typeof (X)==="undefined"){return }var V=X.getUTCDate(),U=I.inArray(W.target,this.inputs),T=U-1,S=U+1,R=this.inputs.length;if(U===-1){return }I.each(this.pickers,function(Y,Z){if(!Z.getUTCDate()){Z.setUTCDate(V)}});if(V<this.dates[T]){while(T>=0&&V<this.dates[T]){this.pickers[T--].setUTCDate(V)}}else{if(V>this.dates[S]){while(S<R&&V>this.dates[S]){this.pickers[S++].setUTCDate(V)}}}this.updateDates();delete this.updating},remove:function(){I.map(this.pickers,function(R){R.remove()});delete this.element.data().datepicker}};function H(U,X){var W=I(U).data(),R={},V,T=new RegExp("^"+X.toLowerCase()+"([A-Z])");X=new RegExp("^"+X.toLowerCase());function Y(b,Z){return Z.toLowerCase()}for(var S in W){if(X.test(S)){V=S.replace(T,Y);R[V]=W[S]}}return R}function A(T){var R={};if(!B[T]){T=T.split("-")[0];if(!B[T]){return }}var S=B[T];I.each(O,function(V,U){if(U in S){R[U]=S[U]}});return R}var C=I.fn.datepicker;var N=function(T){var R=Array.apply(null,arguments);R.shift();var S;this.each(function(){var b=I(this),Z=b.data("datepicker"),V=typeof T==="object"&&T;if(!Z){var X=H(this,"date"),U=I.extend({},G,X,V),W=A(U.language),Y=I.extend({},G,W,X,V);if(b.hasClass("input-daterange")||Y.inputs){var a={inputs:Y.inputs||b.find("input").toArray()};b.data("datepicker",(Z=new P(this,I.extend(Y,a))))}else{b.data("datepicker",(Z=new J(this,Y)))}}if(typeof T==="string"&&typeof Z[T]==="function"){S=Z[T].apply(Z,R);if(S!==E){return false}}});if(S!==E){return S}else{return this}};I.fn.datepicker=N;var G=I.fn.datepicker.defaults={autoclose:false,beforeShowDay:I.noop,beforeShowMonth:I.noop,beforeShowYear:I.noop,calendarWeeks:false,clearBtn:false,toggleActive:false,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"cn",minViewMode:0,maxViewMode:2,multidate:false,multidateSeparator:",",orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0,disableTouchKeyboard:false,enableOnReadonly:true,container:"body",immediateUpdates:false,title:""};var O=I.fn.datepicker.locale_opts=["format","rtl","weekStart"];I.fn.datepicker.Constructor=J;var B=I.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"},cn:{days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],daysShort:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],daysMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],today:"\u4eca\u5929",clear:"\u6e05\u9664",titleFormat:"yyyy-MM"}};var L={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(R){return(((R%4===0)&&(R%100!==0))||(R%400===0))},getDaysInMonth:function(R,S){return[31,(L.isLeapYear(R)?29:28),31,30,31,30,31,31,30,31,30,31][S]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(T){var R=T.replace(this.validParts,"\0").split("\0"),S=T.match(this.validParts);if(!R||!R.length||!S||S.length===0){throw new Error("Invalid date format.")}return{separators:R,parts:S}},parseDate:function(h,e,b){if(!h){return E}if(h instanceof Date){return h}if(typeof e==="string"){e=L.parseFormat(e)}var T=/([\-+]\d+)([dmwy])/,Z=h.match(/([\-+]\d+)([dmwy])/g),a,Y,d;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(h)){h=new Date();for(d=0;d<Z.length;d++){a=T.exec(Z[d]);Y=parseInt(a[1]);switch(a[2]){case"d":h.setUTCDate(h.getUTCDate()+Y);break;case"m":h=J.prototype.moveMonth.call(J.prototype,h,Y);break;case"w":h.setUTCDate(h.getUTCDate()+Y*7);break;case"y":h=J.prototype.moveYear.call(J.prototype,h,Y);break}}return M(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),0,0,0)}Z=h&&h.match(this.nonpunctuation)||[];h=new Date();var U={},f=["yyyy","yy","M","MM","m","mm","d","dd"],X={yyyy:function(k,i){return k.setUTCFullYear(i)},yy:function(k,i){return k.setUTCFullYear(2000+i)},m:function(k,i){if(isNaN(k)){return k}i-=1;while(i<0){i+=12}i%=12;k.setUTCMonth(i);while(k.getUTCMonth()!==i){k.setUTCDate(k.getUTCDate()-1)}return k},d:function(k,i){return k.setUTCDate(i)}},j,S;X.M=X.MM=X.mm=X.m;X.dd=X.d;h=M(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0);var R=e.parts.slice();if(Z.length!==R.length){R=I(R).filter(function(k,l){return I.inArray(l,f)!==-1}).toArray()}function g(){var i=this.slice(0,Z[d].length),k=Z[d].slice(0,i.length);return i.toLowerCase()===k.toLowerCase()}if(Z.length===R.length){var c;for(d=0,c=R.length;d<c;d++){j=parseInt(Z[d],10);a=R[d];if(isNaN(j)){switch(a){case"MM":S=I(B[b].months).filter(g);j=I.inArray(S[0],B[b].months)+1;break;case"M":S=I(B[b].monthsShort).filter(g);j=I.inArray(S[0],B[b].monthsShort)+1;break}}U[a]=j}var V,W;for(d=0;d<f.length;d++){W=f[d];if(W in U&&!isNaN(U[W])){V=new Date(h);X[W](V,U[W]);if(!isNaN(V)){h=V}}}}return h},formatDate:function(R,V,X){if(!R){return""}if(typeof V==="string"){V=L.parseFormat(V)}var W={d:R.getUTCDate(),D:B[X].daysShort[R.getUTCDay()],DD:B[X].days[R.getUTCDay()],m:R.getUTCMonth()+1,M:B[X].monthsShort[R.getUTCMonth()],MM:B[X].months[R.getUTCMonth()],yy:R.getUTCFullYear().toString().substring(2),yyyy:R.getUTCFullYear()};W.dd=(W.d<10?"0":"")+W.d;W.mm=(W.m<10?"0":"")+W.m;R=[];var U=I.extend([],V.separators);for(var T=0,S=V.parts.length;T<=S;T++){if(U.length){R.push(U.shift())}R.push(W[V.parts[T]])}return R.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};L.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+L.headTemplate+"<tbody></tbody>"+L.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+L.headTemplate+L.contTemplate+L.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+L.headTemplate+L.contTemplate+L.footTemplate+"</table></div></div>";I.fn.datepicker.DPGlobal=L;I.fn.datepicker.noConflict=function(){I.fn.datepicker=C;return this};I.fn.datepicker.version="1.4.1-dev";I(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(S){var R=I(this);if(R.data("datepicker")){return }S.preventDefault();N.call(R,"show")});I(function(){N.call(I('[data-provide="datepicker-inline"]'))})}));