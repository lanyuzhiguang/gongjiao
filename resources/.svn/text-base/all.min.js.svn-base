/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){
this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Sweetalert2=t()}(this,function(){"use strict";var e="swal2-",t=function(t){var n={};for(var o in t)n[t[o]]=e+t[o];return n},n=t(["container","in","iosfix","modal","overlay","fade","show","hide","noanimation","close","title","content","spacer","confirm","cancel","icon","image","input","file","range","select","radio","checkbox","textarea","inputerror","validationerror","progresssteps","activeprogressstep","progresscircle","progressline","loading","styled"]),o=t(["success","warning","info","question","error"]),r={title:"",titleText:"",text:"",html:"",type:null,customClass:"",animation:!0,allowOutsideClick:!0,allowEscapeKey:!0,showConfirmButton:!0,showCancelButton:!1,preConfirm:null,confirmButtonText:"OK",confirmButtonColor:"#3085d6",confirmButtonClass:null,cancelButtonText:"Cancel",cancelButtonColor:"#aaa",cancelButtonClass:null,buttonsStyling:!0,reverseButtons:!1,focusCancel:!1,showCloseButton:!1,showLoaderOnConfirm:!1,imageUrl:null,imageWidth:null,imageHeight:null,imageClass:null,timer:null,width:500,padding:20,background:"#fff",input:null,inputPlaceholder:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputClass:null,inputAttributes:{},inputValidator:null,progressSteps:[],currentProgressStep:null,progressStepsDistance:"40px",onOpen:null,onClose:null},i=('\n  <div class="'+n.modal+'" tabIndex="-1">\n    <ul class="'+n.progresssteps+'"></ul>\n    <div class="'+n.icon+" "+o.error+'">\n      <span class="x-mark"><span class="line left"></span><span class="line right"></span></span>\n    </div>\n    <div class="'+n.icon+" "+o.question+'">?</div>\n    <div class="'+n.icon+" "+o.warning+'">!</div>\n    <div class="'+n.icon+" "+o.info+'">i</div>\n    <div class="'+n.icon+" "+o.success+'">\n      <span class="line tip"></span> <span class="line long"></span>\n      <div class="placeholder"></div> <div class="fix"></div>\n    </div>\n    <img class="'+n.image+'">\n    <h2 class="'+n.title+'"></h2>\n    <div class="'+n.content+'"></div>\n    <input class="'+n.input+'">\n    <input type="file" class="'+n.file+'">\n    <div class="'+n.range+'">\n      <output></output>\n      <input type="range">\n    </div>\n    <select class="'+n.select+'"></select>\n    <div class="'+n.radio+'"></div>\n    <label for="'+n.checkbox+'" class="'+n.checkbox+'">\n      <input type="checkbox">\n    </label>\n    <textarea class="'+n.textarea+'"></textarea>\n    <div class="'+n.validationerror+'"></div>\n    <hr class="'+n.spacer+'">\n    <button type="button" class="'+n.confirm+'">OK</button>\n    <button type="button" class="'+n.cancel+'">Cancel</button>\n    <span class="'+n.close+'">&times;</span>\n  </div>\n').replace(/(^|\n)\s*/g,""),a=void 0,l=document.getElementsByClassName(n.container);l.length?a=l[0]:(a=document.createElement("div"),a.className=n.container,a.innerHTML=i);var s=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;for(var n="#",o=0;o<3;o++){var r=parseInt(e.substr(2*o,2),16);r=Math.round(Math.min(Math.max(0,r+r*t),255)).toString(16),n+=("00"+r).substr(r.length)}return n},c={previousWindowKeyDown:null,previousActiveElement:null,previousBodyPadding:null},u=function(){if("undefined"==typeof document)return void console.error("SweetAlert2 requires document to initialize");if(!document.getElementsByClassName(n.container).length){document.body.appendChild(a);var e=p(),t=P(e,n.input),o=P(e,n.file),r=e.querySelector("."+n.range+" input"),i=e.querySelector("."+n.range+" output"),l=P(e,n.select),s=e.querySelector("."+n.checkbox+" input"),c=P(e,n.textarea);return t.oninput=function(){F.resetValidationError()},t.onkeydown=function(e){setTimeout(function(){13===e.keyCode&&(e.stopPropagation(),F.clickConfirm())},0)},o.onchange=function(){F.resetValidationError()},r.oninput=function(){F.resetValidationError(),i.value=r.value},r.onchange=function(){F.resetValidationError(),r.previousSibling.value=r.value},l.onchange=function(){F.resetValidationError()},s.onchange=function(){F.resetValidationError()},c.oninput=function(){F.resetValidationError()},e}},d=function(e){return a.querySelector("."+e)},p=function(){return document.body.querySelector("."+n.modal)||u()},f=function(){var e=p();return e.querySelectorAll("."+n.icon)},m=function(){return d(n.title)},v=function(){return d(n.content)},h=function(){return d(n.image)},g=function(){return d(n.spacer)},y=function(){return d(n.progresssteps)},b=function(){return d(n.validationerror)},w=function(){return d(n.confirm)},C=function(){return d(n.cancel)},k=function(){return d(n.close)},S=function(t){var n=[w(),C()];return t&&n.reverse(),n.concat(Array.prototype.slice.call(p().querySelectorAll("button:not([class^="+e+"]), input:not([type=hidden]), textarea, select")))},x=function(e,t){return!!e.classList&&e.classList.contains(t)},E=function(e){if(e.focus(),"file"!==e.type){var t=e.value;e.value="",e.value=t}},B=function(e,t){if(e&&t){var n=t.split(/\s+/).filter(Boolean);n.forEach(function(t){e.classList.add(t)})}},A=function(e,t){if(e&&t){var n=t.split(/\s+/).filter(Boolean);n.forEach(function(t){e.classList.remove(t)})}},P=function(e,t){for(var n=0;n<e.childNodes.length;n++)if(x(e.childNodes[n],t))return e.childNodes[n]},L=function(e,t){t||(t="block"),e.style.opacity="",e.style.display=t},q=function(e){e.style.opacity="",e.style.display="none"},T=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},M=function(e){return e.offsetWidth||e.offsetHeight||e.getClientRects().length},V=function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},H=function(e){if(!M(e))return!1;if("function"==typeof MouseEvent){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});e.dispatchEvent(t)}else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),e.dispatchEvent(n)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},O=function(){var e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return t[n];return!1}(),N=function(){var e=p();window.onkeydown=c.previousWindowKeyDown,c.previousActiveElement&&c.previousActiveElement.focus&&c.previousActiveElement.focus(),clearTimeout(e.timeout)},I=function(){var e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t},j=function(e,t){var n=void 0;return function(){var o=function(){n=null,e()};clearTimeout(n),n=setTimeout(o,t)}},D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},U=W({},r),K=[],R=void 0,z=function(e){var t=p();for(var i in e)r.hasOwnProperty(i)||"extraParams"===i||console.warn('SweetAlert2: Unknown parameter "'+i+'"');t.style.width="number"==typeof e.width?e.width+"px":e.width,t.style.padding=e.padding+"px",t.style.background=e.background;var a=m(),l=v(),s=w(),c=C(),u=k();if(e.titleText?a.innerText=e.titleText:a.innerHTML=e.title.split("\n").join("<br>"),e.text||e.html){if("object"===D(e.html))if(l.innerHTML="",0 in e.html)for(var d=0;d in e.html;d++)l.appendChild(e.html[d].cloneNode(!0));else l.appendChild(e.html.cloneNode(!0));else e.html?l.innerHTML=e.html:e.text&&(l.textContent=e.text);L(l)}else q(l);e.showCloseButton?L(u):q(u),t.className=n.modal,e.customClass&&B(t,e.customClass);var b=y(),S=parseInt(null===e.currentProgressStep?F.getQueueStep():e.currentProgressStep,10);e.progressSteps.length?(L(b),T(b),S>=e.progressSteps.length&&console.warn("SweetAlert2: Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach(function(t,o){var r=document.createElement("li");if(B(r,n.progresscircle),r.innerHTML=t,o===S&&B(r,n.activeprogressstep),b.appendChild(r),o!==e.progressSteps.length-1){var i=document.createElement("li");B(i,n.progressline),i.style.width=e.progressStepsDistance,b.appendChild(i)}})):q(b);for(var x=f(),E=0;E<x.length;E++)q(x[E]);if(e.type){var P=!1;for(var M in o)if(e.type===M){P=!0;break}if(!P)return console.error("SweetAlert2: Unknown alert type: "+e.type),!1;var H=t.querySelector("."+n.icon+"."+o[e.type]);switch(L(H),e.type){case"success":B(H,"animate"),B(H.querySelector(".tip"),"animate-success-tip"),B(H.querySelector(".long"),"animate-success-long");break;case"error":B(H,"animate-error-icon"),B(H.querySelector(".x-mark"),"animate-x-mark");break;case"warning":B(H,"pulse-warning")}}var O=h();e.imageUrl?(O.setAttribute("src",e.imageUrl),L(O),e.imageWidth?O.setAttribute("width",e.imageWidth):O.removeAttribute("width"),e.imageHeight?O.setAttribute("height",e.imageHeight):O.removeAttribute("height"),O.className=n.image,e.imageClass&&B(O,e.imageClass)):q(O),e.showCancelButton?c.style.display="inline-block":q(c),e.showConfirmButton?V(s,"display"):q(s);var N=g();e.showConfirmButton||e.showCancelButton?L(N):q(N),s.innerHTML=e.confirmButtonText,c.innerHTML=e.cancelButtonText,e.buttonsStyling&&(s.style.backgroundColor=e.confirmButtonColor,c.style.backgroundColor=e.cancelButtonColor),s.className=n.confirm,B(s,e.confirmButtonClass),c.className=n.cancel,B(c,e.cancelButtonClass),e.buttonsStyling?(B(s,n.styled),B(c,n.styled)):(A(s,n.styled),A(c,n.styled),s.style.backgroundColor=s.style.borderLeftColor=s.style.borderRightColor="",c.style.backgroundColor=c.style.borderLeftColor=c.style.borderRightColor=""),e.animation===!0?A(t,n.noanimation):B(t,n.noanimation)},Q=function(e,t){var o=p();e?(B(o,n.show),B(a,n.fade),A(o,n.hide)):A(o,n.fade),L(o),a.style.overflowY="hidden",O&&!x(o,n.noanimation)?o.addEventListener(O,function e(){o.removeEventListener(O,e),a.style.overflowY="auto"}):a.style.overflowY="auto",B(a,n.in),B(document.body,n.in),Y(),J(),c.previousActiveElement=document.activeElement,null!==t&&"function"==typeof t&&t(o)},Y=function(){null===c.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(c.previousBodyPadding=document.body.style.paddingRight,document.body.style.paddingRight=I()+"px")},Z=function(){null!==c.previousBodyPadding&&(document.body.style.paddingRight=c.previousBodyPadding,c.previousBodyPadding=null)},J=function(){var e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(e&&!x(document.body,n.iosfix)){var t=document.body.scrollTop;document.body.style.top=t*-1+"px",B(document.body,n.iosfix)}},$=function(){if(x(document.body,n.iosfix)){var e=parseInt(document.body.style.top,10);A(document.body,n.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},_=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];if(void 0===t[0])return console.error("SweetAlert2 expects at least 1 attribute!"),!1;var r=W({},U);switch(D(t[0])){case"string":r.title=t[0],r.html=t[1],r.type=t[2];break;case"object":W(r,t[0]),r.extraParams=t[0].extraParams,"email"===r.input&&null===r.inputValidator&&(r.inputValidator=function(e){return new Promise(function(t,n){var o=/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;o.test(e)?t():n("Invalid email address")})});break;default:return console.error('SweetAlert2: Unexpected type of argument! Expected "string" or "object", got '+D(t[0])),!1}z(r);var i=p();return new Promise(function(e,t){r.timer&&(i.timeout=setTimeout(function(){F.closeModal(r.onClose),t("timer")},r.timer));var o=function(e){if(e=e||r.input,!e)return null;switch(e){case"select":case"textarea":case"file":return P(i,n[e]);case"checkbox":return i.querySelector("."+n.checkbox+" input");case"radio":return i.querySelector("."+n.radio+" input:checked")||i.querySelector("."+n.radio+" input:first-child");case"range":return i.querySelector("."+n.range+" input");default:return P(i,n.input)}},l=function(){var e=o();if(!e)return null;switch(r.input){case"checkbox":return e.checked?1:0;case"radio":return e.checked?e.value:null;case"file":return e.files.length?e.files[0]:null;default:return r.inputAutoTrim?e.value.trim():e.value}};r.input&&setTimeout(function(){var e=o();e&&E(e)},0);for(var u=function(t){r.showLoaderOnConfirm&&F.showLoading(),r.preConfirm?r.preConfirm(t,r.extraParams).then(function(n){F.closeModal(r.onClose),e(n||t)},function(e){F.hideLoading(),e&&F.showValidationError(e)}):(F.closeModal(r.onClose),e(t))},d=function(e){var n=e||window.event,o=n.target||n.srcElement,i=w(),a=C(),c=i===o||i.contains(o),d=a===o||a.contains(o);switch(n.type){case"mouseover":case"mouseup":r.buttonsStyling&&(c?i.style.backgroundColor=s(r.confirmButtonColor,-.1):d&&(a.style.backgroundColor=s(r.cancelButtonColor,-.1)));break;case"mouseout":r.buttonsStyling&&(c?i.style.backgroundColor=r.confirmButtonColor:d&&(a.style.backgroundColor=r.cancelButtonColor));break;case"mousedown":r.buttonsStyling&&(c?i.style.backgroundColor=s(r.confirmButtonColor,-.2):d&&(a.style.backgroundColor=s(r.cancelButtonColor,-.2)));break;case"click":c&&F.isVisible()?r.input?!function(){var e=l();r.inputValidator?(F.disableInput(),r.inputValidator(e,r.extraParams).then(function(){F.enableInput(),u(e)},function(e){F.enableInput(),e&&F.showValidationError(e)})):u(e)}():u(!0):d&&F.isVisible()&&(F.closeModal(r.onClose),t("cancel"))}},f=i.querySelectorAll("button"),x=0;x<f.length;x++)f[x].onclick=d,f[x].onmouseover=d,f[x].onmouseout=d,f[x].onmousedown=d;k().onclick=function(){F.closeModal(r.onClose),t("close")},a.onclick=function(e){e.target===a&&r.allowOutsideClick&&(F.closeModal(r.onClose),t("overlay"))};var T=w(),V=C();r.reverseButtons?T.parentNode.insertBefore(V,T):T.parentNode.insertBefore(T,V);var O=function(e,t){for(var n=S(r.focusCancel),o=0;o<n.length;o++){e+=t,e===n.length?e=0:e===-1&&(e=n.length-1);var i=n[e];if(M(i))return i.focus()}},N=function(e){var n=e||window.event,o=n.keyCode||n.which;if([9,13,32,27].indexOf(o)!==-1){for(var i=n.target||n.srcElement,a=S(r.focusCancel),l=-1,s=0;s<a.length;s++)if(i===a[s]){l=s;break}9===o?(n.shiftKey?O(l,-1):O(l,1),n.stopPropagation(),n.preventDefault()):13===o||32===o?l===-1&&(r.focusCancel?H(V,n):H(T,n)):27===o&&r.allowEscapeKey===!0&&(F.closeModal(r.onClose),t("esc"))}};c.previousWindowKeyDown=window.onkeydown,window.onkeydown=N,r.buttonsStyling&&(T.style.borderLeftColor=r.confirmButtonColor,T.style.borderRightColor=r.confirmButtonColor),F.showLoading=F.enableLoading=function(){L(g()),L(T,"inline-block"),B(T,n.loading),B(i,n.loading),T.disabled=!0,V.disabled=!0},F.hideLoading=F.disableLoading=function(){r.showConfirmButton||(q(T),r.showCancelButton||q(g())),A(T,n.loading),A(i,n.loading),T.disabled=!1,V.disabled=!1},F.getTitle=function(){return m()},F.getContent=function(){return v()},F.getInput=function(){return o()},F.getImage=function(){return h()},F.getConfirmButton=function(){return w()},F.getCancelButton=function(){return C()},F.enableButtons=function(){T.disabled=!1,V.disabled=!1},F.disableButtons=function(){T.disabled=!0,V.disabled=!0},F.enableConfirmButton=function(){T.disabled=!1},F.disableConfirmButton=function(){T.disabled=!0},F.enableInput=function(){var e=o();if(!e)return!1;if("radio"===e.type)for(var t=e.parentNode.parentNode,n=t.querySelectorAll("input"),r=0;r<n.length;r++)n[r].disabled=!1;else e.disabled=!1},F.disableInput=function(){var e=o();if(!e)return!1;if(e&&"radio"===e.type)for(var t=e.parentNode.parentNode,n=t.querySelectorAll("input"),r=0;r<n.length;r++)n[r].disabled=!0;else e.disabled=!0},F.recalculateHeight=j(function(){var e=p(),t=e.style.display;e.style.minHeight="",L(e),e.style.minHeight=e.scrollHeight+1+"px",e.style.display=t},50),F.showValidationError=function(e){var t=b();t.innerHTML=e,L(t);var r=o();E(r),B(r,n.inputerror)},F.resetValidationError=function(){var e=b();q(e),F.recalculateHeight();var t=o();t&&A(t,n.inputerror)},F.getProgressSteps=function(){return r.progressSteps},F.setProgressSteps=function(e){r.progressSteps=e,z(r)},F.showProgressSteps=function(){L(y())},F.hideProgressSteps=function(){q(y())},F.enableButtons(),F.hideLoading(),F.resetValidationError();for(var I=["input","file","range","select","radio","checkbox","textarea"],W=void 0,U=0;U<I.length;U++){var K=n[I[U]],Y=P(i,K);if(W=o(I[U])){for(var Z in W.attributes)if(W.attributes.hasOwnProperty(Z)){var J=W.attributes[Z].name;"type"!==J&&"value"!==J&&W.removeAttribute(J)}for(var $ in r.inputAttributes)W.setAttribute($,r.inputAttributes[$])}Y.className=K,r.inputClass&&B(Y,r.inputClass),q(Y)}var _=void 0;!function(){switch(r.input){case"text":case"email":case"password":case"number":case"tel":W=P(i,n.input),W.value=r.inputValue,W.placeholder=r.inputPlaceholder,W.type=r.input,L(W);break;case"file":W=P(i,n.file),W.placeholder=r.inputPlaceholder,W.type=r.input,L(W);break;case"range":var e=P(i,n.range),t=e.querySelector("input"),a=e.querySelector("output");t.value=r.inputValue,t.type=r.input,a.value=r.inputValue,L(e);break;case"select":var l=P(i,n.select);if(l.innerHTML="",r.inputPlaceholder){var s=document.createElement("option");s.innerHTML=r.inputPlaceholder,s.value="",s.disabled=!0,s.selected=!0,l.appendChild(s)}_=function(e){for(var t in e){var n=document.createElement("option");n.value=t,n.innerHTML=e[t],r.inputValue===t&&(n.selected=!0),l.appendChild(n)}L(l),l.focus()};break;case"radio":var c=P(i,n.radio);c.innerHTML="",_=function(e){for(var t in e){var o=document.createElement("input"),i=document.createElement("label"),a=document.createElement("span");o.type="radio",o.name=n.radio,o.value=t,r.inputValue===t&&(o.checked=!0),a.innerHTML=e[t],i.appendChild(o),i.appendChild(a),i.for=o.id,c.appendChild(i)}L(c);var l=c.querySelectorAll("input");l.length&&l[0].focus()};break;case"checkbox":var u=P(i,n.checkbox),d=o("checkbox");d.type="checkbox",d.value=1,d.id=n.checkbox,d.checked=Boolean(r.inputValue);var p=u.getElementsByTagName("span");p.length&&u.removeChild(p[0]),p=document.createElement("span"),p.innerHTML=r.inputPlaceholder,u.appendChild(p),L(u);break;case"textarea":var f=P(i,n.textarea);f.value=r.inputValue,f.placeholder=r.inputPlaceholder,L(f);break;case null:break;default:console.error('SweetAlert2: Unexpected type of input! Expected "text", "email", "password", "select", "checkbox", "textarea" or "file", got "'+r.input+'"')}}(),"select"!==r.input&&"radio"!==r.input||(r.inputOptions instanceof Promise?(F.showLoading(),r.inputOptions.then(function(e){F.hideLoading(),_(e)})):"object"===D(r.inputOptions)?_(r.inputOptions):console.error("SweetAlert2: Unexpected type of inputOptions! Expected object or Promise, got "+D(r.inputOptions))),Q(r.animation,r.onOpen),O(-1,1),a.scrollTop=0,"undefined"==typeof MutationObserver||R||(R=new MutationObserver(F.recalculateHeight),R.observe(i,{childList:!0,characterData:!0,subtree:!0}))})},F=function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.isVisible()&&e.close(),_.apply(void 0,n)};return F.isVisible=function(){var e=p();return M(e)},F.queue=function(e){K=e;var t=p(),n=function(){K=[],t.removeAttribute("data-queue-step")},o=[];return new Promise(function(e,r){!function i(a,l){a<K.length?(t.setAttribute("data-queue-step",a),F(K[a]).then(function(e){o.push(e),i(a+1,l)},function(e){n(),r(e)})):(n(),e(o))}(0)})},F.getQueueStep=function(){return p().getAttribute("data-queue-step")},F.insertQueueStep=function(e,t){return t&&t<K.length?K.splice(t,0,e):K.push(e)},F.deleteQueueStep=function(e){"undefined"!=typeof K[e]&&K.splice(e,1)},F.close=F.closeModal=function(e){var t=p();A(t,n.show),B(t,n.hide);var r=t.querySelector("."+n.icon+"."+o.success);A(r,"animate"),A(r.querySelector(".tip"),"animate-success-tip"),A(r.querySelector(".long"),"animate-success-long");var i=t.querySelector("."+n.icon+"."+o.error);A(i,"animate-error-icon"),A(i.querySelector(".x-mark"),"animate-x-mark");var l=t.querySelector("."+n.icon+"."+o.warning);A(l,"pulse-warning"),N();var s=function(){q(t),t.style.minHeight="",A(a,n.in),A(document.body,n.in),Z(),$()};O&&!x(t,n.noanimation)?t.addEventListener(O,function e(){t.removeEventListener(O,e),x(t,n.hide)&&s()}):s(),null!==e&&"function"==typeof e&&e(t)},F.clickConfirm=function(){return w().click()},F.clickCancel=function(){return C().click()},F.setDefaults=function(e){if(!e||"object"!==("undefined"==typeof e?"undefined":D(e)))return console.error("SweetAlert2: the argument for setDefaults() is required and has to be a object");for(var t in e)r.hasOwnProperty(t)||"extraParams"===t||(console.warn('SweetAlert2: Unknown parameter "'+t+'"'),delete e[t]);W(U,e)},F.resetDefaults=function(){U=W({},r)},F.noop=function(){},F.version="6.3.2",F.default=F,F}),window.Sweetalert2&&(window.sweetAlert=window.swal=window.Sweetalert2);
/* == jquery mousewheel plugin == Version: 3.1.13, License: MIT License (MIT) */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});
/* == malihu jquery custom scrollbar plugin == Version: 3.1.3, License: MIT License (MIT) */
!function(e){"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var o="function"==typeof define&&define.amd,a="undefined"!=typeof module&&module.exports,n="https:"==document.location.protocol?"https:":"http:",i="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";o||(a?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+n+"//"+i+"%3E%3C/script%3E"))),t()}(function(){var t,o="mCustomScrollbar",a="mCS",n=".mCustomScrollbar",i={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},r=0,l={},s=window.attachEvent&&!window.addEventListener?1:0,c=!1,d=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],u={init:function(t){var t=e.extend(!0,{},i,t),o=f.call(this);if(t.live){var s=t.liveSelector||this.selector||n,c=e(s);if("off"===t.live)return void m(s);l[s]=setTimeout(function(){c.mCustomScrollbar(t),"once"===t.live&&c.length&&m(s)},500)}else m(s);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":p(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=g(t.scrollButtons.scrollType),h(t),e(o).each(function(){var o=e(this);if(!o.data(a)){o.data(a,{idx:++r,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:o.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var n=o.data(a),i=n.opt,l=o.data("mcs-axis"),s=o.data("mcs-scrollbar-position"),c=o.data("mcs-theme");l&&(i.axis=l),s&&(i.scrollbarPosition=s),c&&(i.theme=c,h(i)),v.call(this),n&&i.callbacks.onCreate&&"function"==typeof i.callbacks.onCreate&&i.callbacks.onCreate.call(this),e("#mCSB_"+n.idx+"_container img:not(."+d[2]+")").addClass(d[2]),u.update.call(null,o)}})},update:function(t,o){var n=t||f.call(this);return e(n).each(function(){var t=e(this);if(t.data(a)){var n=t.data(a),i=n.opt,r=e("#mCSB_"+n.idx+"_container"),l=e("#mCSB_"+n.idx),s=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];if(!r.length)return;n.tweenRunning&&N(t),o&&n&&i.callbacks.onBeforeUpdate&&"function"==typeof i.callbacks.onBeforeUpdate&&i.callbacks.onBeforeUpdate.call(this),t.hasClass(d[3])&&t.removeClass(d[3]),t.hasClass(d[4])&&t.removeClass(d[4]),l.css("max-height","none"),l.height()!==t.height()&&l.css("max-height",t.height()),_.call(this),"y"===i.axis||i.advanced.autoExpandHorizontalScroll||r.css("width",x(r)),n.overflowed=y.call(this),M.call(this),i.autoDraggerLength&&S.call(this),b.call(this),T.call(this);var c=[Math.abs(r[0].offsetTop),Math.abs(r[0].offsetLeft)];"x"!==i.axis&&(n.overflowed[0]?s[0].height()>s[0].parent().height()?B.call(this):(V(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),n.contentReset.y=null):(B.call(this),"y"===i.axis?k.call(this):"yx"===i.axis&&n.overflowed[1]&&V(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==i.axis&&(n.overflowed[1]?s[1].width()>s[1].parent().width()?B.call(this):(V(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),n.contentReset.x=null):(B.call(this),"x"===i.axis?k.call(this):"yx"===i.axis&&n.overflowed[0]&&V(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),o&&n&&(2===o&&i.callbacks.onImageLoad&&"function"==typeof i.callbacks.onImageLoad?i.callbacks.onImageLoad.call(this):3===o&&i.callbacks.onSelectorChange&&"function"==typeof i.callbacks.onSelectorChange?i.callbacks.onSelectorChange.call(this):i.callbacks.onUpdate&&"function"==typeof i.callbacks.onUpdate&&i.callbacks.onUpdate.call(this)),X.call(this)}})},scrollTo:function(t,o){if("undefined"!=typeof t&&null!=t){var n=f.call(this);return e(n).each(function(){var n=e(this);if(n.data(a)){var i=n.data(a),r=i.opt,l={trigger:"external",scrollInertia:r.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},s=e.extend(!0,{},l,o),c=q.call(this,t),d=s.scrollInertia>0&&s.scrollInertia<17?17:s.scrollInertia;c[0]=Y.call(this,c[0],"y"),c[1]=Y.call(this,c[1],"x"),s.moveDragger&&(c[0]*=i.scrollRatio.y,c[1]*=i.scrollRatio.x),s.dur=oe()?0:d,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==r.axis&&i.overflowed[0]&&(s.dir="y",s.overwrite="all",V(n,c[0].toString(),s)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==r.axis&&i.overflowed[1]&&(s.dir="x",s.overwrite="none",V(n,c[1].toString(),s))},s.timeout)}})}},stop:function(){var t=f.call(this);return e(t).each(function(){var t=e(this);t.data(a)&&N(t)})},disable:function(t){var o=f.call(this);return e(o).each(function(){var o=e(this);if(o.data(a)){{o.data(a)}X.call(this,"remove"),k.call(this),t&&B.call(this),M.call(this,!0),o.addClass(d[3])}})},destroy:function(){var t=f.call(this);return e(t).each(function(){var n=e(this);if(n.data(a)){var i=n.data(a),r=i.opt,l=e("#mCSB_"+i.idx),s=e("#mCSB_"+i.idx+"_container"),c=e(".mCSB_"+i.idx+"_scrollbar");r.live&&m(r.liveSelector||e(t).selector),X.call(this,"remove"),k.call(this),B.call(this),n.removeData(a),K(this,"mcs"),c.remove(),s.find("img."+d[2]).removeClass(d[2]),l.replaceWith(s.contents()),n.removeClass(o+" _"+a+"_"+i.idx+" "+d[6]+" "+d[7]+" "+d[5]+" "+d[3]).addClass(d[4])}})}},f=function(){return"object"!=typeof e(this)||e(this).length<1?n:this},h=function(t){var o=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],a=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],n=["minimal","minimal-dark"],i=["minimal","minimal-dark"],r=["minimal","minimal-dark"];t.autoDraggerLength=e.inArray(t.theme,o)>-1?!1:t.autoDraggerLength,t.autoExpandScrollbar=e.inArray(t.theme,a)>-1?!1:t.autoExpandScrollbar,t.scrollButtons.enable=e.inArray(t.theme,n)>-1?!1:t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,i)>-1?!0:t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,r)>-1?"outside":t.scrollbarPosition},m=function(e){l[e]&&(clearTimeout(l[e]),K(l,e))},p=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},g=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},v=function(){var t=e(this),n=t.data(a),i=n.opt,r=i.autoExpandScrollbar?" "+d[1]+"_expand":"",l=["<div id='mCSB_"+n.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_vertical"+r+"'><div class='"+d[12]+"'><div id='mCSB_"+n.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+n.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_horizontal"+r+"'><div class='"+d[12]+"'><div id='mCSB_"+n.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],s="yx"===i.axis?"mCSB_vertical_horizontal":"x"===i.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===i.axis?l[0]+l[1]:"x"===i.axis?l[1]:l[0],u="yx"===i.axis?"<div id='mCSB_"+n.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",f=i.autoHideScrollbar?" "+d[6]:"",h="x"!==i.axis&&"rtl"===n.langDir?" "+d[7]:"";i.setWidth&&t.css("width",i.setWidth),i.setHeight&&t.css("height",i.setHeight),i.setLeft="y"!==i.axis&&"rtl"===n.langDir?"989999px":i.setLeft,t.addClass(o+" _"+a+"_"+n.idx+f+h).wrapInner("<div id='mCSB_"+n.idx+"' class='mCustomScrollBox mCS-"+i.theme+" "+s+"'><div id='mCSB_"+n.idx+"_container' class='mCSB_container' style='position:relative; top:"+i.setTop+"; left:"+i.setLeft+";' dir="+n.langDir+" /></div>");var m=e("#mCSB_"+n.idx),p=e("#mCSB_"+n.idx+"_container");"y"===i.axis||i.advanced.autoExpandHorizontalScroll||p.css("width",x(p)),"outside"===i.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),m.addClass("mCSB_outside").after(c)):(m.addClass("mCSB_inside").append(c),p.wrap(u)),w.call(this);var g=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},x=function(t){var o=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],a=t.parent().width();return o[0]>a?o[0]:o[1]>a?o[1]:"100%"},_=function(){var t=e(this),o=t.data(a),n=o.opt,i=e("#mCSB_"+o.idx+"_container");if(n.advanced.autoExpandHorizontalScroll&&"y"!==n.axis){i.css({width:"auto","min-width":0,"overflow-x":"scroll"});var r=Math.ceil(i[0].scrollWidth);3===n.advanced.autoExpandHorizontalScroll||2!==n.advanced.autoExpandHorizontalScroll&&r>i.parent().width()?i.css({width:r,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var t=e(this),o=t.data(a),n=o.opt,i=e(".mCSB_"+o.idx+"_scrollbar:first"),r=ee(n.scrollButtons.tabindex)?"tabindex='"+n.scrollButtons.tabindex+"'":"",l=["<a href='#' class='"+d[13]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+d[14]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+d[15]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+d[16]+"' oncontextmenu='return false;' "+r+" />"],s=["x"===n.axis?l[2]:l[0],"x"===n.axis?l[3]:l[1],l[2],l[3]];n.scrollButtons.enable&&i.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])},S=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],l=[n.height()/i.outerHeight(!1),n.width()/i.outerWidth(!1)],c=[parseInt(r[0].css("min-height")),Math.round(l[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(l[1]*r[1].parent().width())],d=s&&c[1]<c[0]?c[0]:c[1],u=s&&c[3]<c[2]?c[2]:c[3];r[0].css({height:d,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),r[1].css({width:u,"max-width":r[1].parent().width()-10})},b=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],l=[i.outerHeight(!1)-n.height(),i.outerWidth(!1)-n.width()],s=[l[0]/(r[0].parent().height()-r[0].height()),l[1]/(r[1].parent().width()-r[1].width())];o.scrollRatio={y:s[0],x:s[1]}},C=function(e,t,o){var a=o?d[0]+"_expanded":"",n=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(d[0]+" "+a),n.toggleClass(d[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(d[0]),n.removeClass(d[1])):(e.addClass(d[0]),n.addClass(d[1])))},y=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=null==o.overflowed?i.height():i.outerHeight(!1),l=null==o.overflowed?i.width():i.outerWidth(!1),s=i[0].scrollHeight,c=i[0].scrollWidth;return s>r&&(r=s),c>l&&(l=c),[r>n.height(),l>n.width()]},B=function(){var t=e(this),o=t.data(a),n=o.opt,i=e("#mCSB_"+o.idx),r=e("#mCSB_"+o.idx+"_container"),l=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")];if(N(t),("x"!==n.axis&&!o.overflowed[0]||"y"===n.axis&&o.overflowed[0])&&(l[0].add(r).css("top",0),V(t,"_resetY")),"y"!==n.axis&&!o.overflowed[1]||"x"===n.axis&&o.overflowed[1]){var s=dx=0;"rtl"===o.langDir&&(s=i.width()-r.outerWidth(!1),dx=Math.abs(s/o.scrollRatio.x)),r.css("left",s),l[1].css("left",dx),V(t,"_resetX")}},T=function(){function t(){r=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(r),R.call(o[0])):t()},100)}var o=e(this),n=o.data(a),i=n.opt;if(!n.bindEvents){if(I.call(this),i.contentTouchScroll&&D.call(this),E.call(this),i.mouseWheel.enable){var r;t()}L.call(this),P.call(this),i.advanced.autoScrollOnFocus&&z.call(this),i.scrollButtons.enable&&H.call(this),i.keyboard.enable&&U.call(this),n.bindEvents=!0}},k=function(){var t=e(this),o=t.data(a),n=o.opt,i=a+"_"+o.idx,r=".mCSB_"+o.idx+"_scrollbar",l=e("#mCSB_"+o.idx+",#mCSB_"+o.idx+"_container,#mCSB_"+o.idx+"_container_wrapper,"+r+" ."+d[12]+",#mCSB_"+o.idx+"_dragger_vertical,#mCSB_"+o.idx+"_dragger_horizontal,"+r+">a"),s=e("#mCSB_"+o.idx+"_container");n.advanced.releaseDraggableSelectors&&l.add(e(n.advanced.releaseDraggableSelectors)),n.advanced.extraDraggableSelectors&&l.add(e(n.advanced.extraDraggableSelectors)),o.bindEvents&&(e(document).add(e(!W()||top.document)).unbind("."+i),l.each(function(){e(this).unbind("."+i)}),clearTimeout(t[0]._focusTimeout),K(t[0],"_focusTimeout"),clearTimeout(o.sequential.step),K(o.sequential,"step"),clearTimeout(s[0].onCompleteTimeout),K(s[0],"onCompleteTimeout"),o.bindEvents=!1)},M=function(t){var o=e(this),n=o.data(a),i=n.opt,r=e("#mCSB_"+n.idx+"_container_wrapper"),l=r.length?r:e("#mCSB_"+n.idx+"_container"),s=[e("#mCSB_"+n.idx+"_scrollbar_vertical"),e("#mCSB_"+n.idx+"_scrollbar_horizontal")],c=[s[0].find(".mCSB_dragger"),s[1].find(".mCSB_dragger")];"x"!==i.axis&&(n.overflowed[0]&&!t?(s[0].add(c[0]).add(s[0].children("a")).css("display","block"),l.removeClass(d[8]+" "+d[10])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[0].css("display","none"),l.removeClass(d[10])):(s[0].css("display","none"),l.addClass(d[10])),l.addClass(d[8]))),"y"!==i.axis&&(n.overflowed[1]&&!t?(s[1].add(c[1]).add(s[1].children("a")).css("display","block"),l.removeClass(d[9]+" "+d[11])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[1].css("display","none"),l.removeClass(d[11])):(s[1].css("display","none"),l.addClass(d[11])),l.addClass(d[9]))),n.overflowed[0]||n.overflowed[1]?o.removeClass(d[5]):o.addClass(d[5])},O=function(t){var o=t.type,a=t.target.ownerDocument!==document?[e(frameElement).offset().top,e(frameElement).offset().left]:null,n=W()&&t.target.ownerDocument!==top.document?[e(t.view.frameElement).offset().top,e(t.view.frameElement).offset().left]:[0,0];switch(o){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return a?[t.originalEvent.pageY-a[0]+n[0],t.originalEvent.pageX-a[1]+n[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],r=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[i.screenY,i.screenX,r>1]:[i.pageY,i.pageX,r>1];default:return a?[t.pageY-a[0]+n[0],t.pageX-a[1]+n[1],!1]:[t.pageY,t.pageX,!1]}},I=function(){function t(e){var t=m.find("iframe");if(t.length){var o=e?"auto":"none";t.css("pointer-events",o)}}function o(e,t,o,a){if(m[0].idleTimer=u.scrollInertia<233?250:0,n.attr("id")===h[1])var i="x",r=(n[0].offsetLeft-t+a)*d.scrollRatio.x;else var i="y",r=(n[0].offsetTop-e+o)*d.scrollRatio.y;V(l,r.toString(),{dir:i,drag:!0})}var n,i,r,l=e(this),d=l.data(a),u=d.opt,f=a+"_"+d.idx,h=["mCSB_"+d.idx+"_dragger_vertical","mCSB_"+d.idx+"_dragger_horizontal"],m=e("#mCSB_"+d.idx+"_container"),p=e("#"+h[0]+",#"+h[1]),g=u.advanced.releaseDraggableSelectors?p.add(e(u.advanced.releaseDraggableSelectors)):p,v=u.advanced.extraDraggableSelectors?e(!W()||top.document).add(e(u.advanced.extraDraggableSelectors)):e(!W()||top.document);p.bind("mousedown."+f+" touchstart."+f+" pointerdown."+f+" MSPointerDown."+f,function(o){if(o.stopImmediatePropagation(),o.preventDefault(),Z(o)){c=!0,s&&(document.onselectstart=function(){return!1}),t(!1),N(l),n=e(this);var a=n.offset(),d=O(o)[0]-a.top,f=O(o)[1]-a.left,h=n.height()+a.top,m=n.width()+a.left;h>d&&d>0&&m>f&&f>0&&(i=d,r=f),C(n,"active",u.autoExpandScrollbar)}}).bind("touchmove."+f,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=n.offset(),a=O(e)[0]-t.top,l=O(e)[1]-t.left;o(i,r,a,l)}),e(document).add(v).bind("mousemove."+f+" pointermove."+f+" MSPointerMove."+f,function(e){if(n){var t=n.offset(),a=O(e)[0]-t.top,l=O(e)[1]-t.left;if(i===a&&r===l)return;o(i,r,a,l)}}).add(g).bind("mouseup."+f+" touchend."+f+" pointerup."+f+" MSPointerUp."+f,function(e){n&&(C(n,"active",u.autoExpandScrollbar),n=null),c=!1,s&&(document.onselectstart=null),t(!0)})},D=function(){function o(e){if(!$(e)||c||O(e)[2])return void(t=0);t=1,b=0,C=0,d=1,y.removeClass("mCS_touch_action");var o=I.offset();u=O(e)[0]-o.top,f=O(e)[1]-o.left,z=[O(e)[0],O(e)[1]]}function n(e){if($(e)&&!c&&!O(e)[2]&&(T.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!C||b)&&d)){g=G();var t=M.offset(),o=O(e)[0]-t.top,a=O(e)[1]-t.left,n="mcsLinearOut";if(E.push(o),R.push(a),z[2]=Math.abs(O(e)[0]-z[0]),z[3]=Math.abs(O(e)[1]-z[1]),B.overflowed[0])var i=D[0].parent().height()-D[0].height(),r=u-o>0&&o-u>-(i*B.scrollRatio.y)&&(2*z[3]<z[2]||"yx"===T.axis);if(B.overflowed[1])var l=D[1].parent().width()-D[1].width(),h=f-a>0&&a-f>-(l*B.scrollRatio.x)&&(2*z[2]<z[3]||"yx"===T.axis);r||h?(U||e.preventDefault(),b=1):(C=1,y.addClass("mCS_touch_action")),U&&e.preventDefault(),w="yx"===T.axis?[u-o,f-a]:"x"===T.axis?[null,f-a]:[u-o,null],I[0].idleTimer=250,B.overflowed[0]&&s(w[0],A,n,"y","all",!0),B.overflowed[1]&&s(w[1],A,n,"x",L,!0)}}function i(e){if(!$(e)||c||O(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),N(y),p=G();var o=M.offset();h=O(e)[0]-o.top,m=O(e)[1]-o.left,E=[],R=[]}function r(e){if($(e)&&!c&&!O(e)[2]){d=0,e.stopImmediatePropagation(),b=0,C=0,v=G();var t=M.offset(),o=O(e)[0]-t.top,a=O(e)[1]-t.left;if(!(v-g>30)){_=1e3/(v-p);var n="mcsEaseOut",i=2.5>_,r=i?[E[E.length-2],R[R.length-2]]:[0,0];x=i?[o-r[0],a-r[1]]:[o-h,a-m];var u=[Math.abs(x[0]),Math.abs(x[1])];_=i?[Math.abs(x[0]/4),Math.abs(x[1]/4)]:[_,_];var f=[Math.abs(I[0].offsetTop)-x[0]*l(u[0]/_[0],_[0]),Math.abs(I[0].offsetLeft)-x[1]*l(u[1]/_[1],_[1])];w="yx"===T.axis?[f[0],f[1]]:"x"===T.axis?[null,f[1]]:[f[0],null],S=[4*u[0]+T.scrollInertia,4*u[1]+T.scrollInertia];var y=parseInt(T.contentTouchScroll)||0;w[0]=u[0]>y?w[0]:0,w[1]=u[1]>y?w[1]:0,B.overflowed[0]&&s(w[0],S[0],n,"y",L,!1),B.overflowed[1]&&s(w[1],S[1],n,"x",L,!1)}}}function l(e,t){var o=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?o[0]:o[3]:e>60?t>3?o[3]:o[2]:e>30?t>8?o[1]:t>6?o[0]:t>4?t:o[2]:t>8?t:o[3]}function s(e,t,o,a,n,i){e&&V(y,e.toString(),{dur:t,scrollEasing:o,dir:a,overwrite:n,drag:i})}var d,u,f,h,m,p,g,v,x,_,w,S,b,C,y=e(this),B=y.data(a),T=B.opt,k=a+"_"+B.idx,M=e("#mCSB_"+B.idx),I=e("#mCSB_"+B.idx+"_container"),D=[e("#mCSB_"+B.idx+"_dragger_vertical"),e("#mCSB_"+B.idx+"_dragger_horizontal")],E=[],R=[],A=0,L="yx"===T.axis?"none":"all",z=[],P=I.find("iframe"),H=["touchstart."+k+" pointerdown."+k+" MSPointerDown."+k,"touchmove."+k+" pointermove."+k+" MSPointerMove."+k,"touchend."+k+" pointerup."+k+" MSPointerUp."+k],U=void 0!==document.body.style.touchAction;I.bind(H[0],function(e){o(e)}).bind(H[1],function(e){n(e)}),M.bind(H[0],function(e){i(e)}).bind(H[2],function(e){r(e)}),P.length&&P.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind(H[0],function(e){o(e),i(e)}).bind(H[1],function(e){n(e)}).bind(H[2],function(e){r(e)})})})},E=function(){function o(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function n(e,t,o){d.type=o&&i?"stepped":"stepless",d.scrollAmount=10,F(r,e,t,"mcsLinearOut",o?60:null)}var i,r=e(this),l=r.data(a),s=l.opt,d=l.sequential,u=a+"_"+l.idx,f=e("#mCSB_"+l.idx+"_container"),h=f.parent();f.bind("mousedown."+u,function(e){t||i||(i=1,c=!0)}).add(document).bind("mousemove."+u,function(e){if(!t&&i&&o()){var a=f.offset(),r=O(e)[0]-a.top+f[0].offsetTop,c=O(e)[1]-a.left+f[0].offsetLeft;r>0&&r<h.height()&&c>0&&c<h.width()?d.step&&n("off",null,"stepped"):("x"!==s.axis&&l.overflowed[0]&&(0>r?n("on",38):r>h.height()&&n("on",40)),"y"!==s.axis&&l.overflowed[1]&&(0>c?n("on",37):c>h.width()&&n("on",39)))}}).bind("mouseup."+u+" dragend."+u,function(e){t||(i&&(i=0,n("off",null)),c=!1)})},R=function(){function t(t,a){if(N(o),!A(o,t.target)){var r="auto"!==i.mouseWheel.deltaFactor?parseInt(i.mouseWheel.deltaFactor):s&&t.deltaFactor<100?100:t.deltaFactor||100,d=i.scrollInertia;if("x"===i.axis||"x"===i.mouseWheel.axis)var u="x",f=[Math.round(r*n.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],h="auto"!==i.mouseWheel.scrollAmount?f[1]:f[0]>=l.width()?.9*l.width():f[0],m=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetLeft),p=c[1][0].offsetLeft,g=c[1].parent().width()-c[1].width(),v=t.deltaX||t.deltaY||a;else var u="y",f=[Math.round(r*n.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],h="auto"!==i.mouseWheel.scrollAmount?f[1]:f[0]>=l.height()?.9*l.height():f[0],m=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetTop),p=c[0][0].offsetTop,g=c[0].parent().height()-c[0].height(),v=t.deltaY||a;"y"===u&&!n.overflowed[0]||"x"===u&&!n.overflowed[1]||((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(v=-v),i.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==p||0>v&&p!==g||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<2&&!i.mouseWheel.normalizeDelta&&(h=t.deltaFactor,d=17),V(o,(m-v*h).toString(),{dir:u,dur:d}))}}if(e(this).data(a)){var o=e(this),n=o.data(a),i=n.opt,r=a+"_"+n.idx,l=e("#mCSB_"+n.idx),c=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],d=e("#mCSB_"+n.idx+"_container").find("iframe");d.length&&d.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+r,function(e,o){t(e,o)})})}),l.bind("mousewheel."+r,function(e,o){t(e,o)})}},W=function(e){var t=null;if(e){try{var o=e.contentDocument||e.contentWindow.document;t=o.body.innerHTML}catch(a){}return null!==t}try{var o=top.document;t=o.body.innerHTML}catch(a){}return null!==t},A=function(t,o){var n=o.nodeName.toLowerCase(),i=t.data(a).opt.mouseWheel.disableOver,r=["select","textarea"];return e.inArray(n,i)>-1&&!(e.inArray(n,r)>-1&&!e(o).is(":focus"))},L=function(){var t,o=e(this),n=o.data(a),i=a+"_"+n.idx,r=e("#mCSB_"+n.idx+"_container"),l=r.parent(),s=e(".mCSB_"+n.idx+"_scrollbar ."+d[12]);s.bind("mousedown."+i+" touchstart."+i+" pointerdown."+i+" MSPointerDown."+i,function(o){c=!0,e(o.target).hasClass("mCSB_dragger")||(t=1)}).bind("touchend."+i+" pointerup."+i+" MSPointerUp."+i,function(e){c=!1}).bind("click."+i,function(a){if(t&&(t=0,e(a.target).hasClass(d[12])||e(a.target).hasClass("mCSB_draggerRail"))){N(o);var i=e(this),s=i.find(".mCSB_dragger");if(i.parent(".mCSB_scrollTools_horizontal").length>0){if(!n.overflowed[1])return;var c="x",u=a.pageX>s.offset().left?-1:1,f=Math.abs(r[0].offsetLeft)-.9*u*l.width()}else{if(!n.overflowed[0])return;var c="y",u=a.pageY>s.offset().top?-1:1,f=Math.abs(r[0].offsetTop)-.9*u*l.height()}V(o,f.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},z=function(){var t=e(this),o=t.data(a),n=o.opt,i=a+"_"+o.idx,r=e("#mCSB_"+o.idx+"_container"),l=r.parent();r.bind("focusin."+i,function(o){var a=e(document.activeElement),i=r.find(".mCustomScrollBox").length,s=0;a.is(n.advanced.autoScrollOnFocus)&&(N(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=i?(s+17)*i:0,t[0]._focusTimeout=setTimeout(function(){var e=[te(a)[0],te(a)[1]],o=[r[0].offsetTop,r[0].offsetLeft],i=[o[0]+e[0]>=0&&o[0]+e[0]<l.height()-a.outerHeight(!1),o[1]+e[1]>=0&&o[0]+e[1]<l.width()-a.outerWidth(!1)],c="yx"!==n.axis||i[0]||i[1]?"all":"none";"x"===n.axis||i[0]||V(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:s}),"y"===n.axis||i[1]||V(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:s})},t[0]._focusTimer))})},P=function(){var t=e(this),o=t.data(a),n=a+"_"+o.idx,i=e("#mCSB_"+o.idx+"_container").parent();i.bind("scroll."+n,function(t){(0!==i.scrollTop()||0!==i.scrollLeft())&&e(".mCSB_"+o.idx+"_scrollbar").css("visibility","hidden")})},H=function(){var t=e(this),o=t.data(a),n=o.opt,i=o.sequential,r=a+"_"+o.idx,l=".mCSB_"+o.idx+"_scrollbar",s=e(l+">a");s.bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r+" mouseup."+r+" touchend."+r+" pointerup."+r+" MSPointerUp."+r+" mouseout."+r+" pointerout."+r+" MSPointerOut."+r+" click."+r,function(a){function r(e,o){i.scrollAmount=n.scrollButtons.scrollAmount,F(t,e,o)}if(a.preventDefault(),Z(a)){var l=e(this).attr("class");switch(i.type=n.scrollButtons.scrollType,a.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===i.type)return;c=!0,o.tweenRunning=!1,r("on",l);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===i.type)return;c=!1,i.dir&&r("off",l);break;case"click":if("stepped"!==i.type||o.tweenRunning)return;r("on",l)}}})},U=function(){function t(t){function a(e,t){r.type=i.keyboard.scrollType,r.scrollAmount=i.keyboard.scrollAmount,"stepped"===r.type&&n.tweenRunning||F(o,e,t)}switch(t.type){case"blur":n.tweenRunning&&r.dir&&a("off",null);break;case"keydown":case"keyup":var l=t.keyCode?t.keyCode:t.which,s="on";if("x"!==i.axis&&(38===l||40===l)||"y"!==i.axis&&(37===l||39===l)){if((38===l||40===l)&&!n.overflowed[0]||(37===l||39===l)&&!n.overflowed[1])return;"keyup"===t.type&&(s="off"),e(document.activeElement).is(u)||(t.preventDefault(),t.stopImmediatePropagation(),a(s,l))}else if(33===l||34===l){if((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){N(o);var f=34===l?-1:1;if("x"===i.axis||"yx"===i.axis&&n.overflowed[1]&&!n.overflowed[0])var h="x",m=Math.abs(c[0].offsetLeft)-.9*f*d.width();else var h="y",m=Math.abs(c[0].offsetTop)-.9*f*d.height();V(o,m.toString(),{dir:h,scrollEasing:"mcsEaseInOut"})}}else if((35===l||36===l)&&!e(document.activeElement).is(u)&&((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===i.axis||"yx"===i.axis&&n.overflowed[1]&&!n.overflowed[0])var h="x",m=35===l?Math.abs(d.width()-c.outerWidth(!1)):0;else var h="y",m=35===l?Math.abs(d.height()-c.outerHeight(!1)):0;V(o,m.toString(),{dir:h,scrollEasing:"mcsEaseInOut"})}}}var o=e(this),n=o.data(a),i=n.opt,r=n.sequential,l=a+"_"+n.idx,s=e("#mCSB_"+n.idx),c=e("#mCSB_"+n.idx+"_container"),d=c.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']",f=c.find("iframe"),h=["blur."+l+" keydown."+l+" keyup."+l];f.length&&f.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind(h[0],function(e){t(e)})})}),s.attr("tabindex","0").bind(h[0],function(e){t(e)})},F=function(t,o,n,i,r){function l(e){u.snapAmount&&(f.scrollAmount=u.snapAmount instanceof Array?"x"===f.dir[0]?u.snapAmount[1]:u.snapAmount[0]:u.snapAmount);var o="stepped"!==f.type,a=r?r:e?o?p/1.5:g:1e3/60,n=e?o?7.5:40:2.5,s=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)],d=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],m="x"===f.dir[0]?s[1]+f.dir[1]*d[1]*n:s[0]+f.dir[1]*d[0]*n,v="x"===f.dir[0]?s[1]+f.dir[1]*parseInt(f.scrollAmount):s[0]+f.dir[1]*parseInt(f.scrollAmount),x="auto"!==f.scrollAmount?v:m,_=i?i:e?o?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",w=e?!0:!1;return e&&17>a&&(x="x"===f.dir[0]?s[1]:s[0]),V(t,x.toString(),{dir:f.dir[0],scrollEasing:_,dur:a,onComplete:w}),e?void(f.dir=!1):(clearTimeout(f.step),void(f.step=setTimeout(function(){l()},a)))}function s(){clearTimeout(f.step),K(f,"step"),N(t)}var c=t.data(a),u=c.opt,f=c.sequential,h=e("#mCSB_"+c.idx+"_container"),m="stepped"===f.type?!0:!1,p=u.scrollInertia<26?26:u.scrollInertia,g=u.scrollInertia<1?17:u.scrollInertia;switch(o){case"on":if(f.dir=[n===d[16]||n===d[15]||39===n||37===n?"x":"y",n===d[13]||n===d[15]||38===n||37===n?-1:1],N(t),ee(n)&&"stepped"===f.type)return;l(m);break;case"off":s(),(m||c.tweenRunning&&f.dir)&&l(!0)}},q=function(t){var o=e(this).data(a).opt,n=[];return"function"==typeof t&&(t=t()),t instanceof Array?n=t.length>1?[t[0],t[1]]:"x"===o.axis?[null,t[0]]:[t[0],null]:(n[0]=t.y?t.y:t.x||"x"===o.axis?null:t,n[1]=t.x?t.x:t.y||"y"===o.axis?null:t),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},Y=function(t,o){if(null!=t&&"undefined"!=typeof t){var n=e(this),i=n.data(a),r=i.opt,l=e("#mCSB_"+i.idx+"_container"),s=l.parent(),c=typeof t;o||(o="x"===r.axis?"x":"y");var d="x"===o?l.outerWidth(!1):l.outerHeight(!1),f="x"===o?l[0].offsetLeft:l[0].offsetTop,h="x"===o?"left":"top";switch(c){case"function":return t();case"object":var m=t.jquery?t:e(t);if(!m.length)return;return"x"===o?te(m)[1]:te(m)[0];case"string":case"number":if(ee(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(d*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(f-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var p=f+parseInt(t.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==t.indexOf("px")&&ee(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(s.height()-l.outerHeight(!1));if("right"===t)return Math.abs(s.width()-l.outerWidth(!1));if("first"===t||"last"===t){var m=l.find(":"+t);return"x"===o?te(m)[1]:te(m)[0]}return e(t).length?"x"===o?te(e(t))[1]:te(e(t))[0]:(l.css(h,t),void u.update.call(null,n[0]))}}},X=function(t){function o(){return clearTimeout(f[0].autoUpdate),0===l.parents("html").length?void(l=null):void(f[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(s.poll.change.n=i(),s.poll.change.n!==s.poll.change.o)?(s.poll.change.o=s.poll.change.n,void r(3)):c.advanced.updateOnContentResize&&(s.poll.size.n=l[0].scrollHeight+l[0].scrollWidth+f[0].offsetHeight+l[0].offsetHeight+l[0].offsetWidth,s.poll.size.n!==s.poll.size.o)?(s.poll.size.o=s.poll.size.n,void r(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(s.poll.img.n=f.find("img").length,s.poll.img.n===s.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&o()):(s.poll.img.o=s.poll.img.n,void f.find("img").each(function(){n(this)}))},c.advanced.autoUpdateTimeout))}function n(t){function o(e,t){return function(){return t.apply(e,arguments)}}function a(){this.onload=null,e(t).addClass(d[2]),r(2)}if(e(t).hasClass(d[2]))return void r();var n=new Image;n.onload=o(n,a),n.src=t.src}function i(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var e=0,t=f.find(c.advanced.updateOnSelectorChange);

return c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function r(e){clearTimeout(f[0].autoUpdate),u.update.call(null,l[0],e)}var l=e(this),s=l.data(a),c=s.opt,f=e("#mCSB_"+s.idx+"_container");return t?(clearTimeout(f[0].autoUpdate),void K(f[0],"autoUpdate")):void o()},j=function(e,t,o){return Math.round(e/t)*t-o},N=function(t){var o=t.data(a),n=e("#mCSB_"+o.idx+"_container,#mCSB_"+o.idx+"_container_wrapper,#mCSB_"+o.idx+"_dragger_vertical,#mCSB_"+o.idx+"_dragger_horizontal");n.each(function(){J.call(this)})},V=function(t,o,n){function i(e){return s&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function r(){return[c.callbacks.alwaysTriggerOffsets||w>=S[0]+y,c.callbacks.alwaysTriggerOffsets||-B>=w]}function l(){var e=[h[0].offsetTop,h[0].offsetLeft],o=[x[0].offsetTop,x[0].offsetLeft],a=[h.outerHeight(!1),h.outerWidth(!1)],i=[f.height(),f.width()];t[0].mcs={content:h,top:e[0],left:e[1],draggerTop:o[0],draggerLeft:o[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(a[0])-i[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(a[1])-i[1])),direction:n.dir}}var s=t.data(a),c=s.opt,d={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=e.extend(d,n),u=[n.dur,n.drag?0:n.dur],f=e("#mCSB_"+s.idx),h=e("#mCSB_"+s.idx+"_container"),m=h.parent(),p=c.callbacks.onTotalScrollOffset?q.call(t,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?q.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(s.trigger=n.trigger,(0!==m.scrollTop()||0!==m.scrollLeft())&&(e(".mCSB_"+s.idx+"_scrollbar").css("visibility","visible"),m.scrollTop(0).scrollLeft(0)),"_resetY"!==o||s.contentReset.y||(i("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),s.contentReset.y=1),"_resetX"!==o||s.contentReset.x||(i("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),s.contentReset.x=1),"_resetY"!==o&&"_resetX"!==o){if(!s.contentReset.y&&t[0].mcs||!s.overflowed[0]||(i("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),s.contentReset.x=null),!s.contentReset.x&&t[0].mcs||!s.overflowed[1]||(i("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),s.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===n.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;o=j(o,v,c.snapOffset)}switch(n.dir){case"x":var x=e("#mCSB_"+s.idx+"_dragger_horizontal"),_="left",w=h[0].offsetLeft,S=[f.width()-h.outerWidth(!1),x.parent().width()-x.width()],b=[o,0===o?0:o/s.scrollRatio.x],y=p[1],B=g[1],T=y>0?y/s.scrollRatio.x:0,k=B>0?B/s.scrollRatio.x:0;break;case"y":var x=e("#mCSB_"+s.idx+"_dragger_vertical"),_="top",w=h[0].offsetTop,S=[f.height()-h.outerHeight(!1),x.parent().height()-x.height()],b=[o,0===o?0:o/s.scrollRatio.y],y=p[0],B=g[0],T=y>0?y/s.scrollRatio.y:0,k=B>0?B/s.scrollRatio.y:0}b[1]<0||0===b[0]&&0===b[1]?b=[0,0]:b[1]>=S[1]?b=[S[0],S[1]]:b[0]=-b[0],t[0].mcs||(l(),i("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(h[0].onCompleteTimeout),Q(x[0],_,Math.round(b[1]),u[1],n.scrollEasing),(s.tweenRunning||!(0===w&&b[0]>=0||w===S[0]&&b[0]<=S[0]))&&Q(h[0],_,Math.round(b[0]),u[0],n.scrollEasing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!s.tweenRunning&&(i("onScrollStart")&&(l(),c.callbacks.onScrollStart.call(t[0])),s.tweenRunning=!0,C(x),s.cbOffsets=r())},onUpdate:function(){n.callbacks&&n.onUpdate&&i("whileScrolling")&&(l(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(n.callbacks&&n.onComplete){"yx"===c.axis&&clearTimeout(h[0].onCompleteTimeout);var e=h[0].idleTimer||0;h[0].onCompleteTimeout=setTimeout(function(){i("onScroll")&&(l(),c.callbacks.onScroll.call(t[0])),i("onTotalScroll")&&b[1]>=S[1]-T&&s.cbOffsets[0]&&(l(),c.callbacks.onTotalScroll.call(t[0])),i("onTotalScrollBack")&&b[1]<=k&&s.cbOffsets[1]&&(l(),c.callbacks.onTotalScrollBack.call(t[0])),s.tweenRunning=!1,h[0].idleTimer=0,C(x,"hide")},e)}}})}},Q=function(e,t,o,a,n,i,r){function l(){S.stop||(x||m.call(),x=G()-v,s(),x>=S.time&&(S.time=x>S.time?x+f-(x-S.time):x+f-1,S.time<x+1&&(S.time=x+1)),S.time<a?S.id=h(l):g.call())}function s(){a>0?(S.currVal=u(S.time,_,b,a,n),w[t]=Math.round(S.currVal)+"px"):w[t]=o+"px",p.call()}function c(){f=1e3/60,S.time=x+f,h=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return s(),setTimeout(e,.01)},S.id=h(l)}function d(){null!=S.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(S.id):clearTimeout(S.id),S.id=null)}function u(e,t,o,a,n){switch(n){case"linear":case"mcsLinear":return o*e/a+t;case"mcsLinearOut":return e/=a,e--,o*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=a/2,1>e?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=a/2,1>e?o/2*Math.pow(2,10*(e-1))+t:(e--,o/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=a/2,1>e?o/2*e*e*e+t:(e-=2,o/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=a,e--,-o*(e*e*e*e-1)+t;case"easeOutStrong":return o*(-Math.pow(2,-10*e/a)+1)+t;case"easeOut":case"mcsEaseOut":default:var i=(e/=a)*e,r=i*e;return t+o*(.499999999999997*r*i+-2.5*i*i+5.5*r+-6.5*i+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var f,h,r=r||{},m=r.onStart||function(){},p=r.onUpdate||function(){},g=r.onComplete||function(){},v=G(),x=0,_=e.offsetTop,w=e.style,S=e._mTween[t];"left"===t&&(_=e.offsetLeft);var b=o-_;S.stop=0,"none"!==i&&d(),c()},G=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},J=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],o=0;o<t.length;o++){var a=t[o];e._mTween[a].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[a].id):clearTimeout(e._mTween[a].id),e._mTween[a].id=null,e._mTween[a].stop=1)}},K=function(e,t){try{delete e[t]}catch(o){e[t]=null}},Z=function(e){return!(e.which&&1!==e.which)},$=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ee=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},te=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},oe=function(){function e(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}var t=e();return t?document[t]:!1};e.fn[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[o].defaults=i,window[o]=!0,e(window).load(function(){e(n)[o](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var o,a,n=e(t),i=n.parents(".mCSB_container");if(i.length)return o=i.parent(),a=[i[0].offsetTop,i[0].offsetLeft],a[0]+te(n)[0]>=0&&a[0]+te(n)[0]<o.height()-n.outerHeight(!1)&&a[1]+te(n)[1]>=0&&a[1]+te(n)[1]<o.width()-n.outerWidth(!1)},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var o=e(t).data(a);if(o)return o.overflowed[0]||o.overflowed[1]}})})})});
/*!
 * Waves v0.7.5
 * http://fian.my.id/Waves
 *
 * Copyright 2014-2016 Alfiana E. Sibuea and other contributors
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],function(){return b.apply(a)}):"object"==typeof exports?module.exports=b.call(a):a.Waves=b.call(a)}("object"==typeof global?global:this,function(){"use strict";function a(a){return null!==a&&a===a.window}function b(b){return a(b)?b:9===b.nodeType&&b.defaultView}function c(a){var b=typeof a;return"function"===b||"object"===b&&!!a}function d(a){return c(a)&&a.nodeType>0}function e(a){var b=m.call(a);return"[object String]"===b?l(a):c(a)&&/^\[object (Array|HTMLCollection|NodeList|Object)\]$/.test(b)&&a.hasOwnProperty("length")?a:d(a)?[a]:[]}function f(a){var c,d,e={top:0,left:0},f=a&&a.ownerDocument;return c=f.documentElement,"undefined"!=typeof a.getBoundingClientRect&&(e=a.getBoundingClientRect()),d=b(f),{top:e.top+d.pageYOffset-c.clientTop,left:e.left+d.pageXOffset-c.clientLeft}}function g(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}function h(a,b,c){if(c){c.classList.remove("waves-rippling");var d=c.getAttribute("data-x"),e=c.getAttribute("data-y"),f=c.getAttribute("data-scale"),h=c.getAttribute("data-translate"),i=Date.now()-Number(c.getAttribute("data-hold")),j=350-i;0>j&&(j=0),"mousemove"===a.type&&(j=150);var k="mousemove"===a.type?2500:o.duration;setTimeout(function(){var a={top:e+"px",left:d+"px",opacity:"0","-webkit-transition-duration":k+"ms","-moz-transition-duration":k+"ms","-o-transition-duration":k+"ms","transition-duration":k+"ms","-webkit-transform":f+" "+h,"-moz-transform":f+" "+h,"-ms-transform":f+" "+h,"-o-transform":f+" "+h,transform:f+" "+h};c.setAttribute("style",g(a)),setTimeout(function(){try{b.removeChild(c)}catch(a){return!1}},k)},j)}}function i(a){if(q.allowEvent(a)===!1)return null;for(var b=null,c=a.target||a.srcElement;null!==c.parentElement;){if(c.classList.contains("waves-effect")&&!(c instanceof SVGElement)){b=c;break}c=c.parentElement}return b}function j(a){var b=i(a);if(null!==b){if(b.disabled||b.getAttribute("disabled")||b.classList.contains("disabled"))return;if(q.registerEvent(a),"touchstart"===a.type&&o.delay){var c=!1,d=setTimeout(function(){d=null,o.show(a,b)},o.delay),e=function(e){d&&(clearTimeout(d),d=null,o.show(a,b)),c||(c=!0,o.hide(e,b))},f=function(a){d&&(clearTimeout(d),d=null),e(a)};b.addEventListener("touchmove",f,!1),b.addEventListener("touchend",e,!1),b.addEventListener("touchcancel",e,!1)}else o.show(a,b),n&&(b.addEventListener("touchend",o.hide,!1),b.addEventListener("touchcancel",o.hide,!1)),b.addEventListener("mouseup",o.hide,!1),b.addEventListener("mouseleave",o.hide,!1)}}var k=k||{},l=document.querySelectorAll.bind(document),m=Object.prototype.toString,n="ontouchstart"in window,o={duration:750,delay:200,show:function(a,b,c){if(2===a.button)return!1;b=b||this;var d=document.createElement("div");d.className="waves-ripple waves-rippling",b.appendChild(d);var e=f(b),h=0,i=0;"touches"in a&&a.touches.length?(h=a.touches[0].pageY-e.top,i=a.touches[0].pageX-e.left):(h=a.pageY-e.top,i=a.pageX-e.left),i=i>=0?i:0,h=h>=0?h:0;var j="scale("+b.clientWidth/100*3+")",k="translate(0,0)";c&&(k="translate("+c.x+"px, "+c.y+"px)"),d.setAttribute("data-hold",Date.now()),d.setAttribute("data-x",i),d.setAttribute("data-y",h),d.setAttribute("data-scale",j),d.setAttribute("data-translate",k);var l={top:h+"px",left:i+"px"};d.classList.add("waves-notransition"),d.setAttribute("style",g(l)),d.classList.remove("waves-notransition"),l["-webkit-transform"]=j+" "+k,l["-moz-transform"]=j+" "+k,l["-ms-transform"]=j+" "+k,l["-o-transform"]=j+" "+k,l.transform=j+" "+k,l.opacity="1";var m="mousemove"===a.type?2500:o.duration;l["-webkit-transition-duration"]=m+"ms",l["-moz-transition-duration"]=m+"ms",l["-o-transition-duration"]=m+"ms",l["transition-duration"]=m+"ms",d.setAttribute("style",g(l))},hide:function(a,b){b=b||this;for(var c=b.getElementsByClassName("waves-rippling"),d=0,e=c.length;e>d;d++)h(a,b,c[d])}},p={input:function(a){var b=a.parentNode;if("i"!==b.tagName.toLowerCase()||!b.classList.contains("waves-effect")){var c=document.createElement("i");c.className=a.className+" waves-input-wrapper",a.className="waves-button-input",b.replaceChild(c,a),c.appendChild(a);var d=window.getComputedStyle(a,null),e=d.color,f=d.backgroundColor;c.setAttribute("style","color:"+e+";background:"+f),a.setAttribute("style","background-color:rgba(0,0,0,0);")}},img:function(a){var b=a.parentNode;if("i"!==b.tagName.toLowerCase()||!b.classList.contains("waves-effect")){var c=document.createElement("i");b.replaceChild(c,a),c.appendChild(a)}}},q={touches:0,allowEvent:function(a){var b=!0;return/^(mousedown|mousemove)$/.test(a.type)&&q.touches&&(b=!1),b},registerEvent:function(a){var b=a.type;"touchstart"===b?q.touches+=1:/^(touchend|touchcancel)$/.test(b)&&setTimeout(function(){q.touches&&(q.touches-=1)},500)}};return k.init=function(a){var b=document.body;a=a||{},"duration"in a&&(o.duration=a.duration),"delay"in a&&(o.delay=a.delay),n&&(b.addEventListener("touchstart",j,!1),b.addEventListener("touchcancel",q.registerEvent,!1),b.addEventListener("touchend",q.registerEvent,!1)),b.addEventListener("mousedown",j,!1)},k.attach=function(a,b){a=e(a),"[object Array]"===m.call(b)&&(b=b.join(" ")),b=b?" "+b:"";for(var c,d,f=0,g=a.length;g>f;f++)c=a[f],d=c.tagName.toLowerCase(),-1!==["input","img"].indexOf(d)&&(p[d](c),c=c.parentElement),-1===c.className.indexOf("waves-effect")&&(c.className+=" waves-effect"+b)},k.ripple=function(a,b){a=e(a);var c=a.length;if(b=b||{},b.wait=b.wait||0,b.position=b.position||null,c)for(var d,g,h,i={},j=0,k={type:"mousedown",button:1},l=function(a,b){return function(){o.hide(a,b)}};c>j;j++)if(d=a[j],g=b.position||{x:d.clientWidth/2,y:d.clientHeight/2},h=f(d),i.x=h.left+g.x,i.y=h.top+g.y,k.pageX=i.x,k.pageY=i.y,o.show(k,d),b.wait>=0&&null!==b.wait){var m={type:"mouseup",button:1};setTimeout(l(m,d),b.wait)}},k.calm=function(a){a=e(a);for(var b={type:"mouseup",button:1},c=0,d=a.length;d>c;c++)o.hide(b,a[c])},k.displayEffect=function(a){k.init(a)},k});
//# sourceMappingURL=waves.min.js.map
/*!
	Autosize 3.0.17
	license: MIT
	http://www.jacklmoore.com/autosize
*/
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.autosize=n.exports}}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),l="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(l)&&(l=0),a()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t,r()}function o(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function r(){var t=e.style.height,n=o(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var i=e.scrollHeight+l;return 0===e.scrollHeight?void(e.style.height=t):(e.style.height=i+"px",s=e.clientWidth,n.forEach(function(e){e.node.scrollTop=e.scrollTop}),void(r&&(document.documentElement.scrollTop=r)))}function a(){r();var t=window.getComputedStyle(e,null),o=Math.round(parseFloat(t.height)),i=Math.round(parseFloat(e.style.height));if(o!==i?"visible"!==t.overflowY&&n("visible"):"hidden"!==t.overflowY&&n("hidden"),u!==o){u=o;var a=d("autosize:resized");e.dispatchEvent(a)}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!i.has(e)){var l=null,s=e.clientWidth,u=null,c=function(){e.clientWidth!==s&&a()},p=function(t){window.removeEventListener("resize",c,!1),e.removeEventListener("input",a,!1),e.removeEventListener("keyup",a,!1),e.removeEventListener("autosize:destroy",p,!1),e.removeEventListener("autosize:update",a,!1),i["delete"](e),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",p,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",a,!1),window.addEventListener("resize",c,!1),e.addEventListener("input",a,!1),e.addEventListener("autosize:update",a,!1),i.add(e),e.style.overflowX="hidden",e.style.wordWrap="break-word",t()}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=d("autosize:destroy");e.dispatchEvent(t)}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=d("autosize:update");e.dispatchEvent(t)}}var i="function"==typeof Set?new Set:function(){var e=[];return{has:function(t){return Boolean(e.indexOf(t)>-1)},add:function(t){e.push(t)},"delete":function(t){e.splice(e.indexOf(t),1)}}}(),d=function(e){return new Event(e)};try{new Event("test")}catch(a){d=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(l=function(e){return e},l.destroy=function(e){return e},l.update=function(e){return e}):(l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},l.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=l});
/*! layer-v2.1 ??? License LGPL  http://layer.layui.com/ By ? */
;!function(a,b){"use strict";var c,d,e={getPath:function(){var a=document.scripts,b=a[a.length-1],c=b.src;if(!b.getAttribute("merge"))return c.substring(0,c.lastIndexOf("/")+1)}(),enter:function(a){13===a.keyCode&&a.preventDefault()},config:{},end:{},btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"]},f={v:"2.1",ie6:!!a.ActiveXObject&&!a.XMLHttpRequest,index:0,path:e.getPath,config:function(a,b){var d=0;return a=a||{},f.cache=e.config=c.extend(e.config,a),f.path=e.config.path||f.path,"string"==typeof a.extend&&(a.extend=[a.extend]),f.use("skin/layer.css",a.extend&&a.extend.length>0?function g(){var c=a.extend;f.use(c[c[d]?d:d-1],d<c.length?function(){return++d,g}():b)}():b),this},use:function(a,b,d){var e=c("head")[0],a=a.replace(/\s/g,""),g=/\.css$/.test(a),h=document.createElement(g?"link":"script"),i="layui_layer_"+a.replace(/\.|\//g,"");return f.path?(g&&(h.rel="stylesheet"),h[g?"href":"src"]=/^http:\/\//.test(a)?a:f.path+a,h.id=i,c("#"+i)[0]||e.appendChild(h),function j(){(g?1989===parseInt(c("#"+i).css("width")):f[d||i])?function(){b&&b();try{g||e.removeChild(h)}catch(a){}}():setTimeout(j,100)}(),this):void 0},ready:function(a,b){var d="function"==typeof a;return d&&(b=a),f.config(c.extend(e.config,function(){return d?{}:{path:a}}()),b),this},alert:function(a,b,d){var e="function"==typeof b;return e&&(d=b),f.open(c.extend({content:a,yes:d},e?{}:b))},confirm:function(a,b,d,g){var h="function"==typeof b;return h&&(g=d,d=b),f.open(c.extend({content:a,btn:e.btn,yes:d,cancel:g},h?{}:b))},msg:function(a,d,g){var i="function"==typeof d,j=e.config.skin,k=(j?j+" "+j+"-msg":"")||"layui-layer-msg",l=h.anim.length-1;return i&&(g=d),f.open(c.extend({content:a,time:3e3,shade:!1,skin:k,title:!1,closeBtn:!1,btn:!1,end:g},i&&!e.config.skin?{skin:k+" layui-layer-hui",shift:l}:function(){return d=d||{},(-1===d.icon||d.icon===b&&!e.config.skin)&&(d.skin=k+" "+(d.skin||"layui-layer-hui")),d}()))},load:function(a,b){return f.open(c.extend({type:3,icon:a||0,shade:.01},b))},tips:function(a,b,d){return f.open(c.extend({type:4,content:[a,b],closeBtn:!1,time:3e3,maxWidth:210},d))}},g=function(a){var b=this;b.index=++f.index,b.config=c.extend({},b.config,e.config,a),b.creat()};g.pt=g.prototype;var h=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"];h.anim=["layui-anim","layui-anim-01","layui-anim-02","layui-anim-03","layui-anim-04","layui-anim-05","layui-anim-06"],g.pt.config={type:0,shade:.3,fix:!0,move:h[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,shift:0,icon:-1,scrollbar:!0,tips:2},g.pt.vessel=function(a,b){var c=this,d=c.index,f=c.config,g=f.zIndex+d,i="object"==typeof f.title,j=f.maxmin&&(1===f.type||2===f.type),k=f.title?'<div class="layui-layer-title" style="'+(i?f.title[1]:"")+'">'+(i?f.title[0]:f.title)+"</div>":"";return f.zIndex=g,b([f.shade?'<div class="layui-layer-shade" id="layui-layer-shade'+d+'" times="'+d+'" style="'+("z-index:"+(g-1)+"; background-color:"+(f.shade[1]||"#000")+"; opacity:"+(f.shade[0]||f.shade)+"; filter:alpha(opacity="+(100*f.shade[0]||100*f.shade)+");")+'"></div>':"",'<div class="'+h[0]+" "+(h.anim[f.shift]||"")+(" layui-layer-"+e.type[f.type])+(0!=f.type&&2!=f.type||f.shade?"":" layui-layer-border")+" "+(f.skin||"")+'" id="'+h[0]+d+'" type="'+e.type[f.type]+'" times="'+d+'" showtime="'+f.time+'" conType="'+(a?"object":"string")+'" style="z-index: '+g+"; width:"+f.area[0]+";height:"+f.area[1]+(f.fix?"":";position:absolute;")+'">'+(a&&2!=f.type?"":k)+'<div class="layui-layer-content'+(0==f.type&&-1!==f.icon?" layui-layer-padding":"")+(3==f.type?" layui-layer-loading"+f.icon:"")+'">'+(0==f.type&&-1!==f.icon?'<i class="layui-layer-ico layui-layer-ico'+f.icon+'"></i>':"")+(1==f.type&&a?"":f.content||"")+'</div><span class="layui-layer-setwin">'+function(){var a=j?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"";return f.closeBtn&&(a+='<a class="layui-layer-ico '+h[7]+" "+h[7]+(f.title?f.closeBtn:4==f.type?"1":"2")+'" href="javascript:;"></a>'),a}()+"</span>"+(f.btn?function(){var a="";"string"==typeof f.btn&&(f.btn=[f.btn]);for(var b=0,c=f.btn.length;c>b;b++)a+='<a class="'+h[6]+b+'">'+f.btn[b]+"</a>";return'<div class="'+h[6]+'">'+a+"</div>"}():"")+"</div>"],k),c},g.pt.creat=function(){var a=this,b=a.config,g=a.index,i=b.content,j="object"==typeof i;switch("string"==typeof b.area&&(b.area="auto"===b.area?["",""]:[b.area,""]),b.type){case 0:b.btn="btn"in b?b.btn:e.btn[0],f.closeAll("dialog");break;case 2:var i=b.content=j?b.content:[b.content||"http://layer.layui.com","auto"];b.content='<iframe scrolling="'+(b.content[1]||"auto")+'" allowtransparency="true" id="'+h[4]+g+'" name="'+h[4]+g+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+b.content[0]+'"></iframe>';break;case 3:b.title=!1,b.closeBtn=!1,-1===b.icon&&0===b.icon,f.closeAll("loading");break;case 4:j||(b.content=[b.content,"body"]),b.follow=b.content[1],b.content=b.content[0]+'<i class="layui-layer-TipsG"></i>',b.title=!1,b.shade=!1,b.fix=!1,b.tips="object"==typeof b.tips?b.tips:[b.tips,!0],b.tipsMore||f.closeAll("tips")}a.vessel(j,function(d,e){c("body").append(d[0]),j?function(){2==b.type||4==b.type?function(){c("body").append(d[1])}():function(){i.parents("."+h[0])[0]||(i.show().addClass("layui-layer-wrap").wrap(d[1]),c("#"+h[0]+g).find("."+h[5]).before(e))}()}():c("body").append(d[1]),a.layero=c("#"+h[0]+g),b.scrollbar||h.html.css("overflow","hidden").attr("layer-full",g)}).auto(g),2==b.type&&f.ie6&&a.layero.find("iframe").attr("src",i[0]),c(document).off("keydown",e.enter).on("keydown",e.enter),a.layero.on("keydown",function(a){c(document).off("keydown",e.enter)}),4==b.type?a.tips():a.offset(),b.fix&&d.on("resize",function(){a.offset(),(/^\d+%$/.test(b.area[0])||/^\d+%$/.test(b.area[1]))&&a.auto(g),4==b.type&&a.tips()}),b.time<=0||setTimeout(function(){f.close(a.index)},b.time),a.move().callback()},g.pt.auto=function(a){function b(a){a=g.find(a),a.height(i[1]-j-k-2*(0|parseFloat(a.css("padding"))))}var e=this,f=e.config,g=c("#"+h[0]+a);""===f.area[0]&&f.maxWidth>0&&(/MSIE 7/.test(navigator.userAgent)&&f.btn&&g.width(g.innerWidth()),g.outerWidth()>f.maxWidth&&g.width(f.maxWidth));var i=[g.innerWidth(),g.innerHeight()],j=g.find(h[1]).outerHeight()||0,k=g.find("."+h[6]).outerHeight()||0;switch(f.type){case 2:b("iframe");break;default:""===f.area[1]?f.fix&&i[1]>=d.height()&&(i[1]=d.height(),b("."+h[5])):b("."+h[5])}return e},g.pt.offset=function(){var a=this,b=a.config,c=a.layero,e=[c.outerWidth(),c.outerHeight()],f="object"==typeof b.offset;a.offsetTop=(d.height()-e[1])/2,a.offsetLeft=(d.width()-e[0])/2,f?(a.offsetTop=b.offset[0],a.offsetLeft=b.offset[1]||a.offsetLeft):"auto"!==b.offset&&(a.offsetTop=b.offset,"rb"===b.offset&&(a.offsetTop=d.height()-e[1],a.offsetLeft=d.width()-e[0])),b.fix||(a.offsetTop=/%$/.test(a.offsetTop)?d.height()*parseFloat(a.offsetTop)/100:parseFloat(a.offsetTop),a.offsetLeft=/%$/.test(a.offsetLeft)?d.width()*parseFloat(a.offsetLeft)/100:parseFloat(a.offsetLeft),a.offsetTop+=d.scrollTop(),a.offsetLeft+=d.scrollLeft()),c.css({top:a.offsetTop,left:a.offsetLeft})},g.pt.tips=function(){var a=this,b=a.config,e=a.layero,f=[e.outerWidth(),e.outerHeight()],g=c(b.follow);g[0]||(g=c("body"));var i={width:g.outerWidth(),height:g.outerHeight(),top:g.offset().top,left:g.offset().left},j=e.find(".layui-layer-TipsG"),k=b.tips[0];b.tips[1]||j.remove(),i.autoLeft=function(){i.left+f[0]-d.width()>0?(i.tipLeft=i.left+i.width-f[0],j.css({right:12,left:"auto"})):i.tipLeft=i.left},i.where=[function(){i.autoLeft(),i.tipTop=i.top-f[1]-10,j.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",b.tips[1])},function(){i.tipLeft=i.left+i.width+10,i.tipTop=i.top,j.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",b.tips[1])},function(){i.autoLeft(),i.tipTop=i.top+i.height+10,j.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",b.tips[1])},function(){i.tipLeft=i.left-f[0]-10,i.tipTop=i.top,j.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",b.tips[1])}],i.where[k-1](),1===k?i.top-(d.scrollTop()+f[1]+16)<0&&i.where[2]():2===k?d.width()-(i.left+i.width+f[0]+16)>0||i.where[3]():3===k?i.top-d.scrollTop()+i.height+f[1]+16-d.height()>0&&i.where[0]():4===k&&f[0]+16-i.left>0&&i.where[1](),e.find("."+h[5]).css({"background-color":b.tips[1],"padding-right":b.closeBtn?"30px":""}),e.css({left:i.tipLeft,top:i.tipTop})},g.pt.move=function(){var a=this,b=a.config,e={setY:0,moveLayer:function(){var a=e.layero,b=parseInt(a.css("margin-left")),c=parseInt(e.move.css("left"));0===b||(c-=b),"fixed"!==a.css("position")&&(c-=a.parent().offset().left,e.setY=0),a.css({left:c,top:parseInt(e.move.css("top"))-e.setY})}},f=a.layero.find(b.move);return b.move&&f.attr("move","ok"),f.css({cursor:b.move?"move":"auto"}),c(b.move).on("mousedown",function(a){if(a.preventDefault(),"ok"===c(this).attr("move")){e.ismove=!0,e.layero=c(this).parents("."+h[0]);var f=e.layero.offset().left,g=e.layero.offset().top,i=e.layero.outerWidth()-6,j=e.layero.outerHeight()-6;c("#layui-layer-moves")[0]||c("body").append('<div id="layui-layer-moves" class="layui-layer-moves" style="left:'+f+"px; top:"+g+"px; width:"+i+"px; height:"+j+'px; z-index:2147483584"></div>'),e.move=c("#layui-layer-moves"),b.moveType&&e.move.css({visibility:"hidden"}),e.moveX=a.pageX-e.move.position().left,e.moveY=a.pageY-e.move.position().top,"fixed"!==e.layero.css("position")||(e.setY=d.scrollTop())}}),c(document).mousemove(function(a){if(e.ismove){var c=a.pageX-e.moveX,f=a.pageY-e.moveY;if(a.preventDefault(),!b.moveOut){e.setY=d.scrollTop();var g=d.width()-e.move.outerWidth(),h=e.setY;0>c&&(c=0),c>g&&(c=g),h>f&&(f=h),f>d.height()-e.move.outerHeight()+e.setY&&(f=d.height()-e.move.outerHeight()+e.setY)}e.move.css({left:c,top:f}),b.moveType&&e.moveLayer(),c=f=g=h=null}}).mouseup(function(){try{e.ismove&&(e.moveLayer(),e.move.remove(),b.moveEnd&&b.moveEnd()),e.ismove=!1}catch(a){e.ismove=!1}}),a},g.pt.callback=function(){function a(){var a=g.cancel&&g.cancel(b.index);a===!1||f.close(b.index)}var b=this,d=b.layero,g=b.config;b.openLayer(),g.success&&(2==g.type?d.find("iframe").on("load",function(){g.success(d,b.index)}):g.success(d,b.index)),f.ie6&&b.IE6(d),d.find("."+h[6]).children("a").on("click",function(){var e=c(this).index();g["btn"+(e+1)]&&g["btn"+(e+1)](b.index,d),0===e?g.yes?g.yes(b.index,d):f.close(b.index):1===e?a():g["btn"+(e+1)]||f.close(b.index)}),d.find("."+h[7]).on("click",a),g.shadeClose&&c("#layui-layer-shade"+b.index).on("click",function(){f.close(b.index)}),d.find(".layui-layer-min").on("click",function(){f.min(b.index,g),g.min&&g.min(d)}),d.find(".layui-layer-max").on("click",function(){c(this).hasClass("layui-layer-maxmin")?(f.restore(b.index),g.restore&&g.restore(d)):(f.full(b.index,g),g.full&&g.full(d))}),g.end&&(e.end[b.index]=g.end)},e.reselect=function(){c.each(c("select"),function(a,b){var d=c(this);d.parents("."+h[0])[0]||1==d.attr("layer")&&c("."+h[0]).length<1&&d.removeAttr("layer").show(),d=null})},g.pt.IE6=function(a){function b(){a.css({top:f+(e.config.fix?d.scrollTop():0)})}var e=this,f=a.offset().top;b(),d.scroll(b),c("select").each(function(a,b){var d=c(this);d.parents("."+h[0])[0]||"none"===d.css("display")||d.attr({layer:"1"}).hide(),d=null})},g.pt.openLayer=function(){var a=this;f.zIndex=a.config.zIndex,f.setTop=function(a){var b=function(){f.zIndex++,a.css("z-index",f.zIndex+1)};return f.zIndex=parseInt(a[0].style.zIndex),a.on("mousedown",b),f.zIndex}},e.record=function(a){var b=[a.outerWidth(),a.outerHeight(),a.position().top,a.position().left+parseFloat(a.css("margin-left"))];a.find(".layui-layer-max").addClass("layui-layer-maxmin"),a.attr({area:b})},e.rescollbar=function(a){h.html.attr("layer-full")==a&&(h.html[0].style.removeProperty?h.html[0].style.removeProperty("overflow"):h.html[0].style.removeAttribute("overflow"),h.html.removeAttr("layer-full"))},a.layer=f,f.getChildFrame=function(a,b){return b=b||c("."+h[4]).attr("times"),c("#"+h[0]+b).find("iframe").contents().find(a)},f.getFrameIndex=function(a){return c("#"+a).parents("."+h[4]).attr("times")},f.iframeAuto=function(a){if(a){var b=f.getChildFrame("html",a).outerHeight(),d=c("#"+h[0]+a),e=d.find(h[1]).outerHeight()||0,g=d.find("."+h[6]).outerHeight()||0;d.css({height:b+e+g}),d.find("iframe").css({height:b})}},f.iframeSrc=function(a,b){c("#"+h[0]+a).find("iframe").attr("src",b)},f.style=function(a,b){var d=c("#"+h[0]+a),f=d.attr("type"),g=d.find(h[1]).outerHeight()||0,i=d.find("."+h[6]).outerHeight()||0;(f===e.type[1]||f===e.type[2])&&(d.css(b),f===e.type[2]&&d.find("iframe").css({height:parseFloat(b.height)-g-i}))},f.min=function(a,b){var d=c("#"+h[0]+a),g=d.find(h[1]).outerHeight()||0;e.record(d),f.style(a,{width:180,height:g,overflow:"hidden"}),d.find(".layui-layer-min").hide(),"page"===d.attr("type")&&d.find(h[4]).hide(),e.rescollbar(a)},f.restore=function(a){var b=c("#"+h[0]+a),d=b.attr("area").split(",");b.attr("type");f.style(a,{width:parseFloat(d[0]),height:parseFloat(d[1]),top:parseFloat(d[2]),left:parseFloat(d[3]),overflow:"visible"}),b.find(".layui-layer-max").removeClass("layui-layer-maxmin"),b.find(".layui-layer-min").show(),"page"===b.attr("type")&&b.find(h[4]).show(),e.rescollbar(a)},f.full=function(a){var b,g=c("#"+h[0]+a);e.record(g),h.html.attr("layer-full")||h.html.css("overflow","hidden").attr("layer-full",a),clearTimeout(b),b=setTimeout(function(){var b="fixed"===g.css("position");f.style(a,{top:b?0:d.scrollTop(),left:b?0:d.scrollLeft(),width:d.width(),height:d.height()}),g.find(".layui-layer-min").hide()},100)},f.title=function(a,b){var d=c("#"+h[0]+(b||f.index)).find(h[1]);d.html(a)},f.close=function(a){var b=c("#"+h[0]+a),d=b.attr("type");if(b[0]){if(d===e.type[1]&&"object"===b.attr("conType")){b.children(":not(."+h[5]+")").remove();for(var g=0;2>g;g++)b.find(".layui-layer-wrap").unwrap().hide()}else{if(d===e.type[2])try{var i=c("#"+h[4]+a)[0];i.contentWindow.document.write(""),i.contentWindow.close(),b.find("."+h[5])[0].removeChild(i)}catch(j){}b[0].innerHTML="",b.remove()}c("#layui-layer-moves, #layui-layer-shade"+a).remove(),f.ie6&&e.reselect(),e.rescollbar(a),c(document).off("keydown",e.enter),"function"==typeof e.end[a]&&e.end[a](),delete e.end[a]}},f.closeAll=function(a){c.each(c("."+h[0]),function(){var b=c(this),d=a?b.attr("type")===a:1;d&&f.close(b.attr("times")),d=null})},e.run=function(){c=jQuery,d=c(a),h.html=c("html"),f.open=function(a){var b=new g(a);return b.index}},"function"==typeof define?define(function(){return e.run(),f}):function(){e.run(),f.use("skin/layer.css")}()}(window);
/*! jQuery Validation Plugin - v1.13.1 - 10/14/2014
 * http://jqueryvalidation.org/
 * Copyright (c) 2014 Jrn Zaefferer; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(b){c.settings.submitHandler&&(c.submitButton=b.target),a(b.target).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(b.target).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.submit(function(b){function d(){var d,e;return c.settings.submitHandler?(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),e=c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),void 0!==e?e:!1):!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c;return a(this[0]).is("form")?b=this.validate().form():(b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b})),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d,e,f,g,h,i,j=this[0];if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(b,c){i[c]=f[c],delete f[c],"required"===c&&a(j).removeAttr("aria-required")}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,delete g.required,g=a.extend({required:h},g),a(j).attr("aria-required","true")),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){return!!a.trim(""+a(b).val())},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,b){(9!==b.which||""!==this.elementValue(a))&&(a.name in this.submitted||a===this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,""),e=c.settings;e[d]&&!this.is(e.ignore)&&e[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){d[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",b).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c=this.clean(b),d=this.validationTargetFor(c),e=!0;return this.lastElement=d,void 0===d?delete this.invalid[c.name]:(this.prepareElement(d),this.currentElements=a(d),e=this.check(d)!==!1,e?delete this.invalid[d.name]:this.invalid[d.name]=!0),a(b).attr("aria-invalid",!e),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d=a(b),e=b.type;return"radio"===e||"checkbox"===e?a("input[name='"+b.name+"']:checked").val():"number"===e&&"undefined"!=typeof b.validity?b.validity.badInput?!1:d.val():(c=d.val(),"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f=a(b).rules(),g=a.map(f,function(a,b){return b}).length,h=!1,i=this.elementValue(b);for(d in f){e={method:d,parameters:f[d]};try{if(c=a.validator.methods[d].call(this,i,b,e.parameters),"dependency-mismatch"===c&&1===g){h=!0;continue}if(h=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",j),j}}if(!h)return this.objectLength(f)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a];return void 0},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,c){var d=this.defaultMessage(b,c.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),this.errorList.push({message:d,element:b,method:c.method}),this.errorMap[b.name]=d,this.submitted[b.name]=d},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g=this.errorsFor(b),h=this.idOrName(b),i=a(b).attr("aria-describedby");g.length?(g.removeClass(this.settings.validClass).addClass(this.settings.errorClass),g.html(c)):(g=a("<"+this.settings.errorElement+">").attr("id",h+"-error").addClass(this.settings.errorClass).html(c||""),d=g,this.settings.wrapper&&(d=g.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),p=$(b).parent(),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(p.hasClass('fg-line')?p[0]:b),g.is("label")?g.attr("for",h):0===g.parents("label[for='"+h+"']").length&&(f=g.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),i?i.match(new RegExp("\\b"+f+"\\b"))||(i+=" "+f):i=f,a(b).attr("aria-describedby",i),e=this.groups[b.name],e&&a.each(this.groups,function(b,c){c===e&&a("[name='"+b+"']",this.currentForm).attr("aria-describedby",g.attr("id"))}))),!c&&this.settings.success&&(g.text(""),"string"==typeof this.settings.success?g.addClass(this.settings.success):this.settings.success(g,b)),this.toShow=this.toShow.add(g)},errorsFor:function(b){var c=this.idOrName(b),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+d.replace(/\s+/g,", #")),this.errors().filter(e)},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name)),a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),/min|max/.test(c)&&(null===g||/number|range|text/.test(g))&&(d=Number(d)),d||0===d?e[c]=d:g===c&&"range"!==g&&(e[c]=!0);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b);for(c in a.validator.methods)d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()),void 0!==d&&(e[c]=d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:a.trim(b).length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return!1;var c,d,e=0,f=0,g=!1;if(a=a.replace(/\D/g,""),a.length<13||a.length>19)return!1;for(c=a.length-1;c>=0;c--)d=a.charAt(c),f=parseInt(d,10),g&&(f*=2)>9&&(f-=9),e+=f,g=!g;return e%10===0},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||d>=e},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e,f,g=this.previousValue(c);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),g.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=g.message,d="string"==typeof d&&{url:d}||d,g.old===b?g.valid:(g.old=b,e=this,this.startRequest(c),f={},f[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:f,context:e.currentForm,success:function(d){var f,h,i,j=d===!0||"true"===d;e.settings.messages[c.name].remote=g.originalMessage,j?(i=e.formSubmitted,e.prepareElement(c),e.formSubmitted=i,e.successList.push(c),delete e.invalid[c.name],e.showErrors()):(f={},h=d||e.defaultMessage(c,"remote"),f[c.name]=g.message=a.isFunction(h)?h(b):h,e.invalid[c.name]=!0,e.showErrors(f)),g.valid=j,e.stopRequest(c,j)}},d)),"pending")}}}),a.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var b,c={};a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);return e.is(b)?d.apply(e,arguments):void 0})}})});
/*! jQuery Validation Plugin - v1.13.1 - 10/14/2014
 * http://jqueryvalidation.org/
 * Copyright (c) 2014 J\u00f6rn Zaefferer; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery","../jquery.validate.min"],a):a(jQuery)}(function(a){a.extend(a.validator.messages,{required:"\u5fc5\u987b\u586b\u5199",remote:"\u8bf7\u4fee\u6b63\u6b64\u680f\u4f4d",email:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6",url:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7f51\u5740",date:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u65e5\u671f (YYYY-MM-DD)",number:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57",digits:"\u53ea\u53ef\u8f93\u5165\u6570\u5b57",creditcard:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u4fe1\u7528\u5361\u53f7\u7801",equalTo:"\u4f60\u7684\u8f93\u5165\u4e0d\u76f8\u540c",extension:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u540e\u7f00",maxlength:a.validator.format("\u6700\u591a {0} \u4e2a\u5b57"),minlength:a.validator.format("\u6700\u5c11 {0} \u4e2a\u5b57"),rangelength:a.validator.format("\u8bf7\u8f93\u5165\u957f\u5ea6\u4e3a {0} \u81f3 {1} \u4e4b\u9593\u7684\u5b57\u4e32"),range:a.validator.format("\u8bf7\u8f93\u5165 {0} \u81f3 {1} \u4e4b\u95f4\u7684\u6570\u503c"),max:a.validator.format("\u8bf7\u8f93\u5165\u4e0d\u5927\u4e8e {0} \u7684\u6570\u503c"),min:a.validator.format("\u8bf7\u8f93\u5165\u4e0d\u5c0f\u4e8e {0} \u7684\u6570\u503c")})});

!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return f({type:O.error,iconClass:g().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=g()),v=e("#"+t.containerId),v.length?v:(n&&(v=c(t)),v)}function i(e,t,n){return f({type:O.info,iconClass:g().iconClasses.info,message:e,optionsOverride:n,title:t})}function o(e){w=e}function s(e,t,n){return f({type:O.success,iconClass:g().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return f({type:O.warning,iconClass:g().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e){var t=g();v||n(t),l(e,t)||u(t)}function d(t){var i=g();return v||n(i),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove())}function u(t){for(var n=v.children(),i=n.length-1;i>=0;i--)l(e(n[i]),t)}function l(t,n){return t&&0===e(":focus",t).length?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0):!1}function c(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function m(e){w&&w(e)}function f(t){function i(t){return!e(":focus",l).length||t?(clearTimeout(O.intervalId),l[r.hideMethod]({duration:r.hideDuration,easing:r.hideEasing,complete:function(){h(l),r.onHidden&&"hidden"!==b.state&&r.onHidden(),b.state="hidden",b.endTime=new Date,m(b)}})):void 0}function o(){(r.timeOut>0||r.extendedTimeOut>0)&&(u=setTimeout(i,r.extendedTimeOut),O.maxHideTime=parseFloat(r.extendedTimeOut),O.hideEta=(new Date).getTime()+O.maxHideTime)}function s(){clearTimeout(u),O.hideEta=0,l.stop(!0,!0)[r.showMethod]({duration:r.showDuration,easing:r.showEasing})}function a(){var e=(O.hideEta-(new Date).getTime())/O.maxHideTime*100;f.width(e+"%")}var r=g(),d=t.iconClass||r.iconClass;if("undefined"!=typeof t.optionsOverride&&(r=e.extend(r,t.optionsOverride),d=t.optionsOverride.iconClass||d),r.preventDuplicates){if(t.message===C)return;C=t.message}T++,v=n(r,!0);var u=null,l=e("<div/>"),c=e("<div/>"),p=e("<div/>"),f=e("<div/>"),w=e(r.closeHtml),O={intervalId:null,hideEta:null,maxHideTime:null},b={toastId:T,state:"visible",startTime:new Date,options:r,map:t};return t.iconClass&&l.addClass(r.toastClass).addClass(d),t.title&&(c.append(t.title).addClass(r.titleClass),l.append(c)),t.message&&(p.append(t.message).addClass(r.messageClass),l.append(p)),r.closeButton&&(w.addClass("toast-close-button").attr("role","button"),l.prepend(w)),r.progressBar&&(f.addClass("toast-progress"),l.prepend(f)),l.hide(),r.newestOnTop?v.prepend(l):v.append(l),l[r.showMethod]({duration:r.showDuration,easing:r.showEasing,complete:r.onShown}),r.timeOut>0&&(u=setTimeout(i,r.timeOut),O.maxHideTime=parseFloat(r.timeOut),O.hideEta=(new Date).getTime()+O.maxHideTime,r.progressBar&&(O.intervalId=setInterval(a,10))),l.hover(s,o),!r.onclick&&r.tapToDismiss&&l.click(i),r.closeButton&&w&&w.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),i(!0)}),r.onclick&&l.click(function(){r.onclick(),i()}),m(b),r.debug&&console&&console.log(b),l}function g(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),C=void 0))}var v,w,C,T=0,O={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:d,error:t,getContainer:n,info:i,options:{},subscribe:o,success:s,version:"2.1.0",warning:a};return b}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});
//# sourceMappingURL=/toastr.js.map

(function(A){if(typeof define==="function"&&define.amd){define(["jquery","../grid.base"],A)}else{A(jQuery)}}(function(A){A.jgrid=A.jgrid||{};if(!A.jgrid.hasOwnProperty("regional")){A.jgrid.regional=[]}A.jgrid.regional.cn={defaults:{recordtext:"\u7b2c{0}\u5230\u7b2c{1}\u6761\u3000\u5171 {2} \u6761",emptyrecords:"\u6ca1\u6709\u8bb0\u5f55\uff01",loadtext:"\u8bfb\u53d6\u4e2d...",savetext:"\u4fdd\u5b58\u4e2d...",pgtext:"\u7b2c{0}\u9875\u3000\u5171{1}\u9875",pgfirst:"\u7b2c\u4e00\u9875",pglast:"\u6700\u540e\u4e00\u9875",pgnext:"\u4e0b\u4e00\u9875",pgprev:"\u4e0a\u4e00\u9875",pgrecs:"\u6bcf\u9875\u8bb0\u5f55\u6570",showhide:"\u5207\u6362 \u5c55\u5f00 \u6298\u53e0 \u8868\u683c",pagerCaption:"\u8868\u683c::\u9875\u9762\u8bbe\u7f6e",pageText:"Page:",recordPage:"\u6bcf\u9875\u8bb0\u5f55\u6570",nomorerecs:"\u6ca1\u6709\u66f4\u591a\u8bb0\u5f55...",scrollPullup:"\u52a0\u8f7d\u66f4\u591a...",scrollPulldown:"\u5237\u65b0...",scrollRefresh:"\u6eda\u52a8\u5237\u65b0..."},search:{caption:"\u641c\u7d22...",Find:"\u67e5\u627e",Reset:"\u91cd\u7f6e",odata:[{oper:"eq",text:"\u7b49\u4e8e\u3000\u3000"},{oper:"ne",text:"\u4e0d\u7b49\u4e8e\u3000"},{oper:"lt",text:"\u5c0f\u4e8e\u3000\u3000"},{oper:"le",text:"\u5c0f\u4e8e\u7b49\u4e8e"},{oper:"gt",text:"\u5927\u4e8e\u3000\u3000"},{oper:"ge",text:"\u5927\u4e8e\u7b49\u4e8e"},{oper:"bw",text:"\u5f00\u5934\u662f"},{oper:"bn",text:"\u5f00\u5934\u4e0d\u662f"},{oper:"in",text:"\u5c5e\u4e8e\u3000\u3000"},{oper:"ni",text:"\u4e0d\u5c5e\u4e8e"},{oper:"ew",text:"\u7ed3\u5c3e\u662f"},{oper:"en",text:"\u7ed3\u5c3e\u4e0d\u662f"},{oper:"cn",text:"\u5305\u542b\u3000\u3000"},{oper:"nc",text:"\u4e0d\u5305\u542b"},{oper:"nu",text:"\u4e3a\u7a7a"},{oper:"nn",text:"\u4e0d\u4e3a\u7a7a"},{oper:"bt",text:"\u533a\u95f4"}],groupOps:[{op:"AND",text:"\u6ee1\u8db3\u6240\u6709\u6761\u4ef6"},{op:"OR",text:"\u6ee1\u8db3\u4efb\u4e00\u6761\u4ef6"}],operandTitle:"\u5355\u51fb\u8fdb\u884c\u641c\u7d22\u3002",resetTitle:"\u91cd\u7f6e\u641c\u7d22\u6761\u4ef6",addsubgrup:"\u6dfb\u52a0\u6761\u4ef6\u7ec4",addrule:"\u6dfb\u52a0\u6761\u4ef6",delgroup:"\u5220\u9664\u6761\u4ef6\u7ec4",delrule:"\u5220\u9664\u6761\u4ef6"},edit:{addCaption:"\u6dfb\u52a0\u8bb0\u5f55",editCaption:"\u7f16\u8f91\u8bb0\u5f55",bSubmit:"\u63d0\u4ea4",bCancel:"\u53d6\u6d88",bClose:"\u5173\u95ed",saveData:"\u6570\u636e\u5df2\u4fee\u6539\uff0c\u662f\u5426\u4fdd\u5b58\uff1f",bYes:"\u662f",bNo:"\u5426",bExit:"\u53d6\u6d88",msg:{required:"\u6b64\u5b57\u6bb5\u5fc5\u9700",number:"\u8bf7\u8f93\u5165\u6709\u6548\u6570\u5b57",minValue:"\u8f93\u503c\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e ",maxValue:"\u8f93\u503c\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e ",email:"\u8fd9\u4e0d\u662f\u6709\u6548\u7684e-mail\u5730\u5740",integer:"\u8bf7\u8f93\u5165\u6709\u6548\u6574\u6570",date:"\u8bf7\u8f93\u5165\u6709\u6548\u65f6\u95f4",url:"\u65e0\u6548\u7f51\u5740\u3002\u524d\u7f00\u5fc5\u987b\u4e3a ('http://' \u6216 'https://')",nodefined:" \u672a\u5b9a\u4e49\uff01",novalue:" \u9700\u8981\u8fd4\u56de\u503c\uff01",customarray:"\u81ea\u5b9a\u4e49\u51fd\u6570\u9700\u8981\u8fd4\u56de\u6570\u7ec4\uff01",customfcheck:"\u5fc5\u987b\u6709\u81ea\u5b9a\u4e49\u51fd\u6570!"}},view:{caption:"\u67e5\u770b\u8bb0\u5f55",bClose:"\u5173\u95ed"},del:{caption:"\u5220\u9664",msg:"\u5220\u9664\u6240\u9009\u8bb0\u5f55\uff1f",bSubmit:"\u5220\u9664",bCancel:"\u53d6\u6d88"},nav:{edittext:"",edittitle:"\u7f16\u8f91\u6240\u9009\u8bb0\u5f55",addtext:"",addtitle:"\u6dfb\u52a0\u65b0\u8bb0\u5f55",deltext:"",deltitle:"\u5220\u9664\u6240\u9009\u8bb0\u5f55",searchtext:"",searchtitle:"\u67e5\u627e",refreshtext:"",refreshtitle:"\u5237\u65b0\u8868\u683c",alertcap:"\u6ce8\u610f",alerttext:"\u8bf7\u9009\u62e9\u8bb0\u5f55",viewtext:"",viewtitle:"\u67e5\u770b\u6240\u9009\u8bb0\u5f55",savetext:"",savetitle:"\u4fdd\u5b58\u8bb0\u5f55",canceltext:"",canceltitle:"\u53d6\u6d88\u7f16\u8f91\u8bb0\u5f55",selectcaption:"\u64cd\u4f5c..."},col:{caption:"\u9009\u62e9\u5217",bSubmit:"\u786e\u5b9a",bCancel:"\u53d6\u6d88"},errors:{errcap:"\u9519\u8bef",nourl:"\u6ca1\u6709\u8bbe\u7f6eurl",norecords:"\u6ca1\u6709\u9700\u8981\u5904\u7406\u7684\u8bb0\u5f55",model:"colNames \u548c colModel \u957f\u5ea6\u4e0d\u7b49\uff01"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d",],monthNames:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c","\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],AmPm:["am","pm","\u4e0a\u5348","\u4e0b\u5348"],S:function(B){return B<11||B>13?["st","nd","rd","th"][Math.min((B-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"Y-m-d",parseRe:/[#%\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:false,userLocalTime:false},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:true},idName:"id"},colmenu:{sortasc:"\u5347\u5e8f\u6392\u5e8f",sortdesc:"\u964d\u5e8f\u6392\u5e8f",columns:"\u5217",filter:"\u7b5b\u9009",grouping:"\u5206\u7c7b",ungrouping:"\u53d6\u6d88\u5206\u7c7b",searchTitle:"\u67e5\u627e:",freeze:"\u51bb\u7ed3",unfreeze:"\u53d6\u6d88\u51bb\u7ed3",reorder:"\u91cd\u65b0\u6392\u5e8f"}}}));
(function(A){if(typeof define==="function"&&define.amd){define(["jquery"],A)}else{A(jQuery)}}(function($){$.jgrid=$.jgrid||{};if(!$.jgrid.hasOwnProperty("defaults")){$.jgrid.defaults={}}$.extend($.jgrid,{version:"5.2.0",htmlDecode:function(value){if(value&&(value==="&nbsp;"||value==="&#160;"||(value.length===1&&value.charCodeAt(0)===160))){return""}return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},template:function(format){var args=$.makeArray(arguments).slice(1),j,al=args.length;if(format==null){format=""}return format.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(m,i){if(!isNaN(parseInt(i,10))){return args[parseInt(i,10)]}for(j=0;j<al;j++){if($.isArray(args[j])){var nmarr=args[j],k=nmarr.length;while(k--){if(i===nmarr[k].nm){return nmarr[k].v}}}}})},msie:function(){return $.jgrid.msiever()>0},msiever:function(){var rv=0,sAgent=window.navigator.userAgent,Idx=sAgent.indexOf("MSIE");if(Idx>0){rv=parseInt(sAgent.substring(Idx+5,sAgent.indexOf(".",Idx)))}else{if(!!navigator.userAgent.match(/Trident\/7\./)){rv=11}}return rv},getCellIndex:function(cell){var c=$(cell);if(c.is("tr")){return -1}c=(!c.is("td")&&!c.is("th")?c.closest("td,th"):c)[0];if($.jgrid.msie()){return $.inArray(c,c.parentNode.cells)}return c.cellIndex},stripHtml:function(v){v=String(v);var regexp=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(v){v=v.replace(regexp,"");return(v&&v!=="&nbsp;"&&v!=="&#160;")?v.replace(/\"/g,"'"):""}return v},stripPref:function(pref,id){var obj=$.type(pref);if(obj==="string"||obj==="number"){pref=String(pref);id=pref!==""?String(id).replace(String(pref),""):id}return id},useJSON:true,parse:function(jsonString){var js=jsonString;if(js.substr(0,9)==="while(1);"){js=js.substr(9)}if(js.substr(0,2)==="/*"){js=js.substr(2,js.length-4)}if(!js){js="{}"}return($.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function")?JSON.parse(js):eval("("+js+")")},parseDate:function(format,date,newformat,opts){var token=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,msDateRegExp=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),msMatch=((typeof date==="string")?date.match(msDateRegExp):null),pad=function(value,length){value=String(value);length=parseInt(length,10)||2;while(value.length<length){value="0"+value}return value},ts={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},timestamp=0,dM,k,hl,h12to24=function(ampm,h){if(ampm===0){if(h===12){h=0}}else{if(h!==12){h+=12}}return h},offset=0;if(opts===undefined){opts=$.jgrid.getRegional(this,"formatter.date")}if(opts.parseRe===undefined){opts.parseRe=/[#%\\\/:_;.,\t\s-]/}if(opts.masks.hasOwnProperty(format)){format=opts.masks[format]}if(date&&date!=null){if(!isNaN(date-0)&&String(format).toLowerCase()==="u"){timestamp=new Date(parseFloat(date)*1000)}else{if(date.constructor===Date){timestamp=date}else{if(msMatch!==null){timestamp=new Date(parseInt(msMatch[1],10));if(msMatch[3]){offset=Number(msMatch[5])*60+Number(msMatch[6]);offset*=((msMatch[4]==="-")?1:-1);offset-=timestamp.getTimezoneOffset();timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}else{if(opts.srcformat==="ISO8601Long"&&date.charAt(date.length-1)==="Z"){offset-=(new Date()).getTimezoneOffset()}date=String(date).replace(/\T/g,"#").replace(/\t/,"%").split(opts.parseRe);format=format.replace(/\T/g,"#").replace(/\t/,"%").split(opts.parseRe);for(k=0,hl=format.length;k<hl;k++){switch(format[k]){case"M":dM=$.inArray(date[k],opts.monthNames);if(dM!==-1&&dM<12){date[k]=dM+1;ts.m=date[k]}break;case"F":dM=$.inArray(date[k],opts.monthNames,12);if(dM!==-1&&dM>11){date[k]=dM+1-12;ts.m=date[k]}break;case"n":format[k]="m";break;case"j":format[k]="d";break;case"a":dM=$.inArray(date[k],opts.AmPm);if(dM!==-1&&dM<2&&date[k]===opts.AmPm[dM]){date[k]=dM;ts.h=h12to24(date[k],ts.h)}break;case"A":dM=$.inArray(date[k],opts.AmPm);if(dM!==-1&&dM>1&&date[k]===opts.AmPm[dM]){date[k]=dM-2;ts.h=h12to24(date[k],ts.h)}break;case"g":ts.h=parseInt(date[k],10);break}if(date[k]!==undefined){ts[format[k].toLowerCase()]=parseInt(date[k],10)}}if(ts.f){ts.m=ts.f}if(ts.m===0&&ts.y===0&&ts.d===0){return"&#160;"}ts.m=parseInt(ts.m,10)-1;var ty=ts.y;if(ty>=70&&ty<=99){ts.y=1900+ts.y}else{if(ty>=0&&ty<=69){ts.y=2000+ts.y}}timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u);if(offset!==0){timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}}}}else{timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u)}if(opts.userLocalTime&&offset===0){offset-=(new Date()).getTimezoneOffset();if(offset!==0){timestamp.setTime(Number(Number(timestamp)+(offset*60*1000)))}}if(newformat===undefined){return timestamp}if(opts.masks.hasOwnProperty(newformat)){newformat=opts.masks[newformat]}else{if(!newformat){newformat="Y-m-d"}}var G=timestamp.getHours(),i=timestamp.getMinutes(),j=timestamp.getDate(),n=timestamp.getMonth()+1,o=timestamp.getTimezoneOffset(),s=timestamp.getSeconds(),u=timestamp.getMilliseconds(),w=timestamp.getDay(),Y=timestamp.getFullYear(),N=(w+6)%7+1,z=(new Date(Y,n-1,j)-new Date(Y,0,1))/86400000,flags={d:pad(j),D:opts.dayNames[w],j:j,l:opts.dayNames[w+7],N:N,S:opts.S(j),w:w,z:z,W:N<5?Math.floor((z+N-1)/7)+1:Math.floor((z+N-1)/7)||((new Date(Y-1,0,1).getDay()+6)%7<4?53:52),F:opts.monthNames[n-1+12],m:pad(n),M:opts.monthNames[n-1],n:n,t:"?",L:"?",o:"?",Y:Y,y:String(Y).substring(2),a:G<12?opts.AmPm[0]:opts.AmPm[1],A:G<12?opts.AmPm[2]:opts.AmPm[3],B:"?",g:G%12||12,G:G,h:pad(G%12||12),H:pad(G),i:pad(i),s:pad(s),u:u,e:"?",I:"?",O:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),P:"?",T:(String(timestamp).match(timezone)||[""]).pop().replace(timezoneClip,""),Z:"?",c:"?",r:"?",U:Math.floor(timestamp/1000)};return newformat.replace(token,function($0){return flags.hasOwnProperty($0)?flags[$0]:$0.substring(1)})},jqID:function(sid){return String(sid).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(prefix){return(prefix||$.jgrid.uidPref)+($.jgrid.guid++)},getAccessor:function(obj,expr){var ret,p,prm=[],i;if(typeof expr==="function"){return expr(obj)}ret=obj[expr];if(ret===undefined){try{if(typeof expr==="string"){prm=expr.split(".")}i=prm.length;if(i){ret=obj;while(ret&&i--){p=prm.shift();ret=ret[p]}}}catch(e){}}return ret},getXmlData:function(obj,expr,returnObj){var ret,m=typeof expr==="string"?expr.match(/^(.*)\[(\w+)\]$/):null;if(typeof expr==="function"){return expr(obj)}if(m&&m[2]){return m[1]?$(m[1],obj).attr(m[2]):$(obj).attr(m[2])}ret=$(expr,obj);if(returnObj){return ret}return ret.length>0?$(ret).text():undefined},cellWidth:function(){var $testDiv=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),testCell=$testDiv.appendTo("body").find("td").width();$testDiv.remove();return Math.abs(testCell-5)>0.1},isLocalStorage:function(){try{return"localStorage" in window&&window.localStorage!==null}catch(e){return false}},getRegional:function(inst,param,def_val){var ret;if(def_val!==undefined){return def_val}if(inst.p&&inst.p.regional&&$.jgrid.regional){ret=$.jgrid.getAccessor($.jgrid.regional[inst.p.regional]||{},param)}if(ret===undefined){ret=$.jgrid.getAccessor($.jgrid,param)}return ret},isMobile:function(){try{if(/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)){return true}return false}catch(e){return false}},cell_width:true,ajaxOptions:{},from:function(source){var $t=this,QueryObject=function(d,q){if(typeof d==="string"){d=$.data(d)}var self=this,_data=d,_usecase=true,_trim=false,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=false,_queuedOperator="",_sorting=[],_useProperties=true;if(typeof d==="object"&&d.push){if(d.length>0){if(typeof d[0]!=="object"){_useProperties=false}else{_useProperties=true}}}else{throw"data provides is not an array"}this._hasData=function(){return _data===null?false:_data.length===0?false:true};this._getStr=function(s){var phrase=[];if(_trim){phrase.push("jQuery.trim(")}phrase.push("String("+s+")");if(_trim){phrase.push(")")}if(!_usecase){phrase.push(".toLowerCase()")}return phrase.join("")};this._strComp=function(val){if(typeof val==="string"){return".toString()"}return""};this._group=function(f,u){return({field:f.toString(),unique:u,items:[]})};this._toStr=function(phrase){if(_trim){phrase=$.trim(phrase)}phrase=phrase.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return _usecase?phrase:phrase.toLowerCase()};this._funcLoop=function(func){var results=[];$.each(_data,function(i,v){results.push(func(v))});return results};this._append=function(s){var i;if(_query===null){_query=""}else{_query+=_queuedOperator===""?" && ":_queuedOperator}for(i=0;i<_orDepth;i++){_query+="("}if(_negate){_query+="!"}_query+="("+s+")";_negate=false;_queuedOperator="";_orDepth=0};this._setCommand=function(f,c){_lastCommand=f;_lastField=c};this._resetNegate=function(){_negate=false};this._repeatCommand=function(f,v){if(_lastCommand===null){return self}if(f!==null&&v!==null){return _lastCommand(f,v)}if(_lastField===null){return _lastCommand(f)}if(!_useProperties){return _lastCommand(f)}return _lastCommand(_lastField,f)};this._equals=function(a,b){return(self._compare(a,b,1)===0)};this._compare=function(a,b,d){var toString=Object.prototype.toString;if(d===undefined){d=1}if(a===undefined){a=null}if(b===undefined){b=null}if(a===null&&b===null){return 0}if(a===null&&b!==null){return 1}if(a!==null&&b===null){return -1}if(toString.call(a)==="[object Date]"&&toString.call(b)==="[object Date]"){if(a<b){return -d}if(a>b){return d}return 0}if(!_usecase&&typeof a!=="number"&&typeof b!=="number"){a=String(a);b=String(b)}if(a<b){return -d}if(a>b){return d}return 0};this._performSort=function(){if(_sorting.length===0){return }_data=self._doSort(_data,0)};this._doSort=function(d,q){var by=_sorting[q].by,dir=_sorting[q].dir,type=_sorting[q].type,dfmt=_sorting[q].datefmt,sfunc=_sorting[q].sfunc;if(q===_sorting.length-1){return self._getOrder(d,by,dir,type,dfmt,sfunc)}q++;var values=self._getGroup(d,by,dir,type,dfmt),results=[],i,j,sorted;for(i=0;i<values.length;i++){sorted=self._doSort(values[i].items,q);for(j=0;j<sorted.length;j++){results.push(sorted[j])}}return results};this._getOrder=function(data,by,dir,type,dfmt,sfunc){var sortData=[],_sortData=[],newDir=dir==="a"?1:-1,i,ab,j,findSortKey;if(type===undefined){type="text"}if(type==="float"||type==="number"||type==="currency"||type==="numeric"){findSortKey=function($cell){var key=parseFloat(String($cell).replace(_stripNum,""));return isNaN(key)?Number.NEGATIVE_INFINITY:key}}else{if(type==="int"||type==="integer"){findSortKey=function($cell){return $cell?parseFloat(String($cell).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}}else{if(type==="date"||type==="datetime"){findSortKey=function($cell){return $.jgrid.parseDate.call($t,dfmt,$cell).getTime()}}else{if($.isFunction(type)){findSortKey=type}else{findSortKey=function($cell){$cell=$cell?$.trim(String($cell)):"";return _usecase?$cell:$cell.toLowerCase()}}}}}$.each(data,function(i,v){ab=by!==""?$.jgrid.getAccessor(v,by):v;if(ab===undefined){ab=""}ab=findSortKey(ab,v);_sortData.push({vSort:ab,index:i})});if($.isFunction(sfunc)){_sortData.sort(function(a,b){return sfunc.call(this,a.vSort,b.vSort,newDir,a,b)})}else{_sortData.sort(function(a,b){return self._compare(a.vSort,b.vSort,newDir)})}j=0;var nrec=data.length;while(j<nrec){i=_sortData[j].index;sortData.push(data[i]);j++}return sortData};this._getGroup=function(data,by,dir,type,dfmt){var results=[],group=null,last=null,val;$.each(self._getOrder(data,by,dir,type,dfmt),function(i,v){val=$.jgrid.getAccessor(v,by);if(val==null){val=""}if(!self._equals(last,val)){last=val;if(group!==null){results.push(group)}group=self._group(by,val)}group.items.push(v)});if(group!==null){results.push(group)}return results};this.ignoreCase=function(){_usecase=false;return self};this.useCase=function(){_usecase=true;return self};this.trim=function(){_trim=true;return self};this.noTrim=function(){_trim=false;return self};this.execute=function(){var match=_query,results=[];if(match===null){return self}$.each(_data,function(){if(eval(match)){results.push(this)}});_data=results;return self};this.data=function(){return _data};this.select=function(f){self._performSort();if(!self._hasData()){return[]}self.execute();if($.isFunction(f)){var results=[];$.each(_data,function(i,v){results.push(f(v))});return results}return _data};this.hasMatch=function(){if(!self._hasData()){return false}self.execute();return _data.length>0};this.andNot=function(f,v,x){_negate=!_negate;return self.and(f,v,x)};this.orNot=function(f,v,x){_negate=!_negate;return self.or(f,v,x)};this.not=function(f,v,x){return self.andNot(f,v,x)};this.and=function(f,v,x){_queuedOperator=" && ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.or=function(f,v,x){_queuedOperator=" || ";if(f===undefined){return self}return self._repeatCommand(f,v,x)};this.orBegin=function(){_orDepth++;return self};this.orEnd=function(){if(_query!==null){_query+=")"}return self};this.isNot=function(f){_negate=!_negate;return self.is(f)};this.is=function(f){self._append("this."+f);self._resetNegate();return self};this._compareValues=function(func,f,v,how,t){var fld;if(_useProperties){fld="jQuery.jgrid.getAccessor(this,'"+f+"')"}else{fld="this"}if(v===undefined){v=null}var val=v,swst=t.stype===undefined?"text":t.stype;if(v!==null){switch(swst){case"int":case"integer":val=(isNaN(Number(val))||val==="")?"0":val;fld="parseInt("+fld+",10)";val="parseInt("+val+",10)";break;case"float":case"number":case"numeric":val=String(val).replace(_stripNum,"");val=(isNaN(Number(val))||val==="")?"0":val;fld="parseFloat("+fld+")";val="parseFloat("+val+")";break;case"date":case"datetime":val=String($.jgrid.parseDate.call($t,t.srcfmt||"Y-m-d",val).getTime());fld='jQuery.jgrid.parseDate.call(jQuery("#'+$.jgrid.jqID($t.p.id)+'")[0],"'+t.srcfmt+'",'+fld+").getTime()";break;default:fld=self._getStr(fld);val=self._getStr('"'+self._toStr(val)+'"')}}self._append(fld+" "+how+" "+val);self._setCommand(func,f);self._resetNegate();return self};this.equals=function(f,v,t){return self._compareValues(self.equals,f,v,"==",t)};this.notEquals=function(f,v,t){return self._compareValues(self.equals,f,v,"!==",t)};this.isNull=function(f,v,t){return self._compareValues(self.equals,f,null,"===",t)};this.greater=function(f,v,t){return self._compareValues(self.greater,f,v,">",t)};this.less=function(f,v,t){return self._compareValues(self.less,f,v,"<",t)};this.greaterOrEquals=function(f,v,t){return self._compareValues(self.greaterOrEquals,f,v,">=",t)};this.lessOrEquals=function(f,v,t){return self._compareValues(self.lessOrEquals,f,v,"<=",t)};this.startsWith=function(f,v){var val=(v==null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(v)+'"'))}else{if(v!=null){length=_trim?$.trim(v.toString()).length:v.toString().length}self._append(self._getStr("this")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(f)+'"'))}self._setCommand(self.startsWith,f);self._resetNegate();return self};this.endsWith=function(f,v){var val=(v==null)?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".length-"+length+","+length+') == "'+self._toStr(v)+'"')}else{self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(f)+'".length,"'+self._toStr(f)+'".length) == "'+self._toStr(f)+'"')}self._setCommand(self.endsWith,f);self._resetNegate();return self};this.contains=function(f,v){if(_useProperties){self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+'.indexOf("'+self._toStr(v)+'",0) > -1')}else{self._append(self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1')}self._setCommand(self.contains,f);self._resetNegate();return self};this.groupBy=function(by,dir,type,datefmt){if(!self._hasData()){return null}return self._getGroup(_data,by,dir,type,datefmt)};this.orderBy=function(by,dir,stype,dfmt,sfunc){dir=dir==null?"a":$.trim(dir.toString().toLowerCase());if(stype==null){stype="text"}if(dfmt==null){dfmt="Y-m-d"}if(sfunc==null){sfunc=false}if(dir==="desc"||dir==="descending"){dir="d"}if(dir==="asc"||dir==="ascending"){dir="a"}_sorting.push({by:by,dir:dir,type:stype,datefmt:dfmt,sfunc:sfunc});return self};return self};return new QueryObject(source,null)},getMethod:function(name){return this.getAccessor($.fn.jqGrid,name)},extend:function(methods){$.extend($.fn.jqGrid,methods);if(!this.no_legacy_api){$.fn.extend(methods)}},clearBeforeUnload:function(jqGridId){var $t=$("#"+$.jgrid.jqID(jqGridId))[0],grid;if(!$t.grid){return }grid=$t.grid;if($.isFunction(grid.emptyRows)){grid.emptyRows.call($t,true,true)}$(document).off("mouseup.jqGrid"+$t.p.id);$(grid.hDiv).off("mousemove");$($t).off();var i,l=grid.headers.length,removevents=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p","addLocalData"];for(i=0;i<l;i++){grid.headers[i].el=null}for(i in grid){if(grid.hasOwnProperty(i)){grid[i]=null}}for(i in $t.p){if($t.p.hasOwnProperty(i)){$t.p[i]=$.isArray($t.p[i])?[]:null}}l=removevents.length;for(i=0;i<l;i++){if($t.hasOwnProperty(removevents[i])){$t[removevents[i]]=null;delete ($t[removevents[i]])}}},gridUnload:function(jqGridId){if(!jqGridId){return }jqGridId=$.trim(jqGridId);if(jqGridId.indexOf("#")===0){jqGridId=jqGridId.substring(1)}var $t=$("#"+$.jgrid.jqID(jqGridId))[0];if(!$t.grid){return }var defgrid={id:$($t).attr("id"),cl:$($t).attr("class")};if($t.p.pager){$($t.p.pager).off().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom")}var newtable=document.createElement("table");newtable.className=defgrid.cl;var gid=$.jgrid.jqID($t.id);$(newtable).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+gid);if($($t.p.pager).parents("#gbox_"+gid).length===1){$($t.p.pager).insertBefore("#gbox_"+gid)}$.jgrid.clearBeforeUnload(jqGridId);$("#gbox_"+gid).remove();$(newtable).attr({id:defgrid.id});$("#alertmod_"+$.jgrid.jqID(jqGridId)).remove()},gridDestroy:function(jqGridId){if(!jqGridId){return }jqGridId=$.trim(jqGridId);if(jqGridId.indexOf("#")===0){jqGridId=jqGridId.substring(1)}var $t=$("#"+$.jgrid.jqID(jqGridId))[0];if(!$t.grid){return }if($t.p.pager){$($t.p.pager).remove()}try{$.jgrid.clearBeforeUnload(jqGridId);$("#gbox_"+$.jgrid.jqID(jqGridId)).remove()}catch(_){}},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",stripedTable:"ui-jqgrid-table-striped",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all ui-dialog",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"},colmenu:{menu_widget:"ui-widget ui-widget-content ui-corner-all",input_checkbox:"ui-widget ui-widget-content",filter_select:"ui-widget-content ui-corner-all",filter_input:"ui-widget-content ui-corner-all",icon_menu:"ui-icon-comment",icon_sort_asc:"ui-icon-arrow-1-n",icon_sort_desc:"ui-icon-arrow-1-s",icon_columns:"ui-icon-extlink",icon_filter:"ui-icon-calculator",icon_group:"ui-icon-grip-solid-horizontal",icon_freeze:"ui-icon-grip-solid-vertical",icon_move:"ui-icon-arrow-4"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",stripedTable:"table-striped",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control",icon_menu:"glyphicon-menu-hamburger",icon_sort_asc:"glyphicon-sort-by-alphabet",icon_sort_desc:"glyphicon-sort-by-alphabet-alt",icon_columns:"glyphicon-list-alt",icon_filter:"glyphicon-filter",icon_group:"glyphicon-align-left",icon_freeze:"glyphicon-object-align-horizontal",icon_move:"glyphicon-move"}}}});$.fn.jqGrid=function(pin){if(typeof pin==="string"){var fn=$.jgrid.getMethod(pin);if(!fn){throw ("jqGrid - No such method: "+pin)}var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}return this.each(function(){if(this.grid){return }var localData;if(pin!=null&&pin.data!==undefined){localData=pin.data;pin.data=[]}var p=$.extend(true,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,multiboxonly:false,multimail:false,multiselectWidth:30,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,gridview:true,rownumWidth:35,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:false,headertitles:false,scrollTimeout:40,data:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:false},ignoreCase:true,cmTemplate:{},idPrefix:"",multiSort:false,minColWidth:33,scrollPopUp:false,scrollTopOffset:0,scrollLeftOffset:"100%",storeNavOptions:false,regional:"en",styleUI:"jQueryUI",responsive:false,restoreCellonFail:true,colFilters:{},colMenu:false},$.jgrid.defaults,pin);if(localData!==undefined){p.data=localData;pin.data=localData}var ts=this,grid={headers:[],cols:[],footers:[],dragStart:function(i,x,y){var gridLeftPos=$(this.bDiv).offset().left;this.resizing={idx:i,startX:x.pageX,sOL:x.pageX-gridLeftPos};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.jgrid.jqID(p.id),"#gbox_"+$.jgrid.jqID(p.id));this.curGbox.css({display:"block",left:x.pageX-gridLeftPos,top:y[1],height:y[2]});$(ts).triggerHandler("jqGridResizeStart",[x,i]);if($.isFunction(p.resizeStart)){p.resizeStart.call(ts,x,i)}document.onselectstart=function(){return false}},dragMove:function(x){if(this.resizing){var diff=x.pageX-this.resizing.startX,h=this.headers[this.resizing.idx],newWidth=p.direction==="ltr"?h.width+diff:h.width-diff,hn,nWn;if(newWidth>33){this.curGbox.css({left:this.resizing.sOL+diff});if(p.forceFit===true){hn=this.headers[this.resizing.idx+p.nv];nWn=p.direction==="ltr"?hn.width-diff:hn.width+diff;if(nWn>p.minColWidth){h.newWidth=newWidth;hn.newWidth=nWn}}else{this.newWidth=p.direction==="ltr"?p.tblwidth+diff:p.tblwidth-diff;h.newWidth=newWidth}}}},dragEnd:function(events){this.hDiv.style.cursor="default";if(this.resizing){var idx=this.resizing.idx,nw=this.headers[idx].newWidth||this.headers[idx].width;nw=parseInt(nw,10);this.resizing=false;$("#rs_m"+$.jgrid.jqID(p.id)).css("display","none");p.colModel[idx].width=nw;this.headers[idx].width=nw;this.headers[idx].el.style.width=nw+"px";this.cols[idx].style.width=nw+"px";if(this.footers.length>0){this.footers[idx].style.width=nw+"px"}if(p.forceFit===true){nw=this.headers[idx+p.nv].newWidth||this.headers[idx+p.nv].width;this.headers[idx+p.nv].width=nw;this.headers[idx+p.nv].el.style.width=nw+"px";this.cols[idx+p.nv].style.width=nw+"px";if(this.footers.length>0){this.footers[idx+p.nv].style.width=nw+"px"}p.colModel[idx+p.nv].width=nw}else{p.tblwidth=this.newWidth||p.tblwidth;$("table:first",this.bDiv).css("width",p.tblwidth+"px");$("table:first",this.hDiv).css("width",p.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(p.footerrow){$("table:first",this.sDiv).css("width",p.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}if(events){$(ts).triggerHandler("jqGridResizeStop",[nw,idx]);if($.isFunction(p.resizeStop)){p.resizeStop.call(ts,nw,idx)}}}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){if(grid.timer){clearTimeout(grid.timer)}grid.timer=null;var dh=$(grid.bDiv).height();if(!dh){return }var table=$("table:first",grid.bDiv);var rows,rh;if(table[0].rows.length){try{rows=table[0].rows[1];rh=rows?$(rows).outerHeight()||grid.prevRowHeight:grid.prevRowHeight}catch(pv){rh=grid.prevRowHeight}}if(!rh){return }grid.prevRowHeight=rh;var rn=p.rowNum;var scrollTop=grid.scrollTop=grid.bDiv.scrollTop;var ttop=Math.round(table.position().top)-scrollTop;var tbot=ttop+table.height();var div=rh*rn;var page,npage,empty;if(tbot<dh&&ttop<=0&&(p.lastpage===undefined||(parseInt((tbot+scrollTop+div-1)/div,10)||0)<=p.lastpage)){npage=parseInt((dh-tbot+div-1)/div,10)||1;if(tbot>=0||npage<2||p.scroll===true){page=(Math.round((tbot+scrollTop)/div)||0)+1;ttop=-1}else{ttop=1}}if(ttop>0){page=(parseInt(scrollTop/div,10)||0)+1;npage=(parseInt((scrollTop+dh)/div,10)||0)+2-page;empty=true}if(npage){if(p.lastpage&&(page>p.lastpage||p.lastpage===1||(page===p.page&&page===p.lastpage))){return }if(grid.hDiv.loading){grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout)}else{p.page=page;if(empty){grid.selectionPreserver(table[0]);grid.emptyRows.call(table[0],false,false)}grid.populate(npage)}if(p.scrollPopUp&&p.lastpage!=null){$("#scroll_g"+p.id).show().html($.jgrid.template($.jgrid.getRegional(ts,"defaults.pgtext",p.pgtext),p.page,p.lastpage)).css({top:p.scrollTopOffset+scrollTop*((parseInt(p.height,10)-45)/(parseInt(rh,10)*parseInt(p.records,10)))+"px",left:p.scrollLeftOffset});$(this).mouseout(function(){$("#scroll_g"+p.id).hide()})}}},scrollGrid:function(e){if(p.scroll){var scrollTop=grid.bDiv.scrollTop;if(grid.scrollTop===undefined){grid.scrollTop=0}if(scrollTop!==grid.scrollTop){grid.scrollTop=scrollTop;if(grid.timer){clearTimeout(grid.timer)}grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout)}}grid.hDiv.scrollLeft=grid.bDiv.scrollLeft;if(p.footerrow){grid.sDiv.scrollLeft=grid.bDiv.scrollLeft}if(p.frozenColumns){$(grid.fbDiv).scrollTop(grid.bDiv.scrollTop)}if(e){e.stopPropagation()}},selectionPreserver:function(ts){var p=ts.p,sr=p.selrow,sra=p.selarrrow?$.makeArray(p.selarrrow):null,left=ts.grid.bDiv.scrollLeft,restoreSelection=function(){var i;p.selrow=null;p.selarrrow=[];if(p.multiselect&&sra&&sra.length>0){for(i=0;i<sra.length;i++){if(sra[i]!==sr){$(ts).jqGrid("setSelection",sra[i],false,null)}}}if(sr){$(ts).jqGrid("setSelection",sr,false,null)}ts.grid.bDiv.scrollLeft=left;$(ts).off(".selectionPreserver",restoreSelection)};$(ts).on("jqGridGridComplete.selectionPreserver",restoreSelection)}};if(this.tagName.toUpperCase()!=="TABLE"||this.id==null){alert("Element is not a table or has no id!");return }if(document.documentMode!==undefined){if(document.documentMode<=5){alert("Grid can not be used in this ('quirks') mode!");return }}var i=0,lr,lk,dir;for(lk in $.jgrid.regional){if($.jgrid.regional.hasOwnProperty(lk)){if(i===0){lr=lk}i++}}if(i===1&&lr!==p.regional){p.regional=lr}$(this).empty().attr("tabindex","0");this.p=p;this.p.useProp=!!$.fn.prop;if(this.p.colNames.length===0){for(i=0;i<this.p.colModel.length;i++){this.p.colNames[i]=this.p.colModel[i].label||this.p.colModel[i].name}}if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.getRegional(this,"errors.model"));return }var getstyle=$.jgrid.getMethod("getStyleUI"),stylemodule=ts.p.styleUI+".common",disabled=getstyle(stylemodule,"disabled",true),highlight=getstyle(stylemodule,"highlight",true),hover=getstyle(stylemodule,"hover",true),cornerall=getstyle(stylemodule,"cornerall",true),iconbase=getstyle(stylemodule,"icon_base",true),colmenustyle=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].colmenu,isMSIE=$.jgrid.msie(),gv,sortarr=[],sortord=[],sotmp=[];stylemodule=ts.p.styleUI+".base";gv=$("<div "+getstyle(stylemodule,"viewBox",false,"ui-jqgrid-view")+" role='grid'></div>");ts.p.direction=$.trim(ts.p.direction.toLowerCase());ts.p._ald=false;if($.inArray(ts.p.direction,["ltr","rtl"])===-1){ts.p.direction="ltr"}dir=ts.p.direction;$(gv).insertBefore(this);$(this).appendTo(gv);var eg=$("<div "+getstyle(stylemodule,"entrieBox",false,"ui-jqgrid")+"></div>");$(eg).attr({id:"gbox_"+this.id,dir:dir}).insertBefore(gv);$(gv).attr("id","gview_"+this.id).appendTo(eg);$("<div "+getstyle(ts.p.styleUI+".common","overlay",false,"jqgrid-overlay")+" id='lui_"+this.id+"'></div>").insertBefore(gv);$("<div "+getstyle(stylemodule,"loadingBox",false,"loading")+" id='load_"+this.id+"'>"+$.jgrid.getRegional(ts,"defaults.loadtext",this.p.loadtext)+"</div>").insertBefore(gv);$(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var sortkeys=["shiftKey","altKey","ctrlKey"],intNum=function(val,defval){val=parseInt(val,10);if(isNaN(val)){return defval||0}return val},formatCol=function(pos,rowInd,tv,rawObject,rowId,rdata){var cm=ts.p.colModel[pos],cellAttrFunc,ral=cm.align,result='style="',clas=cm.classes,nm=cm.name,celp,acp=[];if(ral){result+="text-align:"+ral+";"}if(cm.hidden===true){result+="display:none;"}if(rowInd===0){result+="width: "+grid.headers[pos].width+"px;"}else{if($.isFunction(cm.cellattr)||(typeof cm.cellattr==="string"&&$.jgrid.cellattr!=null&&$.isFunction($.jgrid.cellattr[cm.cellattr]))){cellAttrFunc=$.isFunction(cm.cellattr)?cm.cellattr:$.jgrid.cellattr[cm.cellattr];celp=cellAttrFunc.call(ts,rowId,tv,rawObject,cm,rdata);if(celp&&typeof celp==="string"){celp=celp.replace(/style/i,"style").replace(/title/i,"title");if(celp.indexOf("title")>-1){cm.title=false}if(celp.indexOf("class")>-1){clas=undefined}acp=celp.replace(/\-style/g,"-sti").split(/style/);if(acp.length===2){acp[1]=$.trim(acp[1].replace(/\-sti/g,"-style").replace("=",""));if(acp[1].indexOf("'")===0||acp[1].indexOf('"')===0){acp[1]=acp[1].substring(1)}result+=acp[1].replace(/'/gi,'"')}else{result+='"'}}}}if(!acp.length){acp[0]="";result+='"'}result+=(clas!==undefined?(' class="'+clas+'"'):"")+((cm.title&&tv)?(' title="'+$.jgrid.stripHtml(tv)+'"'):"");result+=' aria-describedby="'+ts.p.id+"_"+nm+'"';return result+acp[0]},cellVal=function(val){return val==null||val===""?"&#160;":(ts.p.autoencode?$.jgrid.htmlEncode(val):String(val))},formatter=function(rowId,cellval,colpos,rwdat,_act){var cm=ts.p.colModel[colpos],v;if(cm.formatter!==undefined){rowId=String(ts.p.idPrefix)!==""?$.jgrid.stripPref(ts.p.idPrefix,rowId):rowId;var opts={rowId:rowId,colModel:cm,gid:ts.p.id,pos:colpos,styleUI:ts.p.styleUI};if($.isFunction(cm.formatter)){v=cm.formatter.call(ts,cellval,opts,rwdat,_act)}else{if($.fmatter){v=$.fn.fmatter.call(ts,cm.formatter,cellval,opts,rwdat,_act)}else{v=cellVal(cellval)}}}else{v=cellVal(cellval)}return v},addCell=function(rowId,cell,pos,irow,srvr,rdata){var v,prp;v=formatter(rowId,cell,pos,srvr,"add");prp=formatCol(pos,irow,v,srvr,rowId,rdata);return'<td role="gridcell" '+prp+">"+v+"</td>"},addMulti=function(rowid,pos,irow,checked,uiclass){var v='<input role="checkbox" type="checkbox" id="jqg_'+ts.p.id+"_"+rowid+'" '+uiclass+' name="jqg_'+ts.p.id+"_"+rowid+'"'+(checked?'checked="checked"':"")+"/>",prp=formatCol(pos,irow,"",null,rowid,true);return'<td role="gridcell" '+prp+">"+v+"</td>"},addRowNum=function(pos,irow,pG,rN,uiclass){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow,prp=formatCol(pos,irow,v,null,irow,true);return'<td role="gridcell" '+uiclass+" "+prp+">"+v+"</td>"},reader=function(datatype){var field,f=[],j=0,i;for(i=0;i<ts.p.colModel.length;i++){field=ts.p.colModel[i];if(field.name!=="cb"&&field.name!=="subgrid"&&field.name!=="rn"){f[j]=datatype==="local"?field.name:((datatype==="xml"||datatype==="xmlstring")?field.xmlmap||field.name:field.jsonmap||field.name);if(ts.p.keyName!==false&&field.key===true){ts.p.keyName=f[j];ts.p.keyIndex=j}j++}}return f},orderedCols=function(offset){var order=ts.p.remapColumns;if(!order||!order.length){order=$.map(ts.p.colModel,function(v,i){return i})}if(offset){order=$.map(order,function(v){return v<offset?null:v-offset})}return order},emptyRows=function(scroll,locdata){var firstrow;if(this.p.deepempty){$(this.rows).slice(1).remove()}else{firstrow=this.rows.length>0?this.rows[0]:null;$(this.firstChild).empty().append(firstrow)}if(scroll&&this.p.scroll){$(this.grid.bDiv.firstChild).css({height:"auto"});$(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"});if(this.grid.bDiv.scrollTop!==0){this.grid.bDiv.scrollTop=0}}if(locdata===true&&this.p.treeGrid&&!this.p.loadonce){this.p.data=[];this.p._index={}}},normalizeData=function(){var p=ts.p,data=p.data,dataLength=data.length,i,j,cur,idn,idr,ccur,v,rd,localReader=p.localReader,colModel=p.colModel,cellName=localReader.cell,iOffset=(p.multiselect===true?1:0)+(p.subGrid===true?1:0)+(p.rownumbers===true?1:0),br=p.scroll?$.jgrid.randId():1,arrayReader,objectReader,rowReader;if(p.datatype!=="local"||localReader.repeatitems!==true){return }arrayReader=orderedCols(iOffset);objectReader=reader("local");idn=p.keyName===false?($.isFunction(localReader.id)?localReader.id.call(ts,data):localReader.id):p.keyName;for(i=0;i<dataLength;i++){cur=data[i];idr=$.jgrid.getAccessor(cur,idn);if(idr===undefined){if(typeof idn==="number"&&colModel[idn+iOffset]!=null){idr=$.jgrid.getAccessor(cur,colModel[idn+iOffset].name)}if(idr===undefined){idr=br+i;if(cellName){ccur=$.jgrid.getAccessor(cur,cellName)||cur;idr=ccur!=null&&ccur[idn]!==undefined?ccur[idn]:idr;ccur=null}}}rd={};rd[localReader.id]=idr;if(cellName){cur=$.jgrid.getAccessor(cur,cellName)||cur}rowReader=$.isArray(cur)?arrayReader:objectReader;for(j=0;j<rowReader.length;j++){v=$.jgrid.getAccessor(cur,rowReader[j]);rd[colModel[j+iOffset].name]=v}data[i]=rd}},refreshIndex=function(){var datalen=ts.p.data.length,idname,i,val;if(ts.p.keyName===false||ts.p.loadonce===true){idname=ts.p.localReader.id}else{idname=ts.p.keyName}ts.p._index=[];for(i=0;i<datalen;i++){val=$.jgrid.getAccessor(ts.p.data[i],idname);if(val===undefined){val=String(i+1)}ts.p._index[val]=i}},constructTr=function(id,hide,classes,rd,cur){var tabindex="-1",restAttr="",attrName,style=hide?"display:none;":"",rowAttrObj=$(ts).triggerHandler("jqGridRowAttr",[rd,cur,id]);if(typeof rowAttrObj!=="object"){rowAttrObj=$.isFunction(ts.p.rowattr)?ts.p.rowattr.call(ts,rd,cur,id):(typeof ts.p.rowattr==="string"&&$.jgrid.rowattr!=null&&$.isFunction($.jgrid.rowattr[ts.p.rowattr])?$.jgrid.rowattr[ts.p.rowattr].call(ts,rd,cur,id):{})}if(!$.isEmptyObject(rowAttrObj)){if(rowAttrObj.hasOwnProperty("id")){id=rowAttrObj.id;delete rowAttrObj.id}if(rowAttrObj.hasOwnProperty("tabindex")){tabindex=rowAttrObj.tabindex;delete rowAttrObj.tabindex}if(rowAttrObj.hasOwnProperty("style")){style+=rowAttrObj.style;delete rowAttrObj.style}if(rowAttrObj.hasOwnProperty("class")){classes+=" "+rowAttrObj["class"];delete rowAttrObj["class"]}try{delete rowAttrObj.role}catch(ra){}for(attrName in rowAttrObj){if(rowAttrObj.hasOwnProperty(attrName)){restAttr+=" "+attrName+"="+rowAttrObj[attrName]}}}return'<tr role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(style===""?"":' style="'+style+'"')+restAttr+">"},addXmlData=function(xml,rcnt,more,adjust){var startReq=new Date(),locdata=(ts.p.datatype!=="local"&&ts.p.loadonce)||ts.p.datatype==="xmlstring",xmlid="_id_",xmlRd=ts.p.xmlReader,frd=ts.p.datatype==="local"?"local":"xml";if(locdata){ts.p.data=[];ts.p._index={};ts.p.localReader.id=xmlid}ts.p.reccount=0;if($.isXMLDoc(xml)){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows.call(ts,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return }var self=$(ts),i,fpos,ir=0,v,gi=ts.p.multiselect===true?1:0,si=0,addSubGridCell,ni=ts.p.rownumbers===true?1:0,idn,getId,f=[],F,rd={},xmlr,rid,rowData=[],classes=getstyle(stylemodule,"rowBox",true,"jqgrow ui-row-"+ts.p.direction);if(ts.p.subGrid===true){si=1;addSubGridCell=$.jgrid.getMethod("addSubGridCell")}if(!xmlRd.repeatitems){f=reader(frd)}if(ts.p.keyName===false){idn=$.isFunction(xmlRd.id)?xmlRd.id.call(ts,xml):xmlRd.id}else{idn=ts.p.keyName}if(xmlRd.repeatitems&&ts.p.keyName&&isNaN(idn)){idn=ts.p.keyIndex}if(String(idn).indexOf("[")===-1){if(f.length){getId=function(trow,k){return $(idn,trow).text()||k}}else{getId=function(trow,k){return $(xmlRd.cell,trow).eq(idn).text()||k}}}else{getId=function(trow,k){return trow.getAttribute(idn.replace(/[\[\]]/g,""))||k}}ts.p.userData={};ts.p.page=intNum($.jgrid.getXmlData(xml,xmlRd.page),ts.p.page);ts.p.lastpage=intNum($.jgrid.getXmlData(xml,xmlRd.total),1);ts.p.records=intNum($.jgrid.getXmlData(xml,xmlRd.records));if($.isFunction(xmlRd.userdata)){ts.p.userData=xmlRd.userdata.call(ts,xml)||{}}else{$.jgrid.getXmlData(xml,xmlRd.userdata,true).each(function(){ts.p.userData[this.getAttribute("name")]=$(this).text()})}var gxml=$.jgrid.getXmlData(xml,xmlRd.root,true);gxml=$.jgrid.getXmlData(gxml,xmlRd.row,true);if(!gxml){gxml=[]}var gl=gxml.length,j=0,grpdata=[],rn=parseInt(ts.p.rowNum,10),br=ts.p.scroll?$.jgrid.randId():1,tablebody=$(ts).find("tbody:first"),hiderow=false,groupingPrepare;if(ts.p.grouping){hiderow=ts.p.groupingView.groupCollapse===true;groupingPrepare=$.jgrid.getMethod("groupingPrepare")}if(gl>0&&ts.p.page<=0){ts.p.page=1}if(gxml&&gl){if(adjust){rn*=adjust+1}var afterInsRow=$.isFunction(ts.p.afterInsertRow),rnc=ni?getstyle(stylemodule,"rownumBox",false,"jqgrid-rownum"):"",mlc=gi?getstyle(stylemodule,"multiBox",false,"cbox"):"";while(j<gl){xmlr=gxml[j];rid=getId(xmlr,br+j);rid=ts.p.idPrefix+rid;var iStartTrTag=rowData.length;rowData.push("");if(ni){rowData.push(addRowNum(0,j,ts.p.page,ts.p.rowNum,rnc))}if(gi){rowData.push(addMulti(rid,ni,j,false,mlc))}if(si){rowData.push(addSubGridCell.call(self,gi+ni,j+rcnt))}if(xmlRd.repeatitems){if(!F){F=orderedCols(gi+si+ni)}var cells=$.jgrid.getXmlData(xmlr,xmlRd.cell,true);$.each(F,function(k){var cell=cells[this];if(!cell){return false}v=cell.textContent||cell.text;rd[ts.p.colModel[k+gi+si+ni].name]=v;rowData.push(addCell(rid,v,k+gi+si+ni,j+rcnt,xmlr,rd))})}else{for(i=0;i<f.length;i++){v=$.jgrid.getXmlData(xmlr,f[i]);rd[ts.p.colModel[i+gi+si+ni].name]=v;rowData.push(addCell(rid,v,i+gi+si+ni,j+rcnt,xmlr,rd))}}rowData[iStartTrTag]=constructTr(rid,hiderow,classes,rd,xmlr);rowData.push("</tr>");if(ts.p.grouping){grpdata.push(rowData);if(!ts.p.groupingView._locgr){groupingPrepare.call(self,rd,j)}rowData=[]}if(locdata||(ts.p.treeGrid===true&&!(ts.p._ald))){rd[xmlid]=$.jgrid.stripPref(ts.p.idPrefix,rid);ts.p.data.push(rd);ts.p._index[rd[xmlid]]=ts.p.data.length-1}if(ts.p.gridview===false){tablebody.append(rowData.join(""));self.triggerHandler("jqGridAfterInsertRow",[rid,rd,xmlr]);if(afterInsRow){ts.p.afterInsertRow.call(ts,rid,rd,xmlr)}rowData=[]}rd={};ir++;j++;if(ir===rn){break}}}if(ts.p.gridview===true){fpos=ts.p.treeANode>-1?ts.p.treeANode:0;if(ts.p.grouping){if(!locdata){self.jqGrid("groupingRender",grpdata,ts.p.colModel.length,ts.p.page,rn);grpdata=null}}else{if(ts.p.treeGrid===true&&fpos>0){$(ts.rows[fpos]).after(rowData.join(""))}else{tablebody.append(rowData.join(""));ts.grid.cols=ts.rows[0].cells}}}ts.p.totaltime=new Date()-startReq;rowData=null;if(ts.p.subGrid===true){try{self.jqGrid("addSubGrid",gi+ni)}catch(_){}}if(ir>0){if(ts.p.records===0){ts.p.records=gl}}if(ts.p.treeGrid===true){try{self.jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}}ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){self.jqGrid("footerData","set",ts.p.userData,true)}if(locdata){ts.p.records=gl;ts.p.lastpage=Math.ceil(gl/rn)}if(!more){ts.updatepager(false,true)}if(locdata){while(ir<gl){xmlr=gxml[ir];rid=getId(xmlr,ir+br);rid=ts.p.idPrefix+rid;if(xmlRd.repeatitems){if(!F){F=orderedCols(gi+si+ni)}var cells2=$.jgrid.getXmlData(xmlr,xmlRd.cell,true);$.each(F,function(k){var cell=cells2[this];if(!cell){return false}v=cell.textContent||cell.text;rd[ts.p.colModel[k+gi+si+ni].name]=v})}else{for(i=0;i<f.length;i++){v=$.jgrid.getXmlData(xmlr,f[i]);rd[ts.p.colModel[i+gi+si+ni].name]=v}}rd[xmlid]=$.jgrid.stripPref(ts.p.idPrefix,rid);if(ts.p.grouping){groupingPrepare.call(self,rd,ir)}ts.p.data.push(rd);ts.p._index[rd[xmlid]]=ts.p.data.length-1;rd={};ir++}if(ts.p.grouping){ts.p.groupingView._locgr=true;self.jqGrid("groupingRender",grpdata,ts.p.colModel.length,ts.p.page,rn);grpdata=null}}},addJSONData=function(data,rcnt,more,adjust){var startReq=new Date();if(data){if(ts.p.treeANode===-1&&!ts.p.scroll){emptyRows.call(ts,false,true);rcnt=1}else{rcnt=rcnt>1?rcnt:1}}else{return }var dReader,locid="_id_",frd,locdata=(ts.p.datatype!=="local"&&ts.p.loadonce)||ts.p.datatype==="jsonstring";if(locdata){ts.p.data=[];ts.p._index={};ts.p.localReader.id=locid}ts.p.reccount=0;if(ts.p.datatype==="local"){dReader=ts.p.localReader;frd="local"}else{dReader=ts.p.jsonReader;frd="json"}var self=$(ts),ir=0,v,i,j,f=[],cur,gi=ts.p.multiselect?1:0,si=ts.p.subGrid===true?1:0,addSubGridCell,ni=ts.p.rownumbers===true?1:0,arrayReader=orderedCols(gi+si+ni),objectReader=reader(frd),rowReader,len,drows,idn,rd={},fpos,idr,rowData=[],classes=getstyle(stylemodule,"rowBox",true,"jqgrow ui-row-"+ts.p.direction);ts.p.page=intNum($.jgrid.getAccessor(data,dReader.page),ts.p.page);ts.p.lastpage=intNum($.jgrid.getAccessor(data,dReader.total),1);ts.p.records=intNum($.jgrid.getAccessor(data,dReader.records));ts.p.userData=$.jgrid.getAccessor(data,dReader.userdata)||{};if(si){addSubGridCell=$.jgrid.getMethod("addSubGridCell")}if(ts.p.keyName===false){idn=$.isFunction(dReader.id)?dReader.id.call(ts,data):dReader.id}else{idn=ts.p.keyName}if(dReader.repeatitems&&ts.p.keyName&&isNaN(idn)){idn=ts.p.keyIndex}drows=$.jgrid.getAccessor(data,dReader.root);if(drows==null&&$.isArray(data)){drows=data}if(!drows){drows=[]}len=drows.length;i=0;if(len>0&&ts.p.page<=0){ts.p.page=1}var rn=parseInt(ts.p.rowNum,10),br=ts.p.scroll?$.jgrid.randId():1,selected=false,selr;if(adjust){rn*=adjust+1}if(ts.p.datatype==="local"&&!ts.p.deselectAfterSort){selected=true}var afterInsRow=$.isFunction(ts.p.afterInsertRow),grpdata=[],hiderow=false,groupingPrepare,tablebody=$(ts).find("tbody:first"),rnc=ni?getstyle(stylemodule,"rownumBox",false,"jqgrid-rownum"):"",mlc=gi?getstyle(stylemodule,"multiBox",false,"cbox"):"";if(ts.p.grouping){hiderow=ts.p.groupingView.groupCollapse===true;groupingPrepare=$.jgrid.getMethod("groupingPrepare")}while(i<len){cur=drows[i];idr=$.jgrid.getAccessor(cur,idn);if(idr===undefined){if(typeof idn==="number"&&ts.p.colModel[idn+gi+si+ni]!=null){idr=$.jgrid.getAccessor(cur,ts.p.colModel[idn+gi+si+ni].name)}if(idr===undefined){idr=br+i;if(f.length===0){if(dReader.cell){var ccur=$.jgrid.getAccessor(cur,dReader.cell)||cur;idr=ccur!=null&&ccur[idn]!==undefined?ccur[idn]:idr;ccur=null}}}}idr=ts.p.idPrefix+idr;if(selected){if(ts.p.multiselect){selr=($.inArray(idr,ts.p.selarrrow)!==-1)}else{selr=(idr===ts.p.selrow)}}var iStartTrTag=rowData.length;rowData.push("");if(ni){rowData.push(addRowNum(0,i,ts.p.page,ts.p.rowNum,rnc))}if(gi){rowData.push(addMulti(idr,ni,i,selr,mlc))}if(si){rowData.push(addSubGridCell.call(self,gi+ni,i+rcnt))}rowReader=objectReader;if(dReader.repeatitems){if(dReader.cell){cur=$.jgrid.getAccessor(cur,dReader.cell)||cur}if($.isArray(cur)){rowReader=arrayReader}}for(j=0;j<rowReader.length;j++){v=$.jgrid.getAccessor(cur,rowReader[j]);rd[ts.p.colModel[j+gi+si+ni].name]=v;rowData.push(addCell(idr,v,j+gi+si+ni,i+rcnt,cur,rd))}rowData[iStartTrTag]=constructTr(idr,hiderow,(selr?classes+" "+highlight:classes),rd,cur);rowData.push("</tr>");if(ts.p.grouping){grpdata.push(rowData);if(!ts.p.groupingView._locgr){groupingPrepare.call(self,rd,i)}rowData=[]}if(locdata||(ts.p.treeGrid===true&&!(ts.p._ald))){rd[locid]=$.jgrid.stripPref(ts.p.idPrefix,idr);ts.p.data.push(rd);ts.p._index[rd[locid]]=ts.p.data.length-1}if(ts.p.gridview===false){tablebody.append(rowData.join(""));self.triggerHandler("jqGridAfterInsertRow",[idr,rd,cur]);if(afterInsRow){ts.p.afterInsertRow.call(ts,idr,rd,cur)}rowData=[]}rd={};ir++;i++;if(ir===rn){break}}if(ts.p.gridview===true){fpos=ts.p.treeANode>-1?ts.p.treeANode:0;if(ts.p.grouping){if(!locdata){self.jqGrid("groupingRender",grpdata,ts.p.colModel.length,ts.p.page,rn);grpdata=null}}else{if(ts.p.treeGrid===true&&fpos>0){$(ts.rows[fpos]).after(rowData.join(""))}else{tablebody.append(rowData.join(""));ts.grid.cols=ts.rows[0].cells}}}ts.p.totaltime=new Date()-startReq;rowData=null;if(ts.p.subGrid===true){try{self.jqGrid("addSubGrid",gi+ni)}catch(_){}}if(ir>0){if(ts.p.records===0){ts.p.records=len}}if(ts.p.treeGrid===true){try{self.jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}}ts.p.reccount=ir;ts.p.treeANode=-1;if(ts.p.userDataOnFooter){self.jqGrid("footerData","set",ts.p.userData,true)}if(locdata){ts.p.records=len;ts.p.lastpage=Math.ceil(len/rn)}if(!more){ts.updatepager(false,true)}if(locdata){while(ir<len&&drows[ir]){cur=drows[ir];idr=$.jgrid.getAccessor(cur,idn);if(idr===undefined){if(typeof idn==="number"&&ts.p.colModel[idn+gi+si+ni]!=null){idr=$.jgrid.getAccessor(cur,ts.p.colModel[idn+gi+si+ni].name)}if(idr===undefined){idr=br+ir;if(f.length===0){if(dReader.cell){var ccur2=$.jgrid.getAccessor(cur,dReader.cell)||cur;idr=ccur2!=null&&ccur2[idn]!==undefined?ccur2[idn]:idr;ccur2=null}}}}if(cur){idr=ts.p.idPrefix+idr;rowReader=objectReader;if(dReader.repeatitems){if(dReader.cell){cur=$.jgrid.getAccessor(cur,dReader.cell)||cur}if($.isArray(cur)){rowReader=arrayReader}}for(j=0;j<rowReader.length;j++){rd[ts.p.colModel[j+gi+si+ni].name]=$.jgrid.getAccessor(cur,rowReader[j])}rd[locid]=$.jgrid.stripPref(ts.p.idPrefix,idr);if(ts.p.grouping){groupingPrepare.call(self,rd,ir)}ts.p.data.push(rd);ts.p._index[rd[locid]]=ts.p.data.length-1;rd={}}ir++}if(ts.p.grouping){ts.p.groupingView._locgr=true;self.jqGrid("groupingRender",grpdata,ts.p.colModel.length,ts.p.page,rn);grpdata=null}}},addLocalData=function(retAll){var st=ts.p.multiSort?[]:"",sto=[],fndsort=false,cmtypes={},grtypes=[],grindexes=[],srcformat,sorttype,newformat,sfld;if(!$.isArray(ts.p.data)){return }var grpview=ts.p.grouping?ts.p.groupingView:false,lengrp,gin,si;$.each(ts.p.colModel,function(){sorttype=this.sorttype||"text";si=this.index||this.name;if(sorttype==="date"||sorttype==="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter==="date"){if(this.formatoptions&&this.formatoptions.srcformat){srcformat=this.formatoptions.srcformat}else{srcformat=$.jgrid.getRegional(ts,"formatter.date.srcformat")}if(this.formatoptions&&this.formatoptions.newformat){newformat=this.formatoptions.newformat}else{newformat=$.jgrid.getRegional(ts,"formatter.date.newformat")}}else{srcformat=newformat=this.datefmt||"Y-m-d"}cmtypes[si]={stype:sorttype,srcfmt:srcformat,newfmt:newformat,sfunc:this.sortfunc||null}}else{cmtypes[si]={stype:sorttype,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null}}if(ts.p.grouping){for(gin=0,lengrp=grpview.groupField.length;gin<lengrp;gin++){if(this.name===grpview.groupField[gin]){grtypes[gin]=cmtypes[si];grindexes[gin]=si}}}if(!ts.p.multiSort){if(!fndsort&&(si===ts.p.sortname)){st=si;fndsort=true}}});if(ts.p.multiSort){st=sortarr;sto=sortord}if(ts.p.treeGrid&&ts.p._sort){$(ts).jqGrid("SortTree",st,ts.p.sortorder,cmtypes[st].stype||"text",cmtypes[st].srcfmt||"");return }var compareFnMap={eq:function(queryObj){return queryObj.equals},ne:function(queryObj){return queryObj.notEquals},lt:function(queryObj){return queryObj.less},le:function(queryObj){return queryObj.lessOrEquals},gt:function(queryObj){return queryObj.greater},ge:function(queryObj){return queryObj.greaterOrEquals},cn:function(queryObj){return queryObj.contains},nc:function(queryObj,op){return op==="OR"?queryObj.orNot().contains:queryObj.andNot().contains},bw:function(queryObj){return queryObj.startsWith},bn:function(queryObj,op){return op==="OR"?queryObj.orNot().startsWith:queryObj.andNot().startsWith},en:function(queryObj,op){return op==="OR"?queryObj.orNot().endsWith:queryObj.andNot().endsWith},ew:function(queryObj){return queryObj.endsWith},ni:function(queryObj,op){return op==="OR"?queryObj.orNot().equals:queryObj.andNot().equals},"in":function(queryObj){return queryObj.equals},nu:function(queryObj){return queryObj.isNull},nn:function(queryObj,op){return op==="OR"?queryObj.orNot().isNull:queryObj.andNot().isNull}},query=$.jgrid.from.call(ts,ts.p.data);if(ts.p.ignoreCase){query=query.ignoreCase()}function tojLinq(group){var s=0,index,gor,ror,opr,rule,fld;if(group.groups!=null){gor=group.groups.length&&group.groupOp.toString().toUpperCase()==="OR";if(gor){query.orBegin()}for(index=0;index<group.groups.length;index++){if(s>0&&gor){query.or()}try{tojLinq(group.groups[index])}catch(e){alert(e)}s++}if(gor){query.orEnd()}}if(group.rules!=null){try{ror=group.rules.length&&group.groupOp.toString().toUpperCase()==="OR";if(ror){query.orBegin()}for(index=0;index<group.rules.length;index++){rule=group.rules[index];opr=group.groupOp.toString().toUpperCase();if(compareFnMap[rule.op]&&rule.field){if(s>0&&opr&&opr==="OR"){query=query.or()}fld=cmtypes[rule.field];if(fld.stype==="date"){if(fld.srcfmt&&fld.newfmt&&fld.srcfmt!==fld.newfmt){rule.data=$.jgrid.parseDate.call(ts,fld.newfmt,rule.data,fld.srcfmt)}}query=compareFnMap[rule.op](query,opr)(rule.field,rule.data,cmtypes[rule.field])}s++}if(ror){query.orEnd()}}catch(g){alert(g)}}}if(ts.p.search===true){var srules=ts.p.postData.filters;if(srules){if(typeof srules==="string"){srules=$.jgrid.parse(srules)}tojLinq(srules)}else{try{sfld=cmtypes[ts.p.postData.searchField];if(sfld.stype==="date"){if(sfld.srcfmt&&sfld.newfmt&&sfld.srcfmt!==sfld.newfmt){ts.p.postData.searchString=$.jgrid.parseDate.call(ts,sfld.newfmt,ts.p.postData.searchString,sfld.srcfmt)}}query=compareFnMap[ts.p.postData.searchOper](query)(ts.p.postData.searchField,ts.p.postData.searchString,cmtypes[ts.p.postData.searchField])}catch(se){}}}else{if(ts.p.treeGrid&&ts.p.treeGridModel==="nested"){query.orderBy(ts.p.treeReader.left_field,"asc","integer","",null)}}if(ts.p.treeGrid&&ts.p.treeGridModel==="adjacency"){lengrp=0;st=null}if(ts.p.grouping){for(gin=0;gin<lengrp;gin++){query.orderBy(grindexes[gin],grpview.groupOrder[gin],grtypes[gin].stype,grtypes[gin].srcfmt)}}if(ts.p.multiSort){$.each(st,function(i){query.orderBy(this,sto[i],cmtypes[this].stype,cmtypes[this].srcfmt,cmtypes[this].sfunc)})}else{if(st&&ts.p.sortorder&&fndsort){if(ts.p.sortorder.toUpperCase()==="DESC"){query.orderBy(ts.p.sortname,"d",cmtypes[st].stype,cmtypes[st].srcfmt,cmtypes[st].sfunc)}else{query.orderBy(ts.p.sortname,"a",cmtypes[st].stype,cmtypes[st].srcfmt,cmtypes[st].sfunc)}}}var queryResults=query.select(),recordsperpage=parseInt(ts.p.rowNum,10),total=queryResults.length,page=parseInt(ts.p.page,10),totalpages=Math.ceil(total/recordsperpage),retresult={};if((ts.p.search||ts.p.resetsearch)&&ts.p.grouping&&ts.p.groupingView._locgr){ts.p.groupingView.groups=[];var j,grPrepare=$.jgrid.getMethod("groupingPrepare"),key,udc;if(ts.p.footerrow&&ts.p.userDataOnFooter){for(key in ts.p.userData){if(ts.p.userData.hasOwnProperty(key)){ts.p.userData[key]=0}}udc=true}for(j=0;j<total;j++){if(udc){for(key in ts.p.userData){if(ts.p.userData.hasOwnProperty(key)){ts.p.userData[key]+=parseFloat(queryResults[j][key]||0)}}}grPrepare.call($(ts),queryResults[j],j,recordsperpage)}}if(retAll){return queryResults}if(ts.p.treeGrid&&ts.p.search){queryResults=$(ts).jqGrid("searchTree",queryResults)}else{queryResults=queryResults.slice((page-1)*recordsperpage,page*recordsperpage)}query=null;cmtypes=null;retresult[ts.p.localReader.total]=totalpages;retresult[ts.p.localReader.page]=page;retresult[ts.p.localReader.records]=total;retresult[ts.p.localReader.root]=queryResults;retresult[ts.p.localReader.userdata]=ts.p.userData;queryResults=null;return retresult},updatepager=function(rn,dnd){var cp,last,base,from,to,tot,fmt,pgboxes="",sppg,pgid=ts.p.pager?$.jgrid.jqID(ts.p.pager.substr(1)):"",tspg=pgid?"_"+pgid:"",tspg_t=ts.p.toppager?"_"+ts.p.toppager.substr(1):"";base=parseInt(ts.p.page,10)-1;if(base<0){base=0}base=base*parseInt(ts.p.rowNum,10);to=base+ts.p.reccount;if(ts.p.scroll){var rows=$("tbody:first > tr:gt(0)",ts.grid.bDiv);if(to>ts.p.records){to=ts.p.records}base=to-rows.length;ts.p.reccount=rows.length;var rh=rows.outerHeight()||ts.grid.prevRowHeight;if(rh){var top=base*rh;var height=parseInt(ts.p.records,10)*rh;$(">div:first",ts.grid.bDiv).css({height:height}).children("div:first").css({height:top,display:top?"":"none"});if(ts.grid.bDiv.scrollTop===0&&ts.p.page>1){ts.grid.bDiv.scrollTop=ts.p.rowNum*(ts.p.page-1)*rh}}ts.grid.bDiv.scrollLeft=ts.grid.hDiv.scrollLeft}pgboxes=ts.p.pager||"";pgboxes+=ts.p.toppager?(pgboxes?","+ts.p.toppager:ts.p.toppager):"";if(pgboxes){fmt=$.jgrid.getRegional(ts,"formatter.integer");cp=intNum(ts.p.page);last=intNum(ts.p.lastpage);$(".selbox",pgboxes)[this.p.useProp?"prop":"attr"]("disabled",false);if(ts.p.pginput===true){$("#input"+tspg).html($.jgrid.template($.jgrid.getRegional(ts,"defaults.pgtext",ts.p.pgtext)||"","<input "+getstyle(stylemodule,"pgInput",false,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(pgid)+"'></span>"));if(ts.p.toppager){$("#input_t"+tspg_t).html($.jgrid.template($.jgrid.getRegional(ts,"defaults.pgtext",ts.p.pgtext)||"","<input "+getstyle(stylemodule,"pgInput",false,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(pgid)+"_toppager'></span>"))}$(".ui-pg-input",pgboxes).val(ts.p.page);sppg=ts.p.toppager?"#sp_1"+tspg+",#sp_1"+tspg+"_toppager":"#sp_1"+tspg;$(sppg).html($.fmatter?$.fmatter.util.NumberFormat(ts.p.lastpage,fmt):ts.p.lastpage)}if(ts.p.viewrecords){if(ts.p.reccount===0){$(".ui-paging-info",pgboxes).html($.jgrid.getRegional(ts,"defaults.emptyrecords",ts.p.emptyrecords))}else{from=base+1;tot=ts.p.records;if($.fmatter){from=$.fmatter.util.NumberFormat(from,fmt);to=$.fmatter.util.NumberFormat(to,fmt);tot=$.fmatter.util.NumberFormat(tot,fmt)}var rt=$.jgrid.getRegional(ts,"defaults.recordtext",ts.p.recordtext);$(".ui-paging-info",pgboxes).html($.jgrid.template(rt,from,to,tot))}}if(ts.p.pgbuttons===true){if(cp<=0){cp=last=0}if(cp===1||cp===0){$("#first"+tspg+", #prev"+tspg).addClass(disabled).removeClass(hover);if(ts.p.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).addClass(disabled).removeClass(hover)}}else{$("#first"+tspg+", #prev"+tspg).removeClass(disabled);if(ts.p.toppager){$("#first_t"+tspg_t+", #prev_t"+tspg_t).removeClass(disabled)}}if(cp===last||cp===0){$("#next"+tspg+", #last"+tspg).addClass(disabled).removeClass(hover);if(ts.p.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).addClass(disabled).removeClass(hover)}}else{$("#next"+tspg+", #last"+tspg).removeClass(disabled);if(ts.p.toppager){$("#next_t"+tspg_t+", #last_t"+tspg_t).removeClass(disabled)}}}}if(rn===true&&ts.p.rownumbers===true){$(">td.jqgrid-rownum",ts.rows).each(function(i){$(this).html(base+1+i)})}if(dnd&&ts.p.jqgdnd){$(ts).jqGrid("gridDnD","updateDnD")}$(ts).triggerHandler("jqGridGridComplete");if($.isFunction(ts.p.gridComplete)){ts.p.gridComplete.call(ts)}$(ts).triggerHandler("jqGridAfterGridComplete")},beginReq=function(){ts.grid.hDiv.loading=true;if(ts.p.hiddengrid){return }$(ts).jqGrid("progressBar",{method:"show",loadtype:ts.p.loadui,htmlcontent:$.jgrid.getRegional(ts,"defaults.loadtext",ts.p.loadtext)})},endReq=function(){ts.grid.hDiv.loading=false;$(ts).jqGrid("progressBar",{method:"hide",loadtype:ts.p.loadui})},beforeprocess=function(data,st,xhr){var bfpcr=$(ts).triggerHandler("jqGridBeforeProcessing",[data,st,xhr]);bfpcr=(bfpcr===undefined||typeof (bfpcr)!=="boolean")?true:bfpcr;if($.isFunction(ts.p.beforeProcessing)){if(ts.p.beforeProcessing.call(ts,data,st,xhr)===false){bfpcr=false}}return bfpcr},afterprocess=function(dstr,lcf){$(ts).triggerHandler("jqGridLoadComplete",[dstr]);if(lcf){ts.p.loadComplete.call(ts,dstr)}$(ts).triggerHandler("jqGridAfterLoadComplete",[dstr]);ts.p.datatype="local";ts.p.datastr=null;endReq()},populate=function(npage){if(!ts.grid.hDiv.loading){var pvis=ts.p.scroll&&npage===false,prm={},dt,dstr,pN=ts.p.prmNames;if(ts.p.page<=0){ts.p.page=Math.min(1,ts.p.lastpage)}if(pN.search!==null){prm[pN.search]=ts.p.search}if(pN.nd!==null){prm[pN.nd]=new Date().getTime()}if(pN.rows!==null){prm[pN.rows]=ts.p.rowNum}if(pN.page!==null){prm[pN.page]=ts.p.page}if(pN.sort!==null){prm[pN.sort]=ts.p.sortname}if(pN.order!==null){prm[pN.order]=ts.p.sortorder}if(ts.p.rowTotal!==null&&pN.totalrows!==null){prm[pN.totalrows]=ts.p.rowTotal}var lcf=$.isFunction(ts.p.loadComplete),lc=lcf?ts.p.loadComplete:null;var adjust=0;npage=npage||1;if(npage>1){if(pN.npage!==null){prm[pN.npage]=npage;adjust=npage-1;npage=1}else{lc=function(req){ts.p.page++;ts.grid.hDiv.loading=false;if(lcf){ts.p.loadComplete.call(ts,req)}populate(npage-1)}}}else{if(pN.npage!==null){delete ts.p.postData[pN.npage]}}if(ts.p.grouping){$(ts).jqGrid("groupingSetup");var grp=ts.p.groupingView,gi,gs="";for(gi=0;gi<grp.groupField.length;gi++){var index=grp.groupField[gi];$.each(ts.p.colModel,function(cmIndex,cmValue){if(cmValue.name===index&&cmValue.index){index=cmValue.index}});gs+=index+" "+grp.groupOrder[gi]+", "}prm[pN.sort]=gs+prm[pN.sort]}$.extend(ts.p.postData,prm);var rcnt=!ts.p.scroll?1:ts.rows.length-1;if($.isFunction(ts.p.datatype)){ts.p.datatype.call(ts,ts.p.postData,"load_"+ts.p.id,rcnt,npage,adjust);return }var bfr=$(ts).triggerHandler("jqGridBeforeRequest");if(bfr===false||bfr==="stop"){return }if($.isFunction(ts.p.beforeRequest)){bfr=ts.p.beforeRequest.call(ts);if(bfr===false||bfr==="stop"){return }}dt=ts.p.datatype.toLowerCase();switch(dt){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:ts.p.url,type:ts.p.mtype,dataType:dt,data:$.isFunction(ts.p.serializeGridData)?ts.p.serializeGridData.call(ts,ts.p.postData):ts.p.postData,success:function(data,st,xhr){if(!beforeprocess(data,st,xhr)){endReq();return }if(dt==="xml"){addXmlData(data,rcnt,npage>1,adjust)}else{addJSONData(data,rcnt,npage>1,adjust)}$(ts).triggerHandler("jqGridLoadComplete",[data]);if(lc){lc.call(ts,data)}$(ts).triggerHandler("jqGridAfterLoadComplete",[data]);if(pvis){ts.grid.populateVisible()}if(ts.p.loadonce||ts.p.treeGrid){ts.p.datatype="local"}data=null;if(npage===1){endReq()}},error:function(xhr,st,err){$(ts).triggerHandler("jqGridLoadError",[xhr,st,err]);if($.isFunction(ts.p.loadError)){ts.p.loadError.call(ts,xhr,st,err)}if(npage===1){endReq()}xhr=null},beforeSend:function(xhr,settings){var gotoreq=true;gotoreq=$(ts).triggerHandler("jqGridLoadBeforeSend",[xhr,settings]);if($.isFunction(ts.p.loadBeforeSend)){gotoreq=ts.p.loadBeforeSend.call(ts,xhr,settings)}if(gotoreq===undefined){gotoreq=true}if(gotoreq===false){return false}beginReq()}},$.jgrid.ajaxOptions,ts.p.ajaxGridOptions));break;case"xmlstring":beginReq();dstr=typeof ts.p.datastr!=="string"?ts.p.datastr:$.parseXML(ts.p.datastr);if(!beforeprocess(dstr,200,null)){endReq();return }addXmlData(dstr);afterprocess(dstr,lcf);break;case"jsonstring":beginReq();if(typeof ts.p.datastr==="string"){dstr=$.jgrid.parse(ts.p.datastr)}else{dstr=ts.p.datastr}if(!beforeprocess(dstr,200,null)){endReq();return }addJSONData(dstr);afterprocess(dstr,lcf);break;case"local":case"clientside":beginReq();ts.p.datatype="local";ts.p._ald=true;var req=addLocalData(false);if(!beforeprocess(req,200,null)){endReq();return }addJSONData(req,rcnt,npage>1,adjust);$(ts).triggerHandler("jqGridLoadComplete",[req]);if(lc){lc.call(ts,req)}$(ts).triggerHandler("jqGridAfterLoadComplete",[req]);if(pvis){ts.grid.populateVisible()}endReq();ts.p._ald=false;break}ts.p._sort=false}},setHeadCheckBox=function(checked){$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv)[ts.p.useProp?"prop":"attr"]("checked",checked);var fid=ts.p.frozenColumns?ts.p.id+"_frozen":"";if(fid){$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.fhDiv)[ts.p.useProp?"prop":"attr"]("checked",checked)}},setPager=function(pgid,tp){var sep="<td class='ui-pg-button "+disabled+"'><span class='ui-separator'></span></td>",pginp="",pgl="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",str="",pgcnt,lft,cent,rgt,twd,tdw,i,clearVals=function(onpaging,thus){var ret;ret=$(ts).triggerHandler("jqGridPaging",[onpaging,thus]);if(ret==="stop"){return false}if($.isFunction(ts.p.onPaging)){ret=ts.p.onPaging.call(ts,onpaging,thus)}if(ret==="stop"){return false}ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];setHeadCheckBox(false)}ts.p.savedRow=[];return true};pgid=pgid.substr(1);tp+="_"+pgid;pgcnt="pg_"+pgid;lft=pgid+"_left";cent=pgid+"_center";rgt=pgid+"_right";$("#"+$.jgrid.jqID(pgid)).append("<div id='"+pgcnt+"' class='ui-pager-control' role='group'><table "+getstyle(stylemodule,"pagerTable",false,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+lft+"' align='left'></td><td id='"+cent+"' align='center' style='white-space:pre;'></td><td id='"+rgt+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(ts.p.rowList.length>0){str='<td dir="'+dir+'">';str+="<select "+getstyle(stylemodule,"pgSelectBox",false,"ui-pg-selbox")+' role="listbox" title="'+($.jgrid.getRegional(ts,"defaults.pgrecs",ts.p.pgrecs)||"")+'">';var strnm;for(i=0;i<ts.p.rowList.length;i++){strnm=ts.p.rowList[i].toString().split(":");if(strnm.length===1){strnm[1]=strnm[0]}str+='<option role="option" value="'+strnm[0]+'"'+((intNum(ts.p.rowNum,0)===intNum(strnm[0],0))?' selected="selected"':"")+">"+strnm[1]+"</option>"}str+="</select></td>"}if(dir==="rtl"){pgl+=str}if(ts.p.pginput===true){pginp="<td id='input"+tp+"' dir='"+dir+"'>"+$.jgrid.template($.jgrid.getRegional(ts,"defaults.pgtext",ts.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(pgid)+"'></span>")+"</td>"}if(ts.p.pgbuttons===true){var po=["first"+tp,"prev"+tp,"next"+tp,"last"+tp],btc=getstyle(stylemodule,"pgButtonBox",true,"ui-pg-button"),pot=[($.jgrid.getRegional(ts,"defaults.pgfirst",ts.p.pgfirst)||""),($.jgrid.getRegional(ts,"defaults.pgprev",ts.p.pgprev)||""),($.jgrid.getRegional(ts,"defaults.pgnext",ts.p.pgnext)||""),($.jgrid.getRegional(ts,"defaults.pglast",ts.p.pglast)||"")];if(dir==="rtl"){po.reverse();pot.reverse()}pgl+="<td id='"+po[0]+"' class='"+btc+"' title='"+pot[0]+"'><span "+getstyle(stylemodule,"icon_first",false,iconbase)+"></span></td>";pgl+="<td id='"+po[1]+"' class='"+btc+"'  title='"+pot[1]+"'><span "+getstyle(stylemodule,"icon_prev",false,iconbase)+"></span></td>";pgl+=pginp!==""?sep+pginp+sep:"";pgl+="<td id='"+po[2]+"' class='"+btc+"' title='"+pot[2]+"'><span "+getstyle(stylemodule,"icon_next",false,iconbase)+"></span></td>";pgl+="<td id='"+po[3]+"' class='"+btc+"' title='"+pot[3]+"'><span "+getstyle(stylemodule,"icon_end",false,iconbase)+"></span></td>"}else{if(pginp!==""){pgl+=pginp}}if(dir==="ltr"){pgl+=str}pgl+="</tr></tbody></table>";if(ts.p.viewrecords===true){$("td#"+pgid+"_"+ts.p.recordpos,"#"+pgcnt).append("<div dir='"+dir+"' style='text-align:"+ts.p.recordpos+"' class='ui-paging-info'></div>")}$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).append(pgl);tdw=$("#gbox_"+$.jgrid.jqID(ts.p.id)).css("font-size")||"11px";$("#gbox_"+$.jgrid.jqID(ts.p.id)).append("<div id='testpg' "+getstyle(stylemodule,"entrieBox",false,"ui-jqgrid")+" style='font-size:"+tdw+";visibility:hidden;' ></div>");twd=$(pgl).clone().appendTo("#testpg").width();$("#testpg").remove();if(twd>0){if(pginp!==""){twd+=50}$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).width(twd)}ts.p._nvtd=[];ts.p._nvtd[0]=twd?Math.floor((ts.p.width-twd)/2):Math.floor(ts.p.width/3);ts.p._nvtd[1]=0;pgl=null;$(".ui-pg-selbox","#"+pgcnt).on("change",function(){if(!clearVals("records",this)){return false}ts.p.page=Math.round(ts.p.rowNum*(ts.p.page-1)/this.value-0.5)+1;ts.p.rowNum=this.value;if(ts.p.pager){$(".ui-pg-selbox",ts.p.pager).val(this.value)}if(ts.p.toppager){$(".ui-pg-selbox",ts.p.toppager).val(this.value)}populate();return false});if(ts.p.pgbuttons===true){$(".ui-pg-button","#"+pgcnt).hover(function(){if($(this).hasClass(disabled)){this.style.cursor="default"}else{$(this).addClass(hover);this.style.cursor="pointer"}},function(){if(!$(this).hasClass(disabled)){$(this).removeClass(hover);this.style.cursor="default"}});$("#first"+$.jgrid.jqID(tp)+", #prev"+$.jgrid.jqID(tp)+", #next"+$.jgrid.jqID(tp)+", #last"+$.jgrid.jqID(tp)).click(function(){if($(this).hasClass(disabled)){return false}var cp=intNum(ts.p.page,1),last=intNum(ts.p.lastpage,1),selclick=false,fp=true,pp=true,np=true,lp=true;if(last===0||last===1){fp=false;pp=false;np=false;lp=false}else{if(last>1&&cp>=1){if(cp===1){fp=false;pp=false}else{if(cp===last){np=false;lp=false}}}else{if(last>1&&cp===0){np=false;lp=false;cp=last-1}}}if(!clearVals(this.id.split("_")[0],this)){return false}if(this.id==="first"+tp&&fp){ts.p.page=1;selclick=true}if(this.id==="prev"+tp&&pp){ts.p.page=(cp-1);selclick=true}if(this.id==="next"+tp&&np){ts.p.page=(cp+1);selclick=true}if(this.id==="last"+tp&&lp){ts.p.page=last;selclick=true}if(selclick){populate()}return false})}if(ts.p.pginput===true){$("#"+pgcnt).on("keypress","input.ui-pg-input",function(e){var key=e.charCode||e.keyCode||0;if(key===13){if(!clearVals("user",this)){return false}$(this).val(intNum($(this).val(),1));ts.p.page=($(this).val()>0)?$(this).val():ts.p.page;populate();return false}return this})}},multiSort=function(iCol,obj,sor){var cm=ts.p.colModel,selTh=ts.p.frozenColumns?obj:ts.grid.headers[iCol].el,so="",sn;$("span.ui-grid-ico-sort",selTh).addClass(disabled);$(selTh).attr("aria-selected","false");sn=(cm[iCol].index||cm[iCol].name);if(typeof sor=="undefined"){if(cm[iCol].lso){if(cm[iCol].lso==="asc"){cm[iCol].lso+="-desc";so="desc"}else{if(cm[iCol].lso==="desc"){cm[iCol].lso+="-asc";so="asc"}else{if(cm[iCol].lso==="asc-desc"||cm[iCol].lso==="desc-asc"){cm[iCol].lso=""}}}}else{cm[iCol].lso=so=cm[iCol].firstsortorder||"asc"}}else{cm[iCol].lso=so=sor}if(so){$("span.s-ico",selTh).show();$("span.ui-icon-"+so,selTh).removeClass(disabled);$(selTh).attr("aria-selected","true")}else{if(!ts.p.viewsortcols[0]){$("span.s-ico",selTh).hide()}}var isn=sortarr.indexOf(sn);if(isn===-1){sortarr.push(sn);sortord.push(so)}else{if(so){sortord[isn]=so}else{sortord.splice(isn,1);sortarr.splice(isn,1)}}ts.p.sortorder="";ts.p.sortname="";for(var i=0,len=sortarr.length;i<len;i++){if(i>0){ts.p.sortname+=", "}ts.p.sortname+=sortarr[i];if(i!==len-1){ts.p.sortname+=" "+sortord[i]}}ts.p.sortorder=sortord[len-1]},sortData=function(index,idxcol,reload,sor,obj){if(!ts.p.colModel[idxcol].sortable){return }if(ts.p.savedRow.length>0){return }if(!reload){if(ts.p.lastsort===idxcol&&ts.p.sortname!==""){if(ts.p.sortorder==="asc"){ts.p.sortorder="desc"}else{if(ts.p.sortorder==="desc"){ts.p.sortorder="asc"}}}else{ts.p.sortorder=ts.p.colModel[idxcol].firstsortorder||"asc"}ts.p.page=1}if(ts.p.multiSort){multiSort(idxcol,obj,sor)}else{if(sor){if(ts.p.lastsort===idxcol&&ts.p.sortorder===sor&&!reload){return }ts.p.sortorder=sor}var previousSelectedTh=ts.grid.headers[ts.p.lastsort]?ts.grid.headers[ts.p.lastsort].el:null,newSelectedTh=ts.p.frozenColumns?obj:ts.grid.headers[idxcol].el,usehide=ts.p.viewsortcols[1]==="single"?true:false,tmpicon;tmpicon=$(previousSelectedTh).find("span.ui-grid-ico-sort");tmpicon.addClass(disabled);if(usehide){$(tmpicon).css("display","none")}$(previousSelectedTh).attr("aria-selected","false");if(ts.p.frozenColumns){tmpicon=ts.grid.fhDiv.find("span.ui-grid-ico-sort");tmpicon.addClass(disabled);if(usehide){tmpicon.css("display","none")}ts.grid.fhDiv.find("th").attr("aria-selected","false")}tmpicon=$(newSelectedTh).find("span.ui-icon-"+ts.p.sortorder);tmpicon.removeClass(disabled);if(usehide){tmpicon.css("display","")}$(newSelectedTh).attr("aria-selected","true");if(!ts.p.viewsortcols[0]){if(ts.p.lastsort!==idxcol){if(ts.p.frozenColumns){ts.grid.fhDiv.find("span.s-ico").hide()}$("span.s-ico",previousSelectedTh).hide();$("span.s-ico",newSelectedTh).show()}else{if(ts.p.sortname===""){$("span.s-ico",newSelectedTh).show()}}}index=index.substring(5+ts.p.id.length+1);ts.p.sortname=ts.p.colModel[idxcol].index||index}if($(ts).triggerHandler("jqGridSortCol",[ts.p.sortname,idxcol,ts.p.sortorder])==="stop"){ts.p.lastsort=idxcol;return }if($.isFunction(ts.p.onSortCol)){if(ts.p.onSortCol.call(ts,ts.p.sortname,idxcol,ts.p.sortorder)==="stop"){ts.p.lastsort=idxcol;return }}if(ts.p.datatype==="local"){if(ts.p.deselectAfterSort){$(ts).jqGrid("resetSelection")}}else{ts.p.selrow=null;if(ts.p.multiselect){setHeadCheckBox(false)}ts.p.selarrrow=[];ts.p.savedRow=[]}if(ts.p.scroll){var sscroll=ts.grid.bDiv.scrollLeft;emptyRows.call(ts,true,false);ts.grid.hDiv.scrollLeft=sscroll}if(ts.p.subGrid&&ts.p.datatype==="local"){$("td.sgexpanded","#"+$.jgrid.jqID(ts.p.id)).each(function(){$(this).trigger("click")})}ts.p._sort=true;populate();ts.p.lastsort=idxcol;if(ts.p.sortname!==index&&idxcol){ts.p.lastsort=idxcol}},setColWidth=function(){var initwidth=0,brd=$.jgrid.cell_width?0:intNum(ts.p.cellLayout,0),vc=0,lvc,scw=intNum(ts.p.scrollOffset,0),cw,hs=false,aw,gw=0,cr;$.each(ts.p.colModel,function(){if(this.hidden===undefined){this.hidden=false}if(ts.p.grouping&&ts.p.autowidth){var ind=$.inArray(this.name,ts.p.groupingView.groupField);if(ind>=0&&ts.p.groupingView.groupColumnShow.length>ind){this.hidden=!ts.p.groupingView.groupColumnShow[ind]}}this.widthOrg=cw=intNum(this.width,0);if(this.hidden===false){initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}}});if(isNaN(ts.p.width)){ts.p.width=initwidth+((ts.p.shrinkToFit===false&&!isNaN(ts.p.height))?scw:0)}grid.width=parseInt(ts.p.width,10);ts.p.tblwidth=initwidth;if(ts.p.shrinkToFit===false&&ts.p.forceFit===true){ts.p.forceFit=false}if(ts.p.shrinkToFit===true&&vc>0){aw=grid.width-brd*vc-gw;if(!isNaN(ts.p.height)){aw-=scw;hs=true}initwidth=0;$.each(ts.p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=Math.round(aw*this.width/(ts.p.tblwidth-brd*vc-gw));this.width=cw;initwidth+=cw;lvc=i}});cr=0;if(hs){if(grid.width-gw-(initwidth+brd*vc)!==scw){cr=grid.width-gw-(initwidth+brd*vc)-scw}}else{if(!hs&&Math.abs(grid.width-gw-(initwidth+brd*vc))!==1){cr=grid.width-gw-(initwidth+brd*vc)}}ts.p.colModel[lvc].width+=cr;ts.p.tblwidth=initwidth+cr+brd*vc+gw;if(ts.p.tblwidth>ts.p.width){ts.p.colModel[lvc].width-=(ts.p.tblwidth-parseInt(ts.p.width,10));ts.p.tblwidth=ts.p.width}}},nextVisible=function(iCol){var ret=iCol,j=iCol,i;for(i=iCol+1;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].hidden!==true){j=i;break}}return j-ret},getOffset=function(iCol){var $th=$(ts.grid.headers[iCol].el),ret=[$th.position().left+$th.outerWidth()];if(ts.p.direction==="rtl"){ret[0]=ts.p.width-ret[0]}ret[0]-=ts.grid.bDiv.scrollLeft;ret.push($(ts.grid.hDiv).position().top);ret.push($(ts.grid.bDiv).offset().top-$(ts.grid.hDiv).offset().top+$(ts.grid.bDiv).height());return ret},getColumnHeaderIndex=function(th){var i,headers=ts.grid.headers,ci=$.jgrid.getCellIndex(th);for(i=0;i<headers.length;i++){if(th===headers[i].el){ci=i;break}}return ci},buildColItems=function(top,left,parent){var cm=ts.p.colModel,len=cm.length,i,cols=[],disp,texts=$.jgrid.getRegional(ts,"colmenu"),str1='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content" role="menu" tabindex="0" style="left:'+left+"px;top:"+top+'px;">';for(i=0;i<len;i++){var hid=!cm[i].hidden?"checked":"",nm=cm[i].name,lb=ts.p.colNames[i];disp=(nm==="cb"||nm==="subgrid"||nm==="rn"||cm[i].hidedlg)?"style='display:none'":"";str1+="<li "+disp+' class="ui-menu-item" role="presentation" draggable="true"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+texts.reorder+'"><span class="'+iconbase+" "+colmenustyle.icon_move+' notclick"></span></td><td class="menu_icon"><input class="'+colmenustyle.input_checkbox+'" type="checkbox" name="'+nm+'" '+hid+'></td><td class="menu_text">'+lb+"</td></tr></table></a></li>";cols.push(i)}str1+="</ul>";$(parent).append(str1);$("#col_menu").addClass("ui-menu "+colmenustyle.menu_widget);if($.fn.html5sortable()){$("#col_menu").html5sortable({handle:"span",forcePlaceholderSize:true}).on("sortupdate",function(e,ui){cols.splice(ui.startindex,1);cols.splice(ui.endindex,0,ui.startindex);$(ts).jqGrid("destroyFrozenColumns");$(ts).jqGrid("remapColumns",cols,true);$(ts).jqGrid("setFrozenColumns");for(i=0;i<len;i++){cols[i]=i}})}$("#col_menu > li > a").on("click",function(e){var checked;if($(e.target).hasClass("notclick")){return }if($(e.target).is(":input")){checked=$(e.target).is(":checked")}else{checked=!$("input",this).is(":checked");$("input",this).prop("checked",checked)}if(!checked){$(ts).jqGrid("hideCol",$("input",this).attr("name"));$(this).parent().attr("draggable","false")}else{$(ts).jqGrid("showCol",$("input",this).attr("name"));$(this).parent().attr("draggable","true")}}).hover(function(){$(this).addClass(hover)},function(){$(this).removeClass(hover)})},buildSearchBox=function(index,top,left,parent){var cm=ts.p.colModel[index],rules,o1="",v1="",r1="",o2="",v2="",so,op,repstr="",selected,elem,numopts=["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts=["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],texts=$.jgrid.getRegional(ts,"search"),common=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].common;if(!cm){return }rules=ts.p.colFilters&&ts.p.colFilters[cm.name]?ts.p.colFilters[cm.name]:false;if(rules&&!$.isEmptyObject(rules)){o1=rules.oper1;v1=rules.value1;r1=rules.rule;o2=rules.oper2;v2=rules.value2}if(!cm.searchoptions){cm.searchoptions={}}if(cm.searchoptions.sopt){so=cm.searchoptions.sopt}else{if(cm.sorttype==="text"){so=stropts}else{so=numopts}}if(cm.searchoptions.groupOps){op=cm.searchoptions.groupOps}else{op=texts.groupOps}elem=$("<form></form>");var str1="<div>"+$.jgrid.getRegional(ts,"colmenu.searchTitle")+"</div>";str1+='<div><select id="oper1" class="'+colmenustyle.filter_select+'">';$.each(texts.odata,function(i,n){selected=n.oper===o1?'selected="selected"':"";if($.inArray(n.oper,so)!==-1){repstr+='<option value="'+n.oper+'" '+selected+">"+n.text+"</option>"}});str1+=repstr;str1+="</select></div>";elem.append(str1);var df="";if(cm.searchoptions.defaultValue){df=$.isFunction(cm.searchoptions.defaultValue)?cm.searchoptions.defaultValue.call(ts):cm.searchoptions.defaultValue}if(v1){df=v1}var soptions=$.extend(cm.searchoptions,{name:cm.index||cm.name,id:"sval1_"+ts.p.idPrefix+cm.name,oper:"search"}),input=$.jgrid.createEl.call(ts,cm.stype,soptions,df,false,$.extend({},$.jgrid.ajaxOptions,ts.p.ajaxSelectOptions||{}));$(input).addClass(colmenustyle.filter_input);str1=$("<div></div>").append(input);elem.append(str1);str1='<div><select id="operand" class="'+colmenustyle.filter_select+'">';$.each(op,function(i,n){selected=n.op===r1?'selected="selected"':"";str1+="<option value='"+n.op+"' "+selected+">"+n.text+"</option>"});str1+="</select></div>";elem.append(str1);repstr="";$.each(texts.odata,function(i,n){selected=n.oper===o2?'selected="selected"':"";if($.inArray(n.oper,so)!==-1){repstr+='<option value="'+n.oper+'" '+selected+">"+n.text+"</option>"}});str1='<div><select id="oper2" class="'+colmenustyle.filter_select+'">'+repstr+"</select></div>";elem.append(str1);if(v2){df=v2}else{df=""}soptions=$.extend(cm.searchoptions,{name:cm.index||cm.name,id:"sval2_"+ts.p.idPrefix+cm.name,oper:"search"});input=$.jgrid.createEl.call(ts,cm.stype,soptions,df,false,$.extend({},$.jgrid.ajaxOptions,ts.p.ajaxSelectOptions||{}));$(input).addClass(colmenustyle.filter_input);str1=$("<div></div>").append(input);elem.append(str1);str1="<div>";str1+="<div class='search_buttons'><a tabindex='0' id='bs_reset' class='fm-button "+common.button+" ui-reset'>"+texts.Reset+"</a></div>";str1+="<div class='search_buttons'><a tabindex='0' id='bs_search' class='fm-button "+common.button+" ui-search'>"+texts.Find+"</a></div>";str1+="</div>";elem.append(str1);elem=$('<li class="ui-menu-item" role="presentation"></li>').append(elem);elem=$('<ul id="search_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="left:'+left+"px;top:"+top+'px;"></ul>').append(elem);$(parent).append(elem);$("#search_menu").addClass("ui-menu "+colmenustyle.menu_widget);$("#bs_reset, #bs_search","#search_menu").hover(function(){$(this).addClass(hover)},function(){$(this).removeClass(hover)});$("#bs_reset",elem).on("click",function(e){ts.p.colFilters[cm.name]={};ts.p.postData.filters=buildFilters();ts.p.search=false;$(ts).trigger("reloadGrid");$("#column_menu").remove()});$("#bs_search",elem).on("click",function(e){ts.p.colFilters[cm.name]={oper1:$("#oper1","#search_menu").val(),value1:$("#sval1_"+ts.p.idPrefix+cm.name,"#search_menu").val(),rule:$("#operand","#search_menu").val(),oper2:$("#oper2","#search_menu").val(),value2:$("#sval2_"+ts.p.idPrefix+cm.name,"#search_menu").val()};ts.p.postData.filters=buildFilters();ts.p.search=true;$(ts).trigger("reloadGrid");$("#column_menu").remove()})},buildFilters=function(){var go="AND",filters='{"groupOp":"'+go+'","rules":[], "groups" : [',i=0;for(var item in ts.p.colFilters){if(ts.p.colFilters.hasOwnProperty(item)){var si=ts.p.colFilters[item];if(!$.isEmptyObject(si)){if(i>0){filters+=","}filters+='{"groupOp": "'+si.rule+'", "rules" : [';filters+='{"field":"'+item+'",';filters+='"op":"'+si.oper1+'",';si.value1+="";filters+='"data":"'+si.value1.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';if(si.value2){filters+=',{"field":"'+item+'",';filters+='"op":"'+si.oper2+'",';si.value2+="";filters+='"data":"'+si.value2.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}'}filters+="]}";i++}else{}}}filters+="]}";return filters},buildGrouping=function(index,isgroup){var cm=ts.p.colModel[index],group=ts.p.groupingView;if(isgroup!==-1){group.groupField.splice(isgroup,1)}else{group.groupField.push(cm.name)}$(ts).jqGrid("groupingGroupBy",group.groupField);if(ts.p.frozenColumns){$(ts).jqGrid("destroyFrozenColumns");$(ts).jqGrid("setFrozenColumns")}},buildFreeze=function(index,isfreeze){var cols=[],i,len=ts.p.colModel.length,lastfrozen=-1,cm=ts.p.colModel;for(i=0;i<len;i++){if(cm[i].frozen){lastfrozen=i}cols.push(i)}cols.splice(index,1);cols.splice(lastfrozen+(isfreeze?1:0),0,index);cm[index].frozen=isfreeze;$(ts).jqGrid("destroyFrozenColumns");$(ts).jqGrid("remapColumns",cols,true);$(ts).jqGrid("setFrozenColumns")},buildColMenu=function(index,left,top){left=parseInt(left,10);top=parseInt(top,10)+25;var fs=$(".ui-jqgrid-view").css("font-size")||"11px";var str='<ul id="column_menu" class="ui-search-menu modal-content column-menu" role="menu" tabindex="0" style="font-size:'+fs+";left:"+left+"px;top:"+top+'px;">',cm=ts.p.colModel[index],op=$.extend({sorting:true,columns:true,filtering:true,seraching:true,grouping:true,freeze:true},cm.coloptions),texts=$.jgrid.getRegional(ts,"colmenu"),label=ts.p.colNames[index],isgroup,isfreeze;if(op.sorting){str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortasc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_sort_asc+'"></span></td><td class="menu_text">'+texts.sortasc+"</td></tr></table></a></li>";str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortdesc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_sort_desc+'"></span></td><td class="menu_text">'+texts.sortdesc+"</td></tr></table></a></li>"}if(op.columns){str+='<li class="ui-menu-item divider" role="separator"></li>';str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="columns"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_columns+'"></span></td><td class="menu_text">'+texts.columns+"</td></tr></table></a></li>"}if(op.filtering){str+='<li class="ui-menu-item divider" role="separator"></li>';str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="filtering"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_filter+'"></span></td><td class="menu_text">'+texts.filter+" "+label+"</td></tr></table></a></li>"}if(op.grouping){isgroup=$.inArray(cm.name,ts.p.groupingView.groupField);str+='<li class="ui-menu-item divider" role="separator"></li>';str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="grouping"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_group+'"></span></td><td class="menu_text">'+(isgroup!==-1?texts.ungrouping:texts.grouping+" "+label)+"</td></tr></table></a></li>"}if(op.freeze){isfreeze=(cm.frozen&&ts.p.frozenColumns)?false:true;str+='<li class="ui-menu-item divider" role="separator"></li>';str+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="freeze"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+iconbase+" "+colmenustyle.icon_freeze+'"></span></td><td class="menu_text">'+(isfreeze?(texts.freeze+" "+label):texts.unfreeze)+"</td></tr></table></a></li>"}str+="</ul>";$("body").append(str);$("#column_menu").addClass("ui-menu "+colmenustyle.menu_widget);if(ts.p.direction==="ltr"){var wcm=$("#column_menu").width()+26;$("#column_menu").css("left",(left-wcm)+"px")}$("#column_menu > li > a").hover(function(){$("#col_menu").remove();$("#search_menu").remove();var left1,top1;if($(this).attr("value")==="columns"){left1=$(this).parent().width()+18,top1=$(this).parent().position().top-5;buildColItems(top1,left1,$(this).parent())}if($(this).attr("value")==="filtering"){left1=$(this).parent().width()+18,top1=$(this).parent().position().top-5;buildSearchBox(index,top1,left1,$(this).parent())}$(this).addClass(hover)},function(){$(this).removeClass(hover)}).click(function(){var v=$(this).attr("value"),sobj=ts.grid.headers[index].el;if(v==="sortasc"){sortData("jqgh_"+ts.p.id+"_"+cm.name,index,true,"asc",sobj)}else{if(v==="sortdesc"){sortData("jqgh_"+ts.p.id+"_"+cm.name,index,true,"desc",sobj)}else{if(v==="grouping"){buildGrouping(index,isgroup)}else{if(v==="freeze"){buildFreeze(index,isfreeze)}}}}if(v.indexOf("sort")!==-1||v==="grouping"||v==="freeze"){$(this).remove()}})},colTemplate;if(ts.p.colMenu){$("body").on("click",function(e){if(!$(e.target).closest(".column-menu").length){$("#column_menu").remove()}})}this.p.id=this.id;if($.inArray(ts.p.multikey,sortkeys)===-1){ts.p.multikey=false}ts.p.keyName=false;for(i=0;i<ts.p.colModel.length;i++){colTemplate=typeof ts.p.colModel[i].template==="string"?($.jgrid.cmTemplate!=null&&typeof $.jgrid.cmTemplate[ts.p.colModel[i].template]==="object"?$.jgrid.cmTemplate[ts.p.colModel[i].template]:{}):ts.p.colModel[i].template;ts.p.colModel[i]=$.extend(true,{},ts.p.cmTemplate,colTemplate||{},ts.p.colModel[i]);if(ts.p.keyName===false&&ts.p.colModel[i].key===true){ts.p.keyName=ts.p.colModel[i].name;ts.p.keyIndex=i}}ts.p.sortorder=ts.p.sortorder.toLowerCase();$.jgrid.cell_width=$.jgrid.cellWidth();if(ts.p.grouping===true){ts.p.scroll=false;ts.p.rownumbers=false;ts.p.treeGrid=false;ts.p.gridview=true}if(this.p.treeGrid===true){try{$(this).jqGrid("setTreeGrid")}catch(_){}if(ts.p.datatype!=="local"){ts.p.localReader={id:"_id_"}}}if(this.p.subGrid){try{$(ts).jqGrid("setSubGrid")}catch(s){}}if(this.p.multiselect){this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?ts.p.multiselectWidth+ts.p.cellLayout:ts.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true,frozen:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:ts.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true,frozen:true})}ts.p.xmlReader=$.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},ts.p.xmlReader);ts.p.jsonReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ts.p.jsonReader);ts.p.localReader=$.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ts.p.localReader);if(ts.p.scroll){ts.p.pgbuttons=false;ts.p.pginput=false;ts.p.rowList=[]}if(ts.p.data.length){normalizeData();refreshIndex()}var thead="<thead><tr class='ui-jqgrid-labels' role='row'>",tdc,idn,w,res,sort="",td,ptr,tbody,imgs,iac="",idc="",tmpcm;if(ts.p.shrinkToFit===true&&ts.p.forceFit===true){for(i=ts.p.colModel.length-1;i>=0;i--){if(!ts.p.colModel[i].hidden){ts.p.colModel[i].resizable=false;break}}}if(ts.p.viewsortcols[1]==="horizontal"){iac=" ui-i-asc";idc=" ui-i-desc"}else{if(ts.p.viewsortcols[1]==="single"){iac=" ui-single-sort-asc";idc=" ui-single-sort-desc";sort=" style='display:none'";ts.p.viewsortcols[0]=false}}tdc=isMSIE?"class='ui-th-div-ie'":"";imgs="<span class='s-ico' style='display:none'>";imgs+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+iac+" ui-sort-"+dir+" "+disabled+" "+iconbase+" "+getstyle(stylemodule,"icon_asc",true)+"'"+sort+"></span>";imgs+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+idc+" ui-sort-"+dir+" "+disabled+" "+iconbase+" "+getstyle(stylemodule,"icon_desc",true)+"'"+sort+"></span></span>";if(ts.p.multiSort){if(ts.p.sortname){sortarr=ts.p.sortname.split(",");for(i=0;i<sortarr.length;i++){sotmp=$.trim(sortarr[i]).split(" ");sortarr[i]=$.trim(sotmp[0]);sortord[i]=sotmp[1]?$.trim(sotmp[1]):ts.p.sortorder||"asc"}}}for(i=0;i<this.p.colNames.length;i++){var tooltip=ts.p.headertitles?(' title="'+$.jgrid.stripHtml(ts.p.colNames[i])+'"'):"";tmpcm=ts.p.colModel[i];if(!tmpcm.hasOwnProperty("colmenu")){tmpcm.colmenu=(tmpcm.name==="rn"||tmpcm.name==="cb"||tmpcm.name==="subgrid")?false:true}thead+="<th id='"+ts.p.id+"_"+tmpcm.name+"' role='columnheader' "+getstyle(stylemodule,"headerBox",false,"ui-th-column ui-th-"+dir)+" "+tooltip+">";idn=tmpcm.index||tmpcm.name;thead+="<div class='ui-th-div' id='jqgh_"+ts.p.id+"_"+tmpcm.name+"' "+tdc+">"+ts.p.colNames[i];if(!tmpcm.width){tmpcm.width=150}else{tmpcm.width=parseInt(tmpcm.width,10)}if(typeof tmpcm.title!=="boolean"){tmpcm.title=true}tmpcm.lso="";if(idn===ts.p.sortname){ts.p.lastsort=i}if(ts.p.multiSort){sotmp=$.inArray(idn,sortarr);if(sotmp!==-1){tmpcm.lso=sortord[sotmp]}}thead+=imgs;if(ts.p.colMenu&&tmpcm.colmenu){thead+="<a class='colmenu' href='#/'><span class='colmenuspan "+iconbase+" "+colmenustyle.icon_menu+"'></span></a>"}thead+="</div></th>"}thead+="</tr></thead>";imgs=null;tmpcm=null;$(this).append(thead);$("thead tr:first th",this).hover(function(){$(this).addClass(hover)},function(){$(this).removeClass(hover)});if(this.p.multiselect){var emp=[],chk;$("#cb_"+$.jgrid.jqID(ts.p.id),this).on("click",function(){ts.p.selarrrow=[];var froz=ts.p.frozenColumns===true?ts.p.id+"_frozen":"";if(this.checked){$(ts.rows).each(function(i){if(i>0){if(!$(this).hasClass("ui-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass(disabled)&&!$(this).hasClass("jqfoot")){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id))[ts.p.useProp?"prop":"attr"]("checked",true);$(this).addClass(highlight).attr("aria-selected","true");ts.p.selarrrow.push(this.id);ts.p.selrow=this.id;if(froz){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id),ts.grid.fbDiv)[ts.p.useProp?"prop":"attr"]("checked",true);$("#"+$.jgrid.jqID(this.id),ts.grid.fbDiv).addClass(highlight)}}}});chk=true;emp=[]}else{$(ts.rows).each(function(i){if(i>0){if(!$(this).hasClass("ui-subgrid")&&!$(this).hasClass("jqgroup")&&!$(this).hasClass(disabled)&&!$(this).hasClass("jqfoot")){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id))[ts.p.useProp?"prop":"attr"]("checked",false);$(this).removeClass(highlight).attr("aria-selected","false");emp.push(this.id);if(froz){$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id),ts.grid.fbDiv)[ts.p.useProp?"prop":"attr"]("checked",false);$("#"+$.jgrid.jqID(this.id),ts.grid.fbDiv).removeClass(highlight)}}}});ts.p.selrow=null;chk=false}$(ts).triggerHandler("jqGridSelectAll",[chk?ts.p.selarrrow:emp,chk]);if($.isFunction(ts.p.onSelectAll)){ts.p.onSelectAll.call(ts,chk?ts.p.selarrrow:emp,chk)}})}if(ts.p.autowidth===true){var pw=$(eg).innerWidth();ts.p.width=pw>0?pw:"nw"}setColWidth();$(eg).css("width",grid.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+ts.p.id+"'>&#160;</div>");if(ts.p.scrollPopUp){$(eg).append("<div "+getstyle(stylemodule,"scrollBox",false,"loading ui-scroll-popup")+" id='scroll_g"+ts.p.id+"'></div>")}$(gv).css("width",grid.width+"px");thead=$("thead:first",ts).get(0);var tfoot="";if(ts.p.footerrow){tfoot+="<table role='presentation' style='width:"+ts.p.tblwidth+"px' "+getstyle(stylemodule,"footerTable",false,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+getstyle(stylemodule,"footerBox",false,"footrow footrow-"+dir)+">"}var thr=$("tr:first",thead),firstr="<tr class='jqgfirstrow' role='row'>";ts.p.disableClick=false;$("th",thr).each(function(j){tmpcm=ts.p.colModel[j];w=tmpcm.width;if(tmpcm.resizable===undefined){tmpcm.resizable=true}if(tmpcm.resizable){res=document.createElement("span");$(res).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+dir).css("cursor","col-resize");$(this).addClass(ts.p.resizeclass)}else{res=""}$(this).css("width",w+"px").prepend(res);res=null;var hdcol="";if(tmpcm.hidden){$(this).css("display","none");hdcol="display:none;"}firstr+="<td role='gridcell' style='height:0px;width:"+w+"px;"+hdcol+"'></td>";grid.headers[j]={width:w,el:this};sort=tmpcm.sortable;if(typeof sort!=="boolean"){tmpcm.sortable=true;sort=true}var nm=tmpcm.name;if(!(nm==="cb"||nm==="subgrid"||nm==="rn")){if(ts.p.viewsortcols[2]){$(">div",this).addClass("ui-jqgrid-sortable")}}if(sort){if(ts.p.multiSort){if(ts.p.viewsortcols[0]){$("div span.s-ico",this).show();if(ts.tmpcm.lso){$("div span.ui-icon-"+tmpcm.lso,this).removeClass(disabled).css("display","")}}else{if(tmpcm.lso){$("div span.s-ico",this).show();$("div span.ui-icon-"+tmpcm.lso,this).removeClass(disabled).css("display","")}}}else{if(ts.p.viewsortcols[0]){$("div span.s-ico",this).show();if(j===ts.p.lastsort){$("div span.ui-icon-"+ts.p.sortorder,this).removeClass(disabled).css("display","")}}else{if(j===ts.p.lastsort&&ts.p.sortname!==""){$("div span.s-ico",this).show();$("div span.ui-icon-"+ts.p.sortorder,this).removeClass(disabled).css("display","")}}}}if(ts.p.footerrow){tfoot+="<td role='gridcell' "+formatCol(j,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(e){if($(e.target).closest("th>span.ui-jqgrid-resize").length!==1){return }var ci=getColumnHeaderIndex(this);if(ts.p.forceFit===true){ts.p.nv=nextVisible(ci)}grid.dragStart(ci,e,getOffset(ci));return false}).click(function(e){if(ts.p.disableClick){ts.p.disableClick=false;return false}var s="th>div.ui-jqgrid-sortable",r,d;if(!ts.p.viewsortcols[2]){s="th>div>span>span.ui-grid-ico-sort"}var t=$(e.target).closest(s);if(t.length!==1){return }var ci;if(ts.p.frozenColumns){var tid=$(this)[0].id.substring(ts.p.id.length+1);$(ts.p.colModel).each(function(i){if(this.name===tid){ci=i;return false}})}else{ci=getColumnHeaderIndex(this)}if($(e.target).hasClass("colmenuspan")){if($("#column_menu")[0]!=null){$("#column_menu").remove()}var colindex=$.jgrid.getCellIndex(e.target);if(colindex===-1){return }var offset=$(this).offset(),left=(offset.left),top=(offset.top);if(ts.p.direction==="ltr"){left+=$(this).outerWidth()}buildColMenu(colindex,left,top,t);e.stopPropagation();return }if(!ts.p.viewsortcols[2]){r=true;d=t.attr("sort")}if(ci!=null){sortData($("div",this)[0].id,ci,r,d,this)}return false});tmpcm=null;if(ts.p.sortable&&$.fn.sortable){try{$(ts).jqGrid("sortableColumns",thr)}catch(e){}}if(ts.p.footerrow){tfoot+="</tr></tbody></table>"}firstr+="</tr>";tbody=document.createElement("tbody");this.appendChild(tbody);$(this).addClass(getstyle(stylemodule,"rowTable",true,"ui-jqgrid-btable ui-common-table")).append(firstr);if(ts.p.altRows){$(this).addClass(getstyle(stylemodule,"stripedTable",true,""))}firstr=null;var hTable=$("<table "+getstyle(stylemodule,"headerTable",false,"ui-jqgrid-htable ui-common-table")+" style='width:"+ts.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'></table>").append(thead),hg=(ts.p.caption&&ts.p.hiddengrid===true)?true:false,hb=$("<div class='ui-jqgrid-hbox"+(dir==="rtl"?"-rtl":"")+"'></div>"),bstw=ts.p.styleUI==="Bootstrap"&&!isNaN(ts.p.height)?2:0;thead=null;grid.hDiv=document.createElement("div");grid.hDiv.style.width=(grid.width-bstw)+"px";grid.hDiv.className=getstyle(stylemodule,"headerDiv",true,"ui-jqgrid-hdiv");$(grid.hDiv).append(hb);$(hb).append(hTable);hTable=null;if(hg){$(grid.hDiv).hide()}if(ts.p.pager){if(typeof ts.p.pager==="string"){if(ts.p.pager.substr(0,1)!=="#"){ts.p.pager="#"+ts.p.pager}}else{ts.p.pager="#"+$(ts.p.pager).attr("id")}$(ts.p.pager).css({width:grid.width+"px"}).addClass(getstyle(stylemodule,"pagerBox",true,"ui-jqgrid-pager")).appendTo(eg);if(hg){$(ts.p.pager).hide()}setPager(ts.p.pager,"")}if(ts.p.cellEdit===false&&ts.p.hoverrows===true){$(ts).on({mouseover:function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="ui-subgrid"){$(ptr).addClass(hover)}},mouseout:function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass(hover)}})}var ri,ci,tdHtml;function selectMultiRow(ri,scb){if((ts.p.multiselect&&ts.p.multiboxonly)||ts.p.multimail){if(scb){$(ts).jqGrid("setSelection",ri,true,e)}else{if(ts.p.multiboxonly&&ts.p.multimail){}else{var frz=ts.p.frozenColumns?ts.p.id+"_frozen":"";$(ts.p.selarrrow).each(function(i,n){var trid=$(ts).jqGrid("getGridRowById",n);if(trid){$(trid).removeClass(highlight)}$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(n))[ts.p.useProp?"prop":"attr"]("checked",false);if(frz){$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(frz)).removeClass(highlight);$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(frz))[ts.p.useProp?"prop":"attr"]("checked",false)}});ts.p.selarrrow=[];$(ts).jqGrid("setSelection",ri,true,e)}}}else{$(ts).jqGrid("setSelection",ri,true,e)}}$(ts).before(grid.hDiv).on({click:function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0||ptr[0].className.indexOf(disabled)>-1||($(td,ts).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==ts.id){return this}var scb=$(td).filter(":enabled").hasClass("cbox"),cSel=$(ts).triggerHandler("jqGridBeforeSelectRow",[ptr[0].id,e]);cSel=(cSel===false||cSel==="stop")?false:true;if($.isFunction(ts.p.beforeSelectRow)){var allowRowSelect=ts.p.beforeSelectRow.call(ts,ptr[0].id,e);if(allowRowSelect===false||allowRowSelect==="stop"){cSel=false}}if(td.tagName==="A"||((td.tagName==="INPUT"||td.tagName==="TEXTAREA"||td.tagName==="OPTION"||td.tagName==="SELECT")&&!scb)){return }ri=ptr[0].id;td=$(td).closest("tr.jqgrow>td");if(td.length>0){ci=$.jgrid.getCellIndex(td);tdHtml=$(td).closest("td,th").html();$(ts).triggerHandler("jqGridCellSelect",[ri,ci,tdHtml,e]);if($.isFunction(ts.p.onCellSelect)){ts.p.onCellSelect.call(ts,ri,ci,tdHtml,e)}}if(ts.p.cellEdit===true){if(ts.p.multiselect&&scb&&cSel){$(ts).jqGrid("setSelection",ri,true,e)}else{if(td.length>0){try{$(ts).jqGrid("editCell",ptr[0].rowIndex,ci,true)}catch(_){}}}return }if(!cSel){return }if(ts.p.multimail){if(e.shiftKey){if(scb){var initialRowSelect=$(ts).jqGrid("getGridParam","selrow"),CurrentSelectIndex=$(ts).jqGrid("getInd",ri),InitialSelectIndex=$(ts).jqGrid("getInd",initialRowSelect),startID="",endID="";if(CurrentSelectIndex>InitialSelectIndex){startID=initialRowSelect;endID=ri}else{startID=ri;endID=initialRowSelect}var shouldSelectRow=false,shouldResetRow=false,perform_select=true;if($.inArray(ri,ts.p.selarrrow)>-1){perform_select=false}$.each($(this).getDataIDs(),function(_,id){if((shouldResetRow=id===startID||shouldResetRow)){$(ts).jqGrid("resetSelection",id)}return id!==endID});if(perform_select){$.each($(this).getDataIDs(),function(_,id){if((shouldSelectRow=id===startID||shouldSelectRow)){$(ts).jqGrid("setSelection",id,false)}return id!==endID})}ts.p.selrow=(CurrentSelectIndex>InitialSelectIndex)?endID:startID;return }window.getSelection().removeAllRanges()}selectMultiRow(ri,scb)}else{if(!ts.p.multikey){selectMultiRow(ri,scb)}else{if(e[ts.p.multikey]){$(ts).jqGrid("setSelection",ri,true,e)}else{if(ts.p.multiselect&&scb){scb=$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+ri).is(":checked");$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+ri)[ts.p.useProp?"prop":"attr"]("checked",!scb)}}}}},reloadGrid:function(e,opts){if(ts.p.treeGrid===true){ts.p.datatype=ts.p.treedatatype}opts=opts||{};if(opts.current){ts.grid.selectionPreserver(ts)}if(ts.p.datatype==="local"){$(ts).jqGrid("resetSelection");if(ts.p.data.length){normalizeData();refreshIndex()}}else{if(!ts.p.treeGrid){ts.p.selrow=null;if(ts.p.multiselect){ts.p.selarrrow=[];setHeadCheckBox(false)}ts.p.savedRow=[]}}if(ts.p.scroll){emptyRows.call(ts,true,false)}if(opts.page){var page=opts.page;if(page>ts.p.lastpage){page=ts.p.lastpage}if(page<1){page=1}ts.p.page=page;if(ts.grid.prevRowHeight){ts.grid.bDiv.scrollTop=(page-1)*ts.grid.prevRowHeight*ts.p.rowNum}else{ts.grid.bDiv.scrollTop=0}}if(ts.grid.prevRowHeight&&ts.p.scroll&&opts.page===undefined){delete ts.p.lastpage;ts.grid.populateVisible()}else{ts.grid.populate()}if(ts.p.inlineNav===true){$(ts).jqGrid("showAddEditButtons")}return false},dblclick:function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return }ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);var dbcr=$(ts).triggerHandler("jqGridDblClickRow",[$(ptr).attr("id"),ri,ci,e]);if(dbcr!=null){return dbcr}if($.isFunction(ts.p.ondblClickRow)){dbcr=ts.p.ondblClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);if(dbcr!=null){return dbcr}}},contextmenu:function(e){td=e.target;ptr=$(td,ts.rows).closest("tr.jqgrow");if($(ptr).length===0){return }if(!ts.p.multiselect){$(ts).jqGrid("setSelection",ptr[0].id,true,e)}ri=ptr[0].rowIndex;ci=$.jgrid.getCellIndex(td);var rcr=$(ts).triggerHandler("jqGridRightClickRow",[$(ptr).attr("id"),ri,ci,e]);if(rcr!=null){return rcr}if($.isFunction(ts.p.onRightClickRow)){rcr=ts.p.onRightClickRow.call(ts,$(ptr).attr("id"),ri,ci,e);if(rcr!=null){return rcr}}}});grid.bDiv=document.createElement("div");if(isMSIE){if(String(ts.p.height).toLowerCase()==="auto"){ts.p.height="100%"}}$(grid.bDiv).append($('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:ts.p.height+(isNaN(ts.p.height)?"":"px"),width:(grid.width-bstw)+"px"}).scroll(grid.scrollGrid);$("table:first",grid.bDiv).css({width:ts.p.tblwidth+"px"});if(!$.support.tbody){if($("tbody",this).length===2){$("tbody:gt(0)",this).remove()}}if(ts.p.multikey){if($.jgrid.msie()){$(grid.bDiv).on("selectstart",function(){return false})}else{$(grid.bDiv).on("mousedown",function(){return false})}}if(hg){$(grid.bDiv).hide()}var icoo=iconbase+" "+getstyle(stylemodule,"icon_caption_open",true),icoc=iconbase+" "+getstyle(stylemodule,"icon_caption_close",true);grid.cDiv=document.createElement("div");var arf=ts.p.hidegrid===true?$("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+cornerall+"' title='"+($.jgrid.getRegional(ts,"defaults.showhide",ts.p.showhide)||"")+"' />").hover(function(){arf.addClass(hover)},function(){arf.removeClass(hover)}).append("<span class='ui-jqgrid-headlink "+icoo+"'></span>").css((dir==="rtl"?"left":"right"),"0px"):"";$(grid.cDiv).append(arf).append("<span class='ui-jqgrid-title'>"+ts.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(dir==="rtl"?"-rtl":"")+" "+getstyle(stylemodule,"gridtitleBox",true));$(grid.cDiv).insertBefore(grid.hDiv);if(ts.p.toolbar[0]){var tbstyle=getstyle(stylemodule,"customtoolbarBox",true,"ui-userdata");grid.uDiv=document.createElement("div");if(ts.p.toolbar[1]==="top"){$(grid.uDiv).insertBefore(grid.hDiv)}else{if(ts.p.toolbar[1]==="bottom"){$(grid.uDiv).insertAfter(grid.hDiv)}}if(ts.p.toolbar[1]==="both"){grid.ubDiv=document.createElement("div");$(grid.uDiv).addClass(tbstyle+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(grid.hDiv).width(grid.width-bstw);$(grid.ubDiv).addClass(tbstyle+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(grid.hDiv).width(grid.width-bstw);if(hg){$(grid.ubDiv).hide()}}else{$(grid.uDiv).width(grid.width-bstw).addClass(tbstyle+" ui-userdata-top").attr("id","t_"+this.id)}if(hg){$(grid.uDiv).hide()}}if(ts.p.toppager){ts.p.toppager=$.jgrid.jqID(ts.p.id)+"_toppager";grid.topDiv=$("<div id='"+ts.p.toppager+"'></div>")[0];ts.p.toppager="#"+ts.p.toppager;$(grid.topDiv).addClass(getstyle(stylemodule,"toppagerBox",true,"ui-jqgrid-toppager")).width(grid.width-bstw).insertBefore(grid.hDiv);setPager(ts.p.toppager,"_t")}if(ts.p.footerrow){grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0];hb=$("<div class='ui-jqgrid-hbox"+(dir==="rtl"?"-rtl":"")+"'></div>");$(grid.sDiv).append(hb).width(grid.width-bstw).insertAfter(grid.hDiv);$(hb).append(tfoot);grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells;if(ts.p.rownumbers){grid.footers[0].className=getstyle(stylemodule,"rownumBox",true,"jqgrid-rownum")}if(hg){$(grid.sDiv).hide()}}hb=null;if(ts.p.caption){var tdt=ts.p.datatype;if(ts.p.hidegrid===true){$(".ui-jqgrid-titlebar-close",grid.cDiv).click(function(e){var onHdCl=$.isFunction(ts.p.onHeaderClick),elems=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",counter,self=this;if(ts.p.toolbar[0]===true){if(ts.p.toolbar[1]==="both"){elems+=", #"+$(grid.ubDiv).attr("id")}elems+=", #"+$(grid.uDiv).attr("id")}counter=$(elems,"#gview_"+$.jgrid.jqID(ts.p.id)).length;if(ts.p.gridstate==="visible"){$(elems,"#gbox_"+$.jgrid.jqID(ts.p.id)).slideUp("fast",function(){counter--;if(counter===0){$("span",self).removeClass(icoo).addClass(icoc);ts.p.gridstate="hidden";if($("#gbox_"+$.jgrid.jqID(ts.p.id)).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(ts.p.id)).hide()}$(ts).triggerHandler("jqGridHeaderClick",[ts.p.gridstate,e]);if(onHdCl){if(!hg){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)}}}})}else{if(ts.p.gridstate==="hidden"){$(elems,"#gbox_"+$.jgrid.jqID(ts.p.id)).slideDown("fast",function(){counter--;if(counter===0){$("span",self).removeClass(icoc).addClass(icoo);if(hg){ts.p.datatype=tdt;populate();hg=false}ts.p.gridstate="visible";if($("#gbox_"+$.jgrid.jqID(ts.p.id)).hasClass("ui-resizable")){$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(ts.p.id)).show()}$(ts).triggerHandler("jqGridHeaderClick",[ts.p.gridstate,e]);if(onHdCl){if(!hg){ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)}}}})}}return false});if(hg){ts.p.datatype="local";$(".ui-jqgrid-titlebar-close",grid.cDiv).trigger("click")}}}else{$(grid.cDiv).hide();if(!ts.p.toppager){$(grid.hDiv).addClass(getstyle(ts.p.styleUI+".common","cornertop",true))}}$(grid.hDiv).after(grid.bDiv).mousemove(function(e){if(grid.resizing){grid.dragMove(e);return false}});$(".ui-jqgrid-labels",grid.hDiv).on("selectstart",function(){return false});$(document).on("mouseup.jqGrid"+ts.p.id,function(){if(grid.resizing){grid.dragEnd(true);return false}return true});if(ts.p.direction==="rtl"){$(ts).on("jqGridAfterGridComplete.setRTLPadding",function(){var vScrollWidth=grid.bDiv.offsetWidth-grid.bDiv.clientWidth;ts.p.scrollOffset=vScrollWidth;$("div:first",grid.hDiv).css({paddingLeft:vScrollWidth+"px"});grid.hDiv.scrollLeft=grid.bDiv.scrollLeft})}ts.formatCol=formatCol;ts.sortData=sortData;ts.updatepager=updatepager;ts.refreshIndex=refreshIndex;ts.setHeadCheckBox=setHeadCheckBox;ts.constructTr=constructTr;ts.formatter=function(rowId,cellval,colpos,rwdat,act){return formatter(rowId,cellval,colpos,rwdat,act)};$.extend(grid,{populate:populate,emptyRows:emptyRows,beginReq:beginReq,endReq:endReq});this.grid=grid;ts.addXmlData=function(d){addXmlData(d)};ts.addJSONData=function(d){addJSONData(d)};ts.addLocalData=function(d){return addLocalData(d)};this.grid.cols=this.rows[0].cells;if($.isFunction(ts.p.onInitGrid)){ts.p.onInitGrid.call(ts)}populate();ts.p.hiddengrid=false;if(ts.p.responsive){var supportsOrientationChange="onorientationchange" in window,orientationEvent=supportsOrientationChange?"orientationchange":"resize";$(window).on(orientationEvent,function(){$(ts).jqGrid("resizeGrid")})}})};$.jgrid.extend({getGridParam:function(name,module){var $t=this[0],ret;if(!$t||!$t.grid){return }if(module===undefined&&typeof module!=="string"){module="jqGrid"}ret=$t.p;if(module!=="jqGrid"){try{ret=$($t).data(module)}catch(e){ret=$t.p}}if(!name){return ret}return ret[name]!==undefined?ret[name]:null},setGridParam:function(newParams,overwrite){return this.each(function(){if(overwrite==null){overwrite=false}if(this.grid&&typeof newParams==="object"){if(overwrite===true){var params=$.extend({},this.p,newParams);this.p=params}else{$.extend(true,this.p,newParams)}}})},getGridRowById:function(rowid){var row;this.each(function(){try{var i=this.rows.length;while(i--){if(rowid.toString()===this.rows[i].id){row=this.rows[i];break}}}catch(e){row=$(this.grid.bDiv).find("#"+$.jgrid.jqID(rowid))}});return row},getDataIDs:function(){var ids=[],i=0,len,j=0;this.each(function(){len=this.rows.length;if(len&&len>0){while(i<len){if($(this.rows[i]).hasClass("jqgrow")){ids[j]=this.rows[i].id;j++}i++}}});return ids},setSelection:function(selection,onsr,e){return this.each(function(){var $t=this,stat,pt,ner,ia,tpsr,fid,csr,getstyle=$.jgrid.getMethod("getStyleUI"),highlight=getstyle($t.p.styleUI+".common","highlight",true),disabled=getstyle($t.p.styleUI+".common","disabled",true);if(selection===undefined){return }onsr=onsr===false?false:true;pt=$($t).jqGrid("getGridRowById",selection);if(!pt||!pt.className||pt.className.indexOf(disabled)>-1){return }function scrGrid(iR){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,rpos=$($t.rows[iR]).position().top,rh=$t.rows[iR].clientHeight;if(rpos+rh>=ch+st){$($t.grid.bDiv)[0].scrollTop=rpos-(ch+st)+rh+st}else{if(rpos<ch+st){if(rpos<st){$($t.grid.bDiv)[0].scrollTop=rpos}}}}if($t.p.scrollrows===true){ner=$($t).jqGrid("getGridRowById",selection).rowIndex;if(ner>=0){scrGrid(ner)}}if($t.p.frozenColumns===true){fid=$t.p.id+"_frozen"}if(!$t.p.multiselect){if(pt.className!=="ui-subgrid"){if($t.p.selrow!==pt.id){csr=$($t).jqGrid("getGridRowById",$t.p.selrow);if(csr){$(csr).removeClass(highlight).attr({"aria-selected":"false",tabindex:"-1"})}$(pt).addClass(highlight).attr({"aria-selected":"true",tabindex:"0"});if(fid){$("#"+$.jgrid.jqID($t.p.selrow),"#"+$.jgrid.jqID(fid)).removeClass(highlight);$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).addClass(highlight)}stat=true}else{stat=false}$t.p.selrow=pt.id;if(onsr){$($t).triggerHandler("jqGridSelectRow",[pt.id,stat,e]);if($t.p.onSelectRow){$t.p.onSelectRow.call($t,pt.id,stat,e)}}}}else{$t.setHeadCheckBox(false);$t.p.selrow=pt.id;ia=$.inArray($t.p.selrow,$t.p.selarrrow);if(ia===-1){if(pt.className!=="ui-subgrid"){$(pt).addClass(highlight).attr("aria-selected","true")}stat=true;$t.p.selarrrow.push($t.p.selrow)}else{if(pt.className!=="ui-subgrid"){$(pt).removeClass(highlight).attr("aria-selected","false")}stat=false;$t.p.selarrrow.splice(ia,1);tpsr=$t.p.selarrrow[0];$t.p.selrow=(tpsr===undefined)?null:tpsr}$("#jqg_"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(pt.id))[$t.p.useProp?"prop":"attr"]("checked",stat);if(fid){if(ia===-1){$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).addClass(highlight)}else{$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).removeClass(highlight)}$("#jqg_"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid))[$t.p.useProp?"prop":"attr"]("checked",stat)}if(onsr){$($t).triggerHandler("jqGridSelectRow",[pt.id,stat,e]);if($t.p.onSelectRow){$t.p.onSelectRow.call($t,pt.id,stat,e)}}}})},resetSelection:function(rowid){return this.each(function(){var t=this,sr,fid,getstyle=$.jgrid.getMethod("getStyleUI"),highlight=getstyle(t.p.styleUI+".common","highlight",true),hover=getstyle(t.p.styleUI+".common","hover",true);if(t.p.frozenColumns===true){fid=t.p.id+"_frozen"}if(rowid!==undefined){sr=rowid===t.p.selrow?t.p.selrow:rowid;$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(sr)).removeClass(highlight).attr("aria-selected","false");if(fid){$("#"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(fid)).removeClass(highlight)}if(t.p.multiselect){$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(t.p.id))[t.p.useProp?"prop":"attr"]("checked",false);if(fid){$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(fid))[t.p.useProp?"prop":"attr"]("checked",false)}t.setHeadCheckBox(false);var ia=$.inArray($.jgrid.jqID(sr),t.p.selarrrow);if(ia!==-1){t.p.selarrrow.splice(ia,1)}}if(t.p.onUnSelectRow){t.p.onUnSelectRow.call(t,sr)}sr=null}else{if(!t.p.multiselect){if(t.p.selrow){$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass(highlight).attr("aria-selected","false");if(fid){$("#"+$.jgrid.jqID(t.p.selrow),"#"+$.jgrid.jqID(fid)).removeClass(highlight)}if(t.p.onUnSelectRow){t.p.onUnSelectRow.call(t,t.p.selrow)}t.p.selrow=null}}else{$(t.p.selarrrow).each(function(i,n){$($(t).jqGrid("getGridRowById",n)).removeClass(highlight).attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n))[t.p.useProp?"prop":"attr"]("checked",false);if(fid){$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(fid)).removeClass(highlight);$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(fid))[t.p.useProp?"prop":"attr"]("checked",false)}if(t.p.onUnSelectRow){t.p.onUnSelectRow.call(t,n)}});t.setHeadCheckBox(false);t.p.selarrrow=[];t.p.selrow=null}}if(t.p.cellEdit===true){if(parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0){$("td:eq("+t.p.iCol+")",t.rows[t.p.iRow]).removeClass("edit-cell "+highlight);$(t.rows[t.p.iRow]).removeClass("selected-row "+hover)}}t.p.savedRow=[]})},getRowData:function(rowid,usedata){var res={},resall,getall=false,len,j=0;this.each(function(){var $t=this,nm,ind;if(rowid==null){getall=true;resall=[];len=$t.rows.length-1}else{ind=$($t).jqGrid("getGridRowById",rowid);if(!ind){return res}len=1}if(!(usedata&&usedata===true&&$t.p.data.length>0)){usedata=false}while(j<len){if(getall){ind=$t.rows[j+1]}if($(ind).hasClass("jqgrow")){if(usedata){res=$t.p.data[$t.p._index[ind.id]]}else{$('td[role="gridcell"]',ind).each(function(i){nm=$t.p.colModel[i].name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if($t.p.treeGrid===true&&nm===$t.p.ExpandColumn){res[nm]=$.jgrid.htmlDecode($("span:first",this).html())}else{try{res[nm]=$.unformat.call($t,this,{rowId:ind.id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}}})}if(getall){resall.push(res);res={}}}j++}});return resall||res},delRowData:function(rowid){var success=false,rowInd,ia,nextRow;this.each(function(){var $t=this;rowInd=$($t).jqGrid("getGridRowById",rowid);if(!rowInd){return false}if($t.p.subGrid){nextRow=$(rowInd).next();if(nextRow.hasClass("ui-subgrid")){nextRow.remove()}}$(rowInd).remove();$t.p.records--;$t.p.reccount--;$t.updatepager(true,false);success=true;if($t.p.multiselect){ia=$.inArray(rowid,$t.p.selarrrow);if(ia!==-1){$t.p.selarrrow.splice(ia,1)}}if($t.p.multiselect&&$t.p.selarrrow.length>0){$t.p.selrow=$t.p.selarrrow[$t.p.selarrrow.length-1]}else{if($t.p.selrow===rowid){$t.p.selrow=null}}if($t.p.datatype==="local"){var id=$.jgrid.stripPref($t.p.idPrefix,rowid),pos=$t.p._index[id];if(pos!==undefined){$t.p.data.splice(pos,1);$t.refreshIndex()}}});return success},setRowData:function(rowid,data,cssp){var nm,success=true,title;this.each(function(){if(!this.grid){return false}var t=this,vl,ind,cp=typeof cssp,lcdata={};ind=$(this).jqGrid("getGridRowById",rowid);if(!ind){return false}if(data){try{$(this.p.colModel).each(function(i){nm=this.name;var dval=$.jgrid.getAccessor(data,nm);if(dval!==undefined){lcdata[nm]=this.formatter&&typeof this.formatter==="string"&&this.formatter==="date"?$.unformat.date.call(t,dval,this):dval;vl=t.formatter(rowid,lcdata[nm],i,data,"edit");title=this.title?{title:$.jgrid.stripHtml(vl)}:{};if(t.p.treeGrid===true&&nm===t.p.ExpandColumn){$("td[role='gridcell']:eq("+i+") > span:first",ind).html(vl).attr(title)}else{$("td[role='gridcell']:eq("+i+")",ind).html(vl).attr(title)}}});if(t.p.datatype==="local"){var id=$.jgrid.stripPref(t.p.idPrefix,rowid),pos=t.p._index[id],key;if(t.p.treeGrid){for(key in t.p.treeReader){if(t.p.treeReader.hasOwnProperty(key)){delete lcdata[t.p.treeReader[key]]}}}if(pos!==undefined){t.p.data[pos]=$.extend(true,t.p.data[pos],lcdata)}lcdata=null}}catch(e){success=false}}if(success){if(cp==="string"){$(ind).addClass(cssp)}else{if(cssp!==null&&cp==="object"){$(ind).css(cssp)}}$(t).triggerHandler("jqGridAfterGridComplete")}});return success},addRowData:function(rowid,rdata,pos,src){if($.inArray(pos,["first","last","before","after"])===-1){pos="last"}var success=false,nm,row,rnc="",msc="",gi,si,ni,sind,i,v,prp="",aradd,cnm,data,cm,id;if(rdata){if($.isArray(rdata)){aradd=true;cnm=rowid}else{rdata=[rdata];aradd=false}this.each(function(){var t=this,datalen=rdata.length;ni=t.p.rownumbers===true?1:0;gi=t.p.multiselect===true?1:0;si=t.p.subGrid===true?1:0;if(!aradd){if(rowid!==undefined){rowid=String(rowid)}else{rowid=$.jgrid.randId();if(t.p.keyName!==false){cnm=t.p.keyName;if(rdata[0][cnm]!==undefined){rowid=rdata[0][cnm]}}}}var k=0,classes=$(t).jqGrid("getStyleUI",t.p.styleUI+".base","rowBox",true,"jqgrow ui-row-"+t.p.direction),lcdata={},air=$.isFunction(t.p.afterInsertRow)?true:false;if(ni){rnc=$(t).jqGrid("getStyleUI",t.p.styleUI+".base","rownumBox",false,"jqgrid-rownum")}if(gi){msc=$(t).jqGrid("getStyleUI",t.p.styleUI+".base","multiBox",false,"cbox")}while(k<datalen){data=rdata[k];row=[];if(aradd){try{rowid=data[cnm];if(rowid===undefined){rowid=$.jgrid.randId()}}catch(e){rowid=$.jgrid.randId()}}id=rowid;rowid=t.p.idPrefix+rowid;if(ni){prp=t.formatCol(0,1,"",null,rowid,true);row[row.length]='<td role="gridcell" '+rnc+" "+prp+">0</td>"}if(gi){v='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+rowid+'" '+msc+"/>";prp=t.formatCol(ni,1,"",null,rowid,true);row[row.length]='<td role="gridcell" '+prp+">"+v+"</td>"}if(si){row[row.length]=$(t).jqGrid("addSubGridCell",gi+ni,1)}for(i=gi+si+ni;i<t.p.colModel.length;i++){cm=t.p.colModel[i];nm=cm.name;lcdata[nm]=data[nm];v=t.formatter(rowid,$.jgrid.getAccessor(data,nm),i,data);prp=t.formatCol(i,1,v,data,rowid,lcdata);row[row.length]='<td role="gridcell" '+prp+">"+v+"</td>"}row.unshift(t.constructTr(rowid,false,classes,lcdata,data));row[row.length]="</tr>";if(t.rows.length===0){$("table:first",t.grid.bDiv).append(row.join(""))}else{switch(pos){case"last":$(t.rows[t.rows.length-1]).after(row.join(""));sind=t.rows.length-1;break;case"first":$(t.rows[0]).after(row.join(""));sind=1;break;case"after":sind=$(t).jqGrid("getGridRowById",src);if(sind){if($(t.rows[sind.rowIndex+1]).hasClass("ui-subgrid")){$(t.rows[sind.rowIndex+1]).after(row)}else{$(sind).after(row.join(""))}sind=sind.rowIndex+1}break;case"before":sind=$(t).jqGrid("getGridRowById",src);if(sind){$(sind).before(row.join(""));sind=sind.rowIndex-1}break}}if(t.p.subGrid===true){$(t).jqGrid("addSubGrid",gi+ni,sind)}t.p.records++;t.p.reccount++;$(t).triggerHandler("jqGridAfterInsertRow",[rowid,data,data]);if(air){t.p.afterInsertRow.call(t,rowid,data,data)}k++;if(t.p.datatype==="local"){lcdata[t.p.localReader.id]=id;t.p._index[id]=t.p.data.length;t.p.data.push(lcdata);lcdata={}}}t.updatepager(true,true);success=true})}return success},footerData:function(action,data,format){var nm,success=false,res={},title;function isEmpty(obj){var i;for(i in obj){if(obj.hasOwnProperty(i)){return false}}return true}if(action===undefined){action="get"}if(typeof format!=="boolean"){format=true}action=action.toLowerCase();this.each(function(){var t=this,vl;if(!t.grid||!t.p.footerrow){return false}if(action==="set"){if(isEmpty(data)){return false}}success=true;$(this.p.colModel).each(function(i){nm=this.name;if(action==="set"){if(data[nm]!==undefined){vl=format?t.formatter("",data[nm],i,data,"edit"):data[nm];title=this.title?{title:$.jgrid.stripHtml(vl)}:{};$("tr.footrow td:eq("+i+")",t.grid.sDiv).html(vl).attr(title);success=true}}else{if(action==="get"){res[nm]=$("tr.footrow td:eq("+i+")",t.grid.sDiv).html()}}})});return action==="get"?res:success},showHideCol:function(colname,show){return this.each(function(){var $t=this,fndh=false,brd=$.jgrid.cell_width?0:$t.p.cellLayout,cw;if(!$t.grid){return }if(typeof colname==="string"){colname=[colname]}show=show!=="none"?"":"none";var sw=show===""?true:false,gh=$t.p.groupHeader&&($.isArray($t.p.groupHeader)||$.isFunction($t.p.groupHeader));if(gh){$($t).jqGrid("destroyGroupHeader",false)}$(this.p.colModel).each(function(i){if($.inArray(this.name,colname)!==-1&&this.hidden===sw){if($t.p.frozenColumns===true&&this.frozen===true){return true}$("tr[role=row]",$t.grid.hDiv).each(function(){$(this.cells[i]).css("display",show)});$($t.rows).each(function(){if(!$(this).hasClass("jqgroup")){$(this.cells[i]).css("display",show)}});if($t.p.footerrow){$("tr.footrow td:eq("+i+")",$t.grid.sDiv).css("display",show)}cw=parseInt(this.width,10);if(show==="none"){$t.p.tblwidth-=cw+brd}else{$t.p.tblwidth+=cw+brd}this.hidden=!sw;fndh=true;$($t).triggerHandler("jqGridShowHideCol",[sw,this.name,i])}});if(fndh===true){if($t.p.shrinkToFit===true&&!isNaN($t.p.height)){$t.p.tblwidth+=parseInt($t.p.scrollOffset,10)}$($t).jqGrid("setGridWidth",$t.p.shrinkToFit===true?$t.p.tblwidth:$t.p.width)}if(gh){var gHead=$.extend([],$t.p.groupHeader);$t.p.groupHeader=null;for(var k=0;k<gHead.length;k++){$($t).jqGrid("setGroupHeaders",gHead[k])}}})},hideCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"none")})},showCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"")})},remapColumns:function(permutation,updateCells,keepHeader){function resortArray(a){var ac;if(a.length){ac=$.makeArray(a)}else{ac=$.extend({},a)}$.each(permutation,function(i){a[i]=ac[this]})}var ts=this.get(0);function resortRows(parent,clobj){$(">tr"+(clobj||""),parent).each(function(){var row=this;var elems=$.makeArray(row.cells);$.each(permutation,function(){var e=elems[this];if(e){row.appendChild(e)}})})}resortArray(ts.p.colModel);resortArray(ts.p.colNames);resortArray(ts.grid.headers);resortRows($("thead:first",ts.grid.hDiv),keepHeader&&":not(.ui-jqgrid-labels)");if(updateCells){resortRows($("#"+$.jgrid.jqID(ts.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot")}if(ts.p.footerrow){resortRows($("tbody:first",ts.grid.sDiv))}if(ts.p.remapColumns){if(!ts.p.remapColumns.length){ts.p.remapColumns=$.makeArray(permutation)}else{resortArray(ts.p.remapColumns)}}ts.p.lastsort=$.inArray(ts.p.lastsort,permutation);if(ts.p.treeGrid){ts.p.expColInd=$.inArray(ts.p.expColInd,permutation)}$(ts).triggerHandler("jqGridRemapColumns",[permutation,updateCells,keepHeader])},setGridWidth:function(nwidth,shrink){return this.each(function(){if(!this.grid){return }var $t=this,cw,initwidth=0,brd=$.jgrid.cell_width?0:$t.p.cellLayout,lvc,vc=0,hs=false,scw=$t.p.scrollOffset,aw,gw=0,cr,bstw=$t.p.styleUI==="Bootstrap"?2:0;if(typeof shrink!=="boolean"){shrink=$t.p.shrinkToFit}if(isNaN(nwidth)){return }nwidth=parseInt(nwidth,10);$t.grid.width=$t.p.width=nwidth;$("#gbox_"+$.jgrid.jqID($t.p.id)).css("width",nwidth+"px");$("#gview_"+$.jgrid.jqID($t.p.id)).css("width",nwidth+"px");$($t.grid.bDiv).css("width",(nwidth-bstw)+"px");$($t.grid.hDiv).css("width",(nwidth-bstw)+"px");if($t.p.pager){$($t.p.pager).css("width",nwidth+"px")}if($t.p.toppager){$($t.p.toppager).css("width",(nwidth-bstw)+"px")}if($t.p.toolbar[0]===true){$($t.grid.uDiv).css("width",(nwidth-bstw)+"px");if($t.p.toolbar[1]==="both"){$($t.grid.ubDiv).css("width",(nwidth-bstw)+"px")}}if($t.p.footerrow){$($t.grid.sDiv).css("width",(nwidth-bstw)+"px")}if(shrink===false&&$t.p.forceFit===true){$t.p.forceFit=false}if(shrink===true){$.each($t.p.colModel,function(){if(this.hidden===false){cw=this.widthOrg;initwidth+=cw+brd;if(this.fixed){gw+=cw+brd}else{vc++}}});if(vc===0){return }$t.p.tblwidth=initwidth;aw=nwidth-brd*vc-gw;if(!isNaN($t.p.height)){if($($t.grid.bDiv)[0].clientHeight<$($t.grid.bDiv)[0].scrollHeight||$t.rows.length===1){hs=true;aw-=scw}}initwidth=0;var cle=$t.grid.cols.length>0;$.each($t.p.colModel,function(i){if(this.hidden===false&&!this.fixed){cw=this.widthOrg;cw=Math.round(aw*cw/($t.p.tblwidth-brd*vc-gw));if(cw<0){return }this.width=cw;initwidth+=cw;$t.grid.headers[i].width=cw;$t.grid.headers[i].el.style.width=cw+"px";if($t.p.footerrow){$t.grid.footers[i].style.width=cw+"px"}if(cle){$t.grid.cols[i].style.width=cw+"px"}lvc=i}});if(!lvc){return }cr=0;if(hs){if(nwidth-gw-(initwidth+brd*vc)!==scw){cr=nwidth-gw-(initwidth+brd*vc)-scw}}else{if(Math.abs(nwidth-gw-(initwidth+brd*vc))!==1){cr=nwidth-gw-(initwidth+brd*vc)}}$t.p.colModel[lvc].width+=cr;$t.p.tblwidth=initwidth+cr+brd*vc+gw;if($t.p.tblwidth>nwidth){var delta=$t.p.tblwidth-parseInt(nwidth,10);$t.p.tblwidth=nwidth;cw=$t.p.colModel[lvc].width=$t.p.colModel[lvc].width-delta}else{cw=$t.p.colModel[lvc].width}$t.grid.headers[lvc].width=cw;$t.grid.headers[lvc].el.style.width=cw+"px";if(cle){$t.grid.cols[lvc].style.width=cw+"px"}if($t.p.footerrow){$t.grid.footers[lvc].style.width=cw+"px"}}if($t.p.tblwidth){$("table:first",$t.grid.bDiv).css("width",$t.p.tblwidth+"px");$("table:first",$t.grid.hDiv).css("width",$t.p.tblwidth+"px");$t.grid.hDiv.scrollLeft=$t.grid.bDiv.scrollLeft;if($t.p.footerrow){$("table:first",$t.grid.sDiv).css("width",$t.p.tblwidth+"px")}}})},setGridHeight:function(nh){return this.each(function(){var $t=this;if(!$t.grid){return }var bDiv=$($t.grid.bDiv);bDiv.css({height:nh+(isNaN(nh)?"":"px")});if($t.p.frozenColumns===true){$("#"+$.jgrid.jqID($t.p.id)+"_frozen").parent().height(bDiv.height()-16)}$t.p.height=nh;if($t.p.scroll){$t.grid.populateVisible()}})},setCaption:function(newcap){return this.each(function(){var ctop=$(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",true);this.p.caption=newcap;$(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(newcap);$(this.grid.cDiv).show();$(this.grid.hDiv).removeClass(ctop)})},setLabel:function(colname,nData,prop,attrp){return this.each(function(){var $t=this,pos=-1;if(!$t.grid){return }if(colname!=null){if(isNaN(colname)){$($t.p.colModel).each(function(i){if(this.name===colname){pos=i;return false}})}else{pos=parseInt(colname,10)}}else{return }if(pos>=0){var thecol=$("tr.ui-jqgrid-labels th:eq("+pos+")",$t.grid.hDiv);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico);$t.p.colNames[pos]=nData}if(prop){if(typeof prop==="string"){$(thecol).addClass(prop)}else{$(thecol).css(prop)}}if(typeof attrp==="object"){$(thecol).attr(attrp)}}})},setSortIcon:function(colname,position){return this.each(function(){var $t=this,pos=-1;if(!$t.grid){return }if(colname!=null){if(isNaN(colname)){$($t.p.colModel).each(function(i){if(this.name===colname){pos=i;return false}})}else{pos=parseInt(colname,10)}}else{return }if(pos>=0){var thecol=$("tr.ui-jqgrid-labels th:eq("+pos+")",$t.grid.hDiv);if(position==="left"){thecol.find(".s-ico").css("float","left")}else{thecol.find(".s-ico").css("float","none")}}})},setCell:function(rowid,colname,nData,cssp,attrp,forceupd){return this.each(function(){var $t=this,pos=-1,v,title;if(!$t.grid){return }if(isNaN(colname)){$($t.p.colModel).each(function(i){if(this.name===colname){pos=i;return false}})}else{pos=parseInt(colname,10)}if(pos>=0){var ind=$($t).jqGrid("getGridRowById",rowid);if(ind){var tcell=$("td:eq("+pos+")",ind),cl=0,rawdat=[];if(nData!==""||forceupd===true){if(ind.cells!==undefined){while(cl<ind.cells.length){rawdat.push(ind.cells[cl].innerHTML);cl++}}v=$t.formatter(rowid,nData,pos,rawdat,"edit");title=$t.p.colModel[pos].title?{title:$.jgrid.stripHtml(v)}:{};if($t.p.treeGrid&&$(".tree-wrap",$(tcell)).length>0){$("span",$(tcell)).html(v).attr(title)}else{$(tcell).html(v).attr(title)}if($t.p.datatype==="local"){var cm=$t.p.colModel[pos],index;nData=cm.formatter&&typeof cm.formatter==="string"&&cm.formatter==="date"?$.unformat.date.call($t,nData,cm):nData;index=$t.p._index[$.jgrid.stripPref($t.p.idPrefix,rowid)];if(index!==undefined){$t.p.data[index][cm.name]=nData}}}if(typeof cssp==="string"){$(tcell).addClass(cssp)}else{if(cssp){$(tcell).css(cssp)}}if(typeof attrp==="object"){$(tcell).attr(attrp)}}}})},getCell:function(rowid,col){var ret=false;this.each(function(){var $t=this,pos=-1,cnm,ind;if(!$t.grid){return }cnm=col;if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){cnm=this.name;pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){ind=$($t).jqGrid("getGridRowById",rowid);if(ind){try{ret=$.unformat.call($t,$("td:eq("+pos+")",ind),{rowId:ind.id,colModel:$t.p.colModel[pos]},pos)}catch(e){ret=$.jgrid.htmlDecode($("td:eq("+pos+")",ind).html())}}if($t.p.treeGrid&&ret&&$t.p.ExpandColumn===cnm){ret=$("<div>"+ret+"</div>").find("span:first").html()}}});return ret},getCol:function(col,obj,mathopr){var ret=[],val,sum=0,min,max,v;obj=typeof obj!=="boolean"?false:obj;if(mathopr===undefined){mathopr=false}this.each(function(){var $t=this,pos=-1;if(!$t.grid){return }if(isNaN(col)){$($t.p.colModel).each(function(i){if(this.name===col){pos=i;return false}})}else{pos=parseInt(col,10)}if(pos>=0){var ln=$t.rows.length,i=0,dlen=0;if(ln&&ln>0){while(i<ln){if($($t.rows[i]).hasClass("jqgrow")){try{val=$.unformat.call($t,$($t.rows[i].cells[pos]),{rowId:$t.rows[i].id,colModel:$t.p.colModel[pos]},pos)}catch(e){val=$.jgrid.htmlDecode($t.rows[i].cells[pos].innerHTML)}if(mathopr){v=parseFloat(val);if(!isNaN(v)){sum+=v;if(max===undefined){max=min=v}min=Math.min(min,v);max=Math.max(max,v);dlen++}}else{if(obj){ret.push({id:$t.rows[i].id,value:val})}else{ret.push(val)}}}i++}if(mathopr){switch(mathopr.toLowerCase()){case"sum":ret=sum;break;case"avg":ret=sum/dlen;break;case"count":ret=(ln-1);break;case"min":ret=min;break;case"max":ret=max;break}}}}});return ret},clearGridData:function(clearfooter){return this.each(function(){var $t=this;if(!$t.grid){return }if(typeof clearfooter!=="boolean"){clearfooter=false}if($t.p.deepempty){$("#"+$.jgrid.jqID($t.p.id)+" tbody:first tr:gt(0)").remove()}else{var trf=$("#"+$.jgrid.jqID($t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID($t.p.id)+" tbody:first").empty().append(trf)}if($t.p.footerrow&&clearfooter){$(".ui-jqgrid-ftable td",$t.grid.sDiv).html("&#160;")}$t.p.selrow=null;$t.p.selarrrow=[];$t.p.savedRow=[];$t.p.records=0;$t.p.page=1;$t.p.lastpage=0;$t.p.reccount=0;$t.p.data=[];$t.p._index={};$t.updatepager(true,false)})},getInd:function(rowid,rc){var ret=false,rw;this.each(function(){rw=$(this).jqGrid("getGridRowById",rowid);if(rw){ret=rc===true?rw:rw.rowIndex}});return ret},bindKeys:function(settings){var o=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},settings||{});return this.each(function(){var $t=this;if(!$("body").is("[role]")){$("body").attr("role","application")}$t.p.scrollrows=o.scrollingRows;$($t).keydown(function(event){var target=$($t).find("tr[tabindex=0]")[0],id,r,mind,expanded=$t.p.treeReader.expanded_field;if(target){mind=$t.p._index[$.jgrid.stripPref($t.p.idPrefix,target.id)];if(event.keyCode===37||event.keyCode===38||event.keyCode===39||event.keyCode===40){if(event.keyCode===38){r=target.previousSibling;id="";if(r){if($(r).is(":hidden")){while(r){r=r.previousSibling;if(!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}}else{id=r.id}}$($t).jqGrid("setSelection",id,true,event);event.preventDefault()}if(event.keyCode===40){r=target.nextSibling;id="";if(r){if($(r).is(":hidden")){while(r){r=r.nextSibling;if(!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}}else{id=r.id}}$($t).jqGrid("setSelection",id,true,event);event.preventDefault()}if(event.keyCode===37){if($t.p.treeGrid&&$t.p.data[mind][expanded]){$(target).find("div.treeclick").trigger("click")}$($t).triggerHandler("jqGridKeyLeft",[$t.p.selrow]);if($.isFunction(o.onLeftKey)){o.onLeftKey.call($t,$t.p.selrow)}}if(event.keyCode===39){if($t.p.treeGrid&&!$t.p.data[mind][expanded]){$(target).find("div.treeclick").trigger("click")}$($t).triggerHandler("jqGridKeyRight",[$t.p.selrow]);if($.isFunction(o.onRightKey)){o.onRightKey.call($t,$t.p.selrow)}}}else{if(event.keyCode===13){$($t).triggerHandler("jqGridKeyEnter",[$t.p.selrow]);if($.isFunction(o.onEnter)){o.onEnter.call($t,$t.p.selrow)}}else{if(event.keyCode===32){$($t).triggerHandler("jqGridKeySpace",[$t.p.selrow]);if($.isFunction(o.onSpace)){o.onSpace.call($t,$t.p.selrow)}}}}}})})},unbindKeys:function(){return this.each(function(){$(this).off("keydown")})},getLocalRow:function(rowid){var ret=false,ind;this.each(function(){if(rowid!==undefined){ind=this.p._index[$.jgrid.stripPref(this.p.idPrefix,rowid)];if(ind>=0){ret=this.p.data[ind]}}});return ret},progressBar:function(p){p=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},p||{});return this.each(function(){var sh=p.method==="show"?true:false,loadDiv=$("#load_"+$.jgrid.jqID(this.p.id)),offsetParent,top,scrollTop=$(window).scrollTop();if(p.htmlcontent!==""){loadDiv.html(p.htmlcontent)}switch(p.loadtype){case"disable":break;case"enable":loadDiv.toggle(sh);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).toggle(sh);loadDiv.toggle(sh);break}if(loadDiv.is(":visible")){offsetParent=loadDiv.offsetParent();loadDiv.css("top","");if(loadDiv.offset().top<scrollTop){top=Math.min(10+scrollTop-offsetParent.offset().top,offsetParent.height()-loadDiv.height());loadDiv.css("top",top+"px")}}})},getColProp:function(colname){var ret={},$t=this[0];if(!$t.grid){return false}var cM=$t.p.colModel,i;for(i=0;i<cM.length;i++){if(cM[i].name===colname){ret=cM[i];break}}return ret},setColProp:function(colname,obj){return this.each(function(){if(this.grid){if($.isPlainObject(obj)){var cM=this.p.colModel,i;for(i=0;i<cM.length;i++){if(cM[i].name===colname){$.extend(true,this.p.colModel[i],obj);break}}}}})},sortGrid:function(colname,reload,sor){return this.each(function(){var $t=this,idx=-1,i,sobj=false;if(!$t.grid){return }if(!colname){colname=$t.p.sortname}for(i=0;i<$t.p.colModel.length;i++){if($t.p.colModel[i].index===colname||$t.p.colModel[i].name===colname){idx=i;if($t.p.frozenColumns===true&&$t.p.colModel[i].frozen===true){sobj=$t.grid.fhDiv.find("#"+$t.p.id+"_"+colname)}break}}if(idx!==-1){var sort=$t.p.colModel[idx].sortable;if(!sobj){sobj=$t.grid.headers[idx].el}if(typeof sort!=="boolean"){sort=true}if(typeof reload!=="boolean"){reload=false}if(sort){$t.sortData("jqgh_"+$t.p.id+"_"+colname,idx,reload,sor,sobj)}}})},setGridState:function(state){return this.each(function(){if(!this.grid){return }var $t=this,open=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",true),close=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",true);if(state==="hidden"){$(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID($t.p.id)).slideUp("fast");if($t.p.pager){$($t.p.pager).slideUp("fast")}if($t.p.toppager){$($t.p.toppager).slideUp("fast")}if($t.p.toolbar[0]===true){if($t.p.toolbar[1]==="both"){$($t.grid.ubDiv).slideUp("fast")}$($t.grid.uDiv).slideUp("fast")}if($t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID($t.p.id)).slideUp("fast")}$(".ui-jqgrid-headlink",$t.grid.cDiv).removeClass(open).addClass(close);$t.p.gridstate="hidden"}else{if(state==="visible"){$(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID($t.p.id)).slideDown("fast");if($t.p.pager){$($t.p.pager).slideDown("fast")}if($t.p.toppager){$($t.p.toppager).slideDown("fast")}if($t.p.toolbar[0]===true){if($t.p.toolbar[1]==="both"){$($t.grid.ubDiv).slideDown("fast")}$($t.grid.uDiv).slideDown("fast")}if($t.p.footerrow){$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID($t.p.id)).slideDown("fast")}$(".ui-jqgrid-headlink",$t.grid.cDiv).removeClass(close).addClass(open);$t.p.gridstate="visible"}}})},setFrozenColumns:function(){return this.each(function(){if(!this.grid){return }var $t=this,cm=$t.p.colModel,i=0,len=cm.length,maxfrozen=-1,frozen=false,hd=$($t).jqGrid("getStyleUI",$t.p.styleUI+".base","headerDiv",true,"ui-jqgrid-hdiv"),hover=$($t).jqGrid("getStyleUI",$t.p.styleUI+".common","hover",true),borderbox=$("#gbox_"+$.jgrid.jqID($t.p.id)).css("box-sizing")==="border-box",pixelfix=borderbox?1:0;if($t.p.subGrid===true||$t.p.treeGrid===true||$t.p.cellEdit===true||$t.p.sortable||$t.p.scroll||$t.p.grouping===true){return }while(i<len){if(cm[i].frozen===true){frozen=true;maxfrozen=i}else{break}i++}if(maxfrozen>=0&&frozen){var top=$t.p.caption?$($t.grid.cDiv).outerHeight():0,hth=parseInt($(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID($t.p.id)).height(),10),divhth=parseInt($(".ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID($t.p.id)).height(),10);if($t.p.toppager){top=top+$($t.grid.topDiv).outerHeight()}if($t.p.toolbar[0]===true){if($t.p.toolbar[1]!=="bottom"){top=top+$($t.grid.uDiv).outerHeight()}}$t.grid.fhDiv=$('<div style="position:absolute;'+($t.p.direction==="rtl"?"right:0;":"left:0;")+"top:"+top+"px;height:"+(divhth-pixelfix)+'px;" class="frozen-div '+hd+'"></div>');$t.grid.fbDiv=$('<div style="position:absolute;'+($t.p.direction==="rtl"?"right:0;":"left:0;")+"top:"+(parseInt(top,10)+parseInt(divhth,10)+1-pixelfix)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');$("#gview_"+$.jgrid.jqID($t.p.id)).append($t.grid.fhDiv);var htbl=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID($t.p.id)).clone(true);if($t.p.groupHeader){$("tr.jqg-first-row-header, tr.jqg-third-row-header",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()});var swapfroz=-1,fdel=-1,cs,rs;$("tr.jqg-second-row-header th",htbl).each(function(){cs=parseInt($(this).attr("colspan"),10);rs=parseInt($(this).attr("rowspan"),10);if(rs){swapfroz++;fdel++}if(cs){swapfroz=swapfroz+cs;fdel++}if(swapfroz===maxfrozen){fdel=maxfrozen;return false}});if(swapfroz!==maxfrozen){fdel=maxfrozen}$("tr.jqg-second-row-header",htbl).each(function(){$("th:gt("+fdel+")",this).remove()})}else{var maxdh=[];$(".ui-jqgrid-htable tr","#gview_"+$.jgrid.jqID($t.p.id)).each(function(i,n){maxdh.push(parseInt($(this).height(),10))});$("tr",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()});$("tr",htbl).each(function(i){$(this).height(maxdh[i])})}$(htbl).width(1);if(!$.jgrid.msie()){$(htbl).css("height","100%")}$($t.grid.fhDiv).append(htbl).mousemove(function(e){if($t.grid.resizing){$t.grid.dragMove(e);return false}});if($t.p.footerrow){var hbd=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID($t.p.id)).height();$t.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(top,10)+parseInt(hth,10)+parseInt(hbd,10)+1-pixelfix)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>');$("#gview_"+$.jgrid.jqID($t.p.id)).append($t.grid.fsDiv);var ftbl=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID($t.p.id)).clone(true);$("tr",ftbl).each(function(){$("td:gt("+maxfrozen+")",this).remove()});$(ftbl).width(1);$($t.grid.fsDiv).append(ftbl)}$($t).on("jqGridResizeStop.setFrozenColumns",function(e,w,index){var boxwidth=borderbox?"outerWidth":"width",rhth=$(".ui-jqgrid-htable",$t.grid.fhDiv),btd=$(".ui-jqgrid-btable",$t.grid.fbDiv);$("th:eq("+index+")",rhth)[boxwidth](w);$("tr:first td:eq("+index+")",btd)[boxwidth](w);if($t.p.footerrow){var ftd=$(".ui-jqgrid-ftable",$t.grid.fsDiv);$("tr:first td:eq("+index+")",ftd)[boxwidth](w)}});$("#gview_"+$.jgrid.jqID($t.p.id)).append($t.grid.fbDiv);$($t.grid.fbDiv).on("mousewheel DOMMouseScroll",function(e){var st=$($t.grid.bDiv).scrollTop();if(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0){$($t.grid.bDiv).scrollTop(st-25)}else{$($t.grid.bDiv).scrollTop(st+25)}e.preventDefault()});if($t.p.hoverrows===true){$("#"+$.jgrid.jqID($t.p.id)).off("mouseover mouseout")}$($t).on("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID($t.p.id)+"_frozen").remove();$($t.grid.fbDiv).height($($t.grid.bDiv).height()-17);var mh=[];$("#"+$.jgrid.jqID($t.p.id)+" tr[role=row].jqgrow").each(function(){mh.push($(this).outerHeight())});var btbl=$("#"+$.jgrid.jqID($t.p.id)).clone(true);$("tr[role=row]",btbl).each(function(){$("td[role=gridcell]:gt("+maxfrozen+")",this).remove()});$(btbl).width(1).attr("id",$t.p.id+"_frozen");$($t.grid.fbDiv).append(btbl);$("tr[role=row].jqgrow",btbl).each(function(i,n){$(this).height(mh[i])});if($t.p.hoverrows===true){$("tr.jqgrow",btbl).hover(function(){$(this).addClass(hover);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)).addClass(hover)},function(){$(this).removeClass(hover);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)).removeClass(hover)});$("tr.jqgrow","#"+$.jgrid.jqID($t.p.id)).hover(function(){$(this).addClass(hover);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)+"_frozen").addClass(hover)},function(){$(this).removeClass(hover);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)+"_frozen").removeClass(hover)})}btbl=null});if(!$t.grid.hDiv.loading){$($t).triggerHandler("jqGridAfterGridComplete")}$t.p.frozenColumns=true}})},destroyFrozenColumns:function(){return this.each(function(){if(!this.grid){return }if(this.p.frozenColumns===true){var $t=this,hover=$($t).jqGrid("getStyleUI",$t.p.styleUI+".common","hover",true);$($t.grid.fhDiv).remove();$($t.grid.fbDiv).remove();$t.grid.fhDiv=null;$t.grid.fbDiv=null;if($t.p.footerrow){$($t.grid.fsDiv).remove();$t.grid.fsDiv=null}$(this).off(".setFrozenColumns");if($t.p.hoverrows===true){var ptr;$("#"+$.jgrid.jqID($t.p.id)).on({mouseover:function(e){ptr=$(e.target).closest("tr.jqgrow");if($(ptr).attr("class")!=="ui-subgrid"){$(ptr).addClass(hover)}},mouseout:function(e){ptr=$(e.target).closest("tr.jqgrow");$(ptr).removeClass(hover)}})}this.p.frozenColumns=false}})},resizeColumn:function(iCol,newWidth,forceresize){return this.each(function(){var grid=this.grid,p=this.p,cm=p.colModel,i,cmLen=cm.length,diff,diffnv;if(typeof iCol==="string"){for(i=0;i<cmLen;i++){if(cm[i].name===iCol){iCol=i;break}}}else{iCol=parseInt(iCol,10)}if(forceresize===undefined){forceresize=false}if(!cm[iCol].resizable&&!forceresize){return }newWidth=parseInt(newWidth,10);if(typeof iCol!=="number"||iCol<0||iCol>cm.length-1||typeof newWidth!=="number"){return }if(newWidth<p.minColWidth){return }if(p.forceFit){p.nv=0;for(i=iCol+1;i<cmLen;i++){if(cm[i].hidden!==true){p.nv=i-iCol;break}}}grid.resizing={idx:iCol};diff=newWidth-grid.headers[iCol].width;if(p.forceFit){diffnv=grid.headers[iCol+p.nv].width-diff;if(diffnv<p.minColWidth){return }grid.headers[iCol+p.nv].newWidth=grid.headers[iCol+p.nv].width-diff}grid.newWidth=p.tblwidth+diff;grid.headers[iCol].newWidth=newWidth;grid.dragEnd(false)})},getStyleUI:function(styleui,classui,notclasstag,gridclass){var ret="",q="";try{var stylemod=styleui.split(".");if(!notclasstag){ret="class=";q='"'}if(gridclass==null){gridclass=""}switch(stylemod.length){case 1:ret+=q+$.trim(gridclass+" "+$.jgrid.styleUI[stylemod[0]][classui]+q);break;case 2:ret+=q+$.trim(gridclass+" "+$.jgrid.styleUI[stylemod[0]][stylemod[1]][classui]+q)}}catch(cls){ret=""}return ret},resizeGrid:function(timeout){return this.each(function(){var $t=this;if(timeout===undefined){timeout=500}setTimeout(function(){try{var winwidth=$(window).width(),parentwidth=$("#gbox_"+$.jgrid.jqID($t.p.id)).parent().width(),ww=$t.p.width;if((winwidth-parentwidth)>3){ww=parentwidth}else{ww=winwidth}$("#"+$.jgrid.jqID($t.p.id)).jqGrid("setGridWidth",ww)}catch(e){}},timeout)})}});$.jgrid.extend({editCell:function(iRow,iCol,ed){return this.each(function(){var $t=this,nm,tmp,cc,cm,highlight=$(this).jqGrid("getStyleUI",$t.p.styleUI+".common","highlight",true),hover=$(this).jqGrid("getStyleUI",$t.p.styleUI+".common","hover",true),inpclass=$(this).jqGrid("getStyleUI",$t.p.styleUI+".celledit","inputClass",true);if(!$t.grid||$t.p.cellEdit!==true){return }iCol=parseInt(iCol,10);$t.p.selrow=$t.rows[iRow].id;if(!$t.p.knv){$($t).jqGrid("GridNav")}if($t.p.savedRow.length>0){if(ed===true){if(iRow==$t.p.iRow&&iCol==$t.p.iCol){return }}$($t).jqGrid("saveCell",$t.p.savedRow[0].id,$t.p.savedRow[0].ic)}else{window.setTimeout(function(){$("#"+$.jgrid.jqID($t.p.knv)).attr("tabindex","-1").focus()},1)}cm=$t.p.colModel[iCol];nm=cm.name;if(nm==="subgrid"||nm==="cb"||nm==="rn"){return }try{cc=$($t.rows[iRow].cells[iCol])}catch(e){cc=$("td:eq("+iCol+")",$t.rows[iRow])}if(cm.editable===true&&ed===true&&!cc.hasClass("not-editable-cell")&&(!$.isFunction($t.p.isCellEditable)||$t.p.isCellEditable.call($t,nm,iRow,iCol))){if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$($t.rows[$t.p.iRow]).removeClass("selected-row "+hover).find("td:eq("+$t.p.iCol+")").removeClass("edit-cell "+highlight)}cc.addClass("edit-cell "+highlight);$($t.rows[iRow]).addClass("selected-row "+hover);try{tmp=$.unformat.call($t,cc,{rowId:$t.rows[iRow].id,colModel:cm},iCol)}catch(_){tmp=(cm.edittype&&cm.edittype==="textarea")?cc.text():cc.html()}if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp)}if(!cm.edittype){cm.edittype="text"}$t.p.savedRow.push({id:iRow,ic:iCol,name:nm,v:tmp});if(tmp==="&nbsp;"||tmp==="&#160;"||(tmp.length===1&&tmp.charCodeAt(0)===160)){tmp=""}if($.isFunction($t.p.formatCell)){var tmp2=$t.p.formatCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol);if(tmp2!==undefined){tmp=tmp2}}$($t).triggerHandler("jqGridBeforeEditCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]);if($.isFunction($t.p.beforeEditCell)){$t.p.beforeEditCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol)}var opt=$.extend({},cm.editoptions||{},{id:iRow+"_"+nm,name:nm,rowId:$t.rows[iRow].id,oper:"edit"});var elc=$.jgrid.createEl.call($t,cm.edittype,opt,tmp,true,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));if($.inArray(cm.edittype,["text","textarea","password","select"])>-1){$(elc).addClass(inpclass)}cc.html("").append(elc).attr("tabindex","0");$.jgrid.bindEv.call($t,elc,opt);window.setTimeout(function(){$(elc).focus()},1);$("input, select, textarea",cc).on("keydown",function(e){if(e.keyCode===27){if($("input.hasDatepicker",cc).length>0){if($(".ui-datepicker").is(":hidden")){$($t).jqGrid("restoreCell",iRow,iCol)}else{$("input.hasDatepicker",cc).datepicker("hide")}}else{$($t).jqGrid("restoreCell",iRow,iCol)}}if(e.keyCode===13&&!e.shiftKey){$($t).jqGrid("saveCell",iRow,iCol);return false}if(e.keyCode===9){if(!$t.grid.hDiv.loading){if(e.shiftKey){$($t).jqGrid("prevCell",iRow,iCol)}else{$($t).jqGrid("nextCell",iRow,iCol)}}else{return false}}e.stopPropagation()});$($t).triggerHandler("jqGridAfterEditCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]);if($.isFunction($t.p.afterEditCell)){$t.p.afterEditCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol)}}else{if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$($t.rows[$t.p.iRow]).removeClass("selected-row "+hover).find("td:eq("+$t.p.iCol+")").removeClass("edit-cell "+highlight)}cc.addClass("edit-cell "+highlight);$($t.rows[iRow]).addClass("selected-row "+hover);tmp=cc.html().replace(/\&#160\;/ig,"");$($t).triggerHandler("jqGridSelectCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]);if($.isFunction($t.p.onSelectCell)){$t.p.onSelectCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol)}}$t.p.iCol=iCol;$t.p.iRow=iRow})},saveCell:function(iRow,iCol){return this.each(function(){var $t=this,fr,errors=$.jgrid.getRegional(this,"errors"),edit=$.jgrid.getRegional(this,"edit");if(!$t.grid||$t.p.cellEdit!==true){return }if($t.p.savedRow.length>=1){fr=0}else{fr=null}if(fr!==null){var cc=$("td:eq("+iCol+")",$t.rows[iRow]),v,v2,cm=$t.p.colModel[iCol],nm=cm.name,nmjq=$.jgrid.jqID(nm),p=$(cc).offset();switch(cm.edittype){case"select":if(!cm.editoptions.multiple){v=$("#"+iRow+"_"+nmjq+" option:selected",$t.rows[iRow]).val();v2=$("#"+iRow+"_"+nmjq+" option:selected",$t.rows[iRow]).text()}else{var sel=$("#"+iRow+"_"+nmjq,$t.rows[iRow]),selectedText=[];v=$(sel).val();if(v){v.join(",")}else{v=""}$("option:selected",sel).each(function(i,selected){selectedText[i]=$(selected).text()});v2=selectedText.join(",")}if(cm.formatter){v2=v}break;case"checkbox":var cbv=["Yes","No"];if(cm.editoptions&&cm.editoptions.value){cbv=cm.editoptions.value.split(":")}v=$("#"+iRow+"_"+nmjq,$t.rows[iRow]).is(":checked")?cbv[0]:cbv[1];v2=v;break;case"password":case"text":case"textarea":case"button":v=$("#"+iRow+"_"+nmjq,$t.rows[iRow]).val();v2=v;break;case"custom":try{if(cm.editoptions&&$.isFunction(cm.editoptions.custom_value)){v=cm.editoptions.custom_value.call($t,$(".customelement",cc),"get");if(v===undefined){throw"e2"}else{v2=v}}else{throw"e1"}}catch(e){if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+edit.msg.nodefined,edit.bClose,{styleUI:$t.p.styleUI})}else{if(e==="e2"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+edit.msg.novalue,edit.bClose,{styleUI:$t.p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,e.message,edit.bClose,{styleUI:$t.p.styleUI})}}}break}if(v2!==$t.p.savedRow[fr].v){var vvv=$($t).triggerHandler("jqGridBeforeSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]);if(vvv){v=vvv;v2=vvv}if($.isFunction($t.p.beforeSaveCell)){var vv=$t.p.beforeSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol);if(vv){v=vv;v2=vv}}var cv=$.jgrid.checkValues.call($t,v,iCol),nuem=false;if(cv[0]===true){var addpost=$($t).triggerHandler("jqGridBeforeSubmitCell",[$t.rows[iRow].id,nm,v,iRow,iCol])||{};if($.isFunction($t.p.beforeSubmitCell)){addpost=$t.p.beforeSubmitCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol);if(!addpost){addpost={}}}var retsub=$($t).triggerHandler("jqGridOnSubmitCell",[$t.rows[iRow].id,nm,v,iRow,iCol]);if(retsub===undefined){retsub=true}if($.isFunction($t.p.onSubmitCell)){retsub=$t.p.onSubmitCell($t.rows[iRow].id,nm,v,iRow,iCol);if(retsub===undefined){retsub=true}}if(retsub===false){return }if($("input.hasDatepicker",cc).length>0){$("input.hasDatepicker",cc).datepicker("hide")}if($t.p.cellsubmit==="remote"){if($t.p.cellurl){var postdata={};if($t.p.autoencode){v=$.jgrid.htmlEncode(v)}if(cm.editoptions&&cm.editoptions.NullIfEmpty&&v===""){v="null";nuem=true}postdata[nm]=v;var idname,oper,opers;opers=$t.p.prmNames;idname=opers.id;oper=opers.oper;postdata[idname]=$.jgrid.stripPref($t.p.idPrefix,$t.rows[iRow].id);postdata[oper]=opers.editoper;postdata=$.extend(addpost,postdata);$($t).jqGrid("progressBar",{method:"show",loadtype:$t.p.loadui,htmlcontent:$.jgrid.getRegional($t,"defaults.savetext")});$t.grid.hDiv.loading=true;$.ajax($.extend({url:$t.p.cellurl,data:$.isFunction($t.p.serializeCellData)?$t.p.serializeCellData.call($t,postdata,nm):postdata,type:"POST",complete:function(result,stat){$($t).jqGrid("progressBar",{method:"hide",loadtype:$t.p.loadui});$t.grid.hDiv.loading=false;if(stat==="success"){var ret=$($t).triggerHandler("jqGridAfterSubmitCell",[$t,result,postdata.id,nm,v,iRow,iCol])||[true,""];if(ret[0]===true&&$.isFunction($t.p.afterSubmitCell)){ret=$t.p.afterSubmitCell.call($t,result,postdata.id,nm,v,iRow,iCol)}if(ret[0]===true){if(nuem){v=""}$(cc).empty();$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,false,false,true);$(cc).addClass("dirty-cell");$($t.rows[iRow]).addClass("edited");$($t).triggerHandler("jqGridAfterSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]);if($.isFunction($t.p.afterSaveCell)){$t.p.afterSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol)}$t.p.savedRow.splice(0,1)}else{$($t).triggerHandler("jqGridErrorCell",[result,stat]);if($.isFunction($t.p.errorCell)){$t.p.errorCell.call($t,result,stat)}else{$.jgrid.info_dialog(errors.errcap,ret[1],edit.bClose,{styleUI:$t.p.styleUI,top:p.top+30,left:p.left,onClose:function(){if(!$t.p.restoreCellonFail){$("#"+iRow+"_"+nmjq,$t.rows[iRow]).focus()}}})}if($t.p.restoreCellonFail){$($t).jqGrid("restoreCell",iRow,iCol)}}}},error:function(res,stat,err){$("#lui_"+$.jgrid.jqID($t.p.id)).hide();$t.grid.hDiv.loading=false;$($t).triggerHandler("jqGridErrorCell",[res,stat,err]);if($.isFunction($t.p.errorCell)){$t.p.errorCell.call($t,res,stat,err)}else{$.jgrid.info_dialog(errors.errcap,res.status+" : "+res.statusText+"<br/>"+stat,edit.bClose,{styleUI:$t.p.styleUI,top:p.top+30,left:p.left,onClose:function(){if(!$t.p.restoreCellonFail){$("#"+iRow+"_"+nmjq,$t.rows[iRow]).focus()}}})}if($t.p.restoreCellonFail){$($t).jqGrid("restoreCell",iRow,iCol)}}},$.jgrid.ajaxOptions,$t.p.ajaxCellOptions||{}))}else{try{$.jgrid.info_dialog(errors.errcap,errors.nourl,edit.bClose,{styleUI:$t.p.styleUI});if($t.p.restoreCellonFail){$($t).jqGrid("restoreCell",iRow,iCol)}}catch(e){}}}if($t.p.cellsubmit==="clientArray"){$(cc).empty();$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,false,false,true);$(cc).addClass("dirty-cell");$($t.rows[iRow]).addClass("edited");$($t).triggerHandler("jqGridAfterSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]);if($.isFunction($t.p.afterSaveCell)){$t.p.afterSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol)}$t.p.savedRow.splice(0,1)}}else{try{if($.isFunction($t.p.validationCell)){$t.p.validationCell.call($t,$("#"+iRow+"_"+nmjq,$t.rows[iRow]),cv[1],iRow,iCol)}else{window.setTimeout(function(){$.jgrid.info_dialog(errors.errcap,v+" "+cv[1],edit.bClose,{styleUI:$t.p.styleUI,top:p.top+30,left:p.left,onClose:function(){if(!$t.p.restoreCellonFail){$("#"+iRow+"_"+nmjq,$t.rows[iRow]).focus()}}})},50);if($t.p.restoreCellonFail){$($t).jqGrid("restoreCell",iRow,iCol)}}}catch(e){alert(cv[1])}}}else{$($t).jqGrid("restoreCell",iRow,iCol)}}window.setTimeout(function(){$("#"+$.jgrid.jqID($t.p.knv)).attr("tabindex","-1").focus()},0)})},restoreCell:function(iRow,iCol){return this.each(function(){var $t=this,fr;if(!$t.grid||$t.p.cellEdit!==true){return }if($t.p.savedRow.length>=1){fr=0}else{fr=null}if(fr!==null){var cc=$("td:eq("+iCol+")",$t.rows[iRow]);if($.isFunction($.fn.datepicker)){try{$("input.hasDatepicker",cc).datepicker("hide")}catch(e){}}$(cc).empty().attr("tabindex","-1");$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,$t.p.savedRow[fr].v,false,false,true);$($t).triggerHandler("jqGridAfterRestoreCell",[$t.rows[iRow].id,$t.p.savedRow[fr].v,iRow,iCol]);if($.isFunction($t.p.afterRestoreCell)){$t.p.afterRestoreCell.call($t,$t.rows[iRow].id,$t.p.savedRow[fr].v,iRow,iCol)}$t.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+$t.p.knv).attr("tabindex","-1").focus()},0)})},nextCell:function(iRow,iCol){return this.each(function(){var $t=this,nCol=false,i;if(!$t.grid||$t.p.cellEdit!==true){return }for(i=iCol+1;i<$t.p.colModel.length;i++){if($t.p.colModel[i].editable===true&&(!$.isFunction($t.p.isCellEditable)||$t.p.isCellEditable.call($t,$t.p.colModel[i].name,iRow,i))){nCol=i;break}}if(nCol!==false){$($t).jqGrid("editCell",iRow,nCol,true)}else{if($t.p.savedRow.length>0){$($t).jqGrid("saveCell",iRow,iCol)}}})},prevCell:function(iRow,iCol){return this.each(function(){var $t=this,nCol=false,i;if(!$t.grid||$t.p.cellEdit!==true){return }for(i=iCol-1;i>=0;i--){if($t.p.colModel[i].editable===true&&(!$.isFunction($t.p.isCellEditable)||$t.p.isCellEditable.call($t,$t.p.colModel[i].name,iRow,i))){nCol=i;break}}if(nCol!==false){$($t).jqGrid("editCell",iRow,nCol,true)}else{if($t.p.savedRow.length>0){$($t).jqGrid("saveCell",iRow,iCol)}}})},GridNav:function(){return this.each(function(){var $t=this;if(!$t.grid||$t.p.cellEdit!==true){return }$t.p.knv=$t.p.id+"_kn";var selection=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+$t.p.knv+"'></div></div>"),i,kdir;function scrollGrid(iR,iC,tp){if(tp.substr(0,1)==="v"){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,nROT=$t.rows[iR].offsetTop+$t.rows[iR].clientHeight,pROT=$t.rows[iR].offsetTop;if(tp==="vd"){if(nROT>=ch){$($t.grid.bDiv)[0].scrollTop=$($t.grid.bDiv)[0].scrollTop+$t.rows[iR].clientHeight}}if(tp==="vu"){if(pROT<st){$($t.grid.bDiv)[0].scrollTop=$($t.grid.bDiv)[0].scrollTop-$t.rows[iR].clientHeight}}}if(tp==="h"){var cw=$($t.grid.bDiv)[0].clientWidth,sl=$($t.grid.bDiv)[0].scrollLeft,nCOL=$t.rows[iR].cells[iC].offsetLeft+$t.rows[iR].cells[iC].clientWidth,pCOL=$t.rows[iR].cells[iC].offsetLeft;if(nCOL>=cw+parseInt(sl,10)){$($t.grid.bDiv)[0].scrollLeft=$($t.grid.bDiv)[0].scrollLeft+$t.rows[iR].cells[iC].clientWidth}else{if(pCOL<sl){$($t.grid.bDiv)[0].scrollLeft=$($t.grid.bDiv)[0].scrollLeft-$t.rows[iR].cells[iC].clientWidth}}}}function findNextVisible(iC,act){var ind,i;if(act==="lft"){ind=iC+1;for(i=iC;i>=0;i--){if($t.p.colModel[i].hidden!==true){ind=i;break}}}if(act==="rgt"){ind=iC-1;for(i=iC;i<$t.p.colModel.length;i++){if($t.p.colModel[i].hidden!==true){ind=i;break}}}return ind}$(selection).insertBefore($t.grid.cDiv);$("#"+$t.p.knv).focus().keydown(function(e){kdir=e.keyCode;if($t.p.direction==="rtl"){if(kdir===37){kdir=39}else{if(kdir===39){kdir=37}}}switch(kdir){case 38:if($t.p.iRow-1>0){scrollGrid($t.p.iRow-1,$t.p.iCol,"vu");$($t).jqGrid("editCell",$t.p.iRow-1,$t.p.iCol,false)}break;case 40:if($t.p.iRow+1<=$t.rows.length-1){scrollGrid($t.p.iRow+1,$t.p.iCol,"vd");$($t).jqGrid("editCell",$t.p.iRow+1,$t.p.iCol,false)}break;case 37:if($t.p.iCol-1>=0){i=findNextVisible($t.p.iCol-1,"lft");scrollGrid($t.p.iRow,i,"h");$($t).jqGrid("editCell",$t.p.iRow,i,false)}break;case 39:if($t.p.iCol+1<=$t.p.colModel.length-1){i=findNextVisible($t.p.iCol+1,"rgt");scrollGrid($t.p.iRow,i,"h");$($t).jqGrid("editCell",$t.p.iRow,i,false)}break;case 13:if(parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0){$($t).jqGrid("editCell",$t.p.iRow,$t.p.iCol,true)}break;default:return true}return false})})},getChangedCells:function(mthd){var ret=[];if(!mthd){mthd="all"}this.each(function(){var $t=this,nm;if(!$t.grid||$t.p.cellEdit!==true){return }$($t.rows).each(function(j){var res={};if($(this).hasClass("edited")){$("td",this).each(function(i){nm=$t.p.colModel[i].name;if(nm!=="cb"&&nm!=="subgrid"){if(mthd==="dirty"){if($(this).hasClass("dirty-cell")){try{res[nm]=$.unformat.call($t,this,{rowId:$t.rows[j].id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}}else{try{res[nm]=$.unformat.call($t,this,{rowId:$t.rows[j].id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}}});res.id=this.id;ret.push(res)}})});return ret}});$.extend($.jgrid,{showModal:function(h){h.w.show()},closeModal:function(h){h.w.hide().attr("aria-hidden","true");if(h.o){h.o.remove()}},hideModal:function(selector,o){o=$.extend({jqm:true,gb:"",removemodal:false,formprop:false,form:""},o||{});var thisgrid=o.gb&&typeof o.gb==="string"&&o.gb.substr(0,6)==="#gbox_"?$("#"+o.gb.substr(6))[0]:false;if(o.onClose){var oncret=thisgrid?o.onClose.call(thisgrid,selector):o.onClose(selector);if(typeof oncret==="boolean"&&!oncret){return }}if(o.formprop&&thisgrid&&o.form){var fh=$(selector)[0].style.height,fw=$(selector)[0].style.width;if(fh.indexOf("px")>-1){fh=parseFloat(fh)}if(fw.indexOf("px")>-1){fw=parseFloat(fw)}var frmgr,frmdata;if(o.form==="edit"){frmgr="#"+$.jgrid.jqID("FrmGrid_"+o.gb.substr(6));frmdata="formProp"}else{if(o.form==="view"){frmgr="#"+$.jgrid.jqID("ViewGrid_"+o.gb.substr(6));frmdata="viewProp"}}$(thisgrid).data(frmdata,{top:parseFloat($(selector).css("top")),left:parseFloat($(selector).css("left")),width:fw,height:fh,dataheight:$(frmgr).height(),datawidth:$(frmgr).width()})}if($.fn.jqm&&o.jqm===true){$(selector).attr("aria-hidden","true").jqmHide()}else{if(o.gb!==""){try{$(".jqgrid-overlay:first",o.gb).hide()}catch(e){}}$(selector).hide().attr("aria-hidden","true")}if(o.removemodal){$(selector).remove()}},findPos:function(obj){var offset=$(obj).offset();return[offset.left,offset.top]},createModal:function(aIDs,content,p,insertSelector,posSelector,appendsel,css){p=$.extend(true,{},$.jgrid.jqModal||{},p);var self=this,rtlsup=$(p.gbox).attr("dir")==="rtl"?true:false,classes=$.jgrid.styleUI[(p.styleUI||"jQueryUI")].modal,common=$.jgrid.styleUI[(p.styleUI||"jQueryUI")].common,mw=document.createElement("div");css=$.extend({},css||{});mw.className="ui-jqdialog "+classes.modal;mw.id=aIDs.themodal;var mh=document.createElement("div");mh.className="ui-jqdialog-titlebar "+classes.header;mh.id=aIDs.modalhead;$(mh).append("<span class='ui-jqdialog-title'>"+p.caption+"</span>");var ahr=$("<a class='ui-jqdialog-titlebar-close "+common.cornerall+"'></a>").hover(function(){ahr.addClass(common.hover)},function(){ahr.removeClass(common.hover)}).append("<span class='"+common.icon_base+" "+classes.icon_close+"'></span>");$(mh).append(ahr);if(rtlsup){mw.dir="rtl";$(".ui-jqdialog-title",mh).css("float","right");$(".ui-jqdialog-titlebar-close",mh).css("left",0.3+"em")}else{mw.dir="ltr";$(".ui-jqdialog-title",mh).css("float","left");$(".ui-jqdialog-titlebar-close",mh).css("right",0.3+"em")}var mc=document.createElement("div");$(mc).addClass("ui-jqdialog-content "+classes.content).attr("id",aIDs.modalcontent);$(mc).append(content);mw.appendChild(mc);$(mw).prepend(mh);if(appendsel===true){$("body").append(mw)}else{if(typeof appendsel==="string"){$(appendsel).append(mw)}else{$(mw).insertBefore(insertSelector)}}$(mw).css(css);if(p.jqModal===undefined){p.jqModal=true}var coord={};if($.fn.jqm&&p.jqModal===true){if(p.left===0&&p.top===0&&p.overlay){var pos=[];pos=$.jgrid.findPos(posSelector);p.left=pos[0]+4;p.top=pos[1]+4}coord.top=p.top+"px";coord.left=p.left}else{if(p.left!==0||p.top!==0){coord.left=p.left;coord.top=p.top+"px"}}$("a.ui-jqdialog-titlebar-close",mh).click(function(){var oncm=$("#"+$.jgrid.jqID(aIDs.themodal)).data("onClose")||p.onClose;var gboxclose=$("#"+$.jgrid.jqID(aIDs.themodal)).data("gbox")||p.gbox;self.hideModal("#"+$.jgrid.jqID(aIDs.themodal),{gb:gboxclose,jqm:p.jqModal,onClose:oncm,removemodal:p.removemodal||false,formprop:!p.recreateForm||false,form:p.form||""});return false});if(p.width===0||!p.width){p.width=300}if(p.height===0||!p.height){p.height=200}if(!p.zIndex){var parentZ=$(insertSelector).parents("*[role=dialog]").filter(":first").css("z-index");if(parentZ){p.zIndex=parseInt(parentZ,10)+2}else{p.zIndex=950}}var rtlt=0;if(rtlsup&&coord.left&&!appendsel){rtlt=$(p.gbox).width()-(!isNaN(p.width)?parseInt(p.width,10):0)-8;coord.left=parseInt(coord.left,10)+parseInt(rtlt,10)}if(coord.left){coord.left+="px"}$(mw).css($.extend({width:isNaN(p.width)?"auto":p.width+"px",height:isNaN(p.height)?"auto":p.height+"px",zIndex:p.zIndex,overflow:"hidden"},coord)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":aIDs.modalhead,"aria-hidden":"true"});if(p.drag===undefined){p.drag=true}if(p.resize===undefined){p.resize=true}if(p.drag){$(mh).css("cursor","move");if($.fn.tinyDraggable){$(mw).tinyDraggable({handle:"#"+$.jgrid.jqID(mh.id)})}else{try{$(mw).draggable({handle:$("#"+$.jgrid.jqID(mh.id))})}catch(e){}}}if(p.resize){if($.fn.jqResize){$(mw).append("<div class='jqResize "+classes.resizable+" "+common.icon_base+" "+classes.icon_resizable+"'></div>");$("#"+$.jgrid.jqID(aIDs.themodal)).jqResize(".jqResize",aIDs.scrollelm?"#"+$.jgrid.jqID(aIDs.scrollelm):false)}else{try{$(mw).resizable({handles:"se, sw",alsoResize:aIDs.scrollelm?"#"+$.jgrid.jqID(aIDs.scrollelm):false})}catch(r){}}}if(p.closeOnEscape===true){$(mw).keydown(function(e){if(e.which===27){var cone=$("#"+$.jgrid.jqID(aIDs.themodal)).data("onClose")||p.onClose;self.hideModal("#"+$.jgrid.jqID(aIDs.themodal),{gb:p.gbox,jqm:p.jqModal,onClose:cone,removemodal:p.removemodal||false,formprop:!p.recreateForm||false,form:p.form||""})}})}},viewModal:function(selector,o){o=$.extend({toTop:true,overlay:10,modal:false,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:true,jqM:true},o||{});if(o.focusField===undefined){o.focusField=0}if(typeof o.focusField==="number"&&o.focusField>=0){o.focusField=parseInt(o.focusField,10)}else{if(typeof o.focusField==="boolean"&&!o.focusField){o.focusField=false}else{o.focusField=0}}if($.fn.jqm&&o.jqm===true){if(o.jqM){$(selector).attr("aria-hidden","false").jqm(o).jqmShow()}else{$(selector).attr("aria-hidden","false").jqmShow()}}else{if(o.gbox!==""){$(".jqgrid-overlay:first",o.gbox).show();$(selector).data("gbox",o.gbox)}$(selector).show().attr("aria-hidden","false");if(o.focusField>=0){try{$(":input:visible",selector)[o.focusField].focus()}catch(_){}}}},info_dialog:function(caption,content,c_b,modalopt){var mopt={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};$.extend(true,mopt,$.jgrid.jqModal||{},{caption:"<b>"+caption+"</b>"},modalopt||{});var jm=mopt.jqModal,self=this,classes=$.jgrid.styleUI[(mopt.styleUI||"jQueryUI")].modal,common=$.jgrid.styleUI[(mopt.styleUI||"jQueryUI")].common;if($.fn.jqm&&!jm){jm=false}var buttstr="",i;if(mopt.buttons.length>0){for(i=0;i<mopt.buttons.length;i++){if(mopt.buttons[i].id===undefined){mopt.buttons[i].id="info_button_"+i}buttstr+="<a id='"+mopt.buttons[i].id+"' class='fm-button "+common.button+"'>"+mopt.buttons[i].text+"</a>"}}var dh=isNaN(mopt.dataheight)?mopt.dataheight:mopt.dataheight+"px",cn="text-align:"+mopt.align+";";var cnt="<div id='info_id'>";cnt+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+dh+";"+cn+"'>"+content+"</div>";cnt+=c_b?"<div class='"+classes.content+"' style='text-align:"+mopt.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+common.button+"'>"+c_b+"</a>"+buttstr+"</div>":buttstr!==""?"<div class='"+classes.content+"' style='text-align:"+mopt.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+buttstr+"</div>":"";cnt+="</div>";try{if($("#info_dialog").attr("aria-hidden")==="false"){$.jgrid.hideModal("#info_dialog",{jqm:jm})}$("#info_dialog").remove()}catch(e){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},cnt,mopt,"","",true);if(buttstr){$.each(mopt.buttons,function(i){$("#"+$.jgrid.jqID(this.id),"#info_id").on("click",function(){mopt.buttons[i].onClick.call($("#info_dialog"));return false})})}$("#closedialog","#info_id").on("click",function(){self.hideModal("#info_dialog",{jqm:jm,onClose:$("#info_dialog").data("onClose")||mopt.onClose,gb:$("#info_dialog").data("gbox")||mopt.gbox});return false});$(".fm-button","#info_dialog").hover(function(){$(this).addClass(common.hover)},function(){$(this).removeClass(common.hover)});if($.isFunction(mopt.beforeOpen)){mopt.beforeOpen()}$.jgrid.viewModal("#info_dialog",{onHide:function(h){h.w.hide().remove();if(h.o){h.o.remove()}},modal:mopt.modal,jqm:jm});if($.isFunction(mopt.afterOpen)){mopt.afterOpen()}try{$("#info_dialog").focus()}catch(m){}},bindEv:function(el,opt){var $t=this;if($.isFunction(opt.dataInit)){opt.dataInit.call($t,el,opt)}if(opt.dataEvents){$.each(opt.dataEvents,function(){if(this.data!==undefined){$(el).on(this.type,this.data,this.fn)}else{$(el).on(this.type,this.fn)}})}},createEl:function(eltype,options,vl,autowidth,ajaxso){var elem="",$t=this;function setAttributes(elm,atr,exl){var exclude=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];exclude=exclude.concat(["cacheUrlData","delimiter","separator"]);if(exl!==undefined&&$.isArray(exl)){$.merge(exclude,exl)}$.each(atr,function(key,value){if($.inArray(key,exclude)===-1){$(elm).attr(key,value)}});if(!atr.hasOwnProperty("id")){$(elm).attr("id",$.jgrid.randId())}}switch(eltype){case"textarea":elem=document.createElement("textarea");if(autowidth){if(!options.cols){$(elem).css({width:"98%"})}}else{if(!options.cols){options.cols=20}}if(!options.rows){options.rows=2}if(vl==="&nbsp;"||vl==="&#160;"||(vl.length===1&&vl.charCodeAt(0)===160)){vl=""}elem.value=vl;setAttributes(elem,options);$(elem).attr({role:"textbox",multiline:"true"});break;case"checkbox":elem=document.createElement("input");elem.type="checkbox";if(!options.value){var vl1=(vl+"").toLowerCase();if(vl1.search(/(false|f|0|no|n|off|undefined)/i)<0&&vl1!==""){elem.checked=true;elem.defaultChecked=true;elem.value=vl}else{elem.value="on"}$(elem).attr("offval","off")}else{var cbval=options.value.split(":");if(vl===cbval[0]){elem.checked=true;elem.defaultChecked=true}elem.value=cbval[0];$(elem).attr("offval",cbval[1])}setAttributes(elem,options,["value"]);$(elem).attr("role","checkbox");break;case"select":elem=document.createElement("select");elem.setAttribute("role","select");var msl,ovm=[];if(options.multiple===true){msl=true;elem.multiple="multiple";$(elem).attr("aria-multiselectable","true")}else{msl=false}if(options.dataUrl!=null){var rowid=null,postData=options.postData||ajaxso.postData;try{rowid=options.rowId}catch(e){}if($t.p&&$t.p.idPrefix){rowid=$.jgrid.stripPref($t.p.idPrefix,rowid)}$.ajax($.extend({url:$.isFunction(options.dataUrl)?options.dataUrl.call($t,rowid,vl,String(options.name)):options.dataUrl,type:"GET",dataType:"html",data:$.isFunction(postData)?postData.call($t,rowid,vl,String(options.name)):postData,context:{elem:elem,options:options,vl:vl},success:function(data){var ovm=[],elem=this.elem,vl=this.vl,options=$.extend({},this.options),msl=options.multiple===true,cU=options.cacheUrlData===true,oV="",txt,a=$.isFunction(options.buildSelect)?options.buildSelect.call($t,data):data;if(typeof a==="string"){a=$($.trim(a)).html()}if(a){$(elem).append(a);setAttributes(elem,options,postData?["postData"]:undefined);if(options.size===undefined){options.size=msl?3:1}if(msl){ovm=vl.split(",");ovm=$.map(ovm,function(n){return $.trim(n)})}else{ovm[0]=$.trim(vl)}$("option",elem).each(function(i){txt=$(this).text();vl=$(this).val();if(cU){oV+=(i!==0?";":"")+vl+":"+txt}if(i===0&&elem.multiple){this.selected=false}$(this).attr("role","option");if($.inArray($.trim(txt),ovm)>-1||$.inArray($.trim(vl),ovm)>-1){this.selected="selected"}});if(cU){if(options.oper==="edit"){$($t).jqGrid("setColProp",options.name,{editoptions:{buildSelect:null,dataUrl:null,value:oV}})}else{if(options.oper==="search"){$($t).jqGrid("setColProp",options.name,{searchoptions:{dataUrl:null,value:oV}})}else{if(options.oper==="filter"){if($("#fbox_"+$t.p.id)[0].p){var cols=$("#fbox_"+$t.p.id)[0].p.columns,nm;$.each(cols,function(i){nm=this.index||this.name;if(options.name===nm){this.searchoptions.dataUrl=null;this.searchoptions.value=oV;return false}})}}}}}$($t).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[elem])}}},ajaxso||{}))}else{if(options.value){var i;if(options.size===undefined){options.size=msl?3:1}if(msl){ovm=vl.split(",");ovm=$.map(ovm,function(n){return $.trim(n)})}if(typeof options.value==="function"){options.value=options.value()}var so,sv,ov,oSv,key,value,sep=options.separator===undefined?":":options.separator,delim=options.delimiter===undefined?";":options.delimiter;if(typeof options.value==="string"){so=options.value.split(delim);for(i=0;i<so.length;i++){sv=so[i].split(sep);if(sv.length>2){sv[1]=$.map(sv,function(n,ii){if(ii>0){return n}}).join(sep)}ov=document.createElement("option");ov.setAttribute("role","option");ov.value=sv[0];ov.innerHTML=sv[1];elem.appendChild(ov);if(!msl&&($.trim(sv[0])===$.trim(vl)||$.trim(sv[1])===$.trim(vl))){ov.selected="selected"}if(msl&&($.inArray($.trim(sv[1]),ovm)>-1||$.inArray($.trim(sv[0]),ovm)>-1)){ov.selected="selected"}}}else{if(Object.prototype.toString.call(options.value)==="[object Array]"){oSv=options.value;for(i=0;i<oSv.length;i++){if(oSv[i].length===2){key=oSv[i][0];value=oSv[i][1];ov=document.createElement("option");ov.setAttribute("role","option");ov.value=key;ov.innerHTML=value;elem.appendChild(ov);if(!msl&&($.trim(key)===$.trim(vl)||$.trim(value)===$.trim(vl))){ov.selected="selected"}if(msl&&($.inArray($.trim(value),ovm)>-1||$.inArray($.trim(key),ovm)>-1)){ov.selected="selected"}}}}else{if(typeof options.value==="object"){oSv=options.value;for(key in oSv){if(oSv.hasOwnProperty(key)){ov=document.createElement("option");ov.setAttribute("role","option");ov.value=key;ov.innerHTML=oSv[key];elem.appendChild(ov);if(!msl&&($.trim(key)===$.trim(vl)||$.trim(oSv[key])===$.trim(vl))){ov.selected="selected"}if(msl&&($.inArray($.trim(oSv[key]),ovm)>-1||$.inArray($.trim(key),ovm)>-1)){ov.selected="selected"}}}}}}setAttributes(elem,options,["value"])}}break;case"image":case"file":elem=document.createElement("input");elem.type=eltype;setAttributes(elem,options);break;case"custom":elem=document.createElement("span");try{if($.isFunction(options.custom_element)){var celm=options.custom_element.call($t,vl,options);if(celm){celm=$(celm).addClass("customelement").attr({id:options.id,name:options.name});$(elem).empty().append(celm)}else{throw"e2"}}else{throw"e1"}}catch(e){var errors=$.jgrid.getRegional($t,"errors"),edit=$.jgrid.getRegional($t,"edit");if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_element' "+edit.msg.nodefined,edit.bClose,{styleUI:$t.p.styleUI})}else{if(e==="e2"){$.jgrid.info_dialog(errors.errcap,"function 'custom_element' "+edit.msg.novalue,edit.bClose,{styleUI:$t.p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,typeof e==="string"?e:e.message,edit.bClose,{styleUI:$t.p.styleUI})}}}break;default:var role;if(eltype==="button"){role="button"}else{role="textbox"}elem=document.createElement("input");elem.type=eltype;elem.value=vl;setAttributes(elem,options);if(eltype!=="button"){if(autowidth){if(!options.size){$(elem).css({width:"96%"})}}else{if(!options.size){options.size=20}}}$(elem).attr("role",role)}return elem},checkDate:function(format,date){var daysInFebruary=function(year){return(((year%4===0)&&(year%100!==0||(year%400===0)))?29:28)},tsp={},sep;format=format.toLowerCase();if(format.indexOf("/")!==-1){sep="/"}else{if(format.indexOf("-")!==-1){sep="-"}else{if(format.indexOf(".")!==-1){sep="."}else{sep="/"}}}format=format.split(sep);date=date.split(sep);if(date.length!==3){return false}var j=-1,yln,dln=-1,mln=-1,i;for(i=0;i<format.length;i++){var dv=isNaN(date[i])?0:parseInt(date[i],10);tsp[format[i]]=dv;yln=format[i];if(yln.indexOf("y")!==-1){j=i}if(yln.indexOf("m")!==-1){mln=i}if(yln.indexOf("d")!==-1){dln=i}}if(format[j]==="y"||format[j]==="yyyy"){yln=4}else{if(format[j]==="yy"){yln=2}else{yln=-1}}var daysInMonth=[0,31,29,31,30,31,30,31,31,30,31,30,31],strDate;if(j===-1){return false}strDate=tsp[format[j]].toString();if(yln===2&&strDate.length===1){yln=1}if(strDate.length!==yln||(tsp[format[j]]===0&&date[j]!=="00")){return false}if(mln===-1){return false}strDate=tsp[format[mln]].toString();if(strDate.length<1||tsp[format[mln]]<1||tsp[format[mln]]>12){return false}if(dln===-1){return false}strDate=tsp[format[dln]].toString();if(strDate.length<1||tsp[format[dln]]<1||tsp[format[dln]]>31||(tsp[format[mln]]===2&&tsp[format[dln]]>daysInFebruary(tsp[format[j]]))||tsp[format[dln]]>daysInMonth[tsp[format[mln]]]){return false}return true},isEmpty:function(val){if(val===undefined||val.match(/^\s+$/)||val===""){return true}return false},checkTime:function(time){var re=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/,regs;if(!$.jgrid.isEmpty(time)){regs=time.match(re);if(regs){if(regs[3]){if(regs[1]<1||regs[1]>12){return false}}else{if(regs[1]>23){return false}}if(regs[2]>59){return false}}else{return false}}return true},checkValues:function(val,valref,customobject,nam){var edtrul,i,nm,dft,len,g=this,cm=g.p.colModel,msg=$.jgrid.getRegional(this,"edit.msg"),fmtdate;if(customobject===undefined){if(typeof valref==="string"){for(i=0,len=cm.length;i<len;i++){if(cm[i].name===valref){edtrul=cm[i].editrules;valref=i;if(cm[i].formoptions!=null){nm=cm[i].formoptions.label}break}}}else{if(valref>=0){edtrul=cm[valref].editrules}}}else{edtrul=customobject;nm=nam===undefined?"_":nam}if(edtrul){if(!nm){nm=g.p.colNames!=null?g.p.colNames[valref]:cm[valref].label}if(edtrul.required===true){if($.jgrid.isEmpty(val)){return[false,nm+": "+msg.required,""]}}var rqfield=edtrul.required===false?false:true;if(edtrul.number===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if(isNaN(val)){return[false,nm+": "+msg.number,""]}}}if(edtrul.minValue!==undefined&&!isNaN(edtrul.minValue)){if(parseFloat(val)<parseFloat(edtrul.minValue)){return[false,nm+": "+msg.minValue+" "+edtrul.minValue,""]}}if(edtrul.maxValue!==undefined&&!isNaN(edtrul.maxValue)){if(parseFloat(val)>parseFloat(edtrul.maxValue)){return[false,nm+": "+msg.maxValue+" "+edtrul.maxValue,""]}}var filter;if(edtrul.email===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){filter=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!filter.test(val)){return[false,nm+": "+msg.email,""]}}}if(edtrul.integer===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if(isNaN(val)){return[false,nm+": "+msg.integer,""]}if((val%1!==0)||(val.indexOf(".")!==-1)){return[false,nm+": "+msg.integer,""]}}}if(edtrul.date===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if(cm[valref].formatoptions&&cm[valref].formatoptions.newformat){dft=cm[valref].formatoptions.newformat;fmtdate=$.jgrid.getRegional(g,"formatter.date.masks");if(fmtdate&&fmtdate.hasOwnProperty(dft)){dft=fmtdate[dft]}}else{dft=cm[valref].datefmt||"Y-m-d"}if(!$.jgrid.checkDate(dft,val)){return[false,nm+": "+msg.date+" - "+dft,""]}}}if(edtrul.time===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if(!$.jgrid.checkTime(val)){return[false,nm+": "+msg.date+" - hh:mm (am/pm)",""]}}}if(edtrul.url===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){filter=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!filter.test(val)){return[false,nm+": "+msg.url,""]}}}if(edtrul.custom===true){if(!(rqfield===false&&$.jgrid.isEmpty(val))){if($.isFunction(edtrul.custom_func)){var ret=edtrul.custom_func.call(g,val,nm,valref);return $.isArray(ret)?ret:[false,msg.customarray,""]}return[false,msg.customfcheck,""]}}}return[true,"",""]}});$.fn.jqFilter=function(arg){if(typeof arg==="string"){var fn=$.fn.jqFilter[arg];if(!fn){throw ("jqFilter - No such method: "+arg)}var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}var p=$.extend(true,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:false,errmsg:"",errorcheck:true,showQuery:true,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:true,ruleButtons:true,uniqueSearchFields:false,direction:"ltr",addsubgrup:"Add subgroup",addrule:"Add rule",delgroup:"Delete group",delrule:"Delete rule",autoencode:false},$.jgrid.filter,arg||{});return this.each(function(){if(this.filter){return }this.p=p;if(this.p.filter===null||this.p.filter===undefined){this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}}if(this.p.sortStrategy!=null&&$.isFunction(this.p.sortStrategy)){this.p.columns.sort(this.p.sortStrategy)}var i,len=this.p.columns.length,cl,isIE=/msie/i.test(navigator.userAgent)&&!window.opera;this.p.initFilter=$.extend(true,{},this.p.filter);if(!len){return }for(i=0;i<len;i++){cl=this.p.columns[i];if(cl.stype){cl.inputtype=cl.stype}else{if(!cl.inputtype){cl.inputtype="text"}}if(cl.sorttype){cl.searchtype=cl.sorttype}else{if(!cl.searchtype){cl.searchtype="string"}}if(cl.hidden===undefined){cl.hidden=false}if(!cl.label){cl.label=cl.name}if(cl.index){cl.name=cl.index}if(!cl.hasOwnProperty("searchoptions")){cl.searchoptions={}}if(!cl.hasOwnProperty("searchrules")){cl.searchrules={}}if(cl.search===undefined){cl.inlist=true}else{cl.inlist=cl.search}}var getGrid=function(){return $("#"+$.jgrid.jqID(p.id))[0]||null},$tg=getGrid(),classes=$.jgrid.styleUI[($tg.p.styleUI||"jQueryUI")].filter,common=$.jgrid.styleUI[($tg.p.styleUI||"jQueryUI")].common;if(this.p.showQuery){$(this).append("<table class='queryresult "+classes.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>")}var checkData=function(val,colModelItem){var ret=[true,""],$t=getGrid();if($.isFunction(colModelItem.searchrules)){ret=colModelItem.searchrules.call($t,val,colModelItem)}else{if($.jgrid&&$.jgrid.checkValues){try{ret=$.jgrid.checkValues.call($t,val,-1,colModelItem.searchrules,colModelItem.label)}catch(e){}}}if(ret&&ret.length&&ret[0]===false){p.error=!ret[0];p.errmsg=ret[1]}};this.onchange=function(){this.p.error=false;this.p.errmsg="";return $.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):false};this.reDraw=function(){$("table.group:first",this).remove();var t=this.createTableForGroup(p.filter,null);$(this).append(t);if($.isFunction(this.p.afterRedraw)){this.p.afterRedraw.call(this,this.p)}};this.createTableForGroup=function(group,parentgroup){var that=this,i;var table=$("<table class='group "+classes.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),align="left";if(this.p.direction==="rtl"){align="right";table.attr("dir","rtl")}if(parentgroup===null){table.append("<tr class='error' style='display:none;'><th colspan='5' class='"+common.error+"' align='"+align+"'></th></tr>")}var tr=$("<tr></tr>");table.append(tr);var th=$("<th colspan='5' align='"+align+"'></th>");tr.append(th);if(this.p.ruleButtons===true){var groupOpSelect=$("<select class='opsel "+classes.srSelect+"'></select>");th.append(groupOpSelect);var str="",selected;for(i=0;i<p.groupOps.length;i++){selected=group.groupOp===that.p.groupOps[i].op?" selected='selected'":"";str+="<option value='"+that.p.groupOps[i].op+"'"+selected+">"+that.p.groupOps[i].text+"</option>"}groupOpSelect.append(str).on("change",function(){group.groupOp=$(groupOpSelect).val();that.onchange()})}var inputAddSubgroup="<span></span>";if(this.p.groupButton){inputAddSubgroup=$("<input type='button' value='+ {}' title='"+that.p.subgroup+"' class='add-group "+common.button+"'/>");inputAddSubgroup.on("click",function(){if(group.groups===undefined){group.groups=[]}group.groups.push({groupOp:p.groupOps[0].op,rules:[],groups:[]});that.reDraw();that.onchange();return false})}th.append(inputAddSubgroup);if(this.p.ruleButtons===true){var inputAddRule=$("<input type='button' value='+' title='"+that.p.addrule+"' class='add-rule ui-add "+common.button+"'/>"),cm;inputAddRule.on("click",function(){if(group.rules===undefined){group.rules=[]}for(i=0;i<that.p.columns.length;i++){var searchable=(that.p.columns[i].search===undefined)?true:that.p.columns[i].search,hidden=(that.p.columns[i].hidden===true),ignoreHiding=(that.p.columns[i].searchoptions.searchhidden===true);if((ignoreHiding&&searchable)||(searchable&&!hidden)){cm=that.p.columns[i];break}}if(!cm){return false}var opr;if(cm.searchoptions.sopt){opr=cm.searchoptions.sopt}else{if(that.p.sopt){opr=that.p.sopt}else{if($.inArray(cm.searchtype,that.p.strarr)!==-1){opr=that.p.stropts}else{opr=that.p.numopts}}}group.rules.push({field:cm.name,op:opr[0],data:""});that.reDraw();return false});th.append(inputAddRule)}if(parentgroup!==null){var inputDeleteGroup=$("<input type='button' value='-' title='"+that.p.delgroup+"' class='delete-group "+common.button+"'/>");th.append(inputDeleteGroup);inputDeleteGroup.on("click",function(){for(i=0;i<parentgroup.groups.length;i++){if(parentgroup.groups[i]===group){parentgroup.groups.splice(i,1);break}}that.reDraw();that.onchange();return false})}if(group.groups!==undefined){for(i=0;i<group.groups.length;i++){var trHolderForSubgroup=$("<tr></tr>");table.append(trHolderForSubgroup);var tdFirstHolderForSubgroup=$("<td class='first'></td>");trHolderForSubgroup.append(tdFirstHolderForSubgroup);var tdMainHolderForSubgroup=$("<td colspan='4'></td>");tdMainHolderForSubgroup.append(this.createTableForGroup(group.groups[i],group));trHolderForSubgroup.append(tdMainHolderForSubgroup)}}if(group.groupOp===undefined){group.groupOp=that.p.groupOps[0].op}var suni=that.p.ruleButtons&&that.p.uniqueSearchFields;if(suni){for(var ii=0;ii<that.p.columns.length;ii++){if(that.p.columns[ii].inlist){that.p.columns[ii].search=true}}}if(group.rules!==undefined){for(i=0;i<group.rules.length;i++){table.append(this.createTableRowForRule(group.rules[i],group));if(suni){var field=group.rules[i].field;for(var ii=0;ii<that.p.columns.length;ii++){if(field===that.p.columns[ii].name){that.p.columns[ii].search=false;break}}}}}return table};this.createTableRowForRule=function(rule,group){var that=this,$t=getGrid(),tr=$("<tr></tr>"),i,op,trpar,cm,str="",selected;tr.append("<td class='first'></td>");var ruleFieldTd=$("<td class='columns'></td>");tr.append(ruleFieldTd);var ruleFieldSelect=$("<select class='"+classes.srSelect+"'></select>"),ina,aoprs=[];ruleFieldTd.append(ruleFieldSelect);ruleFieldSelect.on("change",function(){if(that.p.ruleButtons&&that.p.uniqueSearchFields){var prev=parseInt($(this).data("curr"),10),curr=this.selectedIndex;if(prev>=0){that.p.columns[prev].search=true;$(this).data("curr",curr);that.p.columns[curr].search=false}}rule.field=$(ruleFieldSelect).val();trpar=$(this).parents("tr:first");$(".data",trpar).empty();for(i=0;i<that.p.columns.length;i++){if(that.p.columns[i].name===rule.field){cm=that.p.columns[i];break}}if(!cm){return }cm.searchoptions.id=$.jgrid.randId();cm.searchoptions.name=rule.field;cm.searchoptions.oper="filter";if(isIE&&cm.inputtype==="text"){if(!cm.searchoptions.size){cm.searchoptions.size=10}}var elm=$.jgrid.createEl.call($t,cm.inputtype,cm.searchoptions,"",true,that.p.ajaxSelectOptions||{},true);$(elm).addClass("input-elm "+classes.srInput);if(cm.searchoptions.sopt){op=cm.searchoptions.sopt}else{if(that.p.sopt){op=that.p.sopt}else{if($.inArray(cm.searchtype,that.p.strarr)!==-1){op=that.p.stropts}else{op=that.p.numopts}}}var s="",so=0;aoprs=[];$.each(that.p.ops,function(){aoprs.push(this.oper)});for(i=0;i<op.length;i++){ina=$.inArray(op[i],aoprs);if(ina!==-1){if(so===0){rule.op=that.p.ops[ina].oper}s+="<option value='"+that.p.ops[ina].oper+"'>"+that.p.ops[ina].text+"</option>";so++}}$(".selectopts",trpar).empty().append(s);$(".selectopts",trpar)[0].selectedIndex=0;if($.jgrid.msie()&&$.jgrid.msiever()<9){var sw=parseInt($("select.selectopts",trpar)[0].offsetWidth,10)+1;$(".selectopts",trpar).width(sw);$(".selectopts",trpar).css("width","auto")}$(".data",trpar).append(elm);$.jgrid.bindEv.call($t,elm,cm.searchoptions);$(".input-elm",trpar).on("change",function(e){var elem=e.target;rule.data=cm.inputtype==="custom"&&$.isFunction(cm.searchoptions.custom_value)?cm.searchoptions.custom_value.call($t,$(".customelement",this),"get"):elem.value;that.onchange()});setTimeout(function(){rule.data=$(elm).val();that.onchange()},0)});var j=0;for(i=0;i<that.p.columns.length;i++){var searchable=(that.p.columns[i].search===undefined)?true:that.p.columns[i].search,hidden=(that.p.columns[i].hidden===true),ignoreHiding=(that.p.columns[i].searchoptions.searchhidden===true);if((ignoreHiding&&searchable)||(searchable&&!hidden)){selected="";if(rule.field===that.p.columns[i].name){selected=" selected='selected'";j=i}str+="<option value='"+that.p.columns[i].name+"'"+selected+">"+that.p.columns[i].label+"</option>"}}ruleFieldSelect.append(str);ruleFieldSelect.data("curr",j);var ruleOperatorTd=$("<td class='operators'></td>");tr.append(ruleOperatorTd);cm=p.columns[j];cm.searchoptions.id=$.jgrid.randId();if(isIE&&cm.inputtype==="text"){if(!cm.searchoptions.size){cm.searchoptions.size=10}}cm.searchoptions.name=rule.field;cm.searchoptions.oper="filter";var ruleDataInput=$.jgrid.createEl.call($t,cm.inputtype,cm.searchoptions,rule.data,true,that.p.ajaxSelectOptions||{},true);if(rule.op==="nu"||rule.op==="nn"){$(ruleDataInput).attr("readonly","true");$(ruleDataInput).attr("disabled","true")}var ruleOperatorSelect=$("<select class='selectopts "+classes.srSelect+"'></select>");ruleOperatorTd.append(ruleOperatorSelect);ruleOperatorSelect.on("change",function(){rule.op=$(ruleOperatorSelect).val();trpar=$(this).parents("tr:first");var rd=$(".input-elm",trpar)[0];if(rule.op==="nu"||rule.op==="nn"){rule.data="";if(rd.tagName.toUpperCase()!=="SELECT"){rd.value=""}rd.setAttribute("readonly","true");rd.setAttribute("disabled","true")}else{if(rd.tagName.toUpperCase()==="SELECT"){rule.data=rd.value}rd.removeAttribute("readonly");rd.removeAttribute("disabled")}that.onchange()});if(cm.searchoptions.sopt){op=cm.searchoptions.sopt}else{if(that.p.sopt){op=that.p.sopt}else{if($.inArray(cm.searchtype,that.p.strarr)!==-1){op=that.p.stropts}else{op=that.p.numopts}}}str="";$.each(that.p.ops,function(){aoprs.push(this.oper)});for(i=0;i<op.length;i++){ina=$.inArray(op[i],aoprs);if(ina!==-1){selected=rule.op===that.p.ops[ina].oper?" selected='selected'":"";str+="<option value='"+that.p.ops[ina].oper+"'"+selected+">"+that.p.ops[ina].text+"</option>"}}ruleOperatorSelect.append(str);var ruleDataTd=$("<td class='data'></td>");tr.append(ruleDataTd);ruleDataTd.append(ruleDataInput);$.jgrid.bindEv.call($t,ruleDataInput,cm.searchoptions);$(ruleDataInput).addClass("input-elm "+classes.srInput).on("change",function(){rule.data=cm.inputtype==="custom"?cm.searchoptions.custom_value.call($t,$(".customelement",this),"get"):$(this).val();that.onchange()});var ruleDeleteTd=$("<td></td>");tr.append(ruleDeleteTd);if(this.p.ruleButtons===true){var ruleDeleteInput=$("<input type='button' value='-' title='"+that.p.delrule+"' class='delete-rule ui-del "+common.button+"'/>");ruleDeleteTd.append(ruleDeleteInput);ruleDeleteInput.on("click",function(){for(i=0;i<group.rules.length;i++){if(group.rules[i]===rule){group.rules.splice(i,1);break}}that.reDraw();that.onchange();return false})}return tr};this.getStringForGroup=function(group){var s="(",index;if(group.groups!==undefined){for(index=0;index<group.groups.length;index++){if(s.length>1){s+=" "+group.groupOp+" "}try{s+=this.getStringForGroup(group.groups[index])}catch(eg){alert(eg)}}}if(group.rules!==undefined){try{for(index=0;index<group.rules.length;index++){if(s.length>1){s+=" "+group.groupOp+" "}s+=this.getStringForRule(group.rules[index])}}catch(e){alert(e)}}s+=")";if(s==="()"){return""}return s};this.getStringForRule=function(rule){var opUF="",opC="",i,cm,ret,val,numtypes=["int","integer","float","number","currency"];for(i=0;i<this.p.ops.length;i++){if(this.p.ops[i].oper===rule.op){opUF=this.p.operands.hasOwnProperty(rule.op)?this.p.operands[rule.op]:"";opC=this.p.ops[i].oper;break}}for(i=0;i<this.p.columns.length;i++){if(this.p.columns[i].name===rule.field){cm=this.p.columns[i];break}}if(cm===undefined){return""}val=this.p.autoencode?$.jgrid.htmlEncode(rule.data):rule.data;if(opC==="bw"||opC==="bn"){val=val+"%"}if(opC==="ew"||opC==="en"){val="%"+val}if(opC==="cn"||opC==="nc"){val="%"+val+"%"}if(opC==="in"||opC==="ni"){val=" ("+val+")"}if(p.errorcheck){checkData(rule.data,cm)}if($.inArray(cm.searchtype,numtypes)!==-1||opC==="nn"||opC==="nu"){ret=rule.field+" "+opUF+" "+val}else{ret=rule.field+" "+opUF+' "'+val+'"'}return ret};this.resetFilter=function(){this.p.filter=$.extend(true,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){$("th."+common.error,this).html("");$("tr.error",this).hide()};this.showError=function(){$("th."+common.error,this).html(this.p.errmsg);$("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(p.filter)};this.toString=function(){var that=this;function getStringRule(rule){if(that.p.errorcheck){var i,cm;for(i=0;i<that.p.columns.length;i++){if(that.p.columns[i].name===rule.field){cm=that.p.columns[i];break}}if(cm){checkData(rule.data,cm)}}return rule.op+"(item."+rule.field+",'"+rule.data+"')"}function getStringForGroup(group){var s="(",index;if(group.groups!==undefined){for(index=0;index<group.groups.length;index++){if(s.length>1){if(group.groupOp==="OR"){s+=" || "}else{s+=" && "}}s+=getStringForGroup(group.groups[index])}}if(group.rules!==undefined){for(index=0;index<group.rules.length;index++){if(s.length>1){if(group.groupOp==="OR"){s+=" || "}else{s+=" && "}}s+=getStringRule(group.rules[index])}}s+=")";if(s==="()"){return""}return s}return getStringForGroup(this.p.filter)};this.reDraw();if(this.p.showQuery){this.onchange()}this.filter=true})};$.extend($.fn.jqFilter,{toSQLString:function(){var s="";this.each(function(){s=this.toUserFriendlyString()});return s},filterData:function(){var s;this.each(function(){s=this.p.filter});return s},getParameter:function(param){if(param!==undefined){if(this.p.hasOwnProperty(param)){return this.p[param]}}return this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(pfilter){if(typeof pfilter==="string"){pfilter=$.jgrid.parse(pfilter)}this.each(function(){this.p.filter=pfilter;this.reDraw();this.onchange()})}});$.jgrid.extend({filterToolbar:function(p){var regional=$.jgrid.getRegional(this[0],"search");p=$.extend({autosearch:true,autosearchDelay:500,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,url:"",stringResult:false,groupOp:"AND",defaultSearch:"bw",searchOperators:false,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."}},regional,p||{});return this.each(function(){var $t=this;if($t.p.filterToolbar){return }if(!$($t).data("filterToolbar")){$($t).data("filterToolbar",p)}if($t.p.force_regional){p=$.extend(p,regional)}var classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].filter,common=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].common,base=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].base,triggerToolbar=function(){var sdata={},j=0,v,nm,sopt={},so,ms=false,ssfield=[],bbt=false,sop;$.each($t.p.colModel,function(){var $elem=$("#gs_"+$t.p.idPrefix+$.jgrid.jqID(this.name),(this.frozen===true&&$t.p.frozenColumns===true)?$t.grid.fhDiv:$t.grid.hDiv);nm=this.index||this.name;sop=this.searchoptions||{};if(p.searchOperators&&sop.searchOperMenu){so=$elem.parent().prev().children("a").attr("soper")||p.defaultSearch}else{so=(sop.sopt)?sop.sopt[0]:this.stype==="select"?"eq":p.defaultSearch}v=this.stype==="custom"&&$.isFunction(sop.custom_value)&&$elem.length>0?sop.custom_value.call($t,$elem,"get"):$elem.val();if(this.stype==="select"&&sop.multiple&&$.isArray(v)&&v.length){ms=true;ssfield.push(nm);v=v.length===1?v[0]:v}if(so==="bt"){bbt=true}if(v||so==="nu"||so==="nn"){sdata[nm]=v;sopt[nm]=so;j++}else{try{delete $t.p.postData[nm]}catch(z){}}});var sd=j>0?true:false;if(p.stringResult===true||$t.p.datatype==="local"||p.searchOperators===true){var ruleGroup='{"groupOp":"'+p.groupOp+'","rules":[';var gi=0;$.each(sdata,function(i,n){if(gi>0){ruleGroup+=","}ruleGroup+='{"field":"'+i+'",';ruleGroup+='"op":"'+sopt[i]+'",';n+="";ruleGroup+='"data":"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';gi++});ruleGroup+="]}";var filters,rules,k,str,rule,ssdata,group;if(ms){filters=$.jgrid.parse(ruleGroup);if(filters.rules&&filters.rules.length){rules=filters.rules;for(k=0;k<rules.length;k++){rule=rules[k];if($.inArray(rule.filed,ssfield)){ssdata=rule.data.split(p.splitSelect);if(ssdata.length>1){if(filters.groups===undefined){filters.groups=[]}group={groupOp:p.groupOpSelect,groups:[],rules:[]};filters.groups.push(group);$.each(ssdata,function(l){str=ssdata[l];if(str){group.rules.push({data:ssdata[l],op:rule.op,field:rule.field})}});rules.splice(k,1);k--}}}}}if(bbt){if(!$.isPlainObject(filters)){filters=$.jgrid.parse(ruleGroup)}if(filters.rules&&filters.rules.length){rules=filters.rules;for(k=0;k<rules.length;k++){rule=rules[k];if(rule.op==="bt"){ssdata=rule.data.split("...");if(ssdata.length>1){if(filters.groups===undefined){filters.groups=[]}group={groupOp:"AND",groups:[],rules:[]};filters.groups.push(group);$.each(ssdata,function(l){var btop=l===0?"ge":"le";str=ssdata[l];if(str){group.rules.push({data:ssdata[l],op:btop,field:rule.field})}});rules.splice(k,1);k--}}}}}if(bbt||ms){ruleGroup=JSON.stringify(filters)}$.extend($t.p.postData,{filters:ruleGroup});$.each(["searchField","searchString","searchOper"],function(i,n){if($t.p.postData.hasOwnProperty(n)){delete $t.p.postData[n]}})}else{$.extend($t.p.postData,sdata)}var saveurl;if(p.url){saveurl=$t.p.url;$($t).jqGrid("setGridParam",{url:p.url})}var bsr=$($t).triggerHandler("jqGridToolbarBeforeSearch")==="stop"?true:false;if(!bsr&&$.isFunction(p.beforeSearch)){bsr=p.beforeSearch.call($t)}if(!bsr){$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}])}if(saveurl){$($t).jqGrid("setGridParam",{url:saveurl})}$($t).triggerHandler("jqGridToolbarAfterSearch");if($.isFunction(p.afterSearch)){p.afterSearch.call($t)}},clearToolbar=function(trigger){var sdata={},j=0,nm;trigger=(typeof trigger!=="boolean")?true:trigger;$.each($t.p.colModel,function(){var v,$elem=$("#gs_"+$t.p.idPrefix+$.jgrid.jqID(this.name),(this.frozen===true&&$t.p.frozenColumns===true)?$t.grid.fhDiv:$t.grid.hDiv);if(this.searchoptions&&this.searchoptions.defaultValue!==undefined){v=this.searchoptions.defaultValue}nm=this.index||this.name;switch(this.stype){case"select":$elem.find("option").each(function(i){if(i===0){this.selected=true}if($(this).val()===v){this.selected=true;return false}});if(v!==undefined){sdata[nm]=v;j++}else{try{delete $t.p.postData[nm]}catch(e){}}break;case"text":$elem.val(v||"");if(v!==undefined){sdata[nm]=v;j++}else{try{delete $t.p.postData[nm]}catch(y){}}break;case"custom":if($.isFunction(this.searchoptions.custom_value)&&$elem.length>0){this.searchoptions.custom_value.call($t,$elem,"set",v||"")}break}});var sd=j>0?true:false;$t.p.resetsearch=true;if(p.stringResult===true||$t.p.datatype==="local"){var ruleGroup='{"groupOp":"'+p.groupOp+'","rules":[';var gi=0;$.each(sdata,function(i,n){if(gi>0){ruleGroup+=","}ruleGroup+='{"field":"'+i+'",';ruleGroup+='"op":"eq",';n+="";ruleGroup+='"data":"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';gi++});ruleGroup+="]}";$.extend($t.p.postData,{filters:ruleGroup});$.each(["searchField","searchString","searchOper"],function(i,n){if($t.p.postData.hasOwnProperty(n)){delete $t.p.postData[n]}})}else{$.extend($t.p.postData,sdata)}var saveurl;if(p.url){saveurl=$t.p.url;$($t).jqGrid("setGridParam",{url:p.url})}var bcv=$($t).triggerHandler("jqGridToolbarBeforeClear")==="stop"?true:false;if(!bcv&&$.isFunction(p.beforeClear)){bcv=p.beforeClear.call($t)}if(!bcv){if(trigger){$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}])}}if(saveurl){$($t).jqGrid("setGridParam",{url:saveurl})}$($t).triggerHandler("jqGridToolbarAfterClear");if($.isFunction(p.afterClear)){p.afterClear()}},toggleToolbar=function(){var trow=$("tr.ui-search-toolbar",$t.grid.hDiv),trow2=$t.p.frozenColumns===true?$("tr.ui-search-toolbar",$t.grid.fhDiv):false;if(trow.css("display")==="none"){trow.show();if(trow2){trow2.show()}}else{trow.hide();if(trow2){trow2.hide()}}},buildRuleMenu=function(elem,left,top){$("#sopt_menu").remove();left=parseInt(left,10);top=parseInt(top,10)+18;var fs=$(".ui-jqgrid-view").css("font-size")||"11px";var str='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+fs+";left:"+left+"px;top:"+top+'px;">',selected=$(elem).attr("soper"),selclass,aoprs=[],ina;var i=0,nm=$(elem).attr("colname"),len=$t.p.colModel.length;while(i<len){if($t.p.colModel[i].name===nm){break}i++}var cm=$t.p.colModel[i],options=$.extend({},cm.searchoptions);if(!options.sopt){options.sopt=[];options.sopt[0]=cm.stype==="select"?"eq":p.defaultSearch}$.each(p.odata,function(){aoprs.push(this.oper)});for(i=0;i<options.sopt.length;i++){ina=$.inArray(options.sopt[i],aoprs);if(ina!==-1){selclass=selected===p.odata[ina].oper?common.highlight:"";str+='<li class="ui-menu-item '+selclass+'" role="presentation"><a class="'+common.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+p.odata[ina].oper+'" oper="'+p.operands[p.odata[ina].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+p.operands[p.odata[ina].oper]+"</td><td>"+p.odata[ina].text+"</td></tr></table></a></li>"}}str+="</ul>";$("body").append(str);$("#sopt_menu").addClass("ui-menu "+classes.menu_widget);$("#sopt_menu > li > a").hover(function(){$(this).addClass(common.hover)},function(){$(this).removeClass(common.hover)}).click(function(){var v=$(this).attr("value"),oper=$(this).attr("oper");$($t).triggerHandler("jqGridToolbarSelectOper",[v,oper,elem]);$("#sopt_menu").hide();$(elem).text(oper).attr("soper",v);if(p.autosearch===true){var inpelm=$(elem).parent().next().children()[0];if($(inpelm).val()||v==="nu"||v==="nn"){triggerToolbar()}}})};var tr=$("<tr class='ui-search-toolbar' role='row'></tr>"),timeoutHnd,rules,filterobj;if(p.restoreFromFilters){filterobj=$t.p.postData.filters;if(filterobj){if(typeof filterobj==="string"){filterobj=$.jgrid.parse(filterobj)}rules=filterobj.rules.length?filterobj.rules:false}}$.each($t.p.colModel,function(ci){var cm=this,soptions,select="",sot="=",so,i,st,csv,df,elem,restores,th=$("<th role='columnheader' class='"+base.headerBox+" ui-th-"+$t.p.direction+"' id='gsh_"+$t.p.id+"_"+cm.name+"' ></th>"),thd=$("<div></div>"),stbl=$("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");if(this.hidden===true){$(th).css("display","none")}this.search=this.search===false?false:true;if(this.stype===undefined){this.stype="text"}this.searchoptions=this.searchoptions||{};if(this.searchoptions.searchOperMenu===undefined){this.searchoptions.searchOperMenu=true}soptions=$.extend({},this.searchoptions,{name:cm.index||cm.name,id:"gs_"+$t.p.idPrefix+cm.name,oper:"search"});if(this.search){if(p.restoreFromFilters&&rules){restores=false;for(var is=0;is<rules.length;is++){if(rules[is].field){var snm=cm.index||cm.name;if(snm===rules[is].field){restores=rules[is];break}}}}if(p.searchOperators){so=(soptions.sopt)?soptions.sopt[0]:cm.stype==="select"?"eq":p.defaultSearch;if(p.restoreFromFilters&&restores){so=restores.op}for(i=0;i<p.odata.length;i++){if(p.odata[i].oper===so){sot=p.operands[so]||"";break}}st=soptions.searchtitle!=null?soptions.searchtitle:p.operandTitle;select=this.searchoptions.searchOperMenu?"<a title='"+st+"' style='padding-right: 0.5em;' soper='"+so+"' class='soptclass' colname='"+this.name+"'>"+sot+"</a>":""}$("td:eq(0)",stbl).attr("colindex",ci).append(select);if(soptions.clearSearch===undefined){soptions.clearSearch=true}if(soptions.clearSearch){csv=p.resetTitle||"Clear Search Value";$("td:eq(2)",stbl).append("<a title='"+csv+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+p.resetIcon+"</a>")}else{$("td:eq(2)",stbl).hide()}if(this.surl){soptions.dataUrl=this.surl}df="";if(soptions.defaultValue){df=$.isFunction(soptions.defaultValue)?soptions.defaultValue.call($t):soptions.defaultValue}if(p.restoreFromFilters&&restores){df=restores.data}elem=$.jgrid.createEl.call($t,this.stype,soptions,df,false,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));$(elem).addClass(classes.srInput);$("td:eq(1)",stbl).append(elem);$(thd).append(stbl);if(soptions.dataEvents==null){soptions.dataEvents=[]}switch(this.stype){case"select":if(p.autosearch===true){soptions.dataEvents.push({type:"change",fn:function(){triggerToolbar();return false}})}break;case"text":if(p.autosearch===true){if(p.searchOnEnter){soptions.dataEvents.push({type:"keypress",fn:function(e){var key=e.charCode||e.keyCode||0;if(key===13){triggerToolbar();return false}return this}})}else{soptions.dataEvents.push({type:"keydown",fn:function(e){var key=e.which;switch(key){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:if(timeoutHnd){clearTimeout(timeoutHnd)}timeoutHnd=setTimeout(function(){triggerToolbar()},p.autosearchDelay)}}})}}break}$.jgrid.bindEv.call($t,elem,soptions)}$(th).append(thd);$(tr).append(th);if(!p.searchOperators||select===""){$("td:eq(0)",stbl).hide()}});$("table thead",$t.grid.hDiv).append(tr);if(p.searchOperators){$(".soptclass",tr).click(function(e){var offset=$(this).offset(),left=(offset.left),top=(offset.top);buildRuleMenu(this,left,top);e.stopPropagation()});$("body").on("click",function(e){if(e.target.className!=="soptclass"){$("#sopt_menu").remove()}})}$(".clearsearchclass",tr).click(function(){var ptr=$(this).parents("tr:first"),coli=parseInt($("td.ui-search-oper",ptr).attr("colindex"),10),sval=$.extend({},$t.p.colModel[coli].searchoptions||{}),dval=sval.defaultValue?sval.defaultValue:"",elem;if($t.p.colModel[coli].stype==="select"){elem=$("td.ui-search-input select",ptr);if(dval){elem.val(dval)}else{elem[0].selectedIndex=0}}else{elem=$("td.ui-search-input input",ptr);elem.val(dval)}$($t).triggerHandler("jqGridToolbarClearVal",[elem[0],coli,sval,dval]);if($.isFunction(p.onClearSearchValue)){p.onClearSearchValue.call($t,elem[0],coli,sval,dval)}if(p.autosearch===true){triggerToolbar()}});this.p.filterToolbar=true;this.triggerToolbar=triggerToolbar;this.clearToolbar=clearToolbar;this.toggleToolbar=toggleToolbar})},destroyFilterToolbar:function(){return this.each(function(){if(!this.p.filterToolbar){return }this.triggerToolbar=null;this.clearToolbar=null;this.toggleToolbar=null;this.p.filterToolbar=false;$(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove()})},refreshFilterToolbar:function(p){p=$.extend(true,{filters:"",onClearVal:null,onSetVal:null},p||{});return this.each(function(){var $t=this,cm=$t.p.colModel,i,l=$t.p.colModel.length,searchitem,filters,rules,rule,ssfield=[],ia;if(!$t.p.filterToolbar){return }for(i=0;i<l;i++){ssfield.push(cm[i].name);searchitem=$("#gs_"+$t.p.idPrefix+$.jgrid.jqID(cm[i].name));switch(cm[i].stype){case"select":case"text":searchitem.val("");break}if($.isFunction(p.onClearVal)){p.onClearVal.call($t,searchitem,cm[i].name)}}function setrules(filter){if(filter&&filter.rules){rules=filter.rules;l=rules.length;for(i=0;i<l;i++){rule=rules[i];ia=$.inArray(rule.field,ssfield);if(ia!==-1){searchitem=$("#gs_"+$t.p.idPrefix+$.jgrid.jqID(cm[ia].name));if(searchitem.length>0){if(cm[ia].stype==="select"){searchitem.find("option[value='"+$.jgrid.jqID(rule.data)+"']").prop("selected",true)}else{if(cm[ia].stype==="text"){searchitem.val(rule.data)}}if($.isFunction(p.onSetVal)){p.onSetVal.call($t,searchitem,cm[ia].name)}}}}if(filter.groups){for(var k=0;k<filter.groups.length;k++){setrules(filter.groups[k])}}}}if(typeof (p.filters)==="string"&&p.filters.length){filters=$.jgrid.parse(p.filters)}if($.isPlainObject(filters)){setrules(filters)}})},searchGrid:function(p){var regional=$.jgrid.getRegional(this[0],"search");p=$.extend(true,{recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,searchOnEnter:false,multipleSearch:false,multipleGroup:false,top:0,left:0,jqModal:true,modal:false,resize:true,width:450,height:"auto",dataheight:"auto",showQuery:false,errorcheck:true,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:true,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:false,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},regional,p||{});return this.each(function(){var $t=this;if(!$t.grid){return }var fid="fbox_"+$t.p.id,showFrm=true,mustReload=true,IDs={themodal:"searchmod"+fid,modalhead:"searchhd"+fid,modalcontent:"searchcnt"+fid,scrollelm:fid},defaultFilters=$t.p.postData[p.sFilter],fl,classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].filter,common=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].common;p.styleUI=$t.p.styleUI;if(typeof defaultFilters==="string"){defaultFilters=$.jgrid.parse(defaultFilters)}if(p.recreateFilter===true){$("#"+$.jgrid.jqID(IDs.themodal)).remove()}function showFilter(_filter){showFrm=$($t).triggerHandler("jqGridFilterBeforeShow",[_filter]);if(showFrm===undefined){showFrm=true}if(showFrm&&$.isFunction(p.beforeShowSearch)){showFrm=p.beforeShowSearch.call($t,_filter)}if(showFrm){$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(fid),jqm:p.jqModal,modal:p.modal,overlay:p.overlay,toTop:p.toTop});$($t).triggerHandler("jqGridFilterAfterShow",[_filter]);if($.isFunction(p.afterShowSearch)){p.afterShowSearch.call($t,_filter)}}}if($("#"+$.jgrid.jqID(IDs.themodal))[0]!==undefined){showFilter($("#fbox_"+$.jgrid.jqID($t.p.id)))}else{var fil=$("<div><div id='"+fid+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+$.jgrid.jqID($t.p.id)),align="left",butleft="";if($t.p.direction==="rtl"){align="right";butleft=" style='text-align:left'";fil.attr("dir","rtl")}var columns=$.extend([],$t.p.colModel),bS="<a id='"+fid+"_search' class='fm-button "+common.button+" fm-button-icon-right ui-search'><span class='"+common.icon_base+" "+classes.icon_search+"'></span>"+p.Find+"</a>",bC="<a id='"+fid+"_reset' class='fm-button "+common.button+" fm-button-icon-left ui-reset'><span class='"+common.icon_base+" "+classes.icon_reset+"'></span>"+p.Reset+"</a>",bQ="",tmpl="",colnm,found=false,bt,cmi=-1;if(p.showQuery){bQ="<a id='"+fid+"_query' class='fm-button "+common.button+" fm-button-icon-left'><span class='"+common.icon_base+" "+classes.icon_query+"'></span>Query</a>"}if(!p.columns.length){$.each(columns,function(i,n){if(!n.label){n.label=$t.p.colNames[i]}if(!found){var searchable=(n.search===undefined)?true:n.search,hidden=(n.hidden===true),ignoreHiding=(n.searchoptions&&n.searchoptions.searchhidden===true);if((ignoreHiding&&searchable)||(searchable&&!hidden)){found=true;colnm=n.index||n.name;cmi=i}}})}else{columns=p.columns;cmi=0;colnm=columns[0].index||columns[0].name}if((!defaultFilters&&colnm)||p.multipleSearch===false){var cmop="eq";if(cmi>=0&&columns[cmi].searchoptions&&columns[cmi].searchoptions.sopt){cmop=columns[cmi].searchoptions.sopt[0]}else{if(p.sopt&&p.sopt.length){cmop=p.sopt[0]}}defaultFilters={groupOp:"AND",rules:[{field:colnm,op:cmop,data:""}]}}found=false;if(p.tmplNames&&p.tmplNames.length){found=true;tmpl="<tr><td class='ui-search-label'>"+p.tmplLabel+"</td>";tmpl+="<td><select class='ui-template "+classes.srSelect+"'>";tmpl+="<option value='default'>Default</option>";$.each(p.tmplNames,function(i,n){tmpl+="<option value='"+i+"'>"+n+"</option>"});tmpl+="</select></td></tr>"}bt="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+fid+"_2'><tbody><tr><td colspan='2'><hr class='"+common.content+"' style='margin:1px'/></td></tr>"+tmpl+"<tr><td class='EditButton' style='text-align:"+align+"'>"+bC+"</td><td class='EditButton' "+butleft+">"+bQ+bS+"</td></tr></tbody></table>";fid=$.jgrid.jqID(fid);$("#"+fid).jqFilter({columns:columns,sortStrategy:p.sortStrategy,filter:p.loadDefaults?defaultFilters:null,showQuery:p.showQuery,errorcheck:p.errorcheck,sopt:p.sopt,groupButton:p.multipleGroup,ruleButtons:p.multipleSearch,uniqueSearchFields:p.uniqueSearchFields,afterRedraw:p.afterRedraw,ops:p.odata,operands:p.operands,ajaxSelectOptions:$t.p.ajaxSelectOptions,groupOps:p.groupOps,addsubgrup:p.addsubgrup,addrule:p.addrule,delgroup:p.delgroup,delrule:p.delrule,autoencode:$t.p.autoencode,onChange:function(){if(this.p.showQuery){$(".query",this).html(this.toUserFriendlyString())}if($.isFunction(p.afterChange)){p.afterChange.call($t,$("#"+fid),p)}},direction:$t.p.direction,id:$t.p.id});fil.append(bt);if(found&&p.tmplFilters&&p.tmplFilters.length){$(".ui-template",fil).on("change",function(){var curtempl=$(this).val();if(curtempl==="default"){$("#"+fid).jqFilter("addFilter",defaultFilters)}else{$("#"+fid).jqFilter("addFilter",p.tmplFilters[parseInt(curtempl,10)])}return false})}if(p.multipleGroup===true){p.multipleSearch=true}$($t).triggerHandler("jqGridFilterInitialize",[$("#"+fid)]);if($.isFunction(p.onInitializeSearch)){p.onInitializeSearch.call($t,$("#"+fid))}p.gbox="#gbox_"+fid;if(p.layer){$.jgrid.createModal(IDs,fil,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0],"#"+$.jgrid.jqID(p.layer),{position:"relative"})}else{$.jgrid.createModal(IDs,fil,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0])}if(p.searchOnEnter||p.closeOnEscape){$("#"+$.jgrid.jqID(IDs.themodal)).keydown(function(e){var $target=$(e.target);if(p.searchOnEnter&&e.which===13&&!$target.hasClass("add-group")&&!$target.hasClass("add-rule")&&!$target.hasClass("delete-group")&&!$target.hasClass("delete-rule")&&(!$target.hasClass("fm-button")||!$target.is("[id$=_query]"))){$("#"+fid+"_search").click();return false}if(p.closeOnEscape&&e.which===27){$("#"+$.jgrid.jqID(IDs.modalhead)).find(".ui-jqdialog-titlebar-close").click();return false}})}if(bQ){$("#"+fid+"_query").on("click",function(){$(".queryresult",fil).toggle();return false})}if(p.stringResult===undefined){p.stringResult=p.multipleSearch}$("#"+fid+"_search").on("click",function(){var sdata={},res,filters;fl=$("#"+fid);fl.find(".input-elm:focus").change();filters=fl.jqFilter("filterData");if(p.errorcheck){fl[0].hideError();if(!p.showQuery){fl.jqFilter("toSQLString")}if(fl[0].p.error){fl[0].showError();return false}}if(p.stringResult){try{res=JSON.stringify(filters)}catch(e2){}if(typeof res==="string"){sdata[p.sFilter]=res;$.each([p.sField,p.sValue,p.sOper],function(){sdata[this]=""})}}else{if(p.multipleSearch){sdata[p.sFilter]=filters;$.each([p.sField,p.sValue,p.sOper],function(){sdata[this]=""})}else{sdata[p.sField]=filters.rules[0].field;sdata[p.sValue]=filters.rules[0].data;sdata[p.sOper]=filters.rules[0].op;sdata[p.sFilter]=""}}$t.p.search=true;$.extend($t.p.postData,sdata);mustReload=$($t).triggerHandler("jqGridFilterSearch");if(mustReload===undefined){mustReload=true}if(mustReload&&$.isFunction(p.onSearch)){mustReload=p.onSearch.call($t,$t.p.filters)}if(mustReload!==false){$($t).trigger("reloadGrid",[{page:1}])}if(p.closeAfterSearch){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:p.jqModal,onClose:p.onClose})}return false});$("#"+fid+"_reset").on("click",function(){var sdata={},fl=$("#"+fid);$t.p.search=false;$t.p.resetsearch=true;if(p.multipleSearch===false){sdata[p.sField]=sdata[p.sValue]=sdata[p.sOper]=""}else{sdata[p.sFilter]=""}fl[0].resetFilter();if(found){$(".ui-template",fil).val("default")}$.extend($t.p.postData,sdata);mustReload=$($t).triggerHandler("jqGridFilterReset");if(mustReload===undefined){mustReload=true}if(mustReload&&$.isFunction(p.onReset)){mustReload=p.onReset.call($t)}if(mustReload!==false){$($t).trigger("reloadGrid",[{page:1}])}if(p.closeAfterReset){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:p.jqModal,onClose:p.onClose})}return false});showFilter($("#"+fid));$(".fm-button:not(."+common.disabled+")",fil).hover(function(){$(this).addClass(common.hover)},function(){$(this).removeClass(common.hover)})}})},filterInput:function(val,p){p=$.extend(true,{defaultSearch:"cn",groupOp:"OR",searchAll:false,beforeSearch:null,afterSearch:null},p||{});return this.each(function(){var $t=this;if(!$t.grid){return }var nm,sop,ruleGroup='{"groupOp":"'+p.groupOp+'","rules":[',gi=0,so;val+="";if(!$t.p.datatype==="local"){return }$.each($t.p.colModel,function(){nm=this.index||this.name;sop=this.searchoptions||{};so=p.defaultSearch?p.defaultSearch:(sop.sopt)?sop.sopt[0]:p.defaultSearch;this.search=this.search===false?false:true;if(this.search||p.searchAll){if(gi>0){ruleGroup+=","}ruleGroup+='{"field":"'+nm+'",';ruleGroup+='"op":"'+so+'",';ruleGroup+='"data":"'+val.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';gi++}});ruleGroup+="]}";$.extend($t.p.postData,{filters:ruleGroup});$.each(["searchField","searchString","searchOper"],function(i,n){if($t.p.postData.hasOwnProperty(n)){delete $t.p.postData[n]}});var bsr=$($t).triggerHandler("jqGridFilterInputBeforeSearch")==="stop"?true:false;if(!bsr&&$.isFunction(p.beforeSearch)){bsr=p.beforeSearch.call($t)}if(!bsr){$($t).jqGrid("setGridParam",{search:true}).trigger("reloadGrid",[{page:1}])}$($t).triggerHandler("jqGridFilterInputAfterSearch");if($.isFunction(p.afterSearch)){p.afterSearch.call($t)}})}});var rp_ge={};$.jgrid.extend({editGridRow:function(rowid,p){var regional=$.jgrid.getRegional(this[0],"edit"),currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].formedit,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend(true,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true,overlayClass:commonstyle.overlay,removemodal:true,form:"edit",template:null,focusField:true,editselected:false},regional,p||{});rp_ge[$(this)[0].p.id]=p;return this.each(function(){var $t=this;if(!$t.grid||!rowid){return }$t.p.savedData={};var gID=$t.p.id,frmgr="FrmGrid_"+gID,frmtborg="TblGrid_"+gID,frmtb="#"+$.jgrid.jqID(frmtborg),frmtb2,IDs={themodal:"editmod"+gID,modalhead:"edithd"+gID,modalcontent:"editcnt"+gID,scrollelm:frmgr},showFrm=true,maxCols=1,maxRows=0,postdata,diff,frmoper,templ=typeof rp_ge[$t.p.id].template==="string"&&rp_ge[$t.p.id].template.length>0,errors=$.jgrid.getRegional(this,"errors");rp_ge[$t.p.id].styleUI=$t.p.styleUI||"jQueryUI";if($.jgrid.isMobile()){rp_ge[$t.p.id].resize=false}if(rowid==="new"){rowid="_empty";frmoper="add";p.caption=rp_ge[$t.p.id].addCaption}else{p.caption=rp_ge[$t.p.id].editCaption;frmoper="edit"}if(!p.recreateForm){if($($t).data("formProp")){$.extend(rp_ge[$(this)[0].p.id],$($t).data("formProp"))}}var closeovrl=true;if(p.checkOnUpdate&&p.jqModal&&!p.modal){closeovrl=false}function getFormData(){var a2={},i;$(frmtb).find(".FormElement").each(function(){var celm=$(".customelement",this);if(celm.length){var elem=celm[0],nm=$(elem).attr("name");$.each($t.p.colModel,function(){if(this.name===nm&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{postdata[nm]=this.editoptions.custom_value.call($t,$("#"+$.jgrid.jqID(nm),frmtb),"get");if(postdata[nm]===undefined){throw"e1"}}catch(e){if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.novalue,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,e.message,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}}return true}})}else{switch($(this).get(0).type){case"checkbox":if($(this).is(":checked")){postdata[this.name]=$(this).val()}else{var ofv=$(this).attr("offval");postdata[this.name]=ofv}break;case"select-one":postdata[this.name]=$(this).val();break;case"select-multiple":postdata[this.name]=$(this).val();postdata[this.name]=postdata[this.name]?postdata[this.name].join(","):"";break;case"password":case"text":case"textarea":case"button":postdata[this.name]=$(this).val();break;case"radio":if(a2.hasOwnProperty(this.name)){return true}else{a2[this.name]=($(this).attr("offval")===undefined)?"off":$(this).attr("offval")}break}if($t.p.autoencode){postdata[this.name]=$.jgrid.htmlEncode(postdata[this.name])}}});for(i in a2){if(a2.hasOwnProperty(i)){var val=$('input[name="'+i+'"]:checked',frmtb).val();postdata[i]=(val!==undefined)?val:a2[i];if($t.p.autoencode){postdata[i]=$.jgrid.htmlEncode(postdata[i])}}}return true}function createData(rowid,obj,tb,maxcols){var nm,hc,trdata,cnt=0,tmp,dc,elc,retpos=[],ind=false,tdtmpl="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",tmpl="",i,ffld;for(i=1;i<=maxcols;i++){tmpl+=tdtmpl}if(rowid!=="_empty"){ind=$(obj).jqGrid("getInd",rowid)}$(obj.p.colModel).each(function(i){nm=this.name;if(this.editrules&&this.editrules.edithidden===true){hc=false}else{hc=this.hidden===true?true:false}dc=hc?"style='display:none'":"";if(nm!=="cb"&&nm!=="subgrid"&&this.editable===true&&nm!=="rn"){if(ind===false){tmp=""}else{if(nm===obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$("td[role='gridcell']:eq("+i+")",obj.rows[ind]).text()}else{try{tmp=$.unformat.call(obj,$("td[role='gridcell']:eq("+i+")",obj.rows[ind]),{rowId:rowid,colModel:this},i)}catch(_){tmp=(this.edittype&&this.edittype==="textarea")?$("td[role='gridcell']:eq("+i+")",obj.rows[ind]).text():$("td[role='gridcell']:eq("+i+")",obj.rows[ind]).html()}if(!tmp||tmp==="&nbsp;"||tmp==="&#160;"||(tmp.length===1&&tmp.charCodeAt(0)===160)){tmp=""}}}var opt=$.extend({},this.editoptions||{},{id:nm,name:nm,rowId:rowid,oper:"edit"}),frmopt=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),rp=parseInt(frmopt.rowpos,10)||cnt+1,cp=parseInt((parseInt(frmopt.colpos,10)||1)*2,10);if(rowid==="_empty"&&opt.defaultValue){tmp=$.isFunction(opt.defaultValue)?opt.defaultValue.call($t):opt.defaultValue}if(!this.edittype){this.edittype="text"}if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp)}elc=$.jgrid.createEl.call($t,this.edittype,opt,tmp,false,$.extend({},$.jgrid.ajaxOptions,obj.p.ajaxSelectOptions||{}));if(this.edittype==="select"){tmp=$(elc).val();if($(elc).get(0).type==="select-multiple"&&tmp){tmp=tmp.join(",")}}if(this.edittype==="checkbox"){if($(elc).is(":checked")){tmp=$(elc).val()}else{tmp=$(elc).attr("offval")}}$(elc).addClass("FormElement");if($.inArray(this.edittype,["text","textarea","password","select"])>-1){$(elc).addClass(styles.inputClass)}ffld=true;if(templ){var ftmplfld=$(frm).find("#"+nm);if(ftmplfld.length){ftmplfld.replaceWith(elc)}else{ffld=false}}else{trdata=$(tb).find("tr[rowpos="+rp+"]");if(frmopt.rowabove){var newdata=$("<tr><td class='contentinfo' colspan='"+(maxcols*2)+"'>"+frmopt.rowcontent+"</td></tr>");$(tb).append(newdata);newdata[0].rp=rp}if(trdata.length===0){trdata=$("<tr "+dc+" rowpos='"+rp+"'></tr>").addClass("FormData").attr("id","tr_"+nm);$(trdata).append(tmpl);$(tb).append(trdata);trdata[0].rp=rp}$("td:eq("+(cp-2)+")",trdata[0]).html("<label for='"+nm+"'>"+(frmopt.label===undefined?obj.p.colNames[i]:frmopt.label)+"</label>");$("td:eq("+(cp-1)+")",trdata[0]).append(frmopt.elmprefix).append(elc).append(frmopt.elmsuffix)}if((rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate)&&ffld){$t.p.savedData[nm]=tmp}if(this.edittype==="custom"&&$.isFunction(opt.custom_value)){opt.custom_value.call($t,$("#"+nm,frmgr),"set",tmp)}$.jgrid.bindEv.call($t,elc,opt);retpos[cnt]=i;cnt++}});if(cnt>0){var idrow;if(templ){idrow="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+obj.p.id+"_id' value='"+rowid+"'/>";$(frm).append(idrow)}else{idrow=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(maxcols*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+obj.p.id+"_id' value='"+rowid+"'/></td></tr>");idrow[0].rp=cnt+999;$(tb).append(idrow)}if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData[obj.p.id+"_id"]=rowid}}return retpos}function fillData(rowid,obj,fmid){var nm,cnt=0,tmp,fld,opt,vl,vlc;if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData={};$t.p.savedData[obj.p.id+"_id"]=rowid}var cm=obj.p.colModel;if(rowid==="_empty"){$(cm).each(function(){nm=this.name;opt=$.extend({},this.editoptions||{});fld=$("#"+$.jgrid.jqID(nm),fmid);if(fld&&fld.length&&fld[0]!==null){vl="";if(this.edittype==="custom"&&$.isFunction(opt.custom_value)){opt.custom_value.call($t,$("#"+nm,fmid),"set",vl)}else{if(opt.defaultValue){vl=$.isFunction(opt.defaultValue)?opt.defaultValue.call($t):opt.defaultValue;if(fld[0].type==="checkbox"){vlc=vl.toLowerCase();if(vlc.search(/(false|f|0|no|n|off|undefined)/i)<0&&vlc!==""){fld[0].checked=true;fld[0].defaultChecked=true;fld[0].value=vl}else{fld[0].checked=false;fld[0].defaultChecked=false}}else{fld.val(vl)}}else{if(fld[0].type==="checkbox"){fld[0].checked=false;fld[0].defaultChecked=false;vl=$(fld).attr("offval")}else{if(fld[0].type&&fld[0].type.substr(0,6)==="select"){fld[0].selectedIndex=0}else{fld.val(vl)}}}}if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData[nm]=vl}}});$("#id_g",fmid).val(rowid);return }var tre=$(obj).jqGrid("getInd",rowid,true);if(!tre){return }$('td[role="gridcell"]',tre).each(function(i){nm=cm[i].name;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"&&cm[i].editable===true){if(nm===obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$(this).text()}else{try{tmp=$.unformat.call(obj,$(this),{rowId:rowid,colModel:cm[i]},i)}catch(_){tmp=cm[i].edittype==="textarea"?$(this).text():$(this).html()}}if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp)}if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData[nm]=tmp}nm=$.jgrid.jqID(nm);switch(cm[i].edittype){case"password":case"text":case"button":case"image":case"textarea":if(tmp==="&nbsp;"||tmp==="&#160;"||(tmp.length===1&&tmp.charCodeAt(0)===160)){tmp=""}$("#"+nm,fmid).val(tmp);break;case"select":var opv=tmp.split(",");opv=$.map(opv,function(n){return $.trim(n)});$("#"+nm+" option",fmid).each(function(){if(!cm[i].editoptions.multiple&&($.trim(tmp)===$.trim($(this).text())||opv[0]===$.trim($(this).text())||opv[0]===$.trim($(this).val()))){this.selected=true}else{if(cm[i].editoptions.multiple){if($.inArray($.trim($(this).text()),opv)>-1||$.inArray($.trim($(this).val()),opv)>-1){this.selected=true}else{this.selected=false}}else{this.selected=false}}});if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){tmp=$("#"+nm,fmid).val();if(cm[i].editoptions.multiple){tmp=tmp.join(",")}$t.p.savedData[nm]=tmp}break;case"checkbox":tmp=String(tmp);if(cm[i].editoptions&&cm[i].editoptions.value){var cb=cm[i].editoptions.value.split(":");if(cb[0]===tmp){$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]({checked:true,defaultChecked:true})}else{$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]({checked:false,defaultChecked:false})}}else{tmp=tmp.toLowerCase();if(tmp.search(/(false|f|0|no|n|off|undefined)/i)<0&&tmp!==""){$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]("checked",true);$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]("defaultChecked",true)}else{$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]("checked",false);$("#"+nm,fmid)[$t.p.useProp?"prop":"attr"]("defaultChecked",false)}}if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){if($("#"+nm,fmid).is(":checked")){tmp=$("#"+nm,fmid).val()}else{tmp=$("#"+nm,fmid).attr("offval")}$t.p.savedData[nm]=tmp}break;case"custom":try{if(cm[i].editoptions&&$.isFunction(cm[i].editoptions.custom_value)){cm[i].editoptions.custom_value.call($t,$("#"+nm,fmid),"set",tmp)}else{throw"e1"}}catch(e){if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,e.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}}break}cnt++}});if(cnt>0){$("#id_g",frmtb).val(rowid);if(rp_ge[$t.p.id].checkOnSubmit===true||rp_ge[$t.p.id].checkOnUpdate){$t.p.savedData[obj.p.id+"_id"]=rowid}}}function setNulls(){$.each($t.p.colModel,function(i,n){if(n.editoptions&&n.editoptions.NullIfEmpty===true){if(postdata.hasOwnProperty(n.name)&&postdata[n.name]===""){postdata[n.name]="null"}}})}function postIt(){var copydata,ret=[true,"",""],onCS={},opers=$t.p.prmNames,idname,oper,key,selr,i,url;var retvals=$($t).triggerHandler("jqGridAddEditBeforeCheckValues",[postdata,$(frmgr),frmoper]);if(retvals&&typeof retvals==="object"){postdata=retvals}if($.isFunction(rp_ge[$t.p.id].beforeCheckValues)){retvals=rp_ge[$t.p.id].beforeCheckValues.call($t,postdata,$(frmgr),frmoper);if(retvals&&typeof retvals==="object"){postdata=retvals}}for(key in postdata){if(postdata.hasOwnProperty(key)){ret=$.jgrid.checkValues.call($t,postdata[key],key);if(ret[0]===false){break}}}setNulls();if(ret[0]){onCS=$($t).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[$t.p.id],postdata,frmoper]);if(onCS===undefined&&$.isFunction(rp_ge[$t.p.id].onclickSubmit)){onCS=rp_ge[$t.p.id].onclickSubmit.call($t,rp_ge[$t.p.id],postdata,frmoper)||{}}ret=$($t).triggerHandler("jqGridAddEditBeforeSubmit",[postdata,$(frmgr),frmoper]);if(ret===undefined){ret=[true,"",""]}if(ret[0]&&$.isFunction(rp_ge[$t.p.id].beforeSubmit)){ret=rp_ge[$t.p.id].beforeSubmit.call($t,postdata,$(frmgr),frmoper)}}if(ret[0]&&!rp_ge[$t.p.id].processing){rp_ge[$t.p.id].processing=true;$("#sData",frmtb+"_2").addClass(commonstyle.active);url=rp_ge[$t.p.id].url||$($t).jqGrid("getGridParam","editurl");oper=opers.oper;idname=url==="clientArray"?$t.p.keyName:opers.id;postdata[oper]=($.trim(postdata[$t.p.id+"_id"])==="_empty")?opers.addoper:opers.editoper;if(postdata[oper]!==opers.addoper){postdata[idname]=postdata[$t.p.id+"_id"]}else{if(postdata[idname]===undefined){postdata[idname]=postdata[$t.p.id+"_id"]}}delete postdata[$t.p.id+"_id"];postdata=$.extend(postdata,rp_ge[$t.p.id].editData,onCS);if($t.p.treeGrid===true){if(postdata[oper]===opers.addoper){selr=$($t).jqGrid("getGridParam","selrow");var tr_par_id=$t.p.treeGridModel==="adjacency"?$t.p.treeReader.parent_id_field:"parent_id";postdata[tr_par_id]=selr}for(i in $t.p.treeReader){if($t.p.treeReader.hasOwnProperty(i)){var itm=$t.p.treeReader[i];if(postdata.hasOwnProperty(itm)){if(postdata[oper]===opers.addoper&&i==="parent_id_field"){continue}delete postdata[itm]}}}}postdata[idname]=$.jgrid.stripPref($t.p.idPrefix,postdata[idname]);var ajaxOptions=$.extend({url:url,type:rp_ge[$t.p.id].mtype,data:$.isFunction(rp_ge[$t.p.id].serializeEditData)?rp_ge[$t.p.id].serializeEditData.call($t,postdata):postdata,complete:function(data,status){var key;$("#sData",frmtb+"_2").removeClass(commonstyle.active);postdata[idname]=$t.p.idPrefix+postdata[idname];if(data.status>=300&&data.status!==304){ret[0]=false;ret[1]=$($t).triggerHandler("jqGridAddEditErrorTextFormat",[data,frmoper]);if($.isFunction(rp_ge[$t.p.id].errorTextFormat)){ret[1]=rp_ge[$t.p.id].errorTextFormat.call($t,data,frmoper)}else{ret[1]=status+" Status: '"+data.statusText+"'. Error code: "+data.status}}else{ret=$($t).triggerHandler("jqGridAddEditAfterSubmit",[data,postdata,frmoper]);if(ret===undefined){ret=[true,"",""]}if(ret[0]&&$.isFunction(rp_ge[$t.p.id].afterSubmit)){ret=rp_ge[$t.p.id].afterSubmit.call($t,data,postdata,frmoper)}}if(ret[0]===false){$(".FormError",frmgr).html(ret[1]);$(".FormError",frmgr).show()}else{if($t.p.autoencode){$.each(postdata,function(n,v){postdata[n]=$.jgrid.htmlDecode(v)})}if(postdata[oper]===opers.addoper){if(!ret[2]){ret[2]=$.jgrid.randId()}if(postdata[idname]==null||postdata[idname]==="_empty"||postdata[idname]==""){postdata[idname]=ret[2]}else{ret[2]=postdata[idname]}if(rp_ge[$t.p.id].reloadAfterSubmit){$($t).trigger("reloadGrid")}else{if($t.p.treeGrid===true){$($t).jqGrid("addChildNode",ret[2],selr,postdata)}else{$($t).jqGrid("addRowData",ret[2],postdata,p.addedrow)}}if(rp_ge[$t.p.id].closeAfterAdd){if($t.p.treeGrid!==true){$($t).jqGrid("setSelection",ret[2])}$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}else{if(rp_ge[$t.p.id].clearAfterAdd){fillData("_empty",$t,frmgr)}}}else{if(rp_ge[$t.p.id].reloadAfterSubmit){$($t).trigger("reloadGrid");if(!rp_ge[$t.p.id].closeAfterEdit){setTimeout(function(){$($t).jqGrid("setSelection",postdata[idname])},1000)}}else{if($t.p.treeGrid===true){$($t).jqGrid("setTreeRow",postdata[idname],postdata)}else{$($t).jqGrid("setRowData",postdata[idname],postdata)}}if(rp_ge[$t.p.id].closeAfterEdit){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}}if($.isFunction(rp_ge[$t.p.id].afterComplete)||$._data($($t)[0],"events").hasOwnProperty("jqGridAddEditAfterComplete")){copydata=data;setTimeout(function(){$($t).triggerHandler("jqGridAddEditAfterComplete",[copydata,postdata,$(frmgr),frmoper]);try{rp_ge[$t.p.id].afterComplete.call($t,copydata,postdata,$(frmgr),frmoper)}catch(excacmp){}copydata=null},500)}if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){$(frmgr).data("disabled",false);if($t.p.savedData[$t.p.id+"_id"]!=="_empty"){for(key in $t.p.savedData){if($t.p.savedData.hasOwnProperty(key)&&postdata[key]){$t.p.savedData[key]=postdata[key]}}}}}rp_ge[$t.p.id].processing=false;try{$(":input:visible",frmgr)[0].focus()}catch(e){}}},$.jgrid.ajaxOptions,rp_ge[$t.p.id].ajaxEditOptions);if(!ajaxOptions.url&&!rp_ge[$t.p.id].useDataProxy){if($.isFunction($t.p.dataProxy)){rp_ge[$t.p.id].useDataProxy=true}else{ret[0]=false;ret[1]+=" "+errors.nourl}}if(ret[0]){if(rp_ge[$t.p.id].useDataProxy){var dpret=$t.p.dataProxy.call($t,ajaxOptions,"set_"+$t.p.id);if(dpret===undefined){dpret=[true,""]}if(dpret[0]===false){ret[0]=false;ret[1]=dpret[1]||"Error deleting the selected row!"}else{if(ajaxOptions.data.oper===opers.addoper&&rp_ge[$t.p.id].closeAfterAdd){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}if(ajaxOptions.data.oper===opers.editoper&&rp_ge[$t.p.id].closeAfterEdit){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}}}else{if(ajaxOptions.url==="clientArray"){rp_ge[$t.p.id].reloadAfterSubmit=false;postdata=ajaxOptions.data;ajaxOptions.complete({status:200,statusText:""},"")}else{$.ajax(ajaxOptions)}}}}if(ret[0]===false){$(".FormError",frmgr).html(ret[1]);$(".FormError",frmgr).show()}}function compareData(nObj,oObj){var ret=false,key;ret=!($.isPlainObject(nObj)&&$.isPlainObject(oObj)&&Object.getOwnPropertyNames(nObj).length===Object.getOwnPropertyNames(oObj).length);if(!ret){for(key in oObj){if(oObj.hasOwnProperty(key)){if(nObj.hasOwnProperty(key)){if(nObj[key]!==oObj[key]){ret=true;break}}else{ret=true;break}}}}return ret}function checkUpdates(){var stat=true;$(".FormError",frmgr).hide();if(rp_ge[$t.p.id].checkOnUpdate){postdata={};getFormData();diff=compareData(postdata,$t.p.savedData);if(diff){$(frmgr).data("disabled",true);$(".confirm","#"+IDs.themodal).show();stat=false}}return stat}function restoreInline(){var i;if(rowid!=="_empty"&&$t.p.savedRow!==undefined&&$t.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow)){for(i=0;i<$t.p.savedRow.length;i++){if($t.p.savedRow[i].id===rowid){$($t).jqGrid("restoreRow",rowid);break}}}}function updateNav(cr,posarr){var totr=posarr[1].length-1;if(cr===0){$("#pData",frmtb2).addClass(commonstyle.disabled)}else{if(posarr[1][cr-1]!==undefined&&$("#"+$.jgrid.jqID(posarr[1][cr-1])).hasClass(commonstyle.disabled)){$("#pData",frmtb2).addClass(commonstyle.disabled)}else{$("#pData",frmtb2).removeClass(commonstyle.disabled)}}if(cr===totr){$("#nData",frmtb2).addClass(commonstyle.disabled)}else{if(posarr[1][cr+1]!==undefined&&$("#"+$.jgrid.jqID(posarr[1][cr+1])).hasClass(commonstyle.disabled)){$("#nData",frmtb2).addClass(commonstyle.disabled)}else{$("#nData",frmtb2).removeClass(commonstyle.disabled)}}}function getCurrPos(){var rowsInGrid=$($t).jqGrid("getDataIDs"),selrow=$("#id_g",frmtb).val(),pos;if($t.p.multiselect&&rp_ge[$t.p.id].editselected){var arr=[];for(var i=0,len=rowsInGrid.length;i<len;i++){if($.inArray(rowsInGrid[i],$t.p.selarrrow)!==-1){arr.push(rowsInGrid[i])}}pos=$.inArray(selrow,arr);return[pos,arr]}else{pos=$.inArray(selrow,rowsInGrid)}return[pos,rowsInGrid]}function parseTemplate(template){var tmpl="";if(typeof template==="string"){tmpl=template.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(m,i){return'<span id="'+i+'" ></span>'})}return tmpl}function syncSavedData(){if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){var a1=[],a2={};a1=$.map($t.p.savedData,function(v,i){return i});$(".FormElement",frm).each(function(){if(a1.indexOf(this.name)===-1){var tv=$(this).val(),tt=$(this).get(0).type;if(tt==="checkbox"){if(!$(this).is(":checked")){tv=$(this).attr("offval")}}else{if(tt==="select-multiple"){tv=tv.join(",")}else{if(tt==="radio"){if(a2.hasOwnProperty(this.name)){return true}else{a2[this.name]=($(this).attr("offval")===undefined)?"off":$(this).attr("offval")}}}}$t.p.savedData[this.name]=tv}});for(var i in a2){if(a2.hasOwnProperty(i)){var val=$('input[name="'+i+'"]:checked',frm).val();$t.p.savedData[i]=(val!==undefined)?val:a2[i]}}}}var dh=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",dw=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",frm=$("<form name='FormPost' id='"+frmgr+"' class='FormGrid' onSubmit='return false;' style='width:"+dw+";height:"+dh+";'></form>").data("disabled",false),tbl;if(templ){tbl=parseTemplate(rp_ge[$(this)[0].p.id].template);frmtb2=frmtb}else{tbl=$("<table id='"+frmtborg+"' class='EditTable ui-common-table'><tbody></tbody></table>");frmtb2=frmtb+"_2"}frmgr="#"+$.jgrid.jqID(frmgr);$(frm).append("<div class='FormError "+commonstyle.error+"' style='display:none;'></div>");$(frm).append("<div class='tinfo topinfo'>"+rp_ge[$t.p.id].topinfo+"</div>");$($t.p.colModel).each(function(){var fmto=this.formoptions;maxCols=Math.max(maxCols,fmto?fmto.colpos||0:0);maxRows=Math.max(maxRows,fmto?fmto.rowpos||0:0)});$(frm).append(tbl);showFrm=$($t).triggerHandler("jqGridAddEditBeforeInitData",[frm,frmoper]);if(showFrm===undefined){showFrm=true}if(showFrm&&$.isFunction(rp_ge[$t.p.id].beforeInitData)){showFrm=rp_ge[$t.p.id].beforeInitData.call($t,frm,frmoper)}if(showFrm===false){return }restoreInline();createData(rowid,$t,tbl,maxCols);var rtlb=$t.p.direction==="rtl"?true:false,bp=rtlb?"nData":"pData",bn=rtlb?"pData":"nData";var bP="<a id='"+bp+"' class='fm-button "+commonstyle.button+"'><span class='"+commonstyle.icon_base+" "+styles.icon_prev+"'></span></a>",bN="<a id='"+bn+"' class='fm-button "+commonstyle.button+"'><span class='"+commonstyle.icon_base+" "+styles.icon_next+"'></span></a>",bS="<a id='sData' class='fm-button "+commonstyle.button+"'>"+p.bSubmit+"</a>",bC="<a id='cData' class='fm-button "+commonstyle.button+"'>"+p.bCancel+"</a>";var bt="<table style='height:auto' class='EditTable ui-common-table' id='"+frmtborg+"_2'><tbody><tr><td colspan='2'><hr class='"+commonstyle.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(rtlb?bN+bP:bP+bN)+"</td><td class='EditButton'>"+bS+bC+"</td></tr>";bt+="</tbody></table>";if(maxRows>0){var sd=[];$.each($(tbl)[0].rows,function(i,r){sd[i]=r});sd.sort(function(a,b){if(a.rp>b.rp){return 1}if(a.rp<b.rp){return -1}return 0});$.each(sd,function(index,row){$("tbody",tbl).append(row)})}p.gbox="#gbox_"+$.jgrid.jqID(gID);var cle=false;if(p.closeOnEscape===true){p.closeOnEscape=false;cle=true}var tms;if(templ){$(frm).find("#pData").replaceWith(bP);$(frm).find("#nData").replaceWith(bN);$(frm).find("#sData").replaceWith(bS);$(frm).find("#cData").replaceWith(bC);tms=$("<div id="+frmtborg+"></div>").append(frm)}else{tms=$("<div></div>").append(frm).append(bt)}$(frm).append("<div class='binfo topinfo bottominfo'>"+rp_ge[$t.p.id].bottominfo+"</div>");$.jgrid.createModal(IDs,tms,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0]);if(rtlb){$("#pData, #nData",frmtb+"_2").css("float","right");$(".EditButton",frmtb+"_2").css("text-align","left")}if(rp_ge[$t.p.id].topinfo){$(".tinfo",frmgr).show()}if(rp_ge[$t.p.id].bottominfo){$(".binfo",frmgr).show()}tms=null;bt=null;$("#"+$.jgrid.jqID(IDs.themodal)).keydown(function(e){var wkey=e.target;if($(frmgr).data("disabled")===true){return false}if(rp_ge[$t.p.id].savekey[0]===true&&e.which===rp_ge[$t.p.id].savekey[1]){if(wkey.tagName!=="TEXTAREA"){$("#sData",frmtb+"_2").trigger("click");return false}}if(e.which===27){if(!checkUpdates()){return false}if(cle){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:p.gbox,jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}return false}if(rp_ge[$t.p.id].navkeys[0]===true){if($("#id_g",frmtb).val()==="_empty"){return true}if(e.which===rp_ge[$t.p.id].navkeys[1]){$("#pData",frmtb2).trigger("click");return false}if(e.which===rp_ge[$t.p.id].navkeys[2]){$("#nData",frmtb2).trigger("click");return false}}});if(p.checkOnUpdate){$("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(IDs.themodal)).removeClass("jqmClose");$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.themodal)).off("click").click(function(){if(!checkUpdates()){return false}$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false})}p.saveicon=$.extend([true,"left",styles.icon_save],p.saveicon);p.closeicon=$.extend([true,"left",styles.icon_close],p.closeicon);if(p.saveicon[0]===true){$("#sData",frmtb2).addClass(p.saveicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.saveicon[2]+"'></span>")}if(p.closeicon[0]===true){$("#cData",frmtb2).addClass(p.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.closeicon[2]+"'></span>")}if(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){bS="<a id='sNew' class='fm-button "+commonstyle.button+"' style='z-index:1002'>"+p.bYes+"</a>";bN="<a id='nNew' class='fm-button "+commonstyle.button+"' style='z-index:1002;margin-left:5px'>"+p.bNo+"</a>";bC="<a id='cNew' class='fm-button "+commonstyle.button+"' style='z-index:1002;margin-left:5px;'>"+p.bExit+"</a>";var zI=p.zIndex||999;zI++;$("<div class='"+p.overlayClass+" jqgrid-overlay confirm' style='z-index:"+zI+";display:none;'>&#160;</div><div class='confirm ui-jqconfirm "+commonstyle.content+"' style='z-index:"+(zI+1)+"'>"+p.saveData+"<br/><br/>"+bS+bN+bC+"</div>").insertAfter(frmgr);$("#sNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){postIt();$(frmgr).data("disabled",false);$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide();return false});$("#nNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide();$(frmgr).data("disabled",false);setTimeout(function(){$(":input:visible",frmgr)[0].focus()},0);return false});$("#cNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide();$(frmgr).data("disabled",false);$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false})}$($t).triggerHandler("jqGridAddEditInitializeForm",[$(frmgr),frmoper]);if($.isFunction(rp_ge[$t.p.id].onInitializeForm)){rp_ge[$t.p.id].onInitializeForm.call($t,$(frmgr),frmoper)}if(rowid==="_empty"||!rp_ge[$t.p.id].viewPagerButtons){$("#pData,#nData",frmtb2).hide()}else{$("#pData,#nData",frmtb2).show()}$($t).triggerHandler("jqGridAddEditBeforeShowForm",[$(frmgr),frmoper]);if($.isFunction(rp_ge[$t.p.id].beforeShowForm)){rp_ge[$t.p.id].beforeShowForm.call($t,$(frmgr),frmoper)}syncSavedData();$("#"+$.jgrid.jqID(IDs.themodal)).data("onClose",rp_ge[$t.p.id].onClose);$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,overlay:p.overlay,modal:p.modal,overlayClass:p.overlayClass,focusField:p.focusField,onHide:function(h){var fh=$("#editmod"+gID)[0].style.height,fw=$("#editmod"+gID)[0].style.width;if(fh.indexOf("px")>-1){fh=parseFloat(fh)}if(fw.indexOf("px")>-1){fw=parseFloat(fw)}$($t).data("formProp",{top:parseFloat($(h.w).css("top")),left:parseFloat($(h.w).css("left")),width:fw,height:fh,dataheight:$(frmgr).height(),datawidth:$(frmgr).width()});h.w.remove();if(h.o){h.o.remove()}}});if(!closeovrl){$("."+$.jgrid.jqID(p.overlayClass)).click(function(){if(!checkUpdates()){return false}$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false})}$(".fm-button","#"+$.jgrid.jqID(IDs.themodal)).hover(function(){$(this).addClass(commonstyle.hover)},function(){$(this).removeClass(commonstyle.hover)});$("#sData",frmtb2).click(function(){postdata={};$(".FormError",frmgr).hide();getFormData();if(postdata[$t.p.id+"_id"]==="_empty"){postIt()}else{if(p.checkOnSubmit===true){diff=compareData(postdata,$t.p.savedData);if(diff){$(frmgr).data("disabled",true);$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).show()}else{postIt()}}else{postIt()}}return false});$("#cData",frmtb2).click(function(){if(!checkUpdates()){return false}$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false});$("#nData",frmtb2).click(function(){if(!checkUpdates()){return false}$(".FormError",frmgr).hide();var npos=getCurrPos();npos[0]=parseInt(npos[0],10);if(npos[0]!==-1&&npos[1][npos[0]+1]){$($t).triggerHandler("jqGridAddEditClickPgButtons",["next",$(frmgr),npos[1][npos[0]]]);var nposret;if($.isFunction(p.onclickPgButtons)){nposret=p.onclickPgButtons.call($t,"next",$(frmgr),npos[1][npos[0]]);if(nposret!==undefined&&nposret===false){return false}}if($("#"+$.jgrid.jqID(npos[1][npos[0]+1])).hasClass(commonstyle.disabled)){return false}fillData(npos[1][npos[0]+1],$t,frmgr);if(!($t.p.multiselect&&rp_ge[$t.p.id].editselected)){$($t).jqGrid("setSelection",npos[1][npos[0]+1])}$($t).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(frmgr),npos[1][npos[0]]]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons.call($t,"next",$(frmgr),npos[1][npos[0]+1])}syncSavedData();updateNav(npos[0]+1,npos)}return false});$("#pData",frmtb2).click(function(){if(!checkUpdates()){return false}$(".FormError",frmgr).hide();var ppos=getCurrPos();if(ppos[0]!==-1&&ppos[1][ppos[0]-1]){$($t).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(frmgr),ppos[1][ppos[0]]]);var pposret;if($.isFunction(p.onclickPgButtons)){pposret=p.onclickPgButtons.call($t,"prev",$(frmgr),ppos[1][ppos[0]]);if(pposret!==undefined&&pposret===false){return false}}if($("#"+$.jgrid.jqID(ppos[1][ppos[0]-1])).hasClass(commonstyle.disabled)){return false}fillData(ppos[1][ppos[0]-1],$t,frmgr);if(!($t.p.multiselect&&rp_ge[$t.p.id].editselected)){$($t).jqGrid("setSelection",ppos[1][ppos[0]-1])}$($t).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(frmgr),ppos[1][ppos[0]]]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons.call($t,"prev",$(frmgr),ppos[1][ppos[0]-1])}syncSavedData();updateNav(ppos[0]-1,ppos)}return false});$($t).triggerHandler("jqGridAddEditAfterShowForm",[$(frmgr),frmoper]);if($.isFunction(rp_ge[$t.p.id].afterShowForm)){rp_ge[$t.p.id].afterShowForm.call($t,$(frmgr),frmoper)}var posInit=getCurrPos();updateNav(posInit[0],posInit)})},viewGridRow:function(rowid,p){var regional=$.jgrid.getRegional(this[0],"view"),currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].formedit,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend(true,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:true,recreateForm:false,removemodal:true,form:"view"},regional,p||{});rp_ge[$(this)[0].p.id]=p;return this.each(function(){var $t=this;if(!$t.grid||!rowid){return }var gID=$t.p.id,frmgr="ViewGrid_"+$.jgrid.jqID(gID),frmtb="ViewTbl_"+$.jgrid.jqID(gID),frmgr_id="ViewGrid_"+gID,frmtb_id="ViewTbl_"+gID,IDs={themodal:"viewmod"+gID,modalhead:"viewhd"+gID,modalcontent:"viewcnt"+gID,scrollelm:frmgr},showFrm=true,maxCols=1,maxRows=0;rp_ge[$t.p.id].styleUI=$t.p.styleUI||"jQueryUI";if(!p.recreateForm){if($($t).data("viewProp")){$.extend(rp_ge[$(this)[0].p.id],$($t).data("viewProp"))}}function focusaref(){if(rp_ge[$t.p.id].closeOnEscape===true||rp_ge[$t.p.id].navkeys[0]===true){setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.modalhead)).attr("tabindex","-1").focus()},0)}}function createData(rowid,obj,tb,maxcols){var nm,hc,trdata,cnt=0,tmp,dc,retpos=[],ind=false,i,tdtmpl="<td class='CaptionTD form-view-label "+commonstyle.content+"' width='"+p.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset "+commonstyle.content+"'>&#160;</td>",tmpl="",tdtmpl2="<td class='CaptionTD form-view-label "+commonstyle.content+"'>&#160;</td><td class='DataTD form-view-data "+commonstyle.content+"'>&#160;</td>",fmtnum=["integer","number","currency"],max1=0,max2=0,maxw,setme,viewfld;for(i=1;i<=maxcols;i++){tmpl+=i===1?tdtmpl:tdtmpl2}$(obj.p.colModel).each(function(){if(this.editrules&&this.editrules.edithidden===true){hc=false}else{hc=this.hidden===true?true:false}if(!hc&&this.align==="right"){if(this.formatter&&$.inArray(this.formatter,fmtnum)!==-1){max1=Math.max(max1,parseInt(this.width,10))}else{max2=Math.max(max2,parseInt(this.width,10))}}});maxw=max1!==0?max1:max2!==0?max2:0;ind=$(obj).jqGrid("getInd",rowid);$(obj.p.colModel).each(function(i){nm=this.name;setme=false;if(this.editrules&&this.editrules.edithidden===true){hc=false}else{hc=this.hidden===true?true:false}dc=hc?"style='display:none'":"";viewfld=(typeof this.viewable!=="boolean")?true:this.viewable;if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"&&viewfld){if(ind===false){tmp=""}else{if(nm===obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$("td:eq("+i+")",obj.rows[ind]).text()}else{tmp=$("td:eq("+i+")",obj.rows[ind]).html()}}setme=this.align==="right"&&maxw!==0?true:false;var frmopt=$.extend({},{rowabove:false,rowcontent:""},this.formoptions||{}),rp=parseInt(frmopt.rowpos,10)||cnt+1,cp=parseInt((parseInt(frmopt.colpos,10)||1)*2,10);if(frmopt.rowabove){var newdata=$("<tr><td class='contentinfo' colspan='"+(maxcols*2)+"'>"+frmopt.rowcontent+"</td></tr>");$(tb).append(newdata);newdata[0].rp=rp}trdata=$(tb).find("tr[rowpos="+rp+"]");if(trdata.length===0){trdata=$("<tr "+dc+" rowpos='"+rp+"'></tr>").addClass("FormData").attr("id","trv_"+nm);$(trdata).append(tmpl);$(tb).append(trdata);trdata[0].rp=rp}$("td:eq("+(cp-2)+")",trdata[0]).html("<b>"+(frmopt.label===undefined?obj.p.colNames[i]:frmopt.label)+"</b>");$("td:eq("+(cp-1)+")",trdata[0]).append("<span>"+tmp+"</span>").attr("id","v_"+nm);if(setme){$("td:eq("+(cp-1)+") span",trdata[0]).css({"text-align":"right",width:maxw+"px"})}retpos[cnt]=i;cnt++}});if(cnt>0){var idrow=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(maxcols*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+rowid+"'/></td></tr>");idrow[0].rp=cnt+99;$(tb).append(idrow)}return retpos}function fillData(rowid,obj){var nm,hc,cnt=0,tmp,trv;trv=$(obj).jqGrid("getInd",rowid,true);if(!trv){return }$("td",trv).each(function(i){nm=obj.p.colModel[i].name;if(obj.p.colModel[i].editrules&&obj.p.colModel[i].editrules.edithidden===true){hc=false}else{hc=obj.p.colModel[i].hidden===true?true:false}if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if(nm===obj.p.ExpandColumn&&obj.p.treeGrid===true){tmp=$(this).text()}else{tmp=$(this).html()}nm=$.jgrid.jqID("v_"+nm);$("#"+nm+" span","#"+frmtb).html(tmp);if(hc){$("#"+nm,"#"+frmtb).parents("tr:first").hide()}cnt++}});if(cnt>0){$("#id_g","#"+frmtb).val(rowid)}}function updateNav(cr,posarr){var totr=posarr[1].length-1;if(cr===0){$("#pData","#"+frmtb+"_2").addClass(commonstyle.disabled)}else{if(posarr[1][cr-1]!==undefined&&$("#"+$.jgrid.jqID(posarr[1][cr-1])).hasClass(commonstyle.disabled)){$("#pData",frmtb+"_2").addClass(commonstyle.disabled)}else{$("#pData","#"+frmtb+"_2").removeClass(commonstyle.disabled)}}if(cr===totr){$("#nData","#"+frmtb+"_2").addClass(commonstyle.disabled)}else{if(posarr[1][cr+1]!==undefined&&$("#"+$.jgrid.jqID(posarr[1][cr+1])).hasClass(commonstyle.disabled)){$("#nData",frmtb+"_2").addClass(commonstyle.disabled)}else{$("#nData","#"+frmtb+"_2").removeClass(commonstyle.disabled)}}}function getCurrPos(){var rowsInGrid=$($t).jqGrid("getDataIDs"),selrow=$("#id_g","#"+frmtb).val(),pos=$.inArray(selrow,rowsInGrid);return[pos,rowsInGrid]}var dh=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",dw=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",frm=$("<form name='FormPost' id='"+frmgr_id+"' class='FormGrid' style='width:"+dw+";height:"+dh+";'></form>"),tbl=$("<table id='"+frmtb_id+"' class='EditTable ViewTable'><tbody></tbody></table>");$($t.p.colModel).each(function(){var fmto=this.formoptions;maxCols=Math.max(maxCols,fmto?fmto.colpos||0:0);maxRows=Math.max(maxRows,fmto?fmto.rowpos||0:0)});$(frm).append(tbl);showFrm=$($t).triggerHandler("jqGridViewRowBeforeInitData",[frm]);if(showFrm===undefined){showFrm=true}if(showFrm&&$.isFunction(rp_ge[$t.p.id].beforeInitData)){showFrm=rp_ge[$t.p.id].beforeInitData.call($t,frm)}if(showFrm===false){return }createData(rowid,$t,tbl,maxCols);var rtlb=$t.p.direction==="rtl"?true:false,bp=rtlb?"nData":"pData",bn=rtlb?"pData":"nData",bP="<a id='"+bp+"' class='fm-button "+commonstyle.button+"'><span class='"+commonstyle.icon_base+" "+styles.icon_prev+"'></span></a>",bN="<a id='"+bn+"' class='fm-button "+commonstyle.button+"'><span class='"+commonstyle.icon_base+" "+styles.icon_next+"'></span></a>",bC="<a id='cData' class='fm-button "+commonstyle.button+"'>"+p.bClose+"</a>";if(maxRows>0){var sd=[];$.each($(tbl)[0].rows,function(i,r){sd[i]=r});sd.sort(function(a,b){if(a.rp>b.rp){return 1}if(a.rp<b.rp){return -1}return 0});$.each(sd,function(index,row){$("tbody",tbl).append(row)})}p.gbox="#gbox_"+$.jgrid.jqID(gID);var bt=$("<div></div>").append(frm).append("<table border='0' class='EditTable' id='"+frmtb+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+p.labelswidth+"'>"+(rtlb?bN+bP:bP+bN)+"</td><td class='EditButton'>"+bC+"</td></tr></tbody></table>");$.jgrid.createModal(IDs,bt,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID($t.p.id),$("#gview_"+$.jgrid.jqID($t.p.id))[0]);if(rtlb){$("#pData, #nData","#"+frmtb+"_2").css("float","right");$(".EditButton","#"+frmtb+"_2").css("text-align","left")}if(!p.viewPagerButtons){$("#pData, #nData","#"+frmtb+"_2").hide()}bt=null;$("#"+IDs.themodal).keydown(function(e){if(e.which===27){if(rp_ge[$t.p.id].closeOnEscape){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:p.gbox,jqm:p.jqModal,onClose:p.onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form})}return false}if(p.navkeys[0]===true){if(e.which===p.navkeys[1]){$("#pData","#"+frmtb+"_2").trigger("click");return false}if(e.which===p.navkeys[2]){$("#nData","#"+frmtb+"_2").trigger("click");return false}}});p.closeicon=$.extend([true,"left",styles.icon_close],p.closeicon);if(p.closeicon[0]===true){$("#cData","#"+frmtb+"_2").addClass(p.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.closeicon[2]+"'></span>")}$($t).triggerHandler("jqGridViewRowBeforeShowForm",[$("#"+frmgr)]);if($.isFunction(p.beforeShowForm)){p.beforeShowForm.call($t,$("#"+frmgr))}$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,overlay:p.overlay,modal:p.modal,onHide:function(h){$($t).data("viewProp",{top:parseFloat($(h.w).css("top")),left:parseFloat($(h.w).css("left")),width:$(h.w).width(),height:$(h.w).height(),dataheight:$("#"+frmgr).height(),datawidth:$("#"+frmgr).width()});h.w.remove();if(h.o){h.o.remove()}}});$(".fm-button:not(."+commonstyle.disabled+")","#"+frmtb+"_2").hover(function(){$(this).addClass(commonstyle.hover)},function(){$(this).removeClass(commonstyle.hover)});focusaref();$("#cData","#"+frmtb+"_2").click(function(){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:p.onClose,removemodal:rp_ge[$t.p.id].removemodal,formprop:!rp_ge[$t.p.id].recreateForm,form:rp_ge[$t.p.id].form});return false});$("#nData","#"+frmtb+"_2").click(function(){$("#FormError","#"+frmtb).hide();var npos=getCurrPos();npos[0]=parseInt(npos[0],10);if(npos[0]!==-1&&npos[1][npos[0]+1]){$($t).triggerHandler("jqGridViewRowClickPgButtons",["next",$("#"+frmgr),npos[1][npos[0]]]);if($.isFunction(p.onclickPgButtons)){p.onclickPgButtons.call($t,"next",$("#"+frmgr),npos[1][npos[0]])}fillData(npos[1][npos[0]+1],$t);$($t).jqGrid("setSelection",npos[1][npos[0]+1]);$($t).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",$("#"+frmgr),npos[1][npos[0]+1]]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons.call($t,"next",$("#"+frmgr),npos[1][npos[0]+1])}updateNav(npos[0]+1,npos)}focusaref();return false});$("#pData","#"+frmtb+"_2").click(function(){$("#FormError","#"+frmtb).hide();var ppos=getCurrPos();if(ppos[0]!==-1&&ppos[1][ppos[0]-1]){$($t).triggerHandler("jqGridViewRowClickPgButtons",["prev",$("#"+frmgr),npos[1][npos[0]]]);if($.isFunction(p.onclickPgButtons)){p.onclickPgButtons.call($t,"prev",$("#"+frmgr),ppos[1][ppos[0]])}fillData(ppos[1][ppos[0]-1],$t);$($t).jqGrid("setSelection",ppos[1][ppos[0]-1]);$($t).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",$("#"+frmgr),npos[1][npos[0]-1]]);if($.isFunction(p.afterclickPgButtons)){p.afterclickPgButtons.call($t,"prev",$("#"+frmgr),ppos[1][ppos[0]-1])}updateNav(ppos[0]-1,ppos)}focusaref();return false});var posInit=getCurrPos();updateNav(posInit[0],posInit)})},delGridRow:function(rowids,p){var regional=$.jgrid.getRegional(this[0],"del"),currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].formedit,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend(true,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},regional,p||{});rp_ge[$(this)[0].p.id]=p;return this.each(function(){var $t=this;if(!$t.grid){return }if(!rowids){return }var gID=$t.p.id,onCS={},showFrm=true,dtbl="DelTbl_"+$.jgrid.jqID(gID),postd,idname,opers,oper,dtbl_id="DelTbl_"+gID,IDs={themodal:"delmod"+gID,modalhead:"delhd"+gID,modalcontent:"delcnt"+gID,scrollelm:dtbl};rp_ge[$t.p.id].styleUI=$t.p.styleUI||"jQueryUI";if($.isArray(rowids)){rowids=rowids.join()}if($("#"+$.jgrid.jqID(IDs.themodal))[0]!==undefined){showFrm=$($t).triggerHandler("jqGridDelRowBeforeInitData",[$("#"+dtbl)]);if(showFrm===undefined){showFrm=true}if(showFrm&&$.isFunction(rp_ge[$t.p.id].beforeInitData)){showFrm=rp_ge[$t.p.id].beforeInitData.call($t,$("#"+dtbl))}if(showFrm===false){return }$("#DelData>td","#"+dtbl).text(rowids);$("#DelError","#"+dtbl).hide();if(rp_ge[$t.p.id].processing===true){rp_ge[$t.p.id].processing=false;$("#dData","#"+dtbl).removeClass(commonstyle.active)}$($t).triggerHandler("jqGridDelRowBeforeShowForm",[$("#"+dtbl)]);if($.isFunction(rp_ge[$t.p.id].beforeShowForm)){rp_ge[$t.p.id].beforeShowForm.call($t,$("#"+dtbl))}$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,overlay:rp_ge[$t.p.id].overlay,modal:rp_ge[$t.p.id].modal});$($t).triggerHandler("jqGridDelRowAfterShowForm",[$("#"+dtbl)]);if($.isFunction(rp_ge[$t.p.id].afterShowForm)){rp_ge[$t.p.id].afterShowForm.call($t,$("#"+dtbl))}}else{var dh=isNaN(rp_ge[$t.p.id].dataheight)?rp_ge[$t.p.id].dataheight:rp_ge[$t.p.id].dataheight+"px",dw=isNaN(p.datawidth)?p.datawidth:p.datawidth+"px",tbl="<div id='"+dtbl_id+"' class='formdata' style='width:"+dw+";overflow:auto;position:relative;height:"+dh+";'>";tbl+="<table class='DelTable'><tbody>";tbl+="<tr id='DelError' style='display:none'><td class='"+commonstyle.error+"'></td></tr>";tbl+="<tr id='DelData' style='display:none'><td >"+rowids+"</td></tr>";tbl+='<tr><td class="delmsg" style="white-space:pre;">'+rp_ge[$t.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>";tbl+="</tbody></table></div>";var bS="<a id='dData' class='fm-button "+commonstyle.button+"'>"+p.bSubmit+"</a>",bC="<a id='eData' class='fm-button "+commonstyle.button+"'>"+p.bCancel+"</a>";tbl+="<table class='EditTable ui-common-table' id='"+dtbl+"_2'><tbody><tr><td><hr class='"+commonstyle.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+bS+"&#160;"+bC+"</td></tr></tbody></table>";p.gbox="#gbox_"+$.jgrid.jqID(gID);$.jgrid.createModal(IDs,tbl,rp_ge[$t.p.id],"#gview_"+$.jgrid.jqID($t.p.id),$("#gview_"+$.jgrid.jqID($t.p.id))[0]);$(".fm-button","#"+dtbl+"_2").hover(function(){$(this).addClass(commonstyle.hover)},function(){$(this).removeClass(commonstyle.hover)});p.delicon=$.extend([true,"left",styles.icon_del],rp_ge[$t.p.id].delicon);p.cancelicon=$.extend([true,"left",styles.icon_cancel],rp_ge[$t.p.id].cancelicon);if(p.delicon[0]===true){$("#dData","#"+dtbl+"_2").addClass(p.delicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.delicon[2]+"'></span>")}if(p.cancelicon[0]===true){$("#eData","#"+dtbl+"_2").addClass(p.cancelicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+commonstyle.icon_base+" "+p.cancelicon[2]+"'></span>")}$("#dData","#"+dtbl+"_2").click(function(){var ret=[true,""],pk,postdata=$("#DelData>td","#"+dtbl).text();onCS={};onCS=$($t).triggerHandler("jqGridDelRowClickSubmit",[rp_ge[$t.p.id],postdata]);if(onCS===undefined&&$.isFunction(rp_ge[$t.p.id].onclickSubmit)){onCS=rp_ge[$t.p.id].onclickSubmit.call($t,rp_ge[$t.p.id],postdata)||{}}ret=$($t).triggerHandler("jqGridDelRowBeforeSubmit",[postdata]);if(ret===undefined){ret=[true,"",""]}if(ret[0]&&$.isFunction(rp_ge[$t.p.id].beforeSubmit)){ret=rp_ge[$t.p.id].beforeSubmit.call($t,postdata)}if(ret[0]&&!rp_ge[$t.p.id].processing){rp_ge[$t.p.id].processing=true;opers=$t.p.prmNames;postd=$.extend({},rp_ge[$t.p.id].delData,onCS);oper=opers.oper;postd[oper]=opers.deloper;idname=opers.id;postdata=String(postdata).split(",");if(!postdata.length){return false}for(pk in postdata){if(postdata.hasOwnProperty(pk)){postdata[pk]=$.jgrid.stripPref($t.p.idPrefix,postdata[pk])}}postd[idname]=postdata.join();$(this).addClass(commonstyle.active);var ajaxOptions=$.extend({url:rp_ge[$t.p.id].url||$($t).jqGrid("getGridParam","editurl"),type:rp_ge[$t.p.id].mtype,data:$.isFunction(rp_ge[$t.p.id].serializeDelData)?rp_ge[$t.p.id].serializeDelData.call($t,postd):postd,complete:function(data,status){var i;$("#dData","#"+dtbl+"_2").removeClass(commonstyle.active);if(data.status>=300&&data.status!==304){ret[0]=false;ret[1]=$($t).triggerHandler("jqGridDelRowErrorTextFormat",[data]);if($.isFunction(rp_ge[$t.p.id].errorTextFormat)){ret[1]=rp_ge[$t.p.id].errorTextFormat.call($t,data)}if(ret[1]===undefined){ret[1]=status+" Status: '"+data.statusText+"'. Error code: "+data.status}}else{ret=$($t).triggerHandler("jqGridDelRowAfterSubmit",[data,postd]);if(ret===undefined){ret=[true,"",""]}if(ret[0]&&$.isFunction(rp_ge[$t.p.id].afterSubmit)){ret=rp_ge[$t.p.id].afterSubmit.call($t,data,postd)}}if(ret[0]===false){$("#DelError>td","#"+dtbl).html(ret[1]);$("#DelError","#"+dtbl).show()}else{if(rp_ge[$t.p.id].reloadAfterSubmit&&$t.p.datatype!=="local"){$($t).trigger("reloadGrid")}else{if($t.p.treeGrid===true){try{$($t).jqGrid("delTreeNode",$t.p.idPrefix+postdata[0])}catch(e){}}else{for(i=0;i<postdata.length;i++){$($t).jqGrid("delRowData",$t.p.idPrefix+postdata[i])}}$t.p.selrow=null;$t.p.selarrrow=[]}if($.isFunction(rp_ge[$t.p.id].afterComplete)||$._data($($t)[0],"events").hasOwnProperty("jqGridDelRowAfterComplete")){var copydata=data;setTimeout(function(){$($t).triggerHandler("jqGridDelRowAfterComplete",[copydata,postd]);try{rp_ge[$t.p.id].afterComplete.call($t,copydata,postd)}catch(eacg){}},500)}}rp_ge[$t.p.id].processing=false;if(ret[0]){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose})}}},$.jgrid.ajaxOptions,rp_ge[$t.p.id].ajaxDelOptions);if(!ajaxOptions.url&&!rp_ge[$t.p.id].useDataProxy){if($.isFunction($t.p.dataProxy)){rp_ge[$t.p.id].useDataProxy=true}else{ret[0]=false;ret[1]+=" "+$.jgrid.getRegional($t,"errors.nourl")}}if(ret[0]){if(rp_ge[$t.p.id].useDataProxy){var dpret=$t.p.dataProxy.call($t,ajaxOptions,"del_"+$t.p.id);if(dpret===undefined){dpret=[true,""]}if(dpret[0]===false){ret[0]=false;ret[1]=dpret[1]||"Error deleting the selected row!"}else{$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose})}}else{if(ajaxOptions.url==="clientArray"){postd=ajaxOptions.data;ajaxOptions.complete({status:200,statusText:""},"")}else{$.ajax(ajaxOptions)}}}}if(ret[0]===false){$("#DelError>td","#"+dtbl).html(ret[1]);$("#DelError","#"+dtbl).show()}return false});$("#eData","#"+dtbl+"_2").click(function(){$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,onClose:rp_ge[$t.p.id].onClose});return false});showFrm=$($t).triggerHandler("jqGridDelRowBeforeInitData",[$("#"+dtbl)]);if(showFrm===undefined){showFrm=true}if(showFrm&&$.isFunction(rp_ge[$t.p.id].beforeInitData)){showFrm=rp_ge[$t.p.id].beforeInitData.call($t,$("#"+dtbl))}if(showFrm===false){return }$($t).triggerHandler("jqGridDelRowBeforeShowForm",[$("#"+dtbl)]);if($.isFunction(rp_ge[$t.p.id].beforeShowForm)){rp_ge[$t.p.id].beforeShowForm.call($t,$("#"+dtbl))}$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,overlay:rp_ge[$t.p.id].overlay,modal:rp_ge[$t.p.id].modal});$($t).triggerHandler("jqGridDelRowAfterShowForm",[$("#"+dtbl)]);if($.isFunction(rp_ge[$t.p.id].afterShowForm)){rp_ge[$t.p.id].afterShowForm.call($t,$("#"+dtbl))}}if(rp_ge[$t.p.id].closeOnEscape===true){setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(elem,p,pEdit,pAdd,pDel,pSearch,pView){var regional=$.jgrid.getRegional(this[0],"nav"),currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].navigator,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend({edit:true,editicon:styles.icon_edit_nav,add:true,addicon:styles.icon_add_nav,del:true,delicon:styles.icon_del_nav,search:true,searchicon:styles.icon_search_nav,refresh:true,refreshicon:styles.icon_refresh_nav,refreshstate:"firstpage",view:false,viewicon:styles.icon_view_nav,position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:false,navButtonText:""},regional,p||{});return this.each(function(){if(this.p.navGrid){return }var alertIDs={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},$t=this,twd,tdw,o;if(!$t.grid||typeof elem!=="string"){return }if(!$($t).data("navGrid")){$($t).data("navGrid",p)}o=$($t).data("navGrid");if($t.p.force_regional){o=$.extend(o,regional)}if($("#"+alertIDs.themodal)[0]===undefined){if(!o.alerttop&&!o.alertleft){if(window.innerWidth!==undefined){o.alertleft=window.innerWidth;o.alerttop=window.innerHeight}else{if(document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0){o.alertleft=document.documentElement.clientWidth;o.alerttop=document.documentElement.clientHeight}else{o.alertleft=1024;o.alerttop=768}}o.alertleft=o.alertleft/2-parseInt(o.alertwidth,10)/2;o.alerttop=o.alerttop/2-25}$.jgrid.createModal(alertIDs,"<div>"+o.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqModal:true,drag:true,resize:true,caption:o.alertcap,top:o.alerttop,left:o.alertleft,width:o.alertwidth,height:o.alertheight,closeOnEscape:o.closeOnEscape,zIndex:o.alertzIndex,styleUI:$t.p.styleUI},"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0],true)}var clone=1,i,onHoverIn=function(){if(!$(this).hasClass(commonstyle.disabled)){$(this).addClass(commonstyle.hover)}},onHoverOut=function(){$(this).removeClass(commonstyle.hover)};if(o.cloneToTop&&$t.p.toppager){clone=2}for(i=0;i<clone;i++){var tbd,navtbl=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),sep="<td class='ui-pg-button "+commonstyle.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>",pgid,elemids;if(i===0){pgid=elem;elemids=$t.p.id;if(pgid===$t.p.toppager){elemids+="_top";clone=1}}else{pgid=$t.p.toppager;elemids=$t.p.id+"_top"}if($t.p.direction==="rtl"){$(navtbl).attr("dir","rtl").css("float","right")}pAdd=pAdd||{};if(o.add){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.addicon+"'></span>"+o.addtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.addtitle||"",id:pAdd.id||"add_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(o.addfunc)){o.addfunc.call($t)}else{$($t).jqGrid("editGridRow","new",pAdd)}}return false}).hover(onHoverIn,onHoverOut);tbd=null}pEdit=pEdit||{};if(o.edit){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.editicon+"'></span>"+o.edittext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.edittitle||"",id:pEdit.id||"edit_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){var sr=$t.p.selrow;if(sr){if($.isFunction(o.editfunc)){o.editfunc.call($t,sr)}else{$($t).jqGrid("editGridRow",sr,pEdit)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(onHoverIn,onHoverOut);tbd=null}pView=pView||{};if(o.view){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.viewicon+"'></span>"+o.viewtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.viewtitle||"",id:pView.id||"view_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){var sr=$t.p.selrow;if(sr){if($.isFunction(o.viewfunc)){o.viewfunc.call($t,sr)}else{$($t).jqGrid("viewGridRow",sr,pView)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(onHoverIn,onHoverOut);tbd=null}pDel=pDel||{};if(o.del){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.delicon+"'></span>"+o.deltext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.deltitle||"",id:pDel.id||"del_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){var dr;if($t.p.multiselect){dr=$t.p.selarrrow;if(dr.length===0){dr=null}}else{dr=$t.p.selrow}if(dr){if($.isFunction(o.delfunc)){o.delfunc.call($t,dr)}else{$($t).jqGrid("delGridRow",dr,pDel)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}}return false}).hover(onHoverIn,onHoverOut);tbd=null}if(o.add||o.edit||o.del||o.view){$("tr",navtbl).append(sep)}pSearch=pSearch||{};if(o.search){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.searchicon+"'></span>"+o.searchtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.searchtitle||"",id:pSearch.id||"search_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(o.searchfunc)){o.searchfunc.call($t,pSearch)}else{$($t).jqGrid("searchGrid",pSearch)}}return false}).hover(onHoverIn,onHoverOut);if(pSearch.showOnLoad&&pSearch.showOnLoad===true){$(tbd,navtbl).click()}tbd=null}if(o.refresh){tbd=$("<td class='ui-pg-button "+commonstyle.cornerall+"'></td>");$(tbd).append("<div class='ui-pg-div'><span class='"+commonstyle.icon_base+" "+o.refreshicon+"'></span>"+o.refreshtext+"</div>");$("tr",navtbl).append(tbd);$(tbd,navtbl).attr({title:o.refreshtitle||"",id:"refresh_"+elemids}).click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(o.beforeRefresh)){o.beforeRefresh.call($t)}$t.p.search=false;$t.p.resetsearch=true;try{if(o.refreshstate!=="currentfilter"){var gID=$t.p.id;$t.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(gID)).jqFilter("resetFilter")}catch(ef){}if($.isFunction($t.clearToolbar)){$t.clearToolbar.call($t,false)}}}catch(e){}switch(o.refreshstate){case"firstpage":$($t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$($t).trigger("reloadGrid",[{current:true}]);break}if($.isFunction(o.afterRefresh)){o.afterRefresh.call($t)}}return false}).hover(onHoverIn,onHoverOut);tbd=null}tdw=$(".ui-jqgrid").css("font-size")||"11px";$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[currstyle].base.entrieBox+"' style='font-size:"+tdw+";visibility:hidden;' ></div>");twd=$(navtbl).clone().appendTo("#testpg2").width();$("#testpg2").remove();if($t.p._nvtd){if(o.dropmenu){navtbl=null;$($t).jqGrid("_buildNavMenu",pgid,elemids,p,pEdit,pAdd,pDel,pSearch,pView)}else{if(twd>$t.p._nvtd[0]){if($t.p.responsive){navtbl=null;$($t).jqGrid("_buildNavMenu",pgid,elemids,p,pEdit,pAdd,pDel,pSearch,pView)}else{$(pgid+"_"+o.position,pgid).append(navtbl).width(twd)}$t.p._nvtd[0]=twd}else{$(pgid+"_"+o.position,pgid).append(navtbl)}}$t.p._nvtd[1]=twd}$t.p.navGrid=true}if($t.p.storeNavOptions){$t.p.navOptions=o;$t.p.editOptions=pEdit;$t.p.addOptions=pAdd;$t.p.delOptions=pDel;$t.p.searchOptions=pSearch;$t.p.viewOptions=pView;$t.p.navButtons=[]}})},navButtonAdd:function(elem,p){var currstyle=this[0].p.styleUI,styles=$.jgrid.styleUI[currstyle].navigator;p=$.extend({caption:"newButton",title:"",buttonicon:styles.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:false},p||{});return this.each(function(){if(!this.grid){return }if(typeof elem==="string"&&elem.indexOf("#")!==0){elem="#"+$.jgrid.jqID(elem)}var findnav=$(".navtable",elem)[0],$t=this,disabled=$.jgrid.styleUI[currstyle].common.disabled,hover=$.jgrid.styleUI[currstyle].common.hover,cornerall=$.jgrid.styleUI[currstyle].common.cornerall,iconbase=$.jgrid.styleUI[currstyle].common.icon_base;if($t.p.storeNavOptions&&!p.internal){$t.p.navButtons.push([elem,p])}if(findnav){if(p.id&&$("#"+$.jgrid.jqID(p.id),findnav)[0]!==undefined){return }var tbd=$("<td></td>");if(p.buttonicon.toString().toUpperCase()==="NONE"){$(tbd).addClass("ui-pg-button "+cornerall).append("<div class='ui-pg-div'>"+p.caption+"</div>")}else{$(tbd).addClass("ui-pg-button "+cornerall).append("<div class='ui-pg-div'><span class='"+iconbase+" "+p.buttonicon+"'></span>"+p.caption+"</div>")}if(p.id){$(tbd).attr("id",p.id)}if(p.position==="first"){if(findnav.rows[0].cells.length===0){$("tr",findnav).append(tbd)}else{$("tr td:eq(0)",findnav).before(tbd)}}else{$("tr",findnav).append(tbd)}$(tbd,findnav).attr("title",p.title||"").click(function(e){if(!$(this).hasClass(disabled)){if($.isFunction(p.onClickButton)){p.onClickButton.call($t,e)}}return false}).hover(function(){if(!$(this).hasClass(disabled)){$(this).addClass(hover)}},function(){$(this).removeClass(hover)})}else{findnav=$(".dropdownmenu",elem)[0];if(findnav){var id=$(findnav).val(),eid=p.id||$.jgrid.randId(),item=$('<li class="ui-menu-item" role="presentation"><a class="'+cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.caption||p.title)+"</a></li>");if(id){if(p.position==="first"){$("#"+id).prepend(item)}else{$("#"+id).append(item)}$(item).on("click",function(e){if(!$(this).hasClass(disabled)){$("#"+id).hide();if($.isFunction(p.onClickButton)){p.onClickButton.call($t,e)}}return false}).find("a").hover(function(){if(!$(this).hasClass(disabled)){$(this).addClass(hover)}},function(){$(this).removeClass(hover)})}}}})},navSeparatorAdd:function(elem,p){var currstyle=this[0].p.styleUI,commonstyle=$.jgrid.styleUI[currstyle].common;p=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},p||{});return this.each(function(){if(!this.grid){return }if(typeof elem==="string"&&elem.indexOf("#")!==0){elem="#"+$.jgrid.jqID(elem)}var findnav=$(".navtable",elem)[0],sep,id;if(this.p.storeNavOptions){this.p.navButtons.push([elem,p])}if(findnav){sep="<td class='ui-pg-button "+commonstyle.disabled+"' style='width:4px;'><span class='"+p.sepclass+"'></span>"+p.sepcontent+"</td>";if(p.position==="first"){if(findnav.rows[0].cells.length===0){$("tr",findnav).append(sep)}else{$("tr td:eq(0)",findnav).before(sep)}}else{$("tr",findnav).append(sep)}}else{findnav=$(".dropdownmenu",elem)[0];sep="<li class='ui-menu-item "+commonstyle.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>";if(findnav){id=$(findnav).val();if(id){if(p.position==="first"){$("#"+id).prepend(sep)}else{$("#"+id).append(sep)}}}}})},_buildNavMenu:function(elem,elemids,p,pEdit,pAdd,pDel,pSearch,pView){return this.each(function(){var $t=this,regional=$.jgrid.getRegional($t,"nav"),currstyle=$t.p.styleUI,styles=$.jgrid.styleUI[currstyle].navigator,classes=$.jgrid.styleUI[currstyle].filter,commonstyle=$.jgrid.styleUI[currstyle].common,mid="form_menu_"+$.jgrid.randId(),bt=p.navButtonText?p.navButtonText:regional.selectcaption||"Actions",act="<button class='dropdownmenu "+commonstyle.button+"' value='"+mid+"'>"+bt+"</button>";$(elem+"_"+p.position,elem).append(act);var alertIDs={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},_buildMenu=function(){var fs=$(".ui-jqgrid-view").css("font-size")||"11px",eid,itm,str=$('<ul id="'+mid+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+fs+'"></ul>');if(p.add){pAdd=pAdd||{};eid=pAdd.id||"add_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.addtext||p.addtitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(p.addfunc)){p.addfunc.call($t)}else{$($t).jqGrid("editGridRow","new",pAdd)}$(str).hide()}return false});$(str).append(itm)}if(p.edit){pEdit=pEdit||{};eid=pEdit.id||"edit_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.edittext||p.edittitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){var sr=$t.p.selrow;if(sr){if($.isFunction(p.editfunc)){p.editfunc.call($t,sr)}else{$($t).jqGrid("editGridRow",sr,pEdit)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}$(str).hide()}return false});$(str).append(itm)}if(p.view){pView=pView||{};eid=pView.id||"view_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.viewtext||p.viewtitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){var sr=$t.p.selrow;if(sr){if($.isFunction(p.editfunc)){p.viewfunc.call($t,sr)}else{$($t).jqGrid("viewGridRow",sr,pView)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}$(str).hide()}return false});$(str).append(itm)}if(p.del){pDel=pDel||{};eid=pDel.id||"del_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.deltext||p.deltitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){var dr;if($t.p.multiselect){dr=$t.p.selarrrow;if(dr.length===0){dr=null}}else{dr=$t.p.selrow}if(dr){if($.isFunction(p.delfunc)){p.delfunc.call($t,dr)}else{$($t).jqGrid("delGridRow",dr,pDel)}}else{$.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:true});$("#jqg_alrt").focus()}$(str).hide()}return false});$(str).append(itm)}if(p.add||p.edit||p.del||p.view){$(str).append("<li class='ui-menu-item "+commonstyle.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>")}if(p.search){pSearch=pSearch||{};eid=pSearch.id||"search_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.searchtext||p.searchtitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(p.searchfunc)){p.searchfunc.call($t,pSearch)}else{$($t).jqGrid("searchGrid",pSearch)}$(str).hide()}return false});$(str).append(itm);if(pSearch.showOnLoad&&pSearch.showOnLoad===true){$(itm).click()}}if(p.refresh){eid=pSearch.id||"search_"+elemids;itm=$('<li class="ui-menu-item" role="presentation"><a class="'+commonstyle.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+eid+'">'+(p.refreshtext||p.refreshtitle)+"</a></li>").click(function(){if(!$(this).hasClass(commonstyle.disabled)){if($.isFunction(p.beforeRefresh)){p.beforeRefresh.call($t)}$t.p.search=false;$t.p.resetsearch=true;try{if(p.refreshstate!=="currentfilter"){var gID=$t.p.id;$t.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(gID)).jqFilter("resetFilter")}catch(ef){}if($.isFunction($t.clearToolbar)){$t.clearToolbar.call($t,false)}}}catch(e){}switch(p.refreshstate){case"firstpage":$($t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$($t).trigger("reloadGrid",[{current:true}]);break}if($.isFunction(p.afterRefresh)){p.afterRefresh.call($t)}$(str).hide()}return false});$(str).append(itm)}$(str).hide();$("body").append(str);$("#"+mid).addClass("ui-menu "+classes.menu_widget);$("#"+mid+" > li > a").hover(function(){$(this).addClass(commonstyle.hover)},function(){$(this).removeClass(commonstyle.hover)})};_buildMenu();$(".dropdownmenu",elem+"_"+p.position).on("click",function(e){var offset=$(this).offset(),left=(offset.left),top=parseInt(offset.top),bid=$(this).val();$("#"+bid).show().css({top:top-($("#"+bid).height()+10)+"px",left:left+"px"});e.stopPropagation()});$("body").on("click",function(e){if(!$(e.target).hasClass("dropdownmenu")){$("#"+mid).hide()}})})},GridToForm:function(rowid,formid){return this.each(function(){var $t=this,i;if(!$t.grid){return }var rowdata=$($t).jqGrid("getRowData",rowid);if(rowdata){for(i in rowdata){if(rowdata.hasOwnProperty(i)){if($("[name="+$.jgrid.jqID(i)+"]",formid).is("input:radio")||$("[name="+$.jgrid.jqID(i)+"]",formid).is("input:checkbox")){$("[name="+$.jgrid.jqID(i)+"]",formid).each(function(){if($(this).val()==rowdata[i]){$(this)[$t.p.useProp?"prop":"attr"]("checked",true)}else{$(this)[$t.p.useProp?"prop":"attr"]("checked",false)}})}else{$("[name="+$.jgrid.jqID(i)+"]",formid).val(rowdata[i])}}}}})},FormToGrid:function(rowid,formid,mode,position){return this.each(function(){var $t=this;if(!$t.grid){return }if(!mode){mode="set"}if(!position){position="first"}var fields=$(formid).serializeArray();var griddata={};$.each(fields,function(i,field){griddata[field.name]=field.value});if(mode==="add"){$($t).jqGrid("addRowData",rowid,griddata,position)}else{if(mode==="set"){$($t).jqGrid("setRowData",rowid,griddata)}}})}});$.jgrid.extend({groupingSetup:function(){return this.each(function(){var $t=this,i,j,cml,cm=$t.p.colModel,grp=$t.p.groupingView,classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].grouping;if(grp!==null&&((typeof grp==="object")||$.isFunction(grp))){if(!grp.plusicon){grp.plusicon=classes.icon_plus}if(!grp.minusicon){grp.minusicon=classes.icon_minus}if(!grp.groupField.length){$t.p.grouping=false}else{if(grp.visibiltyOnNextGrouping===undefined){grp.visibiltyOnNextGrouping=[]}grp.lastvalues=[];if(!grp._locgr){grp.groups=[]}grp.counters=[];for(i=0;i<grp.groupField.length;i++){if(!grp.groupOrder[i]){grp.groupOrder[i]="asc"}if(!grp.groupText[i]){grp.groupText[i]="{0}"}if(typeof grp.groupColumnShow[i]!=="boolean"){grp.groupColumnShow[i]=true}if(typeof grp.groupSummary[i]!=="boolean"){grp.groupSummary[i]=false}if(!grp.groupSummaryPos[i]){grp.groupSummaryPos[i]="footer"}if(grp.groupColumnShow[i]===true){grp.visibiltyOnNextGrouping[i]=true;$($t).jqGrid("showCol",grp.groupField[i])}else{grp.visibiltyOnNextGrouping[i]=$("#"+$.jgrid.jqID($t.p.id+"_"+grp.groupField[i])).is(":visible");$($t).jqGrid("hideCol",grp.groupField[i])}}grp.summary=[];if(grp.hideFirstGroupCol){if($.isArray(grp.formatDisplayField)&&!$.isFunction(grp.formatDisplayField[0])){grp.formatDisplayField[0]=function(v){return v}}}for(j=0,cml=cm.length;j<cml;j++){if(grp.hideFirstGroupCol){if(!cm[j].hidden&&grp.groupField[0]===cm[j].name){cm[j].formatter=function(){return""}}}if(cm[j].summaryType){if(cm[j].summaryDivider){grp.summary.push({nm:cm[j].name,st:cm[j].summaryType,v:"",sd:cm[j].summaryDivider,vd:"",sr:cm[j].summaryRound,srt:cm[j].summaryRoundType||"round"})}else{grp.summary.push({nm:cm[j].name,st:cm[j].summaryType,v:"",sr:cm[j].summaryRound,srt:cm[j].summaryRoundType||"round"})}}}}}else{$t.p.grouping=false}})},groupingPrepare:function(record,irow){this.each(function(){var grp=this.p.groupingView,$t=this,i,sumGroups=function(){if($.isFunction(this.st)){this.v=this.st.call($t,this.v,this.nm,record)}else{this.v=$($t).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,record);if(this.st.toLowerCase()==="avg"&&this.sd){this.vd=$($t).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,record)}}},grlen=grp.groupField.length,fieldName,v,displayName,displayValue,changed=0;for(i=0;i<grlen;i++){fieldName=grp.groupField[i];displayName=grp.displayField[i];v=record[fieldName];displayValue=displayName==null?null:record[displayName];if(displayValue==null){displayValue=v}if(v!==undefined){if(irow===0){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};$.each(grp.counters[i].summary,sumGroups);grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{if(typeof v!=="object"&&($.isArray(grp.isInTheSameGroup)&&$.isFunction(grp.isInTheSameGroup[i])?!grp.isInTheSameGroup[i].call($t,grp.lastvalues[i],v,i,grp):grp.lastvalues[i]!==v)){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;changed=1;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};$.each(grp.counters[i].summary,sumGroups);grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{if(changed===1){grp.groups.push({idx:i,dataIndex:fieldName,value:v,displayValue:displayValue,startRow:irow,cnt:1,summary:[]});grp.lastvalues[i]=v;grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(true,[],grp.summary)};$.each(grp.counters[i].summary,sumGroups);grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}else{grp.counters[i].cnt+=1;grp.groups[grp.counters[i].pos].cnt=grp.counters[i].cnt;$.each(grp.counters[i].summary,sumGroups);grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary}}}}}});return this},groupingToggle:function(hid){this.each(function(){var $t=this,grp=$t.p.groupingView,strpos=hid.split("_"),num=parseInt(strpos[strpos.length-2],10);strpos.splice(strpos.length-2,2);var uid=strpos.join("_"),minus=grp.minusicon,plus=grp.plusicon,tar=$("#"+$.jgrid.jqID(hid)),r=tar.length?tar[0].nextSibling:null,tarspan=$("#"+$.jgrid.jqID(hid)+" span.tree-wrap-"+$t.p.direction),getGroupingLevelFromClass=function(className){var nums=$.map(className.split(" "),function(item){if(item.substring(0,uid.length+1)===uid+"_"){return parseInt(item.substring(uid.length+1),10)}});return nums.length>0?nums[0]:undefined},itemGroupingLevel,showData,collapsed=false,skip=false,frz=$t.p.frozenColumns?$t.p.id+"_frozen":false,tar2=frz?$("#"+$.jgrid.jqID(hid),"#"+$.jgrid.jqID(frz)):false,r2=(tar2&&tar2.length)?tar2[0].nextSibling:null;if(tarspan.hasClass(minus)){if(r){while(r){itemGroupingLevel=getGroupingLevelFromClass(r.className);if(itemGroupingLevel!==undefined&&itemGroupingLevel<=num){break}$(r).hide();r=r.nextSibling;if(frz){$(r2).hide();r2=r2.nextSibling}}}tarspan.removeClass(minus).addClass(plus);collapsed=true}else{if(r){showData=undefined;while(r){itemGroupingLevel=getGroupingLevelFromClass(r.className);if(showData===undefined){showData=itemGroupingLevel===undefined}skip=$(r).hasClass("ui-subgrid")&&$(r).hasClass("ui-sg-collapsed");if(itemGroupingLevel!==undefined){if(itemGroupingLevel<=num){break}if(itemGroupingLevel===num+1){if(!skip){$(r).show().find(">td>span.tree-wrap-"+$t.p.direction).removeClass(minus).addClass(plus);if(frz){$(r2).show().find(">td>span.tree-wrap-"+$t.p.direction).removeClass(minus).addClass(plus)}}}}else{if(showData){if(!skip){$(r).show();if(frz){$(r2).show()}}}}r=r.nextSibling;if(frz){r2=r2.nextSibling}}}tarspan.removeClass(plus).addClass(minus)}$($t).triggerHandler("jqGridGroupingClickGroup",[hid,collapsed]);if($.isFunction($t.p.onClickGroup)){$t.p.onClickGroup.call($t,hid,collapsed)}});return false},groupingRender:function(grdata,colspans,page,rn){return this.each(function(){var $t=this,grp=$t.p.groupingView,str="",icon="",hid,clid,pmrtl=grp.groupCollapse?grp.plusicon:grp.minusicon,gv,cp=[],len=grp.groupField.length,common=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].common;pmrtl=pmrtl+" tree-wrap-"+$t.p.direction;$.each($t.p.colModel,function(i,n){var ii;for(ii=0;ii<len;ii++){if(grp.groupField[ii]===n.name){cp[ii]=i;break}}});var toEnd=0;function findGroupIdx(ind,offset,grp){var ret=false,i;if(offset===0){ret=grp[ind]}else{var id=grp[ind].idx;if(id===0){ret=grp[ind]}else{for(i=ind;i>=0;i--){if(grp[i].idx===id-offset){ret=grp[i];break}}}}return ret}function buildSummaryTd(i,ik,grp,foffset){var fdata=findGroupIdx(i,ik,grp),cm=$t.p.colModel,vv,grlen=fdata.cnt,str="",k;for(k=foffset;k<colspans;k++){var tmpdata="<td "+$t.formatCol(k,1,"")+">&#160;</td>",tplfld="{0}";$.each(fdata.summary,function(){if(this.nm===cm[k].name){if(cm[k].summaryTpl){tplfld=cm[k].summaryTpl}if(typeof this.st==="string"&&this.st.toLowerCase()==="avg"){if(this.sd&&this.vd){this.v=(this.v/this.vd)}else{if(this.v&&grlen>0){this.v=(this.v/grlen)}}}try{this.groupCount=fdata.cnt;this.groupIndex=fdata.dataIndex;this.groupValue=fdata.value;vv=$t.formatter("",this.v,k,this)}catch(ef){vv=this.v}tmpdata="<td "+$t.formatCol(k,1,"")+">"+$.jgrid.template(tplfld,vv)+"</td>";return false}});str+=tmpdata}return str}var sumreverse=$.makeArray(grp.groupSummary),mul;sumreverse.reverse();mul=$t.p.multiselect?' colspan="2"':"";$.each(grp.groups,function(i,n){if(grp._locgr){if(!(n.startRow+n.cnt>(page-1)*rn&&n.startRow<page*rn)){return true}}toEnd++;clid=$t.p.id+"ghead_"+n.idx;hid=clid+"_"+i;icon="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+common.icon_base+" "+pmrtl+"' onclick=\"jQuery('#"+$.jgrid.jqID($t.p.id)+"').jqGrid('groupingToggle','"+hid+"');return false;\"></span>";try{if($.isArray(grp.formatDisplayField)&&$.isFunction(grp.formatDisplayField[n.idx])){gv=grp.formatDisplayField[n.idx].call($t,n.displayValue,n.value,$t.p.colModel[cp[n.idx]],n.idx,grp)}else{gv=$t.formatter(hid,n.displayValue,cp[n.idx],n.value)}}catch(egv){gv=n.displayValue}var grpTextStr="";if($.isFunction(grp.groupText[n.idx])){grpTextStr=grp.groupText[n.idx].call($t,gv,n.cnt,n.summary)}else{grpTextStr=$.jgrid.template(grp.groupText[n.idx],gv,n.cnt,n.summary)}if(!(typeof grpTextStr==="string"||typeof grpTextStr==="number")){grpTextStr=gv}if(grp.groupSummaryPos[n.idx]==="header"){str+='<tr id="'+hid+'"'+(grp.groupCollapse&&n.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+common.content+" jqgroup ui-row-"+$t.p.direction+" "+clid+'"><td style="padding-left:'+(n.idx*12)+'px;"'+mul+">"+icon+grpTextStr+"</td>";str+=buildSummaryTd(i,0,grp.groups,grp.groupColumnShow[n.idx]===false?(mul===""?2:3):((mul==="")?1:2));str+="</tr>"}else{str+='<tr id="'+hid+'"'+(grp.groupCollapse&&n.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+common.content+" jqgroup ui-row-"+$t.p.direction+" "+clid+'"><td style="padding-left:'+(n.idx*12)+'px;" colspan="'+(grp.groupColumnShow[n.idx]===false?colspans-1:colspans)+'">'+icon+grpTextStr+"</td></tr>"}var leaf=len-1===n.idx;if(leaf){var gg=grp.groups[i+1],kk,ik,offset=0,sgr=n.startRow,end=gg!==undefined?gg.startRow:grp.groups[i].startRow+grp.groups[i].cnt;if(grp._locgr){offset=(page-1)*rn;if(offset>n.startRow){sgr=offset}}for(kk=sgr;kk<end;kk++){if(!grdata[kk-offset]){break}str+=grdata[kk-offset].join("")}if(grp.groupSummaryPos[n.idx]!=="header"){var jj;if(gg!==undefined){for(jj=0;jj<grp.groupField.length;jj++){if(gg.dataIndex===grp.groupField[jj]){break}}toEnd=grp.groupField.length-jj}for(ik=0;ik<toEnd;ik++){if(!sumreverse[ik]){continue}var hhdr="";if(grp.groupCollapse&&!grp.showSummaryOnHide){hhdr=' style="display:none;"'}str+="<tr"+hhdr+' jqfootlevel="'+(n.idx-ik)+'" role="row" class="'+common.content+" jqfoot ui-row-"+$t.p.direction+'">';str+=buildSummaryTd(i,ik,grp.groups,0);str+="</tr>"}toEnd=jj}}});$("#"+$.jgrid.jqID($t.p.id)+" tbody:first").append(str);str=null})},groupingGroupBy:function(name,options){return this.each(function(){var $t=this;if(typeof name==="string"){name=[name]}var grp=$t.p.groupingView;$t.p.grouping=true;grp._locgr=false;if(grp.visibiltyOnNextGrouping===undefined){grp.visibiltyOnNextGrouping=[]}var i;for(i=0;i<grp.groupField.length;i++){if(!grp.groupColumnShow[i]&&grp.visibiltyOnNextGrouping[i]){$($t).jqGrid("showCol",grp.groupField[i])}}for(i=0;i<name.length;i++){grp.visibiltyOnNextGrouping[i]=$("#"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(name[i])).is(":visible")}$t.p.groupingView=$.extend($t.p.groupingView,options||{});grp.groupField=name;$($t).trigger("reloadGrid")})},groupingRemove:function(current){return this.each(function(){var $t=this;if(current===undefined){current=true}$t.p.grouping=false;if(current===true){var grp=$t.p.groupingView,i;for(i=0;i<grp.groupField.length;i++){if(!grp.groupColumnShow[i]&&grp.visibiltyOnNextGrouping[i]){$($t).jqGrid("showCol",grp.groupField)}}$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID($t.p.id)+" tbody:first").remove();$("tr.jqgrow:hidden","#"+$.jgrid.jqID($t.p.id)+" tbody:first").show()}else{$($t).trigger("reloadGrid")}})},groupingCalculations:{handler:function(fn,v,field,round,roundType,rc){var funcs={sum:function(){return parseFloat(v||0)+parseFloat((rc[field]||0))},min:function(){if(v===""){return parseFloat(rc[field]||0)}return Math.min(parseFloat(v),parseFloat(rc[field]||0))},max:function(){if(v===""){return parseFloat(rc[field]||0)}return Math.max(parseFloat(v),parseFloat(rc[field]||0))},count:function(){if(v===""){v=0}if(rc.hasOwnProperty(field)){return v+1}return 0},avg:function(){return funcs.sum()}};if(!funcs[fn]){throw ("jqGrid Grouping No such method: "+fn)}var res=funcs[fn]();if(round!=null){if(roundType==="fixed"){res=res.toFixed(round)}else{var mul=Math.pow(10,round);res=Math.round(res*mul)/mul}}return res}},setGroupHeaders:function(o){o=$.extend({useColSpanStyle:false,groupHeaders:[]},o||{});return this.each(function(){var ts=this,i,cmi,skip=0,$tr,$colHeader,th,$th,thStyle,iCol,cghi,numberOfColumns,titleText,cVisibleColumns,className,colModel=ts.p.colModel,cml=colModel.length,ths=ts.grid.headers,$htable=$("table.ui-jqgrid-htable",ts.grid.hDiv),$trLabels=$htable.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),$thead=$htable.children("thead"),$theadInTable,$firstHeaderRow=$htable.find(".jqg-first-row-header"),base=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].base;if(!ts.p.groupHeader){ts.p.groupHeader=[]}ts.p.groupHeader.push(o);if($firstHeaderRow[0]===undefined){$firstHeaderRow=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{$firstHeaderRow.empty()}var $firstRow,inColumnHeader=function(text,columnHeaders){var length=columnHeaders.length,i;for(i=0;i<length;i++){if(columnHeaders[i].startColumnName===text){return i}}return -1};$(ts).prepend($thead);$tr=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(i=0;i<cml;i++){th=ths[i].el;$th=$(th);cmi=colModel[i];thStyle={height:"0px",width:ths[i].width+"px",display:(cmi.hidden?"none":"")};$("<th>",{role:"gridcell"}).css(thStyle).addClass("ui-first-th-"+ts.p.direction).appendTo($firstHeaderRow);th.style.width="";iCol=inColumnHeader(cmi.name,o.groupHeaders);if(iCol>=0){cghi=o.groupHeaders[iCol];numberOfColumns=cghi.numberOfColumns;titleText=cghi.titleText;className=cghi.className||"";for(cVisibleColumns=0,iCol=0;iCol<numberOfColumns&&(i+iCol<cml);iCol++){if(!colModel[i+iCol].hidden){cVisibleColumns++}}$colHeader=$("<th>").attr({role:"columnheader"}).addClass(base.headerBox+" ui-th-column-header ui-th-"+ts.p.direction+" "+className).html(titleText);if(cVisibleColumns>0){$colHeader.attr("colspan",String(cVisibleColumns))}if(ts.p.headertitles){$colHeader.attr("title",$colHeader.text())}if(cVisibleColumns===0){$colHeader.hide()}$th.before($colHeader);$tr.append(th);skip=numberOfColumns-1}else{if(skip===0){if(o.useColSpanStyle){var rowspan=$th.attr("rowspan")?parseInt($th.attr("rowspan"),10)+1:2;$th.attr("rowspan",rowspan)}else{$("<th>",{role:"columnheader"}).addClass(base.headerBox+" ui-th-column-header ui-th-"+ts.p.direction).css({display:cmi.hidden?"none":""}).insertBefore($th);$tr.append(th)}}else{$tr.append(th);skip--}}}$theadInTable=$(ts).children("thead");$theadInTable.prepend($firstHeaderRow);$tr.insertAfter($trLabels);$htable.append($theadInTable);if(o.useColSpanStyle){$htable.find("span.ui-jqgrid-resize").each(function(){var $parent=$(this).parent();if($parent.is(":visible")){this.style.cssText="height: "+$parent.height()+"px !important; cursor: col-resize;"}});$htable.find("div.ui-jqgrid-sortable").each(function(){var $ts=$(this),$parent=$ts.parent();if($parent.is(":visible")&&$parent.is(":has(span.ui-jqgrid-resize)")){$ts.css("top",($parent.height()-$ts.outerHeight())/2-4+"px")}})}$firstRow=$theadInTable.find("tr.jqg-first-row-header");$(ts).on("jqGridResizeStop.setGroupHeaders",function(e,nw,idx){$firstRow.find("th").eq(idx)[0].style.width=nw+"px"})})},destroyGroupHeader:function(nullHeader){if(nullHeader===undefined){nullHeader=true}return this.each(function(){var $t=this,$tr,i,l,headers,$th,$resizing,grid=$t.grid,thead=$("table.ui-jqgrid-htable thead",grid.hDiv),cm=$t.p.colModel,hc;if(!grid){return }$(this).off(".setGroupHeaders");$tr=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels");headers=grid.headers;for(i=0,l=headers.length;i<l;i++){hc=cm[i].hidden?"none":"";$th=$(headers[i].el).width(headers[i].width).css("display",hc);try{$th.removeAttr("rowSpan")}catch(rs){$th.attr("rowSpan",1)}$tr.append($th);$resizing=$th.children("span.ui-jqgrid-resize");if($resizing.length>0){$resizing[0].style.height=""}$th.children("div")[0].style.top=""}$(thead).children("tr.ui-jqgrid-labels").remove();$(thead).prepend($tr);if(nullHeader===true){$($t).jqGrid("setGridParam",{groupHeader:null})}})}});$.jgrid=$.jgrid||{};$.extend($.jgrid,{saveState:function(jqGridId,o){o=$.extend({useStorage:true,storageType:"localStorage",beforeSetItem:null,compression:false,compressionModule:"LZString",compressionMethod:"compressToUTF16",debug:false,saveData:true},o||{});if(!jqGridId){return }var gridstate="",data="",ret,$t=$("#"+jqGridId)[0],tmp;if(!$t.grid){return }tmp=$($t).data("inlineNav");if(tmp&&$t.p.inlineNav){$($t).jqGrid("setGridParam",{_iN:tmp})}tmp=$($t).data("filterToolbar");if(tmp&&$t.p.filterToolbar){$($t).jqGrid("setGridParam",{_fT:tmp})}gridstate=$($t).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""});data="";if(o.saveData){data=$($t.grid.bDiv).find(".ui-jqgrid-btable tbody:first").html();var firstrow=data.indexOf("</tr>");data=data.slice(firstrow+5)}if($.isFunction(o.beforeSetItem)){ret=o.beforeSetItem.call($t,gridstate);if(ret!=null){gridstate=ret}}if(o.debug){$("#gbox_tree").prepend('<a id="link_save" target="_blank" download="jqGrid_dump.txt">Click to save Dump Data</a>');var temp=[],file,properties={},url;temp.push("Grid Options\n");temp.push(gridstate);temp.push("\n");temp.push("GridData\n");temp.push(data);properties.type="plain/text;charset=utf-8";try{file=new File(temp,"jqGrid_dump.txt",properties)}catch(e){file=new Blob(temp,properties)}url=URL.createObjectURL(file);$("#link_save").attr("href",url).on("click",function(){$(this).remove()})}if(o.compression){if(o.compressionModule){try{ret=window[o.compressionModule][o.compressionMethod](gridstate);if(ret!=null){gridstate=ret;data=window[o.compressionModule][o.compressionMethod](data)}}catch(e){}}}if(o.useStorage&&$.jgrid.isLocalStorage()){try{window[o.storageType].setItem("jqGrid"+$t.p.id,gridstate);window[o.storageType].setItem("jqGrid"+$t.p.id+"_data",data)}catch(e){if(e.code===22){alert("Local storage limit is over!")}}}return gridstate},loadState:function(jqGridId,gridstring,o){o=$.extend({useStorage:true,storageType:"localStorage",clearAfterLoad:false,beforeSetGrid:null,afterSetGrid:null,decompression:false,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16",restoreData:true},o||{});if(!jqGridId){return }var ret,tmp,$t=$("#"+jqGridId)[0],data,iN,fT;if(o.useStorage){try{gridstring=window[o.storageType].getItem("jqGrid"+$t.id);data=window[o.storageType].getItem("jqGrid"+$t.id+"_data")}catch(e){}}if(!gridstring){return }if(o.decompression){if(o.decompressionModule){try{ret=window[o.decompressionModule][o.decompressionMethod](gridstring);if(ret!=null){gridstring=ret;data=window[o.decompressionModule][o.decompressionMethod](data)}}catch(e){}}}ret=$.jgrid.parseFunc(gridstring);if(ret&&$.type(ret)==="object"){if($t.grid){$.jgrid.gridUnload(jqGridId)}if($.isFunction(o.beforeSetGrid)){tmp=o.beforeSetGrid(ret);if(tmp&&$.type(tmp)==="object"){ret=tmp}}var retfunc=function(param){var p;p=param;return p},prm={reccount:ret.reccount,records:ret.records,lastpage:ret.lastpage,shrinkToFit:retfunc(ret.shrinkToFit),data:retfunc(ret.data),datatype:retfunc(ret.datatype),grouping:retfunc(ret.grouping)};ret.shrinkToFit=false;ret.data=[];ret.datatype="local";ret.grouping=false;if(ret.inlineNav){iN=retfunc(ret._iN);ret._iN=null;delete ret._iN}if(ret.filterToolbar){fT=retfunc(ret._fT);ret._fT=null;delete ret._fT}var grid=$("#"+jqGridId).jqGrid(ret);if(o.restoreData&&$.trim(data)!==""){grid.append(data)}grid.jqGrid("setGridParam",prm);if(ret.storeNavOptions&&ret.navGrid){grid[0].p.navGrid=false;grid.jqGrid("navGrid",ret.pager,ret.navOptions,ret.editOptions,ret.addOptions,ret.delOptions,ret.searchOptions,ret.viewOptions);if(ret.navButtons&&ret.navButtons.length){for(var b=0;b<ret.navButtons.length;b++){if("sepclass" in ret.navButtons[b][1]){grid.jqGrid("navSeparatorAdd",ret.navButtons[b][0],ret.navButtons[b][1])}else{grid.jqGrid("navButtonAdd",ret.navButtons[b][0],ret.navButtons[b][1])}}}}grid[0].refreshIndex();if(ret.subGrid){var ms=ret.multiselect===1?1:0,rn=ret.rownumbers===true?1:0;grid.jqGrid("addSubGrid",ms+rn)}if(ret.treeGrid){var i=1,len=grid[0].rows.length,expCol=ret.expColInd,isLeaf=ret.treeReader.leaf_field,expanded=ret.treeReader.expanded_field;while(i<len){$(grid[0].rows[i].cells[expCol]).find("div.treeclick").on("click",function(e){var target=e.target||e.srcElement,ind2=$.jgrid.stripPref(ret.idPrefix,$(target,grid[0].rows).closest("tr.jqgrow")[0].id),pos=grid[0].p._index[ind2];if(!grid[0].p.data[pos][isLeaf]){if(grid[0].p.data[pos][expanded]){grid.jqGrid("collapseRow",grid[0].p.data[pos]);grid.jqGrid("collapseNode",grid[0].p.data[pos])}else{grid.jqGrid("expandRow",grid[0].p.data[pos]);grid.jqGrid("expandNode",grid[0].p.data[pos])}}return false});if(ret.ExpandColClick===true){$(grid[0].rows[i].cells[expCol]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(e){var target=e.target||e.srcElement,ind2=$.jgrid.stripPref(ret.idPrefix,$(target,grid[0].rows).closest("tr.jqgrow")[0].id),pos=grid[0].p._index[ind2];if(!grid[0].p.data[pos][isLeaf]){if(grid[0].p.data[pos][expanded]){grid.jqGrid("collapseRow",grid[0].p.data[pos]);grid.jqGrid("collapseNode",grid[0].p.data[pos])}else{grid.jqGrid("expandRow",grid[0].p.data[pos]);grid.jqGrid("expandNode",grid[0].p.data[pos])}}grid.jqGrid("setSelection",ind2);return false})}i++}}if(ret.multiselect){$.each(ret.selarrrow,function(){$("#jqg_"+jqGridId+"_"+this)[ret.useProp?"prop":"attr"]("checked","checked")})}if(ret.inlineNav&&iN){grid.jqGrid("setGridParam",{inlineNav:false});grid.jqGrid("inlineNav",ret.pager,iN)}if(ret.filterToolbar&&fT){grid.jqGrid("setGridParam",{filterToolbar:false});fT.restoreFromFilters=true;grid.jqGrid("filterToolbar",fT)}if(ret.frozenColumns){grid.jqGrid("setFrozenColumns")}grid[0].updatepager(true,true);if($.isFunction(o.afterSetGrid)){o.afterSetGrid(grid)}if(o.clearAfterLoad){window[o.storageType].removeItem("jqGrid"+$t.id);window[o.storageType].removeItem("jqGrid"+$t.id+"_data")}}else{alert("can not convert to object")}},isGridInStorage:function(jqGridId,options){var o={storageType:"localStorage"};o=$.extend(o,options||{});var ret,gridstring,data;try{gridstring=window[o.storageType].getItem("jqGrid"+jqGridId);data=window[o.storageType].getItem("jqGrid"+jqGridId+"_data");ret=gridstring!=null&&data!=null&&typeof gridstring==="string"&&typeof data==="string"}catch(e){ret=false}return ret},setRegional:function(jqGridId,options){var o={storageType:"sessionStorage"};o=$.extend(o,options||{});if(!o.regional){return }$.jgrid.saveState(jqGridId,o);o.beforeSetGrid=function(params){params.regional=o.regional;params.force_regional=true;return params};$.jgrid.loadState(jqGridId,null,o);var grid=$("#"+jqGridId)[0],model=$(grid).jqGrid("getGridParam","colModel"),i=-1,nav=$.jgrid.getRegional(grid,"nav");$.each(model,function(k){if(this.formatter&&this.formatter==="actions"){i=k;return false}});if(i!==-1&&nav){$("#"+jqGridId+" tbody tr").each(function(){var td=this.cells[i];$(td).find(".ui-inline-edit").attr("title",nav.edittitle);$(td).find(".ui-inline-del").attr("title",nav.deltitle);$(td).find(".ui-inline-save").attr("title",nav.savetitle);$(td).find(".ui-inline-cancel").attr("title",nav.canceltitle)})}try{window[o.storageType].removeItem("jqGrid"+grid.id);window[o.storageType].removeItem("jqGrid"+grid.id+"_data")}catch(e){}},jqGridImport:function(jqGridId,o){o=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},o||{});var $t=(jqGridId.indexOf("#")===0?"":"#")+$.jgrid.jqID(jqGridId);var xmlConvert=function(xml,o){var cnfg=$(o.xmlGrid.config,xml)[0];var xmldata=$(o.xmlGrid.data,xml)[0],jstr,jstr1,key;if($.grid.xmlToJSON){jstr=$.jgrid.xmlToJSON(cnfg);for(key in jstr){if(jstr.hasOwnProperty(key)){jstr1=jstr[key]}}if(xmldata){var svdatatype=jstr.grid.datatype;jstr.grid.datatype="xmlstring";jstr.grid.datastr=xml;$($t).jqGrid(jstr1).jqGrid("setGridParam",{datatype:svdatatype})}else{setTimeout(function(){$($t).jqGrid(jstr1)},0)}}else{alert("xml2json or parse are not present")}};var jsonConvert=function(jsonstr,o){if(jsonstr&&typeof jsonstr==="string"){var json=$.jgrid.parseFunc(jsonstr);var gprm=json[o.jsonGrid.config];var jdata=json[o.jsonGrid.data];if(jdata){var svdatatype=gprm.datatype;gprm.datatype="jsonstring";gprm.datastr=jdata;$($t).jqGrid(gprm).jqGrid("setGridParam",{datatype:svdatatype})}else{$($t).jqGrid(gprm)}}};switch(o.imptype){case"xml":$.ajax($.extend({url:o.impurl,type:o.mtype,data:o.impData,dataType:"xml",complete:function(xml,stat){if(stat==="success"){xmlConvert(xml.responseXML,o);$($t).triggerHandler("jqGridImportComplete",[xml,o]);if($.isFunction(o.importComplete)){o.importComplete(xml)}}xml=null}},o.ajaxOptions));break;case"xmlstring":if(o.impstring&&typeof o.impstring==="string"){var xmld=$.parseXML(o.impstring);if(xmld){xmlConvert(xmld,o);$($t).triggerHandler("jqGridImportComplete",[xmld,o]);if($.isFunction(o.importComplete)){o.importComplete(xmld)}}}break;case"json":$.ajax($.extend({url:o.impurl,type:o.mtype,data:o.impData,dataType:"json",complete:function(json){try{jsonConvert(json.responseText,o);$($t).triggerHandler("jqGridImportComplete",[json,o]);if($.isFunction(o.importComplete)){o.importComplete(json)}}catch(ee){}json=null}},o.ajaxOptions));break;case"jsonstring":if(o.impstring&&typeof o.impstring==="string"){jsonConvert(o.impstring,o);$($t).triggerHandler("jqGridImportComplete",[o.impstring,o]);if($.isFunction(o.importComplete)){o.importComplete(o.impstring)}}break}}});$.jgrid.extend({jqGridExport:function(o){o=$.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{}},o||{});var ret=null;this.each(function(){if(!this.grid){return }var gprm=$.extend(true,{},$(this).jqGrid("getGridParam"),o.addOptions);if(gprm.rownumbers){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1)}if(gprm.multiselect){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1)}if(gprm.subGrid){gprm.colNames.splice(0,1);gprm.colModel.splice(0,1)}gprm.knv=null;switch(o.exptype){case"xmlstring":ret="<"+o.root+">"+$.jgrid.jsonToXML(gprm,{xmlDecl:""})+"</"+o.root+">";break;case"jsonstring":ret=$.jgrid.stringify(gprm);if(o.root){ret="{"+o.root+":"+ret+"}"}break}});return ret},excelExport:function(o){o=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",beforeExport:null,exporthidden:false,exportgrouping:false,exportOptions:{}},o||{});return this.each(function(){if(!this.grid){return }var url;if(o.exptype==="remote"){var pdata=$.extend({},this.p.postData),expg;pdata[o.oper]=o.tag;if($.isFunction(o.beforeExport)){var result=o.beforeExport.call(this,pdata);if($.isPlainObject(result)){pdata=result}}if(o.exporthidden){var cm=this.p.colModel,i,len=cm.length,newm=[];for(i=0;i<len;i++){if(cm[i].hidden===undefined){cm[i].hidden=false}newm.push({name:cm[i].name,hidden:cm[i].hidden})}var newm1=JSON.stringify(newm);if(typeof newm1==="string"){pdata.colModel=newm1}}if(o.exportgrouping){expg=JSON.stringify(this.p.groupingView);if(typeof expg==="string"){pdata.groupingView=expg}}var params=jQuery.param(pdata);if(o.url.indexOf("?")!==-1){url=o.url+"&"+params}else{url=o.url+"?"+params}window.location=url}})}});$.jgrid.inlineEdit=$.jgrid.inlineEdit||{};$.jgrid.extend({editRow:function(rowid,keys,oneditfunc,successfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc){var o={},args=$.makeArray(arguments).slice(1),$t=this[0];if($.type(args[0])==="object"){o=args[0]}else{if(keys!==undefined){o.keys=keys}if($.isFunction(oneditfunc)){o.oneditfunc=oneditfunc}if($.isFunction(successfunc)){o.successfunc=successfunc}if(url!==undefined){o.url=url}if(extraparam!==undefined){o.extraparam=extraparam}if($.isFunction(aftersavefunc)){o.aftersavefunc=aftersavefunc}if($.isFunction(errorfunc)){o.errorfunc=errorfunc}if($.isFunction(afterrestorefunc)){o.afterrestorefunc=afterrestorefunc}}o=$.extend(true,{keys:false,keyevent:"keydown",oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,mtype:"POST",focusField:true,saveui:"enable",savetext:$.jgrid.getRegional($t,"defaults.savetext")},$.jgrid.inlineEdit,o);return this.each(function(){var nm,tmp,editable,cnt=0,focus=null,svr={},ind,cm,bfer,inpclass=$(this).jqGrid("getStyleUI",$t.p.styleUI+".inlinedit","inputClass",true);if(!$t.grid){return }ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return }$t.p.beforeAction=true;bfer=$.isFunction(o.beforeEditRow)?o.beforeEditRow.call($t,o,rowid):undefined;if(bfer===undefined){bfer=true}if(!bfer){$t.p.beforeAction=false;return }editable=$(ind).attr("editable")||"0";if(editable==="0"&&!$(ind).hasClass("not-editable-row")){cm=$t.p.colModel;$('td[role="gridcell"]',ind).each(function(i){nm=cm[i].name;var treeg=$t.p.treeGrid===true&&nm===$t.p.ExpandColumn;if(treeg){tmp=$("span:first",this).html()}else{try{tmp=$.unformat.call($t,this,{rowId:rowid,colModel:cm[i]},i)}catch(_){tmp=(cm[i].edittype&&cm[i].edittype==="textarea")?$(this).text():$(this).html()}}if(nm!=="cb"&&nm!=="subgrid"&&nm!=="rn"){if($t.p.autoencode){tmp=$.jgrid.htmlDecode(tmp)}svr[nm]=tmp;if(cm[i].editable===true){if(focus===null){focus=i}if(treeg){$("span:first",this).html("")}else{$(this).html("")}var opt=$.extend({},cm[i].editoptions||{},{id:rowid+"_"+nm,name:nm,rowId:rowid,oper:"edit"});if(!cm[i].edittype){cm[i].edittype="text"}if(tmp==="&nbsp;"||tmp==="&#160;"||(tmp.length===1&&tmp.charCodeAt(0)===160)){tmp=""}var elc=$.jgrid.createEl.call($t,cm[i].edittype,opt,tmp,true,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));$(elc).addClass("editable inline-edit-cell");if($.inArray(cm[i].edittype,["text","textarea","password","select"])>-1){$(elc).addClass(inpclass)}if(treeg){$("span:first",this).append(elc)}else{$(this).append(elc)}$.jgrid.bindEv.call($t,elc,opt);if(cm[i].edittype==="select"&&cm[i].editoptions!==undefined&&cm[i].editoptions.multiple===true&&cm[i].editoptions.dataUrl===undefined&&$.jgrid.msie()){$(elc).width($(elc).width())}cnt++}}});if(cnt>0){svr.id=rowid;$t.p.savedRow.push(svr);$(ind).attr("editable","1");if(o.focusField){if(typeof o.focusField==="number"&&parseInt(o.focusField,10)<=cm.length){focus=o.focusField}setTimeout(function(){var fe=$("td:eq("+focus+") :input:visible",ind).not(":disabled");if(fe.length>0){fe.focus()}},0)}if(o.keys===true){$(ind).on(o.keyevent,function(e){if(e.keyCode===27){$($t).jqGrid("restoreRow",rowid,o);if($t.p.inlineNav){try{$($t).jqGrid("showAddEditButtons")}catch(eer1){}}return false}if(e.keyCode===13){var ta=e.target;if(ta.tagName==="TEXTAREA"){return true}if($($t).jqGrid("saveRow",rowid,o)){if($t.p.inlineNav){try{$($t).jqGrid("showAddEditButtons")}catch(eer2){}}}return false}})}$($t).triggerHandler("jqGridInlineEditRow",[rowid,o]);if($.isFunction(o.oneditfunc)){o.oneditfunc.call($t,rowid)}}}})},saveRow:function(rowid,successfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc){var args=$.makeArray(arguments).slice(1),o={},$t=this[0];if($.type(args[0])==="object"){o=args[0]}else{if($.isFunction(successfunc)){o.successfunc=successfunc}if(url!==undefined){o.url=url}if(extraparam!==undefined){o.extraparam=extraparam}if($.isFunction(aftersavefunc)){o.aftersavefunc=aftersavefunc}if($.isFunction(errorfunc)){o.errorfunc=errorfunc}if($.isFunction(afterrestorefunc)){o.afterrestorefunc=afterrestorefunc}}o=$.extend(true,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:true,mtype:"POST",saveui:"enable",savetext:$.jgrid.getRegional($t,"defaults.savetext")},$.jgrid.inlineEdit,o);var success=false,nm,tmp={},tmp2={},tmp3={},editable,fr,cv,ind,nullIfEmpty=false,error=$.trim($($t).jqGrid("getStyleUI",$t.p.styleUI+".common","error",true));if(!$t.grid){return success}ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return success}var errors=$.jgrid.getRegional($t,"errors"),edit=$.jgrid.getRegional($t,"edit"),bfsr=$.isFunction(o.beforeSaveRow)?o.beforeSaveRow.call($t,o,rowid):undefined;if(bfsr===undefined){bfsr=true}if(!bfsr){return }editable=$(ind).attr("editable");o.url=o.url||$t.p.editurl;if(editable==="1"){var cm,index,elem;$('td[role="gridcell"]',ind).each(function(i){cm=$t.p.colModel[i];nm=cm.name;elem="";if(nm!=="cb"&&nm!=="subgrid"&&cm.editable===true&&nm!=="rn"&&!$(this).hasClass("not-editable-cell")){switch(cm.edittype){case"checkbox":var cbv=["Yes","No"];if(cm.editoptions&&editoptions.value){cbv=cm.editoptions.value.split(":")}tmp[nm]=$("input",this).is(":checked")?cbv[0]:cbv[1];elem=$("input",this);break;case"text":case"password":case"textarea":case"button":tmp[nm]=$("input, textarea",this).val();elem=$("input, textarea",this);break;case"select":if(!cm.editoptions.multiple){tmp[nm]=$("select option:selected",this).val();tmp2[nm]=$("select option:selected",this).text()}else{var sel=$("select",this),selectedText=[];tmp[nm]=$(sel).val();if(tmp[nm]){tmp[nm]=tmp[nm].join(",")}else{tmp[nm]=""}$("select option:selected",this).each(function(i,selected){selectedText[i]=$(selected).text()});tmp2[nm]=selectedText.join(",")}if(cm.formatter&&cm.formatter==="select"){tmp2={}}elem=$("select",this);break;case"custom":try{if(cm.editoptions&&$.isFunction(cm.editoptions.custom_value)){tmp[nm]=cm.editoptions.custom_value.call($t,$(".customelement",this),"get");if(tmp[nm]===undefined){throw"e2"}}else{throw"e1"}}catch(e){if(e==="e1"){$.jgrid.info_dialog(errors.errcap,"function 'custom_value' "+edit.msg.nodefined,edit.bClose,{styleUI:$t.p.styleUI})}else{$.jgrid.info_dialog(errors.errcap,e.message,edit.bClose,{styleUI:$t.p.styleUI})}}break}cv=$.jgrid.checkValues.call($t,tmp[nm],i);if(cv[0]===false){index=i;return false}if($t.p.autoencode){tmp[nm]=$.jgrid.htmlEncode(tmp[nm])}if(o.url!=="clientArray"&&cm.editoptions&&cm.editoptions.NullIfEmpty===true){if(tmp[nm]===""){tmp3[nm]="null";nullIfEmpty=true}}}});if(cv[0]===false){try{if($.isFunction($t.p.validationCell)){$t.p.validationCell.call($t,elem,cv[1],ind.rowIndex,index)}else{var tr=$($t).jqGrid("getGridRowById",rowid),positions=$.jgrid.findPos(tr);$.jgrid.info_dialog(errors.errcap,cv[1],edit.bClose,{left:positions[0],top:positions[1]+$(tr).outerHeight(),styleUI:$t.p.styleUI,onClose:function(){if(index>=0){$("#"+rowid+"_"+$t.p.colModel[index].name).focus()}}})}}catch(e){alert(cv[1])}return success}var idname,opers=$t.p.prmNames,oldRowId=rowid;if($t.p.keyName===false){idname=opers.id}else{idname=$t.p.keyName}if(tmp){tmp[opers.oper]=opers.editoper;if(tmp[idname]===undefined||tmp[idname]===""){tmp[idname]=rowid}else{if(ind.id!==$t.p.idPrefix+tmp[idname]){var oldid=$.jgrid.stripPref($t.p.idPrefix,rowid);if($t.p._index[oldid]!==undefined){$t.p._index[tmp[idname]]=$t.p._index[oldid];delete $t.p._index[oldid]}rowid=$t.p.idPrefix+tmp[idname];$(ind).attr("id",rowid);if($t.p.selrow===oldRowId){$t.p.selrow=rowid}if($.isArray($t.p.selarrrow)){var i=$.inArray(oldRowId,$t.p.selarrrow);if(i>=0){$t.p.selarrrow[i]=rowid}}if($t.p.multiselect){var newCboxId="jqg_"+$t.p.id+"_"+rowid;$("input.cbox",ind).attr("id",newCboxId).attr("name",newCboxId)}}}if($t.p.inlineData===undefined){$t.p.inlineData={}}tmp=$.extend({},tmp,$t.p.inlineData,o.extraparam)}if(o.url==="clientArray"){tmp=$.extend({},tmp,tmp2);if($t.p.autoencode){$.each(tmp,function(n,v){tmp[n]=$.jgrid.htmlDecode(v)})}var k,resp=$($t).jqGrid("setRowData",rowid,tmp);$(ind).attr("editable","0");for(k=0;k<$t.p.savedRow.length;k++){if(String($t.p.savedRow[k].id)===String(oldRowId)){fr=k;break}}if(fr>=0){$t.p.savedRow.splice(fr,1)}$($t).triggerHandler("jqGridInlineAfterSaveRow",[rowid,resp,tmp,o]);if($.isFunction(o.aftersavefunc)){o.aftersavefunc.call($t,rowid,resp,tmp,o)}success=true;$(ind).removeClass("jqgrid-new-row").off("keydown")}else{$($t).jqGrid("progressBar",{method:"show",loadtype:o.saveui,htmlcontent:o.savetext});tmp3=$.extend({},tmp,tmp3);tmp3[idname]=$.jgrid.stripPref($t.p.idPrefix,tmp3[idname]);$.ajax($.extend({url:o.url,data:$.isFunction($t.p.serializeRowData)?$t.p.serializeRowData.call($t,tmp3):tmp3,type:o.mtype,async:false,complete:function(res,stat){$($t).jqGrid("progressBar",{method:"hide",loadtype:o.saveui,htmlcontent:o.savetext});if(stat==="success"){var ret=true,sucret,k;sucret=$($t).triggerHandler("jqGridInlineSuccessSaveRow",[res,rowid,o]);if(!$.isArray(sucret)){sucret=[true,tmp3]}if(sucret[0]&&$.isFunction(o.successfunc)){sucret=o.successfunc.call($t,res)}if($.isArray(sucret)){ret=sucret[0];tmp=sucret[1]||tmp}else{ret=sucret}if(ret===true){if($t.p.autoencode){$.each(tmp,function(n,v){tmp[n]=$.jgrid.htmlDecode(v)})}if(nullIfEmpty){$.each(tmp,function(n){if(tmp[n]==="null"){tmp[n]=""}})}tmp=$.extend({},tmp,tmp2);$($t).jqGrid("setRowData",rowid,tmp);$(ind).attr("editable","0");for(k=0;k<$t.p.savedRow.length;k++){if(String($t.p.savedRow[k].id)===String(rowid)){fr=k;break}}if(fr>=0){$t.p.savedRow.splice(fr,1)}$($t).triggerHandler("jqGridInlineAfterSaveRow",[rowid,res,tmp,o]);if($.isFunction(o.aftersavefunc)){o.aftersavefunc.call($t,rowid,res,tmp,o)}success=true;$(ind).removeClass("jqgrid-new-row").off("keydown")}else{$($t).triggerHandler("jqGridInlineErrorSaveRow",[rowid,res,stat,null,o]);if($.isFunction(o.errorfunc)){o.errorfunc.call($t,rowid,res,stat,null)}if(o.restoreAfterError===true){$($t).jqGrid("restoreRow",rowid,o)}}}},error:function(res,stat,err){$("#lui_"+$.jgrid.jqID($t.p.id)).hide();$($t).triggerHandler("jqGridInlineErrorSaveRow",[rowid,res,stat,err,o]);if($.isFunction(o.errorfunc)){o.errorfunc.call($t,rowid,res,stat,err)}else{var rT=res.responseText||res.statusText;try{$.jgrid.info_dialog(errors.errcap,'<div class="'+error+'">'+rT+"</div>",edit.bClose,{buttonalign:"right",styleUI:$t.p.styleUI})}catch(e){alert(rT)}}if(o.restoreAfterError===true){$($t).jqGrid("restoreRow",rowid,o)}}},$.jgrid.ajaxOptions,$t.p.ajaxRowOptions||{}))}}return success},restoreRow:function(rowid,afterrestorefunc){var args=$.makeArray(arguments).slice(1),o={};if($.type(args[0])==="object"){o=args[0]}else{if($.isFunction(afterrestorefunc)){o.afterrestorefunc=afterrestorefunc}}o=$.extend(true,{},$.jgrid.inlineEdit,o);return this.each(function(){var $t=this,fr=-1,ind,ares={},k;if(!$t.grid){return }ind=$($t).jqGrid("getInd",rowid,true);if(ind===false){return }var bfcr=$.isFunction(o.beforeCancelRow)?o.beforeCancelRow.call($t,o,rowid):undefined;if(bfcr===undefined){bfcr=true}if(!bfcr){return }for(k=0;k<$t.p.savedRow.length;k++){if(String($t.p.savedRow[k].id)===String(rowid)){fr=k;break}}if(fr>=0){if($.isFunction($.fn.datepicker)){try{$("input.hasDatepicker","#"+$.jgrid.jqID(ind.id)).datepicker("hide")}catch(e){}}$.each($t.p.colModel,function(){if($t.p.savedRow[fr].hasOwnProperty(this.name)){ares[this.name]=$t.p.savedRow[fr][this.name]}});$($t).jqGrid("setRowData",rowid,ares);$(ind).attr("editable","0").off("keydown");$t.p.savedRow.splice(fr,1);if($("#"+$.jgrid.jqID(rowid),"#"+$.jgrid.jqID($t.p.id)).hasClass("jqgrid-new-row")){setTimeout(function(){$($t).jqGrid("delRowData",rowid);$($t).jqGrid("showAddEditButtons")},0)}}$($t).triggerHandler("jqGridInlineAfterRestoreRow",[rowid]);if($.isFunction(o.afterrestorefunc)){o.afterrestorefunc.call($t,rowid)}})},addRow:function(p){p=$.extend(true,{rowID:null,initdata:{},position:"first",useDefValues:true,useFormatter:false,addRowParams:{extraparam:{}}},p||{});return this.each(function(){if(!this.grid){return }var $t=this;$t.p.beforeAction=true;var bfar=$.isFunction(p.beforeAddRow)?p.beforeAddRow.call($t,p.addRowParams):undefined;if(bfar===undefined){bfar=true}if(!bfar){$t.p.beforeAction=false;return }p.rowID=$.isFunction(p.rowID)?p.rowID.call($t,p):((p.rowID!=null)?p.rowID:$.jgrid.randId());if(p.useDefValues===true){$($t.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var opt=this.editoptions.defaultValue,tmp=$.isFunction(opt)?opt.call($t):opt;p.initdata[this.name]=tmp}})}$($t).jqGrid("addRowData",p.rowID,p.initdata,p.position);p.rowID=$t.p.idPrefix+p.rowID;$("#"+$.jgrid.jqID(p.rowID),"#"+$.jgrid.jqID($t.p.id)).addClass("jqgrid-new-row");if(p.useFormatter){$("#"+$.jgrid.jqID(p.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID($t.p.id)).click()}else{var opers=$t.p.prmNames,oper=opers.oper;p.addRowParams.extraparam[oper]=opers.addoper;$($t).jqGrid("editRow",p.rowID,p.addRowParams);$($t).jqGrid("setSelection",p.rowID)}})},inlineNav:function(elem,o){var $t=this[0],regional=$.jgrid.getRegional($t,"nav"),icons=$.jgrid.styleUI[$t.p.styleUI].inlinedit;o=$.extend(true,{edit:true,editicon:icons.icon_edit_nav,add:true,addicon:icons.icon_add_nav,save:true,saveicon:icons.icon_save_nav,cancel:true,cancelicon:icons.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:true,saveAfterSelect:false},regional,o||{});return this.each(function(){if(!this.grid||this.p.inlineNav){return }var gID=$.jgrid.jqID($t.p.id),disabled=$.trim($($t).jqGrid("getStyleUI",$t.p.styleUI+".common","disabled",true));if(!$t.p.navGrid){$($t).jqGrid("navGrid",elem,{refresh:false,edit:false,add:false,del:false,search:false,view:false})}if(!$($t).data("inlineNav")){$($t).data("inlineNav",o)}if($t.p.force_regional){o=$.extend(o,regional)}$t.p.inlineNav=true;if(o.addParams.useFormatter===true){var cm=$t.p.colModel,i;for(i=0;i<cm.length;i++){if(cm[i].formatter&&cm[i].formatter==="actions"){if(cm[i].formatoptions){var defaults={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},ap=$.extend(defaults,cm[i].formatoptions);o.addParams.addRowParams={keys:ap.keys,oneditfunc:ap.onEdit,successfunc:ap.onSuccess,url:ap.url,extraparam:ap.extraparam,aftersavefunc:ap.afterSave,errorfunc:ap.onError,afterrestorefunc:ap.afterRestore}}break}}}if(o.add){$($t).jqGrid("navButtonAdd",elem,{caption:o.addtext,title:o.addtitle,buttonicon:o.addicon,id:$t.p.id+"_iladd",internal:true,onClickButton:function(){if($t.p.beforeAction===undefined){$t.p.beforeAction=true}$($t).jqGrid("addRow",o.addParams);if(!o.addParams.useFormatter&&$t.p.beforeAction){$("#"+gID+"_ilsave").removeClass(disabled);$("#"+gID+"_ilcancel").removeClass(disabled);$("#"+gID+"_iladd").addClass(disabled);$("#"+gID+"_iledit").addClass(disabled)}}})}if(o.edit){$($t).jqGrid("navButtonAdd",elem,{caption:o.edittext,title:o.edittitle,buttonicon:o.editicon,id:$t.p.id+"_iledit",internal:true,onClickButton:function(){var sr=$($t).jqGrid("getGridParam","selrow");if(sr){if($t.p.beforeAction===undefined){$t.p.beforeAction=true}$($t).jqGrid("editRow",sr,o.editParams);if($t.p.beforeAction){$("#"+gID+"_ilsave").removeClass(disabled);$("#"+gID+"_ilcancel").removeClass(disabled);$("#"+gID+"_iladd").addClass(disabled);$("#"+gID+"_iledit").addClass(disabled)}}else{$.jgrid.viewModal("#alertmod_"+gID,{gbox:"#gbox_"+gID,jqm:true});$("#jqg_alrt").focus()}}})}if(o.save){$($t).jqGrid("navButtonAdd",elem,{caption:o.savetext||"",title:o.savetitle||"Save row",buttonicon:o.saveicon,id:$t.p.id+"_ilsave",internal:true,onClickButton:function(){var sr=$t.p.savedRow[0].id;if(sr){var opers=$t.p.prmNames,oper=opers.oper,tmpParams=o.editParams;if($("#"+$.jgrid.jqID(sr),"#"+gID).hasClass("jqgrid-new-row")){o.addParams.addRowParams.extraparam[oper]=opers.addoper;tmpParams=o.addParams.addRowParams}else{if(!o.editParams.extraparam){o.editParams.extraparam={}}o.editParams.extraparam[oper]=opers.editoper}if($($t).jqGrid("saveRow",sr,tmpParams)){$($t).jqGrid("showAddEditButtons")}}else{$.jgrid.viewModal("#alertmod_"+gID,{gbox:"#gbox_"+gID,jqm:true});$("#jqg_alrt").focus()}}});$("#"+gID+"_ilsave").addClass(disabled)}if(o.cancel){$($t).jqGrid("navButtonAdd",elem,{caption:o.canceltext||"",title:o.canceltitle||"Cancel row editing",buttonicon:o.cancelicon,id:$t.p.id+"_ilcancel",internal:true,onClickButton:function(){var sr=$t.p.savedRow[0].id,cancelPrm=o.editParams;if(sr){if($("#"+$.jgrid.jqID(sr),"#"+gID).hasClass("jqgrid-new-row")){cancelPrm=o.addParams.addRowParams}$($t).jqGrid("restoreRow",sr,cancelPrm);$($t).jqGrid("showAddEditButtons")}else{$.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+gID,jqm:true});$("#jqg_alrt").focus()}}});$("#"+gID+"_ilcancel").addClass(disabled)}if(o.restoreAfterSelect===true||o.saveAfterSelect===true){$($t).on("jqGridBeforeSelectRow.inlineNav",function(event,id){if($t.p.savedRow.length>0&&$t.p.inlineNav===true&&(id!==$t.p.selrow&&$t.p.selrow!==null)){if($t.p.selrow===o.addParams.rowID){$($t).jqGrid("delRowData",$t.p.selrow)}else{if(o.restoreAfterSelect===true){$($t).jqGrid("restoreRow",$t.p.selrow,o.editParams)}else{$($t).jqGrid("saveRow",$t.p.selrow,o.editParams)}}$($t).jqGrid("showAddEditButtons")}})}})},showAddEditButtons:function(){return this.each(function(){if(!this.grid){return }var gID=$.jgrid.jqID(this.p.id),disabled=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",true));$("#"+gID+"_ilsave").addClass(disabled);$("#"+gID+"_ilcancel").addClass(disabled);$("#"+gID+"_iladd").removeClass(disabled);$("#"+gID+"_iledit").removeClass(disabled)})},showSaveCancelButtons:function(){return this.each(function(){if(!this.grid){return }var gID=$.jgrid.jqID(this.p.id),disabled=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",true));$("#"+gID+"_ilsave").removeClass(disabled);$("#"+gID+"_ilcancel").removeClass(disabled);$("#"+gID+"_iladd").addClass(disabled);$("#"+gID+"_iledit").addClass(disabled)})}});if($.jgrid.msie()&&$.jgrid.msiever()===8){$.expr[":"].hidden=function(elem){return elem.offsetWidth===0||elem.offsetHeight===0||elem.style.display==="none"}}$.jgrid._multiselect=false;if($.ui){if($.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(item,selected){var ret=setSelected.call(this,item,selected);if(selected&&this.selectedList){var elt=this.element;this.selectedList.find("li").each(function(){if($(this).data("optionLink")){$(this).data("optionLink").remove().appendTo(elt)}})}return ret}}if($.ui.multiselect.prototype.destroy){$.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();if($.Widget===undefined){$.widget.prototype.destroy.apply(this,arguments)}else{$.Widget.prototype.destroy.apply(this,arguments)}}}$.jgrid._multiselect=true}}$.jgrid.extend({sortableColumns:function(tblrow){return this.each(function(){var ts=this,tid=$.jgrid.jqID(ts.p.id);function start(){ts.p.disableClick=true}function stop(){setTimeout(function(){ts.p.disableClick=false},50)}var sortable_opts={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+tid+"_cb,#jqgh_"+tid+"_rn,#jqgh_"+tid+"_subgrid),:hidden)",placeholder:{element:function(item){var el=$(document.createElement(item[0].nodeName)).addClass(item[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return el},update:function(self,p){p.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css("paddingTop")||0,10)-parseInt(self.currentItem.css("paddingBottom")||0,10));p.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css("paddingLeft")||0,10)-parseInt(self.currentItem.css("paddingRight")||0,10))}},update:function(event,ui){var p=$(ui.item).parent(),th=$(">th",p),colModel=ts.p.colModel,cmMap={},tid=ts.p.id+"_";$.each(colModel,function(i){cmMap[this.name]=i});var permutation=[];th.each(function(){var id=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(tid,"");if(cmMap.hasOwnProperty(id)){permutation.push(cmMap[id])}});$(ts).jqGrid("remapColumns",permutation,true,true);if($.isFunction(ts.p.sortable.update)){ts.p.sortable.update(permutation)}}};if(ts.p.sortable.options){$.extend(sortable_opts,ts.p.sortable.options)}else{if($.isFunction(ts.p.sortable)){ts.p.sortable={update:ts.p.sortable}}}if(sortable_opts.start){var s=sortable_opts.start;sortable_opts.start=function(e,ui){start();s.call(this,e,ui)}}else{sortable_opts.start=start}if(sortable_opts.stop){var st=sortable_opts.stop;sortable_opts.stop=function(e,ui){stop();st.call(this,e,ui)}}else{sortable_opts.stop=stop}if(ts.p.sortable.exclude){sortable_opts.items+=":not("+ts.p.sortable.exclude+")"}var $e=tblrow.sortable(sortable_opts),dataObj=$e.data("sortable")||$e.data("uiSortable");if(dataObj!=null){dataObj.data("sortable").floating=true}})},columnChooser:function(opts){var self=this,selector,select,colMap={},fixedCols=[],dopts,mopts,$dialogContent,multiselectData,listHeight,colModel=self.jqGrid("getGridParam","colModel"),colNames=self.jqGrid("getGridParam","colNames"),getMultiselectWidgetData=function($elem){return($.ui.multiselect.prototype&&$elem.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName))||$elem.data("ui-multiselect")||$elem.data("multiselect")},regional=$.jgrid.getRegional(this[0],"col");if($("#colchooser_"+$.jgrid.jqID(self[0].p.id)).length){return }selector=$('<div id="colchooser_'+self[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');select=$("select",selector);function insert(perm,i,v){var a,b;if(i>=0){a=perm.slice();b=a.splice(i,Math.max(perm.length-i,i));if(i>perm.length){i=perm.length}a[i]=v;return a.concat(b)}return perm}function call(fn,obj){if(!fn){return }if(typeof fn==="string"){if($.fn[fn]){$.fn[fn].apply(obj,$.makeArray(arguments).slice(2))}}else{if($.isFunction(fn)){fn.apply(obj,$.makeArray(arguments).slice(2))}}}function resize_select(){var widgetData=getMultiselectWidgetData(select),$thisDialogContent=widgetData.container.closest(".ui-dialog-content");if($thisDialogContent.length>0&&typeof $thisDialogContent[0].style==="object"){$thisDialogContent[0].style.width=""}else{$thisDialogContent.css("width","")}widgetData.selectedList.height(Math.max(widgetData.selectedContainer.height()-widgetData.selectedActions.outerHeight()-1,1));widgetData.availableList.height(Math.max(widgetData.availableContainer.height()-widgetData.availableActions.outerHeight()-1,1))}opts=$.extend({width:400,height:240,classname:null,done:function(perm){if(perm){self.jqGrid("remapColumns",perm,true)}},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(options){var buttons={};buttons[options.bSubmit]=function(){options.apply_perm();options.cleanup(false)};buttons[options.bCancel]=function(){options.cleanup(true)};return $.extend(true,{buttons:buttons,close:function(){options.cleanup(true)},modal:options.modal||false,resizable:options.resizable||true,width:options.width+70,resize:resize_select},options.dialog_opts||{})},apply_perm:function(){var perm=[];$("option",select).each(function(){if($(this).is(":selected")){self.jqGrid("showCol",colModel[this.value].name)}else{self.jqGrid("hideCol",colModel[this.value].name)}});$("option[selected]",select).each(function(){perm.push(parseInt(this.value,10))});$.each(perm,function(){delete colMap[colModel[parseInt(this,10)].name]});$.each(colMap,function(){var ti=parseInt(this,10);perm=insert(perm,ti,ti)});if(opts.done){opts.done.call(self,perm)}self.jqGrid("setGridWidth",self[0].p.width,self[0].p.shrinkToFit)},cleanup:function(calldone){call(opts.dlog,selector,"destroy");call(opts.msel,select,"destroy");selector.remove();if(calldone&&opts.done){opts.done.call(self)}},msel_opts:{}},regional,opts||{});if($.ui){if($.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return }opts.msel_opts=$.extend($.ui.multiselect.defaults,opts.msel_opts)}}if(opts.caption){selector.attr("title",opts.caption)}if(opts.classname){selector.addClass(opts.classname);select.addClass(opts.classname)}if(opts.width){$(">div",selector).css({width:opts.width,margin:"0 auto"});select.css("width",opts.width)}if(opts.height){$(">div",selector).css("height",opts.height);select.css("height",opts.height-10)}select.empty();$.each(colModel,function(i){colMap[this.name]=i;if(this.hidedlg){if(!this.hidden){fixedCols.push(i)}return }select.append("<option value='"+i+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(colNames[i])+"</option>")});dopts=$.isFunction(opts.dlog_opts)?opts.dlog_opts.call(self,opts):opts.dlog_opts;call(opts.dlog,selector,dopts);mopts=$.isFunction(opts.msel_opts)?opts.msel_opts.call(self,opts):opts.msel_opts;call(opts.msel,select,mopts);$dialogContent=$("#colchooser_"+$.jgrid.jqID(self[0].p.id));$dialogContent.css({margin:"auto"});$dialogContent.find(">div").css({width:"100%",height:"100%",margin:"auto"});multiselectData=getMultiselectWidgetData(select);multiselectData.container.css({width:"100%",height:"100%",margin:"auto"});multiselectData.selectedContainer.css({width:multiselectData.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});multiselectData.availableContainer.css({width:(100-multiselectData.options.dividerLocation*100)+"%",height:"100%",margin:"auto",boxSizing:"border-box"});multiselectData.selectedList.css("height","auto");multiselectData.availableList.css("height","auto");listHeight=Math.max(multiselectData.selectedList.height(),multiselectData.availableList.height());listHeight=Math.min(listHeight,$(window).height());multiselectData.selectedList.css("height",listHeight);multiselectData.availableList.css("height",listHeight);resize_select()},sortableRows:function(opts){return this.each(function(){var $t=this;if(!$t.grid){return }if($t.p.treeGrid){return }if($.fn.sortable){opts=$.extend({cursor:"move",axis:"y",items:" > .jqgrow"},opts||{});if(opts.start&&$.isFunction(opts.start)){opts._start_=opts.start;delete opts.start}else{opts._start_=false}if(opts.update&&$.isFunction(opts.update)){opts._update_=opts.update;delete opts.update}else{opts._update_=false}opts.start=function(ev,ui){$(ui.item).css("border-width","0");$("td",ui.item).each(function(i){this.style.width=$t.grid.cols[i].style.width});if($t.p.subGrid){var subgid=$(ui.item).attr("id");try{$($t).jqGrid("collapseSubGridRow",subgid)}catch(e){}}if(opts._start_){opts._start_.apply(this,[ev,ui])}};opts.update=function(ev,ui){$(ui.item).css("border-width","");if($t.p.rownumbers===true){$("td.jqgrid-rownum",$t.rows).each(function(i){$(this).html(i+1+(parseInt($t.p.page,10)-1)*parseInt($t.p.rowNum,10))})}if(opts._update_){opts._update_.apply(this,[ev,ui])}};$("tbody:first",$t).sortable(opts);$("tbody:first > .jqgrow",$t).disableSelection()}})},gridDnD:function(opts){return this.each(function(){var $t=this,i,cn;if(!$t.grid){return }if($t.p.treeGrid){return }if(!$.fn.draggable||!$.fn.droppable){return }function updateDnD(){var datadnd=$.data($t,"dnd");$("tr.jqgrow:not(.ui-draggable)",$t).draggable($.isFunction(datadnd.drag)?datadnd.drag.call($($t),datadnd):datadnd.drag)}var appender="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if($("#jqgrid_dnd")[0]===undefined){$("body").append(appender)}if(typeof opts==="string"&&opts==="updateDnD"&&$t.p.jqgdnd===true){updateDnD();return }var tid;opts=$.extend({drag:function(opts){return $.extend({start:function(ev,ui){var i,subgid;if($t.p.subGrid){subgid=$(ui.helper).attr("id");try{$($t).jqGrid("collapseSubGridRow",subgid)}catch(e){}}for(i=0;i<$.data($t,"dnd").connectWith.length;i++){if($($.data($t,"dnd").connectWith[i]).jqGrid("getGridParam","reccount")===0){$($.data($t,"dnd").connectWith[i]).jqGrid("addRowData","jqg_empty_row",{})}}ui.helper.addClass("ui-state-highlight");$("td",ui.helper).each(function(i){this.style.width=$t.grid.headers[i].width+"px"});if(opts.onstart&&$.isFunction(opts.onstart)){opts.onstart.call($($t),ev,ui)}},stop:function(ev,ui){var i,ids;if(ui.helper.dropped&&!opts.dragcopy){ids=$(ui.helper).attr("id");if(ids===undefined){ids=$(this).attr("id")}$($t).jqGrid("delRowData",ids)}for(i=0;i<$.data($t,"dnd").connectWith.length;i++){$($.data($t,"dnd").connectWith[i]).jqGrid("delRowData","jqg_empty_row")}if(opts.onstop&&$.isFunction(opts.onstop)){opts.onstop.call($($t),ev,ui)}}},opts.drag_opts||{})},drop:function(opts){return $.extend({accept:function(d){if(!$(d).hasClass("jqgrow")){return d}tid=$(d).closest("table.ui-jqgrid-btable");if(tid.length>0&&$.data(tid[0],"dnd")!==undefined){var cn=$.data(tid[0],"dnd").connectWith;return $.inArray("#"+$.jgrid.jqID(this.id),cn)!==-1?true:false}return false},drop:function(ev,ui){if(!$(ui.draggable).hasClass("jqgrow")){return }var accept=$(ui.draggable).attr("id");var getdata=ui.draggable.parent().parent().jqGrid("getRowData",accept);if(!opts.dropbyname){var j=0,tmpdata={},nm,key;var dropmodel=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(key in getdata){if(getdata.hasOwnProperty(key)){nm=dropmodel[j].name;if(!(nm==="cb"||nm==="rn"||nm==="subgrid")){if(getdata.hasOwnProperty(key)&&dropmodel[j]){tmpdata[nm]=getdata[key]}}j++}}getdata=tmpdata}catch(e){}}ui.helper.dropped=true;if($.data(tid[0],"dnd").beforedrop&&$.isFunction($.data(tid[0],"dnd").beforedrop)){var datatoinsert=$.data(tid[0],"dnd").beforedrop.call(this,ev,ui,getdata,$(tid[0]),$(this));if(datatoinsert!==undefined&&datatoinsert!==null&&typeof datatoinsert==="object"){getdata=datatoinsert}}if(ui.helper.dropped){var grid;if(opts.autoid){if($.isFunction(opts.autoid)){grid=opts.autoid.call(this,getdata)}else{grid=Math.ceil(Math.random()*1000);grid=opts.autoidprefix+grid}}$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",grid,getdata,opts.droppos)}if(opts.ondrop&&$.isFunction(opts.ondrop)){opts.ondrop.call(this,ev,ui,getdata)}}},opts.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},opts||{});if(!opts.connectWith){return }opts.connectWith=opts.connectWith.split(",");opts.connectWith=$.map(opts.connectWith,function(n){return $.trim(n)});$.data($t,"dnd",opts);if($t.p.reccount!==0&&!$t.p.jqgdnd){updateDnD()}$t.p.jqgdnd=true;for(i=0;i<opts.connectWith.length;i++){cn=opts.connectWith[i];$(cn).droppable($.isFunction(opts.drop)?opts.drop.call($($t),opts):opts.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id),req;if(!$t.grid||!$.fn.resizable){return }opts=$.extend({},opts||{});if(opts.alsoResize){opts._alsoResize_=opts.alsoResize;delete opts.alsoResize}else{opts._alsoResize_=false}if(opts.stop&&$.isFunction(opts.stop)){opts._stop_=opts.stop;delete opts.stop}else{opts._stop_=false}opts.stop=function(ev,ui){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()});$($t).jqGrid("setGridWidth",ui.size.width,opts.shrinkToFit);if(opts._stop_){opts._stop_.call($t,ev,ui)}if($t.p.caption){$("#gbox_"+gID).css({height:"auto"})}if($t.p.frozenColumns){if(req){clearTimeout(req)}req=setTimeout(function(){if(req){clearTimeout(req)}$("#"+gID).jqGrid("destroyFrozenColumns");$("#"+gID).jqGrid("setFrozenColumns")})}};if(opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else{opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID)}delete opts._alsoResize_;$("#gbox_"+gID).resizable(opts)})}});function _pivotfilter(fn,context){var i,value,result=[],length;if(!this||typeof fn!=="function"||(fn instanceof RegExp)){throw new TypeError()}length=this.length;for(i=0;i<length;i++){if(this.hasOwnProperty(i)){value=this[i];if(fn.call(context,value,i,this)){result.push(value);break}}}return result}$.assocArraySize=function(obj){var size=0,key;for(key in obj){if(obj.hasOwnProperty(key)){size++}}return size};$.jgrid.extend({pivotSetup:function(data,options){var columns=[],pivotrows=[],summaries=[],member=[],labels=[],groupOptions={grouping:true,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},headers=[],o=$.extend({rowTotals:false,rowTotalsText:"Total",colTotals:false,groupSummary:true,groupSummaryPos:"header",frozenStaticCols:false},options||{});this.each(function(){var row,rowindex,i,rowlen=data.length,xlen,ylen,aggrlen,tmp,newObj,r=0;function find(ar,fun,extra){var res;res=_pivotfilter.call(ar,fun,extra);return res.length>0?res[0]:null}function findGroup(item,index){var j=0,ret=true,i;for(i in item){if(item.hasOwnProperty(i)){if(item[i]!=this[j]){ret=false;break}j++;if(j>=this.length){break}}}if(ret){rowindex=index}return ret}function calculation(oper,v,field,rc,_cnt){var ret;if($.isFunction(oper)){ret=oper.call(this,v,field,rc)}else{switch(oper){case"sum":ret=parseFloat(v||0)+parseFloat((rc[field]||0));break;case"count":if(v===""||v==null){v=0}if(rc.hasOwnProperty(field)){ret=v+1}else{ret=0}break;case"min":if(v===""||v==null){ret=parseFloat(rc[field]||0)}else{ret=Math.min(parseFloat(v),parseFloat(rc[field]||0))}break;case"max":if(v===""||v==null){ret=parseFloat(rc[field]||0)}else{ret=Math.max(parseFloat(v),parseFloat(rc[field]||0))}break;case"avg":ret=(parseFloat(v||0)*(_cnt-1)+parseFloat(rc[field]||0))/_cnt;break}}return ret}function agregateFunc(row,aggr,value,curr){var arrln=aggr.length,i,label,j,jv,mainval="",swapvals=[],swapstr,_cntavg=1,lbl;if($.isArray(value)){jv=value.length;swapvals=value}else{jv=1;swapvals[0]=value}member=[];labels=[];member.root=0;for(j=0;j<jv;j++){var tmpmember=[],vl;for(i=0;i<arrln;i++){swapstr=typeof aggr[i].aggregator==="string"?aggr[i].aggregator:"cust";if(value==null){label=$.trim(aggr[i].member)+"_"+swapstr;vl=label;swapvals[0]=aggr[i].label||(swapstr+" "+$.trim(aggr[i].member))}else{vl=value[j].replace(/\s+/g,"");try{label=(arrln===1?mainval+vl:mainval+vl+"_"+swapstr+"_"+String(i))}catch(e){}swapvals[j]=value[j]}label=!isNaN(parseInt(label,10))?label+" ":label;if(aggr[i].aggregator==="avg"){lbl=rowindex===-1?pivotrows.length+"_"+label:rowindex+"_"+label;if(!_avg[lbl]){_avg[lbl]=1}else{_avg[lbl]++}_cntavg=_avg[lbl]}curr[label]=tmpmember[label]=calculation(aggr[i].aggregator,curr[label],aggr[i].member,row,_cntavg)}mainval+=(value&&value[j]!=null)?value[j].replace(/\s+/g,""):"";member[label]=tmpmember;labels[label]=swapvals[j]}return curr}if(o.rowTotals&&o.yDimension.length>0){var dn=o.yDimension[0].dataName;o.yDimension.splice(0,0,{dataName:dn});o.yDimension[0].converter=function(){return"_r_Totals"}}xlen=$.isArray(o.xDimension)?o.xDimension.length:0;ylen=o.yDimension.length;aggrlen=$.isArray(o.aggregates)?o.aggregates.length:0;if(xlen===0||aggrlen===0){throw ("xDimension or aggregates optiona are not set!")}var colc;for(i=0;i<xlen;i++){colc={name:o.xDimension[i].dataName,frozen:o.frozenStaticCols};if(o.xDimension[i].isGroupField==null){o.xDimension[i].isGroupField=true}colc=$.extend(true,colc,o.xDimension[i]);columns.push(colc)}var groupfields=xlen-1,tree={},_avg=[];while(r<rowlen){row=data[r];var xValue=[];var yValue=[];tmp={};i=0;do{xValue[i]=$.trim(row[o.xDimension[i].dataName]);tmp[o.xDimension[i].dataName]=xValue[i];i++}while(i<xlen);var k=0;rowindex=-1;newObj=find(pivotrows,findGroup,xValue);if(!newObj){k=0;if(ylen>=1){for(k=0;k<ylen;k++){yValue[k]=$.trim(row[o.yDimension[k].dataName]);if(o.yDimension[k].converter&&$.isFunction(o.yDimension[k].converter)){yValue[k]=o.yDimension[k].converter.call(this,yValue[k],xValue,yValue)}}tmp=agregateFunc(row,o.aggregates,yValue,tmp)}else{if(ylen===0){tmp=agregateFunc(row,o.aggregates,null,tmp)}}pivotrows.push(tmp)}else{if(rowindex>=0){k=0;if(ylen>=1){for(k=0;k<ylen;k++){yValue[k]=$.trim(row[o.yDimension[k].dataName]);if(o.yDimension[k].converter&&$.isFunction(o.yDimension[k].converter)){yValue[k]=o.yDimension[k].converter.call(this,yValue[k],xValue,yValue)}}newObj=agregateFunc(row,o.aggregates,yValue,newObj)}else{if(ylen===0){newObj=agregateFunc(row,o.aggregates,null,newObj)}}pivotrows[rowindex]=newObj}}var kj=0,current=null,existing=null,kk;for(kk in member){if(member.hasOwnProperty(kk)){if(kj===0){if(!tree.children||tree.children===undefined){tree={text:kk,level:0,children:[],label:kk}}current=tree.children}else{existing=null;for(i=0;i<current.length;i++){if(current[i].text===kk){existing=current[i];break}}if(existing){current=existing.children}else{current.push({children:[],text:kk,level:kj,fields:member[kk],label:labels[kk]});current=current[current.length-1].children}}kj++}}r++}_avg=null;var lastval=[],initColLen=columns.length,swaplen=initColLen;if(ylen>0){headers[ylen-1]={useColSpanStyle:false,groupHeaders:[]}}function list(items){var l,j,key,k,col;for(key in items){if(items.hasOwnProperty(key)){if(typeof items[key]!=="object"){if(key==="level"){if(lastval[items.level]===undefined){lastval[items.level]="";if(items.level>0&&items.text.indexOf("_r_Totals")===-1){headers[items.level-1]={useColSpanStyle:false,groupHeaders:[]}}}if(lastval[items.level]!==items.text&&items.children.length&&items.text.indexOf("_r_Totals")===-1){if(items.level>0){headers[items.level-1].groupHeaders.push({titleText:items.label,numberOfColumns:0});var collen=headers[items.level-1].groupHeaders.length-1,colpos=collen===0?swaplen:initColLen;if(items.level-1===(o.rowTotals?1:0)){if(collen>0){var l1=0;for(var kk=0;kk<collen;kk++){l1+=headers[items.level-1].groupHeaders[kk].numberOfColumns}if(l1){colpos=l1+xlen}}}if(columns[colpos]){headers[items.level-1].groupHeaders[collen].startColumnName=columns[colpos].name;headers[items.level-1].groupHeaders[collen].numberOfColumns=columns.length-colpos}initColLen=columns.length}}lastval[items.level]=items.text}if(items.level===ylen&&key==="level"&&ylen>0){if(aggrlen>1){var ll=1;for(l in items.fields){if(items.fields.hasOwnProperty(l)){if(ll===1){headers[ylen-1].groupHeaders.push({startColumnName:l,numberOfColumns:1,titleText:items.label||items.text})}ll++}}headers[ylen-1].groupHeaders[headers[ylen-1].groupHeaders.length-1].numberOfColumns=ll-1}else{headers.splice(ylen-1,1)}}}if(items[key]!=null&&typeof items[key]==="object"){list(items[key])}if(key==="level"){if(items.level>0&&(items.level===(ylen===0?items.level:ylen)||lastval[items.level].indexOf("_r_Totals")!==-1)){j=0;for(l in items.fields){if(items.fields.hasOwnProperty(l)){col={};for(k in o.aggregates[j]){if(o.aggregates[j].hasOwnProperty(k)){switch(k){case"member":case"label":case"aggregator":break;default:col[k]=o.aggregates[j][k]}}}if(aggrlen>1){col.name=l;col.label=o.aggregates[j].label||items.label}else{col.name=items.text;col.label=items.text==="_r_Totals"?o.rowTotalsText:items.label}columns.push(col);j++}}}}}}}list(tree);var nm;if(o.colTotals){var plen=pivotrows.length;while(plen--){for(i=xlen;i<columns.length;i++){nm=columns[i].name;if(!summaries[nm]){summaries[nm]=parseFloat(pivotrows[plen][nm]||0)}else{summaries[nm]+=parseFloat(pivotrows[plen][nm]||0)}}}}if(groupfields>0){for(i=0;i<groupfields;i++){if(columns[i].isGroupField){groupOptions.groupingView.groupField.push(columns[i].name);groupOptions.groupingView.groupSummary.push(o.groupSummary);groupOptions.groupingView.groupSummaryPos.push(o.groupSummaryPos)}}}else{groupOptions.grouping=false}groupOptions.sortname=columns[groupfields].name;groupOptions.groupingView.hideFirstGroupCol=true});return{colModel:columns,rows:pivotrows,groupOptions:groupOptions,groupHeaders:headers,summary:summaries}},jqPivot:function(data,pivotOpt,gridOpt,ajaxOpt){return this.each(function(){var $t=this;function pivot(data){if(!$.isArray(data)){throw"data provides is not an array"}var pivotGrid=jQuery($t).jqGrid("pivotSetup",data,pivotOpt),footerrow=$.assocArraySize(pivotGrid.summary)>0?true:false,query=$.jgrid.from.call($t,pivotGrid.rows),i,so,st,len;if(pivotOpt.ignoreCase){query=query.ignoreCase()}for(i=0;i<pivotGrid.groupOptions.groupingView.groupField.length;i++){so=pivotOpt.xDimension[i].sortorder?pivotOpt.xDimension[i].sortorder:"asc";st=pivotOpt.xDimension[i].sorttype?pivotOpt.xDimension[i].sorttype:"text";query.orderBy(pivotGrid.groupOptions.groupingView.groupField[i],so,st,"",st)}len=pivotOpt.xDimension.length;if(gridOpt.sortname){so=gridOpt.sortorder?gridOpt.sortorder:"asc";st="text";for(i=0;i<len;i++){if(pivotOpt.xDimension[i].dataName===gridOpt.sortname){st=pivotOpt.xDimension[i].sorttype?pivotOpt.xDimension[i].sorttype:"text";break}}query.orderBy(gridOpt.sortname,so,st,"",st)}else{if(pivotGrid.groupOptions.sortname&&len){so=pivotOpt.xDimension[len-1].sortorder?pivotOpt.xDimension[len-1].sortorder:"asc";st=pivotOpt.xDimension[len-1].sorttype?pivotOpt.xDimension[len-1].sorttype:"text";query.orderBy(pivotGrid.groupOptions.sortname,so,st,"",st)}}jQuery($t).jqGrid($.extend(true,{datastr:$.extend(query.select(),footerrow?{userdata:pivotGrid.summary}:{}),datatype:"jsonstring",footerrow:footerrow,userDataOnFooter:footerrow,colModel:pivotGrid.colModel,viewrecords:true,sortname:pivotOpt.xDimension[0].dataName},pivotGrid.groupOptions,gridOpt||{}));var gHead=pivotGrid.groupHeaders;if(gHead.length){for(i=0;i<gHead.length;i++){if(gHead[i]&&gHead[i].groupHeaders.length){jQuery($t).jqGrid("setGroupHeaders",gHead[i])}}}if(pivotOpt.frozenStaticCols){jQuery($t).jqGrid("setFrozenColumns")}}if(typeof data==="string"){$.ajax($.extend({url:data,dataType:"json",success:function(response){pivot($.jgrid.getAccessor(response,ajaxOpt&&ajaxOpt.reader?ajaxOpt.reader:"rows"))}},ajaxOpt||{}))}else{pivot(data)}})}});$.jgrid.extend({setSubGrid:function(){return this.each(function(){var $t=this,cm,i,classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].subgrid,suboptions={plusicon:classes.icon_plus,minusicon:classes.icon_minus,openicon:classes.icon_open,expandOnLoad:false,selectOnExpand:false,selectOnCollapse:false,reloadOnExpand:true};$t.p.subGridOptions=$.extend(suboptions,$t.p.subGridOptions||{});$t.p.colNames.unshift("");$t.p.colModel.unshift({name:"subgrid",width:$.jgrid.cell_width?$t.p.subGridWidth+$t.p.cellLayout:$t.p.subGridWidth,sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});cm=$t.p.subGridModel;if(cm[0]){cm[0].align=$.extend([],cm[0].align||[]);for(i=0;i<cm[0].name.length;i++){cm[0].align[i]=cm[0].align[i]||"left"}}})},addSubGridCell:function(pos,iRow){var prp="",ic,sid,icb;this.each(function(){prp=this.formatCol(pos,iRow);sid=this.p.id;ic=this.p.subGridOptions.plusicon;icb=$.jgrid.styleUI[(this.p.styleUI||"jQueryUI")].common});return'<td role="gridcell" aria-describedby="'+sid+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+prp+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+icb.icon_base+" "+ic+"'></span></a></td>"},addSubGrid:function(pos,sind){return this.each(function(){var ts=this;if(!ts.grid){return }var base=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].base,common=$.jgrid.styleUI[(ts.p.styleUI||"jQueryUI")].common;var subGridCell=function(trdiv,cell,pos){var tddiv=$("<td align='"+ts.p.subGridModel[0].align[pos]+"'></td>").html(cell);$(trdiv).append(tddiv)};var subGridXml=function(sjxml,sbid){var tddiv,i,sgmap,dummy=$("<table class='"+base.rowTable+" ui-common-table'><tbody></tbody></table>"),trdiv=$("<tr></tr>");for(i=0;i<ts.p.subGridModel[0].name.length;i++){tddiv=$("<th class='"+base.headerBox+" ui-th-subgrid ui-th-column ui-th-"+ts.p.direction+"'></th>");$(tddiv).html(ts.p.subGridModel[0].name[i]);$(tddiv).width(ts.p.subGridModel[0].width[i]);$(trdiv).append(tddiv)}$(dummy).append(trdiv);if(sjxml){sgmap=ts.p.xmlReader.subgrid;$(sgmap.root+" "+sgmap.row,sjxml).each(function(){trdiv=$("<tr class='"+common.content+" ui-subtblcell'></tr>");if(sgmap.repeatitems===true){$(sgmap.cell,this).each(function(i){subGridCell(trdiv,$(this).text()||"&#160;",i)})}else{var f=ts.p.subGridModel[0].mapping||ts.p.subGridModel[0].name;if(f){for(i=0;i<f.length;i++){subGridCell(trdiv,$(f[i],this).text()||"&#160;",i)}}}$(dummy).append(trdiv)})}var pID=$("table:first",ts.grid.bDiv).attr("id")+"_";$("#"+$.jgrid.jqID(pID+sbid)).append(dummy);ts.grid.hDiv.loading=false;$("#load_"+$.jgrid.jqID(ts.p.id)).hide();return false};var subGridJson=function(sjxml,sbid){var tddiv,result,i,cur,sgmap,j,dummy=$("<table class='"+base.rowTable+" ui-common-table'><tbody></tbody></table>"),trdiv=$("<tr></tr>");for(i=0;i<ts.p.subGridModel[0].name.length;i++){tddiv=$("<th class='"+base.headerBox+" ui-th-subgrid ui-th-column ui-th-"+ts.p.direction+"'></th>");$(tddiv).html(ts.p.subGridModel[0].name[i]);$(tddiv).width(ts.p.subGridModel[0].width[i]);$(trdiv).append(tddiv)}$(dummy).append(trdiv);if(sjxml){sgmap=ts.p.jsonReader.subgrid;result=$.jgrid.getAccessor(sjxml,sgmap.root);if(result!==undefined){for(i=0;i<result.length;i++){cur=result[i];trdiv=$("<tr class='"+common.content+" ui-subtblcell'></tr>");if(sgmap.repeatitems===true){if(sgmap.cell){cur=cur[sgmap.cell]}for(j=0;j<cur.length;j++){subGridCell(trdiv,cur[j]||"&#160;",j)}}else{var f=ts.p.subGridModel[0].mapping||ts.p.subGridModel[0].name;if(f.length){for(j=0;j<f.length;j++){subGridCell(trdiv,cur[f[j]]||"&#160;",j)}}}$(dummy).append(trdiv)}}}var pID=$("table:first",ts.grid.bDiv).attr("id")+"_";$("#"+$.jgrid.jqID(pID+sbid)).append(dummy);ts.grid.hDiv.loading=false;$("#load_"+$.jgrid.jqID(ts.p.id)).hide();return false};var populatesubgrid=function(rd){var sid,dp,i,j;sid=$(rd).attr("id");dp={nd_:(new Date().getTime())};dp[ts.p.prmNames.subgridid]=sid;if(!ts.p.subGridModel[0]){return false}if(ts.p.subGridModel[0].params){for(j=0;j<ts.p.subGridModel[0].params.length;j++){for(i=0;i<ts.p.colModel.length;i++){if(ts.p.colModel[i].name===ts.p.subGridModel[0].params[j]){dp[ts.p.colModel[i].name]=$("td:eq("+i+")",rd).text().replace(/\&#160\;/ig,"")}}}}if(!ts.grid.hDiv.loading){ts.grid.hDiv.loading=true;$("#load_"+$.jgrid.jqID(ts.p.id)).show();if(!ts.p.subgridtype){ts.p.subgridtype=ts.p.datatype}if($.isFunction(ts.p.subgridtype)){ts.p.subgridtype.call(ts,dp)}else{ts.p.subgridtype=ts.p.subgridtype.toLowerCase()}switch(ts.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:ts.p.mtype,url:$.isFunction(ts.p.subGridUrl)?ts.p.subGridUrl.call(ts,dp):ts.p.subGridUrl,dataType:ts.p.subgridtype,data:$.isFunction(ts.p.serializeSubGridData)?ts.p.serializeSubGridData.call(ts,dp):dp,complete:function(sxml){if(ts.p.subgridtype==="xml"){subGridXml(sxml.responseXML,sid)}else{subGridJson($.jgrid.parse(sxml.responseText),sid)}sxml=null}},$.jgrid.ajaxOptions,ts.p.ajaxSubgridOptions||{}));break}}return false};var _id,pID,atd,nhc=0,bfsc,$r;$.each(ts.p.colModel,function(){if(this.hidden===true||this.name==="rn"||this.name==="cb"){nhc++}});var len=ts.rows.length,i=1,hsret,ishsg=$.isFunction(ts.p.isHasSubGrid);if(sind!==undefined&&sind>0){i=sind;len=sind+1}while(i<len){if($(ts.rows[i]).hasClass("jqgrow")){if(ts.p.scroll){$(ts.rows[i].cells[pos]).off("click")}hsret=null;if(ishsg){var hsret=ts.p.isHasSubGrid.call(ts,ts.rows[i].id)}if(hsret===false){ts.rows[i].cells[pos].innerHTML=""}else{$(ts.rows[i].cells[pos]).on("click",function(){var tr=$(this).parent("tr")[0];pID=ts.p.id;_id=tr.id;$r=$("#"+pID+"_"+_id+"_expandedContent");if($(this).hasClass("sgcollapsed")){bfsc=$(ts).triggerHandler("jqGridSubGridBeforeExpand",[pID+"_"+_id,_id]);bfsc=(bfsc===false||bfsc==="stop")?false:true;if(bfsc&&$.isFunction(ts.p.subGridBeforeExpand)){bfsc=ts.p.subGridBeforeExpand.call(ts,pID+"_"+_id,_id)}if(bfsc===false){return false}if(ts.p.subGridOptions.reloadOnExpand===true||(ts.p.subGridOptions.reloadOnExpand===false&&!$r.hasClass("ui-subgrid"))){atd=pos>=1?"<td colspan='"+pos+"'>&#160;</td>":"";$(tr).after("<tr role='row' id='"+pID+"_"+_id+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+atd+"<td class='"+common.content+" subgrid-cell'><span class='"+common.icon_base+" "+ts.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(ts.p.colNames.length-1-nhc,10)+"' class='"+common.content+" subgrid-data'><div id="+pID+"_"+_id+" class='tablediv'></div></td></tr>");$(ts).triggerHandler("jqGridSubGridRowExpanded",[pID+"_"+_id,_id]);if($.isFunction(ts.p.subGridRowExpanded)){ts.p.subGridRowExpanded.call(ts,pID+"_"+_id,_id)}else{populatesubgrid(tr)}}else{$r.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded")}$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+common.icon_base+" "+ts.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");if(ts.p.subGridOptions.selectOnExpand){$(ts).jqGrid("setSelection",_id)}}else{if($(this).hasClass("sgexpanded")){bfsc=$(ts).triggerHandler("jqGridSubGridRowColapsed",[pID+"_"+_id,_id]);bfsc=(bfsc===false||bfsc==="stop")?false:true;if(bfsc&&$.isFunction(ts.p.subGridRowColapsed)){bfsc=ts.p.subGridRowColapsed.call(ts,pID+"_"+_id,_id)}if(bfsc===false){return false}if(ts.p.subGridOptions.reloadOnExpand===true){$r.remove(".ui-subgrid")}else{if($r.hasClass("ui-subgrid")){$r.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded")}}$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+common.icon_base+" "+ts.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");if(ts.p.subGridOptions.selectOnCollapse){$(ts).jqGrid("setSelection",_id)}}}return false})}}i++}if(ts.p.subGridOptions.expandOnLoad===true){$(ts.rows).filter(".jqgrow").each(function(index,row){$(row.cells[0]).click()})}ts.subGridXml=function(xml,sid){subGridXml(xml,sid)};ts.subGridJson=function(json,sid){subGridJson(json,sid)}})},expandSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return }if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgcollapsed",rc)[0];if(sgc){$(sgc).trigger("click")}}}})},collapseSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return }if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgexpanded",rc)[0];if(sgc){$(sgc).trigger("click")}}}})},toggleSubGridRow:function(rowid){return this.each(function(){var $t=this;if(!$t.grid&&!rowid){return }if($t.p.subGrid===true){var rc=$(this).jqGrid("getInd",rowid,true);if(rc){var sgc=$("td.sgcollapsed",rc)[0];if(sgc){$(sgc).trigger("click")}else{sgc=$("td.sgexpanded",rc)[0];if(sgc){$(sgc).trigger("click")}}}}})}});$.jgrid.extend({setTreeNode:function(i,len){return this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return }var expCol=$t.p.expColInd,expanded=$t.p.treeReader.expanded_field,isLeaf=$t.p.treeReader.leaf_field,level=$t.p.treeReader.level_field,icon=$t.p.treeReader.icon_field,loaded=$t.p.treeReader.loaded,lft,rgt,curLevel,ident,lftpos,twrap,ldat,lf,common=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].common,index=i;$($t).triggerHandler("jqGridBeforeSetTreeNode",[index,len]);if($.isFunction($t.p.beforeSetTreeNode)){$t.p.beforeSetTreeNode.call($t,index,len)}while(i<len){var ind=$.jgrid.stripPref($t.p.idPrefix,$t.rows[i].id),dind=$t.p._index[ind],expan;ldat=$t.p.data[dind];if($t.p.treeGridModel==="nested"){if(!ldat[isLeaf]){lft=parseInt(ldat[$t.p.treeReader.left_field],10);rgt=parseInt(ldat[$t.p.treeReader.right_field],10);ldat[isLeaf]=(rgt===lft+1)?"true":"false";$t.rows[i].cells[$t.p._treeleafpos].innerHTML=ldat[isLeaf]}}curLevel=parseInt(ldat[level],10);if($t.p.tree_root_level===0){ident=curLevel+1;lftpos=curLevel}else{ident=curLevel;lftpos=curLevel-1}twrap="<div class='tree-wrap tree-wrap-"+$t.p.direction+"' style='width:"+(ident*18)+"px;'>";twrap+="<div style='"+($t.p.direction==="rtl"?"right:":"left:")+(lftpos*18)+"px;' class='"+common.icon_base+" ";if(ldat[loaded]!==undefined){if(ldat[loaded]==="true"||ldat[loaded]===true){ldat[loaded]=true}else{ldat[loaded]=false}}if(ldat[isLeaf]==="true"||ldat[isLeaf]===true){twrap+=((ldat[icon]!==undefined&&ldat[icon]!=="")?ldat[icon]:$t.p.treeIcons.leaf)+" tree-leaf treeclick";ldat[isLeaf]=true;lf="leaf"}else{ldat[isLeaf]=false;lf=""}ldat[expanded]=((ldat[expanded]==="true"||ldat[expanded]===true)?true:false)&&(ldat[loaded]||ldat[loaded]===undefined);if(ldat[expanded]===false){twrap+=((ldat[isLeaf]===true)?"'":$t.p.treeIcons.plus+" tree-plus treeclick'")}else{twrap+=((ldat[isLeaf]===true)?"'":$t.p.treeIcons.minus+" tree-minus treeclick'")}twrap+="></div></div>";$($t.rows[i].cells[expCol]).wrapInner("<span class='cell-wrapper"+lf+"'></span>").prepend(twrap);if(curLevel!==parseInt($t.p.tree_root_level,10)){expan=$($t).jqGrid("isVisibleNode",ldat);if(!expan){$($t.rows[i]).css("display","none")}}$($t.rows[i].cells[expCol]).find("div.treeclick").on("click",function(e){var target=e.target||e.srcElement,ind2=$.jgrid.stripPref($t.p.idPrefix,$(target,$t.rows).closest("tr.jqgrow")[0].id),pos=$t.p._index[ind2];if(!$t.p.data[pos][isLeaf]){if($t.p.data[pos][expanded]){$($t).jqGrid("collapseRow",$t.p.data[pos]);$($t).jqGrid("collapseNode",$t.p.data[pos])}else{$($t).jqGrid("expandRow",$t.p.data[pos]);$($t).jqGrid("expandNode",$t.p.data[pos])}}return false});if($t.p.ExpandColClick===true){$($t.rows[i].cells[expCol]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(e){var target=e.target||e.srcElement,ind2=$.jgrid.stripPref($t.p.idPrefix,$(target,$t.rows).closest("tr.jqgrow")[0].id),pos=$t.p._index[ind2];if(!$t.p.data[pos][isLeaf]){if($t.p.data[pos][expanded]){$($t).jqGrid("collapseRow",$t.p.data[pos]);$($t).jqGrid("collapseNode",$t.p.data[pos])}else{$($t).jqGrid("expandRow",$t.p.data[pos]);$($t).jqGrid("expandNode",$t.p.data[pos])}}$($t).jqGrid("setSelection",ind2);return false})}i++}$($t).triggerHandler("jqGridAfterSetTreeNode",[index,len]);if($.isFunction($t.p.afterSetTreeNode)){$t.p.afterSetTreeNode.call($t,index,len)}})},setTreeGrid:function(){return this.each(function(){var $t=this,i=0,pico,ecol=false,nm,key,tkey,dupcols=[],classes=$.jgrid.styleUI[($t.p.styleUI||"jQueryUI")].treegrid;if(!$t.p.treeGrid){return }if(!$t.p.treedatatype){$.extend($t.p,{treedatatype:$t.p.datatype})}if($t.p.loadonce){$t.p.treedatatype="local"}$t.p.subGrid=false;$t.p.altRows=false;$t.p.pgbuttons=false;$t.p.pginput=false;$t.p.gridview=true;if($t.p.rowTotal===null){$t.p.rowNum=10000}$t.p.multiselect=false;$t.p.rowList=[];$t.p.expColInd=0;pico=classes.icon_plus;if($t.p.styleUI==="jQueryUI"){pico+=($t.p.direction==="rtl"?"w":"e")}$t.p.treeIcons=$.extend({plus:pico,minus:classes.icon_minus,leaf:classes.icon_leaf},$t.p.treeIcons||{});if($t.p.treeGridModel==="nested"){$t.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},$t.p.treeReader)}else{if($t.p.treeGridModel==="adjacency"){$t.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},$t.p.treeReader)}}for(key in $t.p.colModel){if($t.p.colModel.hasOwnProperty(key)){nm=$t.p.colModel[key].name;if(nm===$t.p.ExpandColumn&&!ecol){ecol=true;$t.p.expColInd=i}i++;for(tkey in $t.p.treeReader){if($t.p.treeReader.hasOwnProperty(tkey)&&$t.p.treeReader[tkey]===nm){dupcols.push(nm)}}}}$.each($t.p.treeReader,function(j,n){if(n&&$.inArray(n,dupcols)===-1){if(j==="leaf_field"){$t.p._treeleafpos=i}i++;$t.p.colNames.push(n);$t.p.colModel.push({name:n,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})})},expandRow:function(record){this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return }var childern=$($t).jqGrid("getNodeChildren",record),expanded=$t.p.treeReader.expanded_field,rowid=record[$t.p.localReader.id],ret=$($t).triggerHandler("jqGridBeforeExpandTreeGridRow",[rowid,record,childern]);if(ret===undefined){ret=true}if(ret&&$.isFunction($t.p.beforeExpandTreeGridRow)){ret=$t.p.beforeExpandTreeGridRow.call($t,rowid,record,childern)}if(ret===false){return }$(childern).each(function(){var id=$t.p.idPrefix+$.jgrid.getAccessor(this,$t.p.localReader.id);$($($t).jqGrid("getGridRowById",id)).css("display","");if(this[expanded]){$($t).jqGrid("expandRow",this)}});$($t).triggerHandler("jqGridAfterExpandTreeGridRow",[rowid,record,childern]);if($.isFunction($t.p.afterExpandTreeGridRow)){$t.p.afterExpandTreeGridRow.call($t,rowid,record,childern)}})},collapseRow:function(record){this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return }var childern=$($t).jqGrid("getNodeChildren",record),expanded=$t.p.treeReader.expanded_field,rowid=record[$t.p.localReader.id],ret=$($t).triggerHandler("jqGridBeforeCollapseTreeGridRow",[rowid,record,childern]);if(ret===undefined){ret=true}if(ret&&$.isFunction($t.p.beforeCollapseTreeGridRow)){ret=$t.p.beforeCollapseTreeGridRow.call($t,rowid,record,childern)}if(ret===false){return }$(childern).each(function(){var id=$t.p.idPrefix+$.jgrid.getAccessor(this,$t.p.localReader.id);$($($t).jqGrid("getGridRowById",id)).css("display","none");if(this[expanded]){$($t).jqGrid("collapseRow",this)}});$($t).triggerHandler("jqGridAfterCollapseTreeGridRow",[rowid,record,childern]);if($.isFunction($t.p.afterCollapseTreeGridRow)){$t.p.afterCollapseTreeGridRow.call($t,rowid,record,childern)}})},getRootNodes:function(currentview){var result=[];this.each(function(){var $t=this,level,parent_id,view;if(!$t.grid||!$t.p.treeGrid){return }if(typeof currentview!=="boolean"){currentview=false}if(currentview){view=$($t).jqGrid("getRowData",null,true)}else{view=$t.p.data}switch($t.p.treeGridModel){case"nested":level=$t.p.treeReader.level_field;$(view).each(function(){if(parseInt(this[level],10)===parseInt($t.p.tree_root_level,10)){if(currentview){result.push($t.p.data[$t.p._index[this[$t.p.keyName]]])}else{result.push(this)}}});break;case"adjacency":parent_id=$t.p.treeReader.parent_id_field;$(view).each(function(){if(this[parent_id]===null||String(this[parent_id]).toLowerCase()==="null"){if(currentview){result.push($t.p.data[$t.p._index[this[$t.p.keyName]]])}else{result.push(this)}}});break}});return result},getNodeDepth:function(rc){var ret=null;this.each(function(){if(!this.grid||!this.p.treeGrid){return }var $t=this;switch($t.p.treeGridModel){case"nested":var level=$t.p.treeReader.level_field;ret=parseInt(rc[level],10)-parseInt($t.p.tree_root_level,10);break;case"adjacency":ret=$($t).jqGrid("getNodeAncestors",rc).length;break}});return ret},getNodeParent:function(rc){var result=null;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return }switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.p.data).each(function(){if(parseInt(this[levelc],10)===level-1&&parseInt(this[lftc],10)<lft&&parseInt(this[rgtc],10)>rgt){result=this;return false}});break;case"adjacency":var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id,ind=rc[dtid],pos=$t.p._index[ind];while(pos--){if(String($t.p.data[pos][dtid])===String($.jgrid.stripPref($t.p.idPrefix,rc[parent_id]))){result=$t.p.data[pos];break}}break}});return result},getNodeChildren:function(rc,currentview){var result=[];this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return }var i,len=currentview?this.rows.length:this.p.data.length,row;switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);for(i=0;i<len;i++){row=currentview?$t.p.data[$t.p._index[this.rows[i].id]]:$t.p.data[i];if(row&&parseInt(row[levelc],10)===level+1&&parseInt(row[lftc],10)>lft&&parseInt(row[rgtc],10)<rgt){result.push(row)}}break;case"adjacency":var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id;for(i=0;i<len;i++){row=currentview?$t.p.data[$t.p._index[this.rows[i].id]]:$t.p.data[i];if(row&&String(row[parent_id])===String($.jgrid.stripPref($t.p.idPrefix,rc[dtid]))){result.push(row)}}break}});return result},getFullTreeNode:function(rc,expand){var result=[];this.each(function(){var $t=this,len,expanded=$t.p.treeReader.expanded_field;if(!$t.grid||!$t.p.treeGrid){return }if(expand==null||typeof expand!=="boolean"){expand=false}switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.p.data).each(function(){if(parseInt(this[levelc],10)>=level&&parseInt(this[lftc],10)>=lft&&parseInt(this[lftc],10)<=rgt){if(expand){this[expanded]=true}result.push(this)}});break;case"adjacency":if(rc){result.push(rc);var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id;$(this.p.data).each(function(i){len=result.length;for(i=0;i<len;i++){if(String($.jgrid.stripPref($t.p.idPrefix,result[i][dtid]))===String(this[parent_id])){if(expand){this[expanded]=true}result.push(this);break}}})}break}});return result},getNodeAncestors:function(rc,reverse,expanded){var ancestors=[];if(reverse===undefined){reverse=false}this.each(function(){if(!this.grid||!this.p.treeGrid){return }if(expanded===undefined){expanded=false}else{expanded=this.p.treeReader.expanded_field}var parent=$(this).jqGrid("getNodeParent",rc);while(parent){if(expanded){try{parent[expanded]=true}catch(etn){}}if(reverse){ancestors.unshift(parent)}else{ancestors.push(parent)}parent=$(this).jqGrid("getNodeParent",parent)}});return ancestors},isVisibleNode:function(rc){var result=true;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return }var ancestors=$($t).jqGrid("getNodeAncestors",rc),expanded=$t.p.treeReader.expanded_field;$(ancestors).each(function(){result=result&&this[expanded];if(!result){return false}})});return result},isNodeLoaded:function(rc){var result;this.each(function(){var $t=this;if(!$t.grid||!$t.p.treeGrid){return }var isLeaf=$t.p.treeReader.leaf_field,loaded=$t.p.treeReader.loaded;if(rc!==undefined){if(rc[loaded]!==undefined){result=rc[loaded]}else{if(rc[isLeaf]||$($t).jqGrid("getNodeChildren",rc).length>0){result=true}else{result=false}}}else{result=false}});return result},setLeaf:function(rc,state,collapsed){return this.each(function(){var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+id,this.grid.bDiv)[0],isLeaf=this.p.treeReader.leaf_field;try{var dr=this.p._index[id];if(dr!=null){this.p.data[dr][isLeaf]=state}}catch(E){}if(state===true){$("div.treeclick",rc1).removeClass(this.p.treeIcons.minus+" tree-minus "+this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.leaf+" tree-leaf")}else{if(state===false){var ico=this.p.treeIcons.minus+" tree-minus";if(collapsed){ico=this.p.treeIcons.plus+" tree-plus"}$("div.treeclick",rc1).removeClass(this.p.treeIcons.leaf+" tree-leaf").addClass(ico)}}})},reloadNode:function(rc,reloadcurrent){return this.each(function(){if(!this.grid||!this.p.treeGrid){return }var rid=this.p.localReader.id,currselection=this.p.selrow;$(this).jqGrid("delChildren",rc[rid]);if(reloadcurrent===undefined){reloadcurrent=false}if(!reloadcurrent){if(!jQuery._data(this,"events").jqGridAfterSetTreeNode){$(this).on("jqGridAfterSetTreeNode.reloadNode",function(){var isLeaf=this.p.treeReader.leaf_field;if(this.p.reloadnode){var rc=this.p.reloadnode,chld=$(this).jqGrid("getNodeChildren",rc);if(rc[isLeaf]&&chld.length){$(this).jqGrid("setLeaf",rc,false)}else{if(!rc[isLeaf]&&chld.length===0){$(this).jqGrid("setLeaf",rc,true)}}}this.p.reloadnode=false})}}var expanded=this.p.treeReader.expanded_field,parent=this.p.treeReader.parent_id_field,loaded=this.p.treeReader.loaded,level=this.p.treeReader.level_field,isLeaf=this.p.treeReader.leaf_field,lft=this.p.treeReader.left_field,rgt=this.p.treeReader.right_field;var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+id,this.grid.bDiv)[0];rc[expanded]=true;if(!rc[isLeaf]){$("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}this.p.treeANode=rc1.rowIndex;this.p.datatype=this.p.treedatatype;this.p.reloadnode=rc;if(reloadcurrent){this.p.treeANode=rc1.rowIndex>0?rc1.rowIndex-1:1;$(this).jqGrid("delRowData",id)}if(this.p.treeGridModel==="nested"){$(this).jqGrid("setGridParam",{postData:{nodeid:id,n_left:rc[lft],n_right:rc[rgt],n_level:rc[level]}})}else{$(this).jqGrid("setGridParam",{postData:{nodeid:id,parentid:rc[parent],n_level:rc[level]}})}$(this).trigger("reloadGrid");rc[loaded]=true;if(this.p.treeGridModel==="nested"){$(this).jqGrid("setGridParam",{selrow:currselection,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{$(this).jqGrid("setGridParam",{selrow:currselection,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(rc){return this.each(function(){if(!this.grid||!this.p.treeGrid){return }var $t=this,expanded=this.p.treeReader.expanded_field,parent=this.p.treeReader.parent_id_field,loaded=this.p.treeReader.loaded,level=this.p.treeReader.level_field,lft=this.p.treeReader.left_field,rgt=this.p.treeReader.right_field;if(!rc[expanded]){var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+this.p.idPrefix+$.jgrid.jqID(id),this.grid.bDiv)[0],position=this.p._index[id],ret=$($t).triggerHandler("jqGridBeforeExpandTreeGridNode",[id,rc]);if(ret===undefined){ret=true}if(ret&&$.isFunction(this.p.beforeExpandTreeGridNode)){ret=this.p.beforeExpandTreeGridNode.call(this,id,rc)}if(ret===false){return }if($(this).jqGrid("isNodeLoaded",this.p.data[position])){rc[expanded]=true;$("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}else{if(!this.grid.hDiv.loading){rc[expanded]=true;$("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=rc1.rowIndex;this.p.datatype=this.p.treedatatype;if(this.p.treeGridModel==="nested"){$(this).jqGrid("setGridParam",{postData:{nodeid:id,n_left:rc[lft],n_right:rc[rgt],n_level:rc[level]}})}else{$(this).jqGrid("setGridParam",{postData:{nodeid:id,parentid:rc[parent],n_level:rc[level]}})}$(this).trigger("reloadGrid");rc[loaded]=true;if(this.p.treeGridModel==="nested"){$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}})}else{$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})}}}$($t).triggerHandler("jqGridAfterExpandTreeGridNode",[id,rc]);if($.isFunction(this.p.afterExpandTreeGridNode)){this.p.afterExpandTreeGridNode.call(this,id,rc)}}})},collapseNode:function(rc){return this.each(function(){if(!this.grid||!this.p.treeGrid){return }var expanded=this.p.treeReader.expanded_field,$t=this;if(rc[expanded]){var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+this.p.idPrefix+$.jgrid.jqID(id),this.grid.bDiv)[0],ret=$($t).triggerHandler("jqGridBeforeCollapseTreeGridNode",[id,rc]);if(ret===undefined){ret=true}if(ret&&$.isFunction(this.p.beforeCollapseTreeGridNode)){ret=this.p.beforeCollapseTreeGridNode.call(this,id,rc)}rc[expanded]=false;if(ret===false){return }$("div.treeclick",rc1).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus");$($t).triggerHandler("jqGridAfterCollapseTreeGridNode",[id,rc]);if($.isFunction(this.p.afterCollapseTreeGridNode)){this.p.afterCollapseTreeGridNode.call(this,id,rc)}}})},SortTree:function(sortname,newDir,st,datefmt){return this.each(function(){if(!this.grid||!this.p.treeGrid){return }var i,len,rec,records=[],$t=this,query,roots,rt=$(this).jqGrid("getRootNodes",$t.p.search);query=$.jgrid.from.call(this,rt);query.orderBy(sortname,newDir,st,datefmt);roots=query.select();for(i=0,len=roots.length;i<len;i++){rec=roots[i];records.push(rec);$(this).jqGrid("collectChildrenSortTree",records,rec,sortname,newDir,st,datefmt)}$.each(records,function(index){var id=$.jgrid.getAccessor(this,$t.p.localReader.id);$("#"+$.jgrid.jqID($t.p.id)+" tbody tr:eq("+index+")").after($("tr#"+$.jgrid.jqID(id),$t.grid.bDiv))});query=null;roots=null;records=null})},searchTree:function(recs){var i=recs.length||0,ancestors=[],lid,roots=[],result=[],tid,alen,rlen,j,k;this.each(function(){if(!this.grid||!this.p.treeGrid){return }if(i){lid=this.p.localReader.id;while(i--){ancestors=$(this).jqGrid("getNodeAncestors",recs[i],true,true);ancestors.push(recs[i]);tid=ancestors[0][lid];if($.inArray(tid,roots)!==-1){for(j=0,alen=ancestors.length;j<alen;j++){var found=false;for(k=0,rlen=result.length;k<rlen;k++){if(ancestors[j][lid]===result[k][lid]){found=true;break}}if(!found){result.push(ancestors[j])}}continue}else{roots.push(tid)}result=result.concat(ancestors)}}});return result},collectChildrenSortTree:function(records,rec,sortname,newDir,st,datefmt){return this.each(function(){if(!this.grid||!this.p.treeGrid){return }var i,len,child,ch,query,children;ch=$(this).jqGrid("getNodeChildren",rec,this.p.search);query=$.jgrid.from.call(this,ch);query.orderBy(sortname,newDir,st,datefmt);children=query.select();for(i=0,len=children.length;i<len;i++){child=children[i];records.push(child);$(this).jqGrid("collectChildrenSortTree",records,child,sortname,newDir,st,datefmt)}})},setTreeRow:function(rowid,data){var success=false;this.each(function(){var t=this;if(!t.grid||!t.p.treeGrid){return }success=$(t).jqGrid("setRowData",rowid,data)});return success},delTreeNode:function(rowid){return this.each(function(){var $t=this,rid=$t.p.localReader.id,i,left=$t.p.treeReader.left_field,right=$t.p.treeReader.right_field,myright,width,res,key;if(!$t.grid||!$t.p.treeGrid){return }var rc=$t.p._index[rowid];if(rc!==undefined){myright=parseInt($t.p.data[rc][right],10);width=myright-parseInt($t.p.data[rc][left],10)+1;var dr=$($t).jqGrid("getFullTreeNode",$t.p.data[rc]);if(dr.length>0){for(i=0;i<dr.length;i++){$($t).jqGrid("delRowData",dr[i][rid])}}if($t.p.treeGridModel==="nested"){res=$.jgrid.from.call($t,$t.p.data).greater(left,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)-width}}}res=$.jgrid.from.call($t,$t.p.data).greater(right,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)-width}}}}}})},delChildren:function(rowid){return this.each(function(){var $t=this,rid=$t.p.localReader.id,left=$t.p.treeReader.left_field,right=$t.p.treeReader.right_field,myright,width,res,key;if(!$t.grid||!$t.p.treeGrid){return }var rc=$t.p._index[rowid];if(rc!==undefined){myright=parseInt($t.p.data[rc][right],10);width=myright-parseInt($t.p.data[rc][left],10)+1;var dr=$($t).jqGrid("getFullTreeNode",$t.p.data[rc]);if(dr.length>0){for(var i=0;i<dr.length;i++){if(dr[i][rid]!==rowid){$($t).jqGrid("delRowData",dr[i][rid])}}}if($t.p.treeGridModel==="nested"){res=$.jgrid.from($t.p.data).greater(left,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)-width}}}res=$.jgrid.from($t.p.data).greater(right,myright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)-width}}}}}})},addChildNode:function(nodeid,parentid,data,expandData){var $t=this[0];if(data){var expanded=$t.p.treeReader.expanded_field,isLeaf=$t.p.treeReader.leaf_field,level=$t.p.treeReader.level_field,parent=$t.p.treeReader.parent_id_field,left=$t.p.treeReader.left_field,right=$t.p.treeReader.right_field,loaded=$t.p.treeReader.loaded,method,parentindex,parentdata,parentlevel,i,len,max=0,rowind=parentid,leaf,maxright;if(expandData===undefined){expandData=false}if(nodeid==null){i=$t.p.data.length-1;if(i>=0){while(i>=0){max=Math.max(max,parseInt($t.p.data[i][$t.p.localReader.id],10));i--}}nodeid=max+1}var prow=$($t).jqGrid("getInd",parentid);leaf=false;if(parentid===undefined||parentid===null||parentid===""){parentid=null;rowind=null;method="last";parentlevel=$t.p.tree_root_level;i=$t.p.data.length+1}else{method="after";parentindex=$t.p._index[parentid];parentdata=$t.p.data[parentindex];parentid=parentdata[$t.p.localReader.id];parentlevel=parseInt(parentdata[level],10)+1;var childs=$($t).jqGrid("getFullTreeNode",parentdata);if(childs.length){i=childs[childs.length-1][$t.p.localReader.id];rowind=i;i=$($t).jqGrid("getInd",rowind)+1}else{i=$($t).jqGrid("getInd",parentid)+1}if(parentdata[isLeaf]){leaf=true;parentdata[expanded]=true;$($t.rows[prow]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass($t.p.treeIcons.leaf+" tree-leaf").addClass($t.p.treeIcons.minus+" tree-minus");$t.p.data[parentindex][isLeaf]=false;parentdata[loaded]=true}}len=i+1;if(data[expanded]===undefined){data[expanded]=false}if(data[loaded]===undefined){data[loaded]=false}data[level]=parentlevel;if(data[isLeaf]===undefined){data[isLeaf]=true}if($t.p.treeGridModel==="adjacency"){data[parent]=parentid}if($t.p.treeGridModel==="nested"){var query,res,key;if(parentid!==null){maxright=parseInt(parentdata[right],10);query=$.jgrid.from.call($t,$t.p.data);query=query.greaterOrEquals(right,maxright,{stype:"integer"});res=query.select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=res[key][left]>maxright?parseInt(res[key][left],10)+2:res[key][left];res[key][right]=res[key][right]>=maxright?parseInt(res[key][right],10)+2:res[key][right]}}}data[left]=maxright;data[right]=maxright+1}else{maxright=parseInt($($t).jqGrid("getCol",right,false,"max"),10);res=$.jgrid.from.call($t,$t.p.data).greater(left,maxright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][left]=parseInt(res[key][left],10)+2}}}res=$.jgrid.from.call($t,$t.p.data).greater(right,maxright,{stype:"integer"}).select();if(res.length){for(key in res){if(res.hasOwnProperty(key)){res[key][right]=parseInt(res[key][right],10)+2}}}data[left]=maxright+1;data[right]=maxright+2}}if(parentid===null||$($t).jqGrid("isNodeLoaded",parentdata)||leaf){$($t).jqGrid("addRowData",nodeid,data,method,rowind);$($t).jqGrid("setTreeNode",i,len)}if(parentdata&&!parentdata[expanded]&&expandData){$($t.rows[prow]).find("div.treeclick").click()}}}});$.fn.jqDrag=function(h){return i(this,h,"d")};$.fn.jqResize=function(h,ar){return i(this,h,"r",ar)};$.jqDnR={dnr:{},e:0,drag:function(v){if(M.k=="d"){E.css({left:M.X+v.pageX-M.pX,top:M.Y+v.pageY-M.pY})}else{E.css({width:Math.max(v.pageX-M.pX+M.W,0),height:Math.max(v.pageY-M.pY+M.H,0)});if(M1){E1.css({width:Math.max(v.pageX-M1.pX+M1.W,0),height:Math.max(v.pageY-M1.pY+M1.H,0)})}}return false},stop:function(){$(document).off("mousemove",J.drag).off("mouseup",J.stop)}};var J=$.jqDnR,M=J.dnr,E=J.e,E1,M1,i=function(e,h,k,aR){return e.each(function(){h=(h)?$(h,e):e;h.on("mousedown",{e:e,k:k},function(v){var d=v.data,p={};E=d.e;E1=aR?$(aR):false;if(E.css("position")!="relative"){try{E.position(p)}catch(e){}}M={X:p.left||f("left")||0,Y:p.top||f("top")||0,W:f("width")||E[0].scrollWidth||0,H:f("height")||E[0].scrollHeight||0,pX:v.pageX,pY:v.pageY,k:d.k};if(E1&&d.k!="d"){M1={X:p.left||f1("left")||0,Y:p.top||f1("top")||0,W:E1[0].offsetWidth||f1("width")||0,H:E1[0].offsetHeight||f1("height")||0,pX:v.pageX,pY:v.pageY,k:d.k}}else{M1=false}if($("input.hasDatepicker",E[0])[0]){try{$("input.hasDatepicker",E[0]).datepicker("hide")}catch(dpe){}}$(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop);return false})})},f=function(k){return parseInt(E.css(k),10)||false},f1=function(k){return parseInt(E1.css(k),10)||false};$.fn.tinyDraggable=function(options){var settings=$.extend({handle:0,exclude:0},options);return this.each(function(){var dx,dy,el=$(this),handle=settings.handle?$(settings.handle,el):el;handle.on({mousedown:function(e){if(settings.exclude&&~$.inArray(e.target,$(settings.exclude,el))){return }e.preventDefault();var os=el.offset();dx=e.pageX-os.left,dy=e.pageY-os.top;$(document).on("mousemove.drag",function(e){el.offset({top:e.pageY-dy,left:e.pageX-dx})})},mouseup:function(e){$(document).off("mousemove.drag")}})})};$.fn.jqm=function(o){var p={overlay:50,closeoverlay:true,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:F,ajaxText:"",target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){if(this._jqm){return H[this._jqm].c=$.extend({},H[this._jqm].c,o)}s++;this._jqm=s;H[s]={c:$.extend(p,$.jqm.params,o),a:F,w:$(this).addClass("jqmID"+s),s:s};if(p.trigger){$(this).jqmAddTrigger(p.trigger)}})};$.fn.jqmAddClose=function(e){return hs(this,e,"jqmHide")};$.fn.jqmAddTrigger=function(e){return hs(this,e,"jqmShow")};$.fn.jqmShow=function(t){return this.each(function(){$.jqm.open(this._jqm,t)})};$.fn.jqmHide=function(t){return this.each(function(){$.jqm.close(this._jqm,t)})};$.jqm={hash:{},open:function(s,t){var h=H[s],c=h.c,cc="."+c.closeClass,z=(parseInt(h.w.css("z-index")));z=(z>0)?z:3000;var o=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":z-1,opacity:c.overlay/100});if(h.a){return F}h.t=t;h.a=true;h.w.css("z-index",z);if(c.modal){if(!A[0]){setTimeout(function(){new L("bind")},1)}A.push(s)}else{if(c.overlay>0){if(c.closeoverlay){h.w.jqmAddClose(o)}}else{o=F}}h.o=(o)?o.addClass(c.overlayClass).prependTo("body"):F;if(c.ajax){var r=c.target||h.w,u=c.ajax;r=(typeof r==="string")?$(r,h.w):$(r);u=(u.substr(0,1)==="@")?$(t).attr(u.substring(1)):u;r.html(c.ajaxText).load(u,function(){if(c.onLoad){c.onLoad.call(this,h)}if(cc){h.w.jqmAddClose($(cc,h.w))}e(h)})}else{if(cc){h.w.jqmAddClose($(cc,h.w))}}if(c.toTop&&h.o){h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o)}(c.onShow)?c.onShow(h):h.w.show();e(h);return F},close:function(s){var h=H[s];if(!h.a){return F}h.a=F;if(A[0]){A.pop();if(!A[0]){new L("unbind")}}if(h.c.toTop&&h.o){$("#jqmP"+h.w[0]._jqm).after(h.w).remove()}if(h.c.onHide){h.c.onHide(h)}else{h.w.hide();if(h.o){h.o.remove()}}return F},params:{}};var s=0,H=$.jqm.hash,A=[],F=false,e=function(h){if(h.c.focusField===undefined){h.c.focusField=0}if(h.c.focusField>=0){f(h)}},f=function(h){try{$(":input:visible",h.w)[parseInt(h.c.focusField,10)].focus()}catch(_){}},L=function(t){$(document)[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m)},m=function(e){var h=H[A[A.length-1]],r=(!$(e.target).parents(".jqmID"+h.s)[0]);if(r){$(".jqmID"+h.s).each(function(){var $self=$(this),offset=$self.offset();if(offset.top<=e.pageY&&e.pageY<=offset.top+$self.height()&&offset.left<=e.pageX&&e.pageX<=offset.left+$self.width()){r=false;return false}});f(h)}return !r},hs=function(w,t,c){return w.each(function(){var s=this._jqm;$(t).each(function(){if(!this[c]){this[c]=[];$(this).click(function(){for(var i in {jqmShow:1,jqmHide:1}){for(var s in this[i]){if(H[this[i][s]]){H[this[i][s]].w[i](this)}}}return F})}this[c].push(s)})})};$.fmatter={};$.extend($.fmatter,{isBoolean:function(o){return typeof o==="boolean"},isObject:function(o){return(o&&(typeof o==="object"||$.isFunction(o)))||false},isString:function(o){return typeof o==="string"},isNumber:function(o){return typeof o==="number"&&isFinite(o)},isValue:function(o){return(this.isObject(o)||this.isString(o)||this.isNumber(o)||this.isBoolean(o))},isEmpty:function(o){if(!this.isString(o)&&this.isValue(o)){return false}if(!this.isValue(o)){return true}o=$.trim(o).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return o===""}});$.fn.fmatter=function(formatType,cellval,opts,rwd,act){var v=cellval;opts=$.extend({},$.jgrid.getRegional(this,"formatter"),opts);try{v=$.fn.fmatter[formatType].call(this,cellval,opts,rwd,act)}catch(fe){}return v};$.fmatter.util={NumberFormat:function(nData,opts){if(!$.fmatter.isNumber(nData)){nData*=1}if($.fmatter.isNumber(nData)){var bNegative=(nData<0);var sOutput=String(nData);var sDecimalSeparator=opts.decimalSeparator||".";var nDotIndex;if($.fmatter.isNumber(opts.decimalPlaces)){var nDecimalPlaces=opts.decimalPlaces;var nDecimal=Math.pow(10,nDecimalPlaces);sOutput=String(Math.round(nData*nDecimal)/nDecimal);nDotIndex=sOutput.lastIndexOf(".");if(nDecimalPlaces>0){if(nDotIndex<0){sOutput+=sDecimalSeparator;nDotIndex=sOutput.length-1}else{if(sDecimalSeparator!=="."){sOutput=sOutput.replace(".",sDecimalSeparator)}}while((sOutput.length-1-nDotIndex)<nDecimalPlaces){sOutput+="0"}}}if(opts.thousandsSeparator){var sThousandsSeparator=opts.thousandsSeparator;nDotIndex=sOutput.lastIndexOf(sDecimalSeparator);nDotIndex=(nDotIndex>-1)?nDotIndex:sOutput.length;var sNewOutput=sOutput.substring(nDotIndex);var nCount=-1,i;for(i=nDotIndex;i>0;i--){nCount++;if((nCount%3===0)&&(i!==nDotIndex)&&(!bNegative||(i>1))){sNewOutput=sThousandsSeparator+sNewOutput}sNewOutput=sOutput.charAt(i-1)+sNewOutput}sOutput=sNewOutput}sOutput=(opts.prefix)?opts.prefix+sOutput:sOutput;sOutput=(opts.suffix)?sOutput+opts.suffix:sOutput;return sOutput}return nData}};$.fn.fmatter.defaultFormat=function(cellval,opts){return($.fmatter.isValue(cellval)&&cellval!=="")?cellval:opts.defaultValue||"&#160;"};$.fn.fmatter.email=function(cellval,opts){if(!$.fmatter.isEmpty(cellval)){return'<a href="mailto:'+cellval+'">'+cellval+"</a>"}return $.fn.fmatter.defaultFormat(cellval,opts)};$.fn.fmatter.checkbox=function(cval,opts){var op=$.extend({},opts.checkbox),ds;if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if(op.disabled===true){ds='disabled="disabled"'}else{ds=""}if($.fmatter.isEmpty(cval)||cval===undefined){cval=$.fn.fmatter.defaultFormat(cval,op)}cval=String(cval);cval=(cval+"").toLowerCase();var bchk=cval.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+bchk+' value="'+cval+'" offval="no" '+ds+"/>"};$.fn.fmatter.link=function(cellval,opts){var op={target:opts.target};var target="";if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if(op.target){target="target="+op.target}if(!$.fmatter.isEmpty(cellval)){return"<a "+target+' href="'+cellval+'">'+cellval+"</a>"}return $.fn.fmatter.defaultFormat(cellval,opts)};$.fn.fmatter.showlink=function(cellval,opts){var op={baseLinkUrl:opts.baseLinkUrl,showAction:opts.showAction,addParam:opts.addParam||"",target:opts.target,idName:opts.idName},target="",idUrl;if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if(op.target){target="target="+op.target}idUrl=op.baseLinkUrl+op.showAction+"?"+op.idName+"="+opts.rowId+op.addParam;if($.fmatter.isString(cellval)||$.fmatter.isNumber(cellval)){return"<a "+target+' href="'+idUrl+'">'+cellval+"</a>"}return $.fn.fmatter.defaultFormat(cellval,opts)};$.fn.fmatter.integer=function(cellval,opts){var op=$.extend({},opts.integer);if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if($.fmatter.isEmpty(cellval)){return op.defaultValue}return $.fmatter.util.NumberFormat(cellval,op)};$.fn.fmatter.number=function(cellval,opts){var op=$.extend({},opts.number);if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if($.fmatter.isEmpty(cellval)){return op.defaultValue}return $.fmatter.util.NumberFormat(cellval,op)};$.fn.fmatter.currency=function(cellval,opts){var op=$.extend({},opts.currency);if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if($.fmatter.isEmpty(cellval)){return op.defaultValue}return $.fmatter.util.NumberFormat(cellval,op)};$.fn.fmatter.date=function(cellval,opts,rwd,act){var op=$.extend({},opts.date);if(opts.colModel!==undefined&&opts.colModel.formatoptions!==undefined){op=$.extend({},op,opts.colModel.formatoptions)}if(!op.reformatAfterEdit&&act==="edit"){return $.fn.fmatter.defaultFormat(cellval,opts)}if(!$.fmatter.isEmpty(cellval)){return $.jgrid.parseDate.call(this,op.srcformat,cellval,op.newformat,op)}return $.fn.fmatter.defaultFormat(cellval,opts)};$.fn.fmatter.select=function(cellval,opts){cellval=String(cellval);var oSelect=false,ret=[],sep,delim;if(opts.colModel.formatoptions!==undefined){oSelect=opts.colModel.formatoptions.value;sep=opts.colModel.formatoptions.separator===undefined?":":opts.colModel.formatoptions.separator;delim=opts.colModel.formatoptions.delimiter===undefined?";":opts.colModel.formatoptions.delimiter}else{if(opts.colModel.editoptions!==undefined){oSelect=opts.colModel.editoptions.value;sep=opts.colModel.editoptions.separator===undefined?":":opts.colModel.editoptions.separator;delim=opts.colModel.editoptions.delimiter===undefined?";":opts.colModel.editoptions.delimiter}}if(oSelect){var msl=(opts.colModel.editoptions!=null&&opts.colModel.editoptions.multiple===true)===true?true:false,scell=[],sv;if(msl){scell=cellval.split(",");scell=$.map(scell,function(n){return $.trim(n)})}if($.fmatter.isString(oSelect)){var so=oSelect.split(delim),j=0,i;for(i=0;i<so.length;i++){sv=so[i].split(sep);if(sv.length>2){sv[1]=$.map(sv,function(n,i){if(i>0){return n}}).join(sep)}if(msl){if($.inArray(sv[0],scell)>-1){ret[j]=sv[1];j++}}else{if($.trim(sv[0])===$.trim(cellval)){ret[0]=sv[1];break}}}}else{if($.fmatter.isObject(oSelect)){if(msl){ret=$.map(scell,function(n){return oSelect[n]})}else{ret[0]=oSelect[cellval]||""}}}}cellval=ret.join(", ");return cellval===""?$.fn.fmatter.defaultFormat(cellval,opts):cellval};$.fn.fmatter.rowactions=function(act){var $tr=$(this).closest("tr.jqgrow"),rid=$tr.attr("id"),$id=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),$grid=$("#"+$id),$t=$grid[0],p=$t.p,cm=p.colModel[$.jgrid.getCellIndex(this)],$actionsDiv=cm.frozen?$("tr#"+rid+" td:eq("+$.jgrid.getCellIndex(this)+") > div",$grid):$(this).parent(),op={extraparam:{}},saverow=function(rowid,res){if($.isFunction(op.afterSave)){op.afterSave.call($t,rowid,res)}$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide()},restorerow=function(rowid){if($.isFunction(op.afterRestore)){op.afterRestore.call($t,rowid)}$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide()};if(cm.formatoptions!==undefined){var formatoptionsClone=$.extend(true,{},cm.formatoptions);op=$.extend(op,formatoptionsClone)}if(p.editOptions!==undefined){op.editOptions=p.editOptions}if(p.delOptions!==undefined){op.delOptions=p.delOptions}if($tr.hasClass("jqgrid-new-row")){op.extraparam[p.prmNames.oper]=p.prmNames.addoper}var actop={keys:op.keys,oneditfunc:op.onEdit,successfunc:op.onSuccess,url:op.url,extraparam:op.extraparam,aftersavefunc:saverow,errorfunc:op.onError,afterrestorefunc:restorerow,restoreAfterError:op.restoreAfterError,mtype:op.mtype};switch(act){case"edit":$grid.jqGrid("editRow",rid,actop);$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").hide();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").show();$grid.triggerHandler("jqGridAfterGridComplete");break;case"save":if($grid.jqGrid("saveRow",rid,actop)){$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide();$grid.triggerHandler("jqGridAfterGridComplete")}break;case"cancel":$grid.jqGrid("restoreRow",rid,restorerow);$actionsDiv.find("div.ui-inline-edit,div.ui-inline-del").show();$actionsDiv.find("div.ui-inline-save,div.ui-inline-cancel").hide();$grid.triggerHandler("jqGridAfterGridComplete");break;case"del":$grid.jqGrid("delGridRow",rid,op.delOptions);break;case"formedit":$grid.jqGrid("setSelection",rid);$grid.jqGrid("editGridRow",rid,op.editOptions);break}};$.fn.fmatter.actions=function(cellval,opts){var op={keys:false,editbutton:true,delbutton:true,editformbutton:false},rowid=opts.rowId,str="",ocl,nav=$.jgrid.getRegional(this,"nav"),classes=$.jgrid.styleUI[(opts.styleUI||"jQueryUI")].fmatter,common=$.jgrid.styleUI[(opts.styleUI||"jQueryUI")].common;if(opts.colModel.formatoptions!==undefined){op=$.extend(op,opts.colModel.formatoptions)}if(rowid===undefined||$.fmatter.isEmpty(rowid)){return""}var hover="onmouseover=jQuery(this).addClass('"+common.hover+"'); onmouseout=jQuery(this).removeClass('"+common.hover+"');  ";if(op.editformbutton){ocl="id='jEditButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+hover;str+="<div title='"+nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_edit+"'></span></div>"}else{if(op.editbutton){ocl="id='jEditButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+hover;str+="<div title='"+nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_edit+"'></span></div>"}}if(op.delbutton){ocl="id='jDeleteButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+hover;str+="<div title='"+nav.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_del+"'></span></div>"}ocl="id='jSaveButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+hover;str+="<div title='"+nav.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_save+"'></span></div>";ocl="id='jCancelButton_"+rowid+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+hover;str+="<div title='"+nav.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+ocl+"><span class='"+common.icon_base+" "+classes.icon_cancel+"'></span></div>";return"<div style='margin-left:8px;'>"+str+"</div>"};$.unformat=function(cellval,options,pos,cnt){var ret,formatType=options.colModel.formatter,op=options.colModel.formatoptions||{},sep,re=/([\.\*\_\'\(\)\{\}\+\?\\])/g,unformatFunc=options.colModel.unformat||($.fn.fmatter[formatType]&&$.fn.fmatter[formatType].unformat);if(unformatFunc!==undefined&&$.isFunction(unformatFunc)){ret=unformatFunc.call(this,$(cellval).text(),options,cellval)}else{if(formatType!==undefined&&$.fmatter.isString(formatType)){var opts=$.jgrid.getRegional(this,"formatter")||{},stripTag;switch(formatType){case"integer":op=$.extend({},opts.integer,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text().replace(stripTag,"");break;case"number":op=$.extend({},opts.number,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text().replace(stripTag,"").replace(op.decimalSeparator,".");break;case"currency":op=$.extend({},opts.currency,op);sep=op.thousandsSeparator.replace(re,"\\$1");stripTag=new RegExp(sep,"g");ret=$(cellval).text();if(op.prefix&&op.prefix.length){ret=ret.substr(op.prefix.length)}if(op.suffix&&op.suffix.length){ret=ret.substr(0,ret.length-op.suffix.length)}ret=ret.replace(stripTag,"").replace(op.decimalSeparator,".");break;case"checkbox":var cbv=(options.colModel.editoptions)?options.colModel.editoptions.value.split(":"):["Yes","No"];ret=$("input",cellval).is(":checked")?cbv[0]:cbv[1];break;case"select":ret=$.unformat.select(cellval,options,pos,cnt);break;case"actions":return"";default:ret=$(cellval).text()}}}return ret!==undefined?ret:cnt===true?$(cellval).text():$.jgrid.htmlDecode($(cellval).html())};$.unformat.select=function(cellval,options,pos,cnt){var ret=[];var cell=$(cellval).text();if(cnt===true){return cell}var op=$.extend({},options.colModel.formatoptions!==undefined?options.colModel.formatoptions:options.colModel.editoptions),sep=op.separator===undefined?":":op.separator,delim=op.delimiter===undefined?";":op.delimiter;if(op.value){var oSelect=op.value,msl=op.multiple===true?true:false,scell=[],sv;if(msl){scell=cell.split(",");scell=$.map(scell,function(n){return $.trim(n)})}if($.fmatter.isString(oSelect)){var so=oSelect.split(delim),j=0,i;for(i=0;i<so.length;i++){sv=so[i].split(sep);if(sv.length>2){sv[1]=$.map(sv,function(n,i){if(i>0){return n}}).join(sep)}if(msl){if($.inArray($.trim(sv[1]),scell)>-1){ret[j]=sv[0];j++}}else{if($.trim(sv[1])===$.trim(cell)){ret[0]=sv[0];break}}}}else{if($.fmatter.isObject(oSelect)||$.isArray(oSelect)){if(!msl){scell[0]=cell}ret=$.map(scell,function(n){var rv;$.each(oSelect,function(i,val){if(val===n){rv=i;return false}});if(rv!==undefined){return rv}})}}return ret.join(", ")}return cell||""};$.unformat.date=function(cellval,opts){var op=$.jgrid.getRegional(this,"formatter.date")||{};if(opts.formatoptions!==undefined){op=$.extend({},op,opts.formatoptions)}if(!$.fmatter.isEmpty(cellval)){return $.jgrid.parseDate.call(this,op.newformat,cellval,op.srcformat,op)}return $.fn.fmatter.defaultFormat(cellval,opts)};var dragging,placeholders=$();$.fn.html5sortable=function(options){var method=String(options);options=$.extend({connectWith:false},options);return this.each(function(){if(/^enable|disable|destroy$/.test(method)){var items=$(this).children($(this).data("items")).attr("draggable",method==="enable");if(method==="destroy"){items.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}return }var isHandle,index,items=$(this).children(options.items);var placeholder=$("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+options.placeholderClass+'">').html("&nbsp;");items.find(options.handle).mousedown(function(){isHandle=true}).mouseup(function(){isHandle=false});$(this).data("items",options.items);placeholders=placeholders.add(placeholder);if(options.connectWith){$(options.connectWith).add(this).data("connectWith",options.connectWith)}items.attr("draggable","true").on("dragstart.h5s",function(e){if(options.handle&&!isHandle){return false}isHandle=false;var dt=e.originalEvent.dataTransfer;dt.effectAllowed="move";dt.setData("Text","dummy");index=(dragging=$(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){if(!dragging){return }dragging.removeClass("sortable-dragging").show();placeholders.detach();if(index!==dragging.index()){dragging.parent().trigger("sortupdate",{item:dragging,startindex:index,endindex:dragging.index()})}dragging=null}).not("a[href], img").on("selectstart.h5s",function(){this.dragDrop&&this.dragDrop();return false}).end().add([this,placeholder]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){if(!items.is(dragging)&&options.connectWith!==$(dragging).parent().data("connectWith")){return true}if(e.type==="drop"){e.stopPropagation();placeholders.filter(":visible").after(dragging);dragging.trigger("dragend.h5s");return false}e.preventDefault();e.originalEvent.dataTransfer.dropEffect="move";if(items.is(this)){if(options.forcePlaceholderSize){placeholder.height(dragging.outerHeight())}dragging.hide();$(this)[placeholder.index()<$(this).index()?"after":"before"](placeholder);placeholders.not(placeholder).detach()}else{if(!placeholders.is(this)&&!$(this).children(options.items).length){placeholders.detach();$(this).append(placeholder)}}return false})})};$.extend($.jgrid,{stringify:function(obj){return JSON.stringify(obj,function(key,value){return(typeof value==="function")?value.toString():value})},parseFunc:function(str){return JSON.parse(str,function(key,value){if(typeof value==="string"&&value.indexOf("function")!==-1){var sv=value.split(" ");if(sv[0].trim()==="function"&&value.trim().slice(-1)==="}"){return eval("("+value+")")}else{return value}}return value})},encode:function(text){return String(text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(tree,options){var o=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:true},options||{}),that=this,scalarToxml=function(name,text){if(name==="#text"){return(o.encode?that.encode(text):text)}else{if(typeof (text)==="function"){return"<"+name+"><![CDATA["+text+"]]></"+name+">\n"}}if(text===""){return"<"+name+">__EMPTY_STRING_</"+name+">\n"}else{return"<"+name+">"+(o.encode?that.encode(text):text)+"</"+name+">\n"}},arrayToxml=function(name,array){var out=[];for(var i=0;i<array.length;i++){var val=array[i];if(typeof (val)==="undefined"||val==null){out[out.length]="<"+name+" />"}else{if(typeof (val)==="object"&&val.constructor==Array){out[out.length]=arrayToxml(name,val)}else{if(typeof (val)==="object"){out[out.length]=hashToxml(name,val)}else{out[out.length]=scalarToxml(name,val)}}}}if(!out.length){out[0]="<"+name+">__EMPTY_ARRAY_</"+name+">\n"}return out.join("")},hashToxml=function(name,tree){var elem=[];var attr=[];for(var key in tree){if(!tree.hasOwnProperty(key)){continue}var val=tree[key];if(key.charAt(0)!==o.attr_prefix){if(val==null){elem[elem.length]="<"+key+" />"}else{if(typeof (val)==="object"&&val.constructor===Array){elem[elem.length]=arrayToxml(key,val)}else{if(typeof (val)==="object"){elem[elem.length]=hashToxml(key,val)}else{elem[elem.length]=scalarToxml(key,val)}}}}else{attr[attr.length]=" "+(key.substring(1))+'="'+(o.encode?that.encode(val):val)+'"'}}var jattr=attr.join("");var jelem=elem.join("");if(name==null){}else{if(elem.length>0){if(jelem.match(/\n/)){jelem="<"+name+jattr+">\n"+jelem+"</"+name+">\n"}else{jelem="<"+name+jattr+">"+jelem+"</"+name+">\n"}}else{jelem="<"+name+jattr+" />\n"}}return jelem};var xml=hashToxml(null,tree);return o.xmlDecl+xml},xmlToJSON:function(root,options){var o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(!root){return }var __force_array={};if(o.force_array){for(var i=0;i<o.force_array.length;i++){__force_array[o.force_array[i]]=1}}if(typeof root==="string"){root=$.parseXML(root)}if(root.documentElement){root=root.documentElement}var addNode=function(hash,key,cnts,val){if(typeof val==="string"){if(val.indexOf("function")!==-1){val=eval("("+val+")")}else{switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=false;break;case"true":val=true;break}}}if(__force_array[key]){if(cnts===1){hash[key]=[]}hash[key][hash[key].length]=val}else{if(cnts===1){hash[key]=val}else{if(cnts===2){hash[key]=[hash[key],val]}else{hash[key][hash[key].length]=val}}}},parseElement=function(elem){if(elem.nodeType===7){return }if(elem.nodeType===3||elem.nodeType===4){var bool=elem.nodeValue.match(/[^\x00-\x20]/);if(bool==null){return }return elem.nodeValue}var retval,cnt={},i,key,val;if(elem.attributes&&elem.attributes.length){retval={};for(i=0;i<elem.attributes.length;i++){key=elem.attributes[i].nodeName;if(typeof (key)!=="string"){continue}val=elem.attributes[i].nodeValue;if(!val){continue}key=o.attr_prefix+key;if(typeof (cnt[key])==="undefined"){cnt[key]=0}cnt[key]++;addNode(retval,key,cnt[key],val)}}if(elem.childNodes&&elem.childNodes.length){var textonly=true;if(retval){textonly=false}for(i=0;i<elem.childNodes.length&&textonly;i++){var ntype=elem.childNodes[i].nodeType;if(ntype===3||ntype===4){continue}textonly=false}if(textonly){if(!retval){retval=""}for(i=0;i<elem.childNodes.length;i++){retval+=elem.childNodes[i].nodeValue}}else{if(!retval){retval={}}for(i=0;i<elem.childNodes.length;i++){key=elem.childNodes[i].nodeName;if(typeof (key)!=="string"){continue}val=parseElement(elem.childNodes[i]);if(!val){continue}if(typeof (cnt[key])==="undefined"){cnt[key]=0}cnt[key]++;addNode(retval,key,cnt[key],val)}}}return retval};var json=parseElement(root);if(__force_array[root.nodeName]){json=[json]}if(root.nodeType!==11){var tmp={};tmp[root.nodeName]=json;json=tmp}return json},saveAs:function(data,fname,opts){opts=$.extend(true,{type:"plain/text;charset=utf-8"},opts||{});var file,url,tmp=[];fname=fname==null||fname===""?"jqGridFile.txt":fname;if(!$.isArray(data)){tmp[0]=data}else{tmp=data}try{file=new File(tmp,fname,opts)}catch(e){file=new Blob(tmp,opts)}if(window.navigator&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(file,fname)}else{url=URL.createObjectURL(file);var a=document.createElement("a");a.href=url;a.download=fname;document.body.appendChild(a);a.click();setTimeout(function(){document.body.removeChild(a);window.URL.revokeObjectURL(url)},0)}}});$.jgrid=$.jgrid||{};$.extend($.jgrid,{formatCell:function(cellval,colpos,rwdat,cm,$t){var v;if(cm.formatter!==undefined){var opts={rowId:"",colModel:cm,gid:$t.p.id,pos:colpos,styleUI:""};if($.isFunction(cm.formatter)){v=cm.formatter.call($t,cellval,opts,rwdat)}else{if($.fmatter){v=$.fn.fmatter.call($t,cm.formatter,cellval,opts,rwdat)}else{v=cellval}}}else{v=cellval}return v},formatCellCsv:function(v,p){v=v==null?"":String(v);try{v=v.replace(p._regexsep,p.separatorReplace).replace(/\r\n/g,p.replaceNewLine).replace(/\n/g,p.replaceNewLine)}catch(_e){v=""}if(p.escquote){v=v.replace(p._regexquot,p.escquote+p.quote)}if(v.indexOf(p.separator)===-1||v.indexOf(p.qoute)===-1){v=p.quote+v+p.quote}return v},excelCellPos:function(n){var ordA="A".charCodeAt(0),ordZ="Z".charCodeAt(0),len=ordZ-ordA+1,s="";while(n>=0){s=String.fromCharCode(n%len+ordA)+s;n=Math.floor(n/len)-1}return s},makeNode:function(root,elemName,options){var currNode=root.createElement(elemName);if(options){if(options.attr){$(currNode).attr(options.attr)}if(options.children){$.each(options.children,function(key,value){currNode.appendChild(value)})}if(options.text){currNode.appendChild(root.createTextNode(options.text))}}return currNode},xmlToZip:function(zip,obj){var $t=this,xmlserialiser=new XMLSerializer(),ieExcel=xmlserialiser.serializeToString($.parseXML($.jgrid.excelStrings["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")===-1,newDir,worksheet,i,ien,attr,attrs=[],str;$.each(obj,function(name,val){if($.isPlainObject(val)){newDir=zip.folder(name);$t.xmlToZip(newDir,val)}else{if(ieExcel){worksheet=val.childNodes[0];for(i=worksheet.attributes.length-1;i>=0;i--){var attrName=worksheet.attributes[i].nodeName;var attrValue=worksheet.attributes[i].nodeValue;if(attrName.indexOf(":")!==-1){attrs.push({name:attrName,value:attrValue});worksheet.removeAttribute(attrName)}}for(i=0,ien=attrs.length;i<ien;i++){attr=val.createAttribute(attrs[i].name.replace(":","_dt_b_namespace_token_"));attr.value=attrs[i].value;worksheet.setAttributeNode(attr)}}str=xmlserialiser.serializeToString(val);if(ieExcel){if(str.indexOf("<?xml")===-1){str='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+str}str=str.replace(/_dt_b_namespace_token_/g,":")}str=str.replace(/<row xmlns="" /g,"<row ").replace(/<cols xmlns="">/g,"<cols>").replace(/<mergeCells xmlns="" /g,"<mergeCells ");zip.file(name,str)}})},excelStrings:{"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="2"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"><alignment horizontal="center" /></xf><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'}});$.jgrid.extend({exportToCsv:function(p){p=$.extend(true,{separator:",",separatorReplace:" ",quote:'"',escquote:'"',newLine:"\r\n",replaceNewLine:" ",includeCaption:true,includeLabels:true,includeGroupHeader:true,includeFooter:true,fileName:"jqGridExport.csv",mimetype:"text/csv;charset=utf-8",returnAsString:false},p||{});var ret="";this.each(function(){p._regexsep=new RegExp(p.separator,"g");p._regexquot=new RegExp(p.quote,"g");var $t=this,data1=this.addLocalData(true),dlen=data1.length,cm=$t.p.colModel,cmlen=cm.length,clbl=$t.p.colNames,i,j=0,row,str="",tmp,k,cap="",hdr="",ftr="",lbl="",albl=[],restorevis=[];function groupToCsv(grdata,p){var str="",grp=$t.p.groupingView,cp=[],len=grp.groupField.length,cm=$t.p.colModel,colspans=cm.length,toEnd=0;$.each(cm,function(i,n){var ii;for(ii=0;ii<len;ii++){if(grp.groupField[ii]===n.name){cp[ii]=i;break}}});function findGroupIdx(ind,offset,grp){var ret=false,i;if(offset===0){ret=grp[ind]}else{var id=grp[ind].idx;if(id===0){ret=grp[ind]}else{for(i=ind;i>=0;i--){if(grp[i].idx===id-offset){ret=grp[i];break}}}}return ret}function buildSummaryTd(i,ik,grp,foffset){var fdata=findGroupIdx(i,ik,grp),vv,grlen=fdata.cnt,k,retarr=new Array(p.collen),j=0;for(k=foffset;k<colspans;k++){if(cm[k].hidden){continue}var tplfld="{0}";$.each(fdata.summary,function(){if(this.nm===cm[k].name){if(cm[k].summaryTpl){tplfld=cm[k].summaryTpl}if(typeof this.st==="string"&&this.st.toLowerCase()==="avg"){if(this.sd&&this.vd){this.v=(this.v/this.vd)}else{if(this.v&&grlen>0){this.v=(this.v/grlen)}}}try{this.groupCount=fdata.cnt;this.groupIndex=fdata.dataIndex;this.groupValue=fdata.value;vv=$t.formatter("",this.v,k,this)}catch(ef){vv=this.v}retarr[j]=$.jgrid.formatCellCsv($.jgrid.stripHtml($.jgrid.template(tplfld,vv)),p);return false}});j++}return retarr}var sumreverse=$.makeArray(grp.groupSummary),gv,k;sumreverse.reverse();$.each(grp.groups,function(i,n){toEnd++;try{if($.isArray(grp.formatDisplayField)&&$.isFunction(grp.formatDisplayField[n.idx])){gv=grp.formatDisplayField[n.idx].call($t,n.displayValue,n.value,$t.p.colModel[cp[n.idx]],n.idx,grp)}else{gv=$t.formatter("",n.displayValue,cp[n.idx],n.value)}}catch(egv){gv=n.displayValue}var grpTextStr="";if($.isFunction(grp.groupText[n.idx])){grpTextStr=grp.groupText[n.idx].call($t,gv,n.cnt,n.summary)}else{grpTextStr=$.jgrid.template(grp.groupText[n.idx],gv,n.cnt,n.summary)}if(!(typeof grpTextStr==="string"||typeof grpTextStr==="number")){grpTextStr=gv}var arr;if(grp.groupSummaryPos[n.idx]==="header"){arr=buildSummaryTd(i,0,grp.groups,0)}else{arr=new Array(p.collen)}arr[0]=$.jgrid.formatCellCsv($.jgrid.stripHtml(grpTextStr),p);str+=arr.join(p.separator)+p.newLine;var leaf=len-1===n.idx;if(leaf){var gg=grp.groups[i+1],kk,ik,offset=0,sgr=n.startRow,to,end=gg!==undefined?gg.startRow:grp.groups[i].startRow+grp.groups[i].cnt;for(kk=sgr;kk<end;kk++){if(!grdata[kk-offset]){break}to=grdata[kk-offset];k=0;for(ik=0;ik<cm.length;ik++){if(!cm[ik].hidden){arr[k]=$.jgrid.formatCellCsv($.jgrid.formatCell(to[cm[ik].name],ik,to,cm[ik],$t),p);k++}}str+=arr.join(p.separator)+p.newLine}if(grp.groupSummaryPos[n.idx]!=="header"){var jj;if(gg!==undefined){for(jj=0;jj<grp.groupField.length;jj++){if(gg.dataIndex===grp.groupField[jj]){break}}toEnd=grp.groupField.length-jj}for(ik=0;ik<toEnd;ik++){if(!sumreverse[ik]){continue}arr=buildSummaryTd(i,ik,grp.groups,0);str+=arr.join(p.separator)+p.newLine}toEnd=jj}}});return str}var def=[],key,restorexcol=[];$.each(cm,function(i,n){if(n.exportcol===undefined){n.exportcol=true}if((n.name==="cb"||n.name==="rn")&&!n.hidden){restorevis.push(i);n.hidden=true}if(!n.exportcol){if(!n.hidden){restorexcol.push(i);n.hidden=true}}if(!n.hidden&&n.exportcol){albl.push($.jgrid.formatCellCsv(clbl[i],p));def.push(n.name)}});if(p.includeLabels){lbl=albl.join(p.separator)+p.newLine}p.collen=albl.length;if($t.p.grouping){str+=groupToCsv(data1,p)}else{while(j<dlen){row=data1[j];tmp=[];k=0;for(i=0;i<cmlen;i++){if(!cm[i].hidden){tmp[k]=$.jgrid.formatCellCsv($.jgrid.formatCell(row[cm[i].name],i,row,cm[i],$t),p);k++}}str+=tmp.join(p.separator)+p.newLine;j++}}data1=null;tmp=new Array(p.collen);if(p.includeCaption&&$t.p.caption){j=p.collen;while(--j){tmp[j]=""}tmp[0]=$.jgrid.formatCellCsv($t.p.caption,p);cap+=tmp.join(p.separator)+p.newLine}if(p.includeGroupHeader&&$t.p.groupHeader&&$t.p.groupHeader.length){var gh=$t.p.groupHeader;for(i=0;i<gh.length;i++){var ghdata=gh[i].groupHeaders;j=0;tmp=[];for(key=0;key<def.length;key++){tmp[j]="";for(k=0;k<ghdata.length;k++){if(ghdata[k].startColumnName===def[key]){tmp[j]=$.jgrid.formatCellCsv(ghdata[k].titleText,p)}}j++}hdr+=tmp.join(p.separator)+p.newLine}}if(p.includeFooter&&$t.p.footerrow){var foot=$(".ui-jqgrid-ftable",this.sDiv);if(foot.length){var frows=foot[0].rows[0];i=0;j=0;tmp=[];while(i<frows.cells.length){var fc=frows.cells[i],coln=$(fc).attr("aria-describedby").slice(-3);if(!fc.hidden&&coln!=="_cb"&&coln!=="_rn"){tmp[j]=$.jgrid.formatCellCsv($(fc).text(),p);j++}i++}ftr+=tmp.join(p.separator)+p.newLine}}ret=cap+hdr+lbl+str+ftr;for(i=0;i<restorevis.length;i++){cm[restorevis[i]].hidden=false}for(i=0;i<restorexcol.length;i++){cm[restorexcol[i]].hidden=false}});if(p.returnAsString){return ret}else{$.jgrid.saveAs(ret,p.fileName,{type:p.mimetype})}},exportToExcel:function(o){o=$.extend(true,{includeLabels:true,includeGroupHeader:true,includeFooter:true,fileName:"jqGridExport.xlsx",mimetype:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",maxlength:40,onBeforeExport:null,replaceStr:null},o||{});this.each(function(){var $t=this,es=$.jgrid.excelStrings,rowPos=0,rels=$.parseXML(es["xl/worksheets/sheet1.xml"]),relsGet=rels.getElementsByTagName("sheetData")[0],xlsx={_rels:{".rels":$.parseXML(es["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":$.parseXML(es["xl/_rels/workbook.xml.rels"])},"workbook.xml":$.parseXML(es["xl/workbook.xml"]),"styles.xml":$.parseXML(es["xl/styles.xml"]),worksheets:{"sheet1.xml":rels}},"[Content_Types].xml":$.parseXML(es["[Content_Types].xml"])},cm=$t.p.colModel,i=0,j,ien,data={body:$t.addLocalData(true),header:[],footer:[],width:[],map:[]};for(j=0,ien=cm.length;j<ien;j++){if(cm[j].exportcol===undefined){cm[j].exportcol=true}if(cm[j].hidden||cm[j].name==="cb"||cm[j].name==="rn"||!cm[j].exportcol){continue}data.header[i]=cm[j].name;data.width[i]=5;data.map[i]=j;i++}function _replStrFunc(v){return v.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"")}var _replStr=$.isFunction(o.replaceStr)?o.replaceStr:_replStrFunc,currentRow,rowNode,addRow=function(row,header){currentRow=rowPos+1;rowNode=$.jgrid.makeNode(rels,"row",{attr:{r:currentRow}});for(var i=0;i<data.header.length;i++){var cellId=$.jgrid.excelCellPos(i)+""+currentRow,cell,v=($.isArray(row)&&header)?$t.p.colNames[data.map[i]]:row[data.header[i]];if(v==null){v=""}if(!header){v=v!==""?$.jgrid.formatCell(v,data.map[i],row,cm[data.map[i]],$t):v}data.width[i]=Math.max(data.width[i],Math.min(parseInt(v.length,10),o.maxlength));if(typeof v==="number"||(v.match&&$.trim(v).match(/^-?\d+(\.\d+)?$/)&&!$.trim(v).match(/^0\d+/))){cell=$.jgrid.makeNode(rels,"c",{attr:{t:"n",r:cellId},children:[$.jgrid.makeNode(rels,"v",{text:v})]})}else{var text=!v.replace?v:_replStr(v);cell=$.jgrid.makeNode(rels,"c",{attr:{t:"inlineStr",r:cellId},children:{row:$.jgrid.makeNode(rels,"is",{children:{row:$.jgrid.makeNode(rels,"t",{text:text})}})}})}rowNode.appendChild(cell)}relsGet.appendChild(rowNode);rowPos++};function groupToExcel(grdata){var grp=$t.p.groupingView,cp=[],len=grp.groupField.length,colspans=cm.length,toEnd=0;$.each(cm,function(i,n){var ii;for(ii=0;ii<len;ii++){if(grp.groupField[ii]===n.name){cp[ii]=i;break}}});function findGroupIdx(ind,offset,grp){var ret=false,i;if(offset===0){ret=grp[ind]}else{var id=grp[ind].idx;if(id===0){ret=grp[ind]}else{for(i=ind;i>=0;i--){if(grp[i].idx===id-offset){ret=grp[i];break}}}}return ret}function buildSummaryTd(i,ik,grp,foffset){var fdata=findGroupIdx(i,ik,grp),vv,grlen=fdata.cnt,k,retarr=emptyData(data.header);for(k=foffset;k<colspans;k++){if(cm[k].hidden||cm[k].exportcol){continue}var tplfld="{0}";$.each(fdata.summary,function(){if(this.nm===cm[k].name){if(cm[k].summaryTpl){tplfld=cm[k].summaryTpl}if(typeof this.st==="string"&&this.st.toLowerCase()==="avg"){if(this.sd&&this.vd){this.v=(this.v/this.vd)}else{if(this.v&&grlen>0){this.v=(this.v/grlen)}}}try{this.groupCount=fdata.cnt;this.groupIndex=fdata.dataIndex;this.groupValue=fdata.value;vv=$t.formatter("",this.v,k,this)}catch(ef){vv=this.v}retarr[this.nm]=$.jgrid.stripHtml($.jgrid.template(tplfld,vv));return false}})}return retarr}function emptyData(d){var clone={};for(var key=0;key<d.length;key++){clone[d[key]]=""}return clone}var sumreverse=$.makeArray(grp.groupSummary),gv;sumreverse.reverse();$.each(grp.groups,function(i,n){toEnd++;try{if($.isArray(grp.formatDisplayField)&&$.isFunction(grp.formatDisplayField[n.idx])){gv=grp.formatDisplayField[n.idx].call($t,n.displayValue,n.value,$t.p.colModel[cp[n.idx]],n.idx,grp)}else{gv=$t.formatter("",n.displayValue,cp[n.idx],n.value)}}catch(egv){gv=n.displayValue}var grpTextStr="";if($.isFunction(grp.groupText[n.idx])){grpTextStr=grp.groupText[n.idx].call($t,gv,n.cnt,n.summary)}else{grpTextStr=$.jgrid.template(grp.groupText[n.idx],gv,n.cnt,n.summary)}if(!(typeof grpTextStr==="string"||typeof grpTextStr==="number")){grpTextStr=gv}var arr;if(grp.groupSummaryPos[n.idx]==="header"){arr=buildSummaryTd(i,0,grp.groups,0)}else{arr=emptyData(data.header)}var fkey=Object.keys(arr);arr[fkey[0]]=$.jgrid.stripHtml(new Array(n.idx*5).join(" ")+grpTextStr);addRow(arr,true);var leaf=len-1===n.idx;if(leaf){var gg=grp.groups[i+1],kk,ik,offset=0,sgr=n.startRow,end=gg!==undefined?gg.startRow:grp.groups[i].startRow+grp.groups[i].cnt;for(kk=sgr;kk<end;kk++){if(!grdata[kk-offset]){break}var to=grdata[kk-offset];addRow(to,false)}if(grp.groupSummaryPos[n.idx]!=="header"){var jj;if(gg!==undefined){for(jj=0;jj<grp.groupField.length;jj++){if(gg.dataIndex===grp.groupField[jj]){break}}toEnd=grp.groupField.length-jj}for(ik=0;ik<toEnd;ik++){if(!sumreverse[ik]){continue}arr=buildSummaryTd(i,ik,grp.groups,0);addRow(arr,true)}toEnd=jj}}})}$("sheets sheet",xlsx.xl["workbook.xml"]).attr("name",o.sheetName);if(o.includeGroupHeader&&$t.p.groupHeader&&$t.p.groupHeader.length){var gh=$t.p.groupHeader,mergecell=[],mrow=0,key,l;for(l=0;l<gh.length;l++){var ghdata=gh[l].groupHeaders,clone={};mrow++;j=0;for(j=0;j<data.header.length;j++){key=data.header[j];clone[key]="";for(var k=0;k<ghdata.length;k++){if(ghdata[k].startColumnName===key){clone[key]=ghdata[k].titleText;var start=$.jgrid.excelCellPos(j)+mrow,end=$.jgrid.excelCellPos(j+ghdata[k].numberOfColumns-1)+mrow;mergecell.push({ref:start+":"+end})}}}addRow(clone,true)}$("row c",rels).attr("s","2");var merge=$.jgrid.makeNode(rels,"mergeCells",{attr:{count:mergecell.length}});$("worksheet",rels).append(merge);for(i=0;i<mergecell.length;i++){merge.appendChild($.jgrid.makeNode(rels,"mergeCell",{attr:mergecell[i]}))}}if(o.includeLabels){addRow(data.header,true);$("row:last c",rels).attr("s","2")}if($t.p.grouping){groupToExcel(data.body)}else{for(var n=0,ie=data.body.length;n<ie;n++){addRow(data.body[n],false)}}if(o.includeFooter||$t.p.footerrow){data.footer=$($t).jqGrid("footerData","get");for(i in data.footer){if(data.footer.hasOwnProperty(i)){data.footer[i]=$.jgrid.stripHtml(data.footer[i])}}addRow(data.footer,true);$("row:last c",rels).attr("s","2")}var cols=$.jgrid.makeNode(rels,"cols");$("worksheet",rels).prepend(cols);for(i=0,ien=data.width.length;i<ien;i++){cols.appendChild($.jgrid.makeNode(rels,"col",{attr:{min:i+1,max:i+1,width:data.width[i],customWidth:1}}))}if($.isFunction(o.onBeforeExport)){o.onBeforeExport(xlsx)}data=null;try{var zip=new JSZip();var zipConfig={type:"blob",mimeType:o.mimetype};$.jgrid.xmlToZip(zip,xlsx);if(zip.generateAsync){zip.generateAsync(zipConfig).then(function(blob){$.jgrid.saveAs(blob,o.fileName,{type:o.mimetype})})}else{$.jgrid.saveAs(zip.generate(zipConfig),o.fileName,{type:o.mimetype})}}catch(e){throw e}})},exportToPdf:function(o){o=$.extend(true,{title:null,orientation:"portrait",pageSize:"A4",description:null,onBeforeExport:null,download:"download",includeLabels:true,includeGroupHeader:true,includeFooter:true,fileName:"jqGridExport.pdf",mimetype:"application/pdf"},o||{});return this.each(function(){var $t=this,rows=[],j,cm=$t.p.colModel,ien,obj={},key,data=$t.addLocalData(true),def=[],i=0,map=[],test=[],widths=[],align={};function groupToPdf(grdata){var grp=$t.p.groupingView,cp=[],len=grp.groupField.length,cm=$t.p.colModel,colspans=cm.length,toEnd=0;$.each(cm,function(i,n){var ii;for(ii=0;ii<len;ii++){if(grp.groupField[ii]===n.name){cp[ii]=i;break}}});function constructRow(row,fmt){var k=0,test=[];for(var key=0;key<def.length;key++){obj={text:row[def[key]]==null?"":(fmt?$.jgrid.formatCell(row[def[key]]+"",map[k],data[i],cm[map[k]],$t):row[def[key]]),alignment:align[key],style:"tableBody"};test.push(obj);k++}return test}function findGroupIdx(ind,offset,grp){var ret=false,i;if(offset===0){ret=grp[ind]}else{var id=grp[ind].idx;if(id===0){ret=grp[ind]}else{for(i=ind;i>=0;i--){if(grp[i].idx===id-offset){ret=grp[i];break}}}}return ret}function buildSummaryTd(i,ik,grp,foffset){var fdata=findGroupIdx(i,ik,grp),vv,grlen=fdata.cnt,k,retarr=emptyData(def);for(k=foffset;k<colspans;k++){if(cm[k].hidden||!cm[k].exportcol){continue}var tplfld="{0}";$.each(fdata.summary,function(){if(this.nm===cm[k].name){if(cm[k].summaryTpl){tplfld=cm[k].summaryTpl}if(typeof this.st==="string"&&this.st.toLowerCase()==="avg"){if(this.sd&&this.vd){this.v=(this.v/this.vd)}else{if(this.v&&grlen>0){this.v=(this.v/grlen)}}}try{this.groupCount=fdata.cnt;this.groupIndex=fdata.dataIndex;this.groupValue=fdata.value;vv=$t.formatter("",this.v,k,this)}catch(ef){vv=this.v}retarr[this.nm]=$.jgrid.stripHtml($.jgrid.template(tplfld,vv));return false}})}return retarr}function emptyData(d){var clone={};for(var key=0;key<d.length;key++){clone[d[key]]=""}return clone}var sumreverse=$.makeArray(grp.groupSummary),gv;sumreverse.reverse();$.each(grp.groups,function(i,n){toEnd++;try{if($.isArray(grp.formatDisplayField)&&$.isFunction(grp.formatDisplayField[n.idx])){gv=grp.formatDisplayField[n.idx].call($t,n.displayValue,n.value,$t.p.colModel[cp[n.idx]],n.idx,grp)}else{gv=$t.formatter("",n.displayValue,cp[n.idx],n.value)}}catch(egv){gv=n.displayValue}var grpTextStr="";if($.isFunction(grp.groupText[n.idx])){grpTextStr=grp.groupText[n.idx].call($t,gv,n.cnt,n.summary)}else{grpTextStr=$.jgrid.template(grp.groupText[n.idx],gv,n.cnt,n.summary)}if(!(typeof grpTextStr==="string"||typeof grpTextStr==="number")){grpTextStr=gv}var arr;if(grp.groupSummaryPos[n.idx]==="header"){arr=buildSummaryTd(i,0,grp.groups,0)}else{arr=emptyData(def)}var fkey=Object.keys(arr);arr[fkey[0]]=$.jgrid.stripHtml(new Array(n.idx*5).join(" ")+grpTextStr);rows.push(constructRow(arr,false));var leaf=len-1===n.idx;if(leaf){var gg=grp.groups[i+1],kk,ik,offset=0,sgr=n.startRow,end=gg!==undefined?gg.startRow:grp.groups[i].startRow+grp.groups[i].cnt;for(kk=sgr;kk<end;kk++){if(!grdata[kk-offset]){break}var to=grdata[kk-offset];rows.push(constructRow(to,true))}if(grp.groupSummaryPos[n.idx]!=="header"){var jj;if(gg!==undefined){for(jj=0;jj<grp.groupField.length;jj++){if(gg.dataIndex===grp.groupField[jj]){break}}toEnd=grp.groupField.length-jj}for(ik=0;ik<toEnd;ik++){if(!sumreverse[ik]){continue}arr=buildSummaryTd(i,ik,grp.groups,0);rows.push(constructRow(arr,false))}toEnd=jj}}})}var k;for(j=0,ien=cm.length;j<ien;j++){if(cm[j].exportcol===undefined){cm[j].exportcol=true}if(cm[j].hidden||cm[j].name==="cb"||cm[j].name==="rn"||!cm[j].exportcol){continue}obj={text:$t.p.colNames[j],style:"tableHeader"};test.push(obj);def[i]=cm[j].name;map[i]=j;widths.push(cm[j].width);align[cm[j].name]=cm[j].align||"left";i++}var gh;if(o.includeGroupHeader&&$t.p.groupHeader&&$t.p.groupHeader.length){gh=$t.p.groupHeader;for(i=0;i<gh.length;i++){var clone=[],ghdata=gh[i].groupHeaders;for(key=0;key<def.length;key++){obj={text:"",style:"tableHeader"};for(k=0;k<ghdata.length;k++){if(ghdata[k].startColumnName===def[key]){obj={text:ghdata[k].titleText,colSpan:ghdata[k].numberOfColumns,style:"tableHeader"}}}clone.push(obj);j++}rows.push(clone)}}if(o.includeLabels){rows.push(test)}if($t.p.grouping){groupToPdf(data)}else{var row;for(i=0,ien=data.length;i<ien;i++){k=0;test=[];row=data[i];for(key=0;key<def.length;key++){obj={text:row[def[key]]==null?"":$.jgrid.formatCell(row[def[key]]+"",map[k],data[i],cm[map[k]],$t),alignment:align[def[key]],style:"tableBody"};test.push(obj);k++}rows.push(test)}}if(o.includeFooter&&$t.p.footerrow){var fdata=$($t).jqGrid("footerData","get");test=[];for(key=0;key<def.length;key++){obj={text:$.jgrid.stripHtml(fdata[def[key]]),style:"tableFooter",alignment:align[def[key]]};test.push(obj)}rows.push(test)}var doc={pageSize:o.pageSize,pageOrientation:o.orientation,content:[{style:"tableExample",widths:widths,table:{headerRows:(gh!=null)?0:1,body:rows}}],styles:{tableHeader:{bold:true,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc",alignment:"center"},tableBody:{fontSize:10},tableFooter:{bold:true,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc"},title:{alignment:"center",fontSize:15},description:{}},defaultStyle:{fontSize:10}};if(o.description){doc.content.unshift({text:o.description,style:"description",margin:[0,0,0,12]})}if(o.title){doc.content.unshift({text:o.title,style:"title",margin:[0,0,0,12]})}if($.isFunction(o.onBeforeExport)){o.onBeforeExport.call($t,doc)}try{var pdf=pdfMake.createPdf(doc);if(o.download==="open"){pdf.open()}else{pdf.getBuffer(function(buffer){$.jgrid.saveAs(buffer,o.fileName,{type:o.mimetype})})}}catch(e){throw e}})}})}));
(function(){function require(path,parent,orig){var resolved=require.resolve(path);if(null==resolved){orig=orig||path;parent=parent||"root";var err=new Error('Failed to require "'+orig+'" from "'+parent+'"');err.path=orig;err.parent=parent;err.require=true;throw err}var module=require.modules[resolved];if(!module._resolving&&!module.exports){var mod={};mod.exports={};mod.client=mod.component=true;module._resolving=true;module.call(this,mod.exports,require.relative(resolved),mod);delete module._resolving;module.exports=mod.exports}return module.exports}require.modules={};require.aliases={};require.resolve=function(path){if(path.charAt(0)==="/")path=path.slice(1);var paths=[path,path+".js",path+".json",path+"/index.js",path+"/index.json"];for(var i=0;i<paths.length;i++){var path=paths[i];if(require.modules.hasOwnProperty(path))return path;if(require.aliases.hasOwnProperty(path))return require.aliases[path]}};require.normalize=function(curr,path){var segs=[];if("."!=path.charAt(0))return path;curr=curr.split("/");path=path.split("/");for(var i=0;i<path.length;++i){if(".."==path[i]){curr.pop()}else if("."!=path[i]&&""!=path[i]){segs.push(path[i])}}return curr.concat(segs).join("/")};require.register=function(path,definition){require.modules[path]=definition};require.alias=function(from,to){if(!require.modules.hasOwnProperty(from)){throw new Error('Failed to alias "'+from+'", it does not exist')}require.aliases[to]=from};require.relative=function(parent){var p=require.normalize(parent,"..");function lastIndexOf(arr,obj){var i=arr.length;while(i--){if(arr[i]===obj)return i}return-1}function localRequire(path){var resolved=localRequire.resolve(path);return require(resolved,parent,path)}localRequire.resolve=function(path){var c=path.charAt(0);if("/"==c)return path.slice(1);if("."==c)return require.normalize(p,path);var segs=parent.split("/");var i=lastIndexOf(segs,"deps")+1;if(!i)i=0;path=segs.slice(0,i+1).join("/")+"/deps/"+path;return path};localRequire.exists=function(path){return require.modules.hasOwnProperty(localRequire.resolve(path))};return localRequire};require.register("abpetkov-transitionize/transitionize.js",function(exports,require,module){module.exports=Transitionize;function Transitionize(element,props){if(!(this instanceof Transitionize))return new Transitionize(element,props);this.element=element;this.props=props||{};this.init()}Transitionize.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)};Transitionize.prototype.init=function(){var transitions=[];for(var key in this.props){transitions.push(key+" "+this.props[key])}this.element.style.transition=transitions.join(", ");if(this.isSafari())this.element.style.webkitTransition=transitions.join(", ")}});require.register("ftlabs-fastclick/lib/fastclick.js",function(exports,require,module){function FastClick(layer){"use strict";var oldOnClick,self=this;this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=10;this.layer=layer;if(!layer||!layer.nodeType){throw new TypeError("Layer must be a document node")}this.onClick=function(){return FastClick.prototype.onClick.apply(self,arguments)};this.onMouse=function(){return FastClick.prototype.onMouse.apply(self,arguments)};this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(self,arguments)};this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(self,arguments)};this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(self,arguments)};this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(self,arguments)};if(FastClick.notNeeded(layer)){return}if(this.deviceIsAndroid){layer.addEventListener("mouseover",this.onMouse,true);layer.addEventListener("mousedown",this.onMouse,true);layer.addEventListener("mouseup",this.onMouse,true)}layer.addEventListener("click",this.onClick,true);layer.addEventListener("touchstart",this.onTouchStart,false);layer.addEventListener("touchmove",this.onTouchMove,false);layer.addEventListener("touchend",this.onTouchEnd,false);layer.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;if(type==="click"){rmv.call(layer,type,callback.hijacked||callback,capture)}else{rmv.call(layer,type,callback,capture)}};layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;if(type==="click"){adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){if(!event.propagationStopped){callback(event)}}),capture)}else{adv.call(layer,type,callback,capture)}}}if(typeof layer.onclick==="function"){oldOnClick=layer.onclick;layer.addEventListener("click",function(event){oldOnClick(event)},false);layer.onclick=null}}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent);FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(target.disabled){return true}break;case"input":if(this.deviceIsIOS&&target.type==="file"||target.disabled){return true}break;case"label":case"video":return true}return/\bneedsclick\b/.test(target.className)};FastClick.prototype.needsFocus=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"textarea":return true;case"select":return!this.deviceIsAndroid;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return!target.disabled&&!target.readOnly;default:return/\bneedsfocus\b/.test(target.className)}};FastClick.prototype.sendClick=function(targetElement,event){"use strict";var clickEvent,touch;if(document.activeElement&&document.activeElement!==targetElement){document.activeElement.blur()}touch=event.changedTouches[0];clickEvent=document.createEvent("MouseEvents");clickEvent.initMouseEvent(this.determineEventType(targetElement),true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);clickEvent.forwardedTouchEvent=true;targetElement.dispatchEvent(clickEvent)};FastClick.prototype.determineEventType=function(targetElement){"use strict";if(this.deviceIsAndroid&&targetElement.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};FastClick.prototype.focus=function(targetElement){"use strict";var length;if(this.deviceIsIOS&&targetElement.setSelectionRange&&targetElement.type.indexOf("date")!==0&&targetElement.type!=="time"){length=targetElement.value.length;targetElement.setSelectionRange(length,length)}else{targetElement.focus()}};FastClick.prototype.updateScrollParent=function(targetElement){"use strict";var scrollParent,parentElement;scrollParent=targetElement.fastClickScrollParent;if(!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement;targetElement.fastClickScrollParent=parentElement;break}parentElement=parentElement.parentElement}while(parentElement)}if(scrollParent){scrollParent.fastClickLastScrollTop=scrollParent.scrollTop}};FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){"use strict";if(eventTarget.nodeType===Node.TEXT_NODE){return eventTarget.parentNode}return eventTarget};FastClick.prototype.onTouchStart=function(event){"use strict";var targetElement,touch,selection;if(event.targetTouches.length>1){return true}targetElement=this.getTargetElementFromEventTarget(event.target);touch=event.targetTouches[0];if(this.deviceIsIOS){selection=window.getSelection();if(selection.rangeCount&&!selection.isCollapsed){return true}if(!this.deviceIsIOS4){if(touch.identifier===this.lastTouchIdentifier){event.preventDefault();return false}this.lastTouchIdentifier=touch.identifier;this.updateScrollParent(targetElement)}}this.trackingClick=true;this.trackingClickStart=event.timeStamp;this.targetElement=targetElement;this.touchStartX=touch.pageX;this.touchStartY=touch.pageY;if(event.timeStamp-this.lastClickTime<200){event.preventDefault()}return true};FastClick.prototype.touchHasMoved=function(event){"use strict";var touch=event.changedTouches[0],boundary=this.touchBoundary;if(Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary){return true}return false};FastClick.prototype.onTouchMove=function(event){"use strict";if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event)){this.trackingClick=false;this.targetElement=null}return true};FastClick.prototype.findControl=function(labelElement){"use strict";if(labelElement.control!==undefined){return labelElement.control}if(labelElement.htmlFor){return document.getElementById(labelElement.htmlFor)}return labelElement.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};FastClick.prototype.onTouchEnd=function(event){"use strict";var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick){return true}if(event.timeStamp-this.lastClickTime<200){this.cancelNextClick=true;return true}this.cancelNextClick=false;this.lastClickTime=event.timeStamp;trackingClickStart=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(this.deviceIsIOSWithBadTarget){touch=event.changedTouches[0];targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement;targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent}targetTagName=targetElement.tagName.toLowerCase();if(targetTagName==="label"){forElement=this.findControl(targetElement);if(forElement){this.focus(targetElement);if(this.deviceIsAndroid){return false}targetElement=forElement}}else if(this.needsFocus(targetElement)){if(event.timeStamp-trackingClickStart>100||this.deviceIsIOS&&window.top!==window&&targetTagName==="input"){this.targetElement=null;return false}this.focus(targetElement);if(!this.deviceIsIOS4||targetTagName!=="select"){this.targetElement=null;event.preventDefault()}return false}if(this.deviceIsIOS&&!this.deviceIsIOS4){scrollParent=targetElement.fastClickScrollParent;if(scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop){return true}}if(!this.needsClick(targetElement)){event.preventDefault();this.sendClick(targetElement,event)}return false};FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=false;this.targetElement=null};FastClick.prototype.onMouse=function(event){"use strict";if(!this.targetElement){return true}if(event.forwardedTouchEvent){return true}if(!event.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(event.stopImmediatePropagation){event.stopImmediatePropagation()}else{event.propagationStopped=true}event.stopPropagation();event.preventDefault();return false}return true};FastClick.prototype.onClick=function(event){"use strict";var permitted;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(event.target.type==="submit"&&event.detail===0){return true}permitted=this.onMouse(event);if(!permitted){this.targetElement=null}return permitted};FastClick.prototype.destroy=function(){"use strict";var layer=this.layer;if(this.deviceIsAndroid){layer.removeEventListener("mouseover",this.onMouse,true);layer.removeEventListener("mousedown",this.onMouse,true);layer.removeEventListener("mouseup",this.onMouse,true)}layer.removeEventListener("click",this.onClick,true);layer.removeEventListener("touchstart",this.onTouchStart,false);layer.removeEventListener("touchmove",this.onTouchMove,false);layer.removeEventListener("touchend",this.onTouchEnd,false);layer.removeEventListener("touchcancel",this.onTouchCancel,false)};FastClick.notNeeded=function(layer){"use strict";var metaViewport;var chromeVersion;if(typeof window.ontouchstart==="undefined"){return true}chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(chromeVersion){if(FastClick.prototype.deviceIsAndroid){metaViewport=document.querySelector("meta[name=viewport]");if(metaViewport){if(metaViewport.content.indexOf("user-scalable=no")!==-1){return true}if(chromeVersion>31&&window.innerWidth<=window.screen.width){return true}}}else{return true}}if(layer.style.msTouchAction==="none"){return true}return false};FastClick.attach=function(layer){"use strict";return new FastClick(layer)};if(typeof define!=="undefined"&&define.amd){define(function(){"use strict";return FastClick})}else if(typeof module!=="undefined"&&module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick}else{window.FastClick=FastClick}});require.register("switchery/switchery.js",function(exports,require,module){var transitionize=require("transitionize"),fastclick=require("fastclick");module.exports=Switchery;var defaults={color:"#64bd63",secondaryColor:"#dfdfdf",className:"switchery",disabled:false,disabledOpacity:.5,speed:"0.4s"};function Switchery(element,options){if(!(this instanceof Switchery))return new Switchery(element,options);this.element=element;this.options=options||{};for(var i in defaults){if(this.options[i]==null){this.options[i]=defaults[i]}}if(this.element!=null&&this.element.type=="checkbox")this.init()}Switchery.prototype.hide=function(){this.element.style.display="none"};Switchery.prototype.show=function(){var switcher=this.create();this.insertAfter(this.element,switcher)};Switchery.prototype.create=function(){this.switcher=document.createElement("span");this.jack=document.createElement("small");this.switcher.appendChild(this.jack);this.switcher.className=this.options.className;return this.switcher};Switchery.prototype.insertAfter=function(reference,target){reference.parentNode.insertBefore(target,reference.nextSibling)};Switchery.prototype.isChecked=function(){return this.element.checked};Switchery.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled};Switchery.prototype.setPosition=function(clicked){var checked=this.isChecked(),switcher=this.switcher,jack=this.jack;if(clicked&&checked)checked=false;else if(clicked&&!checked)checked=true;if(checked===true){this.element.checked=true;if(window.getComputedStyle)jack.style.left=parseInt(window.getComputedStyle(switcher).width)-parseInt(window.getComputedStyle(jack).width)+"px";else jack.style.left=parseInt(switcher.currentStyle["width"])-parseInt(jack.currentStyle["width"])+"px";if(this.options.color)this.colorize();this.setSpeed()}else{jack.style.left=0;this.element.checked=false;this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor;this.switcher.style.borderColor=this.options.secondaryColor;this.switcher.style.backgroundColor="";this.setSpeed()}};Switchery.prototype.setSpeed=function(){var switcherProp={},jackProp={left:this.options.speed.replace(/[a-z]/,"")/2+"s"};if(this.isChecked()){switcherProp={border:this.options.speed,"box-shadow":this.options.speed,"background-color":this.options.speed.replace(/[a-z]/,"")*3+"s"}}else{switcherProp={border:this.options.speed,"box-shadow":this.options.speed}}transitionize(this.switcher,switcherProp);transitionize(this.jack,jackProp)};Switchery.prototype.setAttributes=function(){var id=this.element.getAttribute("id"),name=this.element.getAttribute("name");if(id)this.switcher.setAttribute("id",id);if(name)this.switcher.setAttribute("name",name)};Switchery.prototype.colorize=function(){this.switcher.style.backgroundColor=this.options.color;this.switcher.style.borderColor=this.options.color;this.switcher.style.boxShadow="inset 0 0 0 16px "+this.options.color};Switchery.prototype.handleOnchange=function(state){if(typeof Event==="function"||!document.fireEvent){var event=document.createEvent("HTMLEvents");event.initEvent("change",true,true);this.element.dispatchEvent(event)}else{this.element.fireEvent("onchange")}};Switchery.prototype.handleChange=function(){var self=this,el=this.element;if(el.addEventListener){el.addEventListener("change",function(){self.setPosition()})}else{el.attachEvent("onchange",function(){self.setPosition()})}};Switchery.prototype.handleClick=function(){var self=this,switcher=this.switcher;if(this.isDisabled()===false){fastclick(switcher);if(switcher.addEventListener){switcher.addEventListener("click",function(){self.setPosition(true);self.handleOnchange(self.element.checked)})}else{switcher.attachEvent("onclick",function(){self.setPosition(true);self.handleOnchange(self.element.checked)})}}else{this.element.disabled=true;this.switcher.style.opacity=this.options.disabledOpacity}};Switchery.prototype.disableLabel=function(){var parent=this.element.parentNode,labels=document.getElementsByTagName("label"),attached=null;for(var i=0;i<labels.length;i++){if(labels[i].getAttribute("for")===this.element.id){attached=true}}if(attached===true||parent.tagName.toLowerCase()==="label"){if(parent.addEventListener){parent.addEventListener("click",function(e){e.preventDefault()})}else{parent.attachEvent("onclick",function(e){e.returnValue=false})}}};Switchery.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",true)};Switchery.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")};Switchery.prototype.init=function(){this.hide();this.show();this.setPosition();this.setAttributes();this.markAsSwitched();this.disableLabel();this.handleChange();this.handleClick()}});require.alias("abpetkov-transitionize/transitionize.js","switchery/deps/transitionize/transitionize.js");require.alias("abpetkov-transitionize/transitionize.js","switchery/deps/transitionize/index.js");require.alias("abpetkov-transitionize/transitionize.js","transitionize/index.js");require.alias("abpetkov-transitionize/transitionize.js","abpetkov-transitionize/index.js");require.alias("ftlabs-fastclick/lib/fastclick.js","switchery/deps/fastclick/lib/fastclick.js");require.alias("ftlabs-fastclick/lib/fastclick.js","switchery/deps/fastclick/index.js");require.alias("ftlabs-fastclick/lib/fastclick.js","fastclick/index.js");require.alias("ftlabs-fastclick/lib/fastclick.js","ftlabs-fastclick/index.js");require.alias("switchery/switchery.js","switchery/index.js");if(typeof exports=="object"){module.exports=require("switchery")}else if(typeof define=="function"&&define.amd){define(function(){return require("switchery")})}else{this["Switchery"]=require("switchery")}})();

/*!
 * Jasny Bootstrap v3.1.2 (http://jasny.github.io/bootstrap)
 * Copyright 2012-2014 Arnold Daniels
 * Licensed under Apache-2.0 (https://github.com/jasny/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Jasny Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}void 0===a.support.transition&&(a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()}))}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),a(window).on("resize",a.proxy(this.recalc,this))),this.options.autohide&&a(document).on("click",a.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};b.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0},b.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},b.prototype.calcPlacement=function(){function b(a,b){if("auto"===e.css(b))return a;if("auto"===e.css(a))return b;var c=parseInt(e.css(a),10),d=parseInt(e.css(b),10);return c>d?b:a}if("auto"!==this.options.placement)return void(this.placement=this.options.placement);this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var c=a(window).width()/this.$element.width(),d=a(window).height()/this.$element.height(),e=this.$element;this.placement=c>=d?b("left","right"):b("top","bottom"),"hidden !important"===this.$element.css("visibility")&&this.$element.removeClass("in").css("visiblity","")},b.prototype.opposite=function(a){switch(a){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},b.prototype.getCanvasElements=function(){var b=this.options.canvas?a(this.options.canvas):this.$element,c=b.find("*").filter(function(){return"fixed"===a(this).css("position")}).not(this.options.exclude);return b.add(c)},b.prototype.slide=function(b,c,d){if(!a.support.transition){var e={};return e[this.placement]="+="+c,b.animate(e,350,d)}var f=this.placement,g=this.opposite(f);b.each(function(){"auto"!==a(this).css(f)&&a(this).css(f,(parseInt(a(this).css(f),10)||0)+c),"auto"!==a(this).css(g)&&a(this).css(g,(parseInt(a(this).css(g),10)||0)-c)}),this.$element.one(a.support.transition.end,d).emulateTransitionEnd(350)},b.prototype.disableScrolling=function(){var b=a("body").width(),c="padding-"+this.opposite(this.placement);if(void 0===a("body").data("offcanvas-style")&&a("body").data("offcanvas-style",a("body").attr("style")),a("body").css("overflow","hidden"),a("body").width()>b){var d=parseInt(a("body").css(c),10)+a("body").width()-b;setTimeout(function(){a("body").css(c,d)},1)}},b.prototype.show=function(){if(!this.state){var b=a.Event("show.bs.offcanvas");if(this.$element.trigger(b),!b.isDefaultPrevented()){this.state="slide-in",this.calcPlacement();var c=this.getCanvasElements(),d=this.placement,e=this.opposite(d),f=this.offset();-1!==c.index(this.$element)&&(a(this.$element).data("offcanvas-style",a(this.$element).attr("style")||""),this.$element.css(d,-1*f),this.$element.css(d)),c.addClass("canvas-sliding").each(function(){void 0===a(this).data("offcanvas-style")&&a(this).data("offcanvas-style",a(this).attr("style")||""),"static"===a(this).css("position")&&a(this).css("position","relative"),"auto"!==a(this).css(d)&&"0px"!==a(this).css(d)||"auto"!==a(this).css(e)&&"0px"!==a(this).css(e)||a(this).css(d,0)}),this.options.disableScrolling&&this.disableScrolling();var g=function(){"slide-in"==this.state&&(this.state="slid",c.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas"))};setTimeout(a.proxy(function(){this.$element.addClass("in"),this.slide(c,f,a.proxy(g,this))},this),1)}}},b.prototype.hide=function(){if("slid"===this.state){var b=a.Event("hide.bs.offcanvas");if(this.$element.trigger(b),!b.isDefaultPrevented()){this.state="slide-out";var c=a(".canvas-slid"),d=(this.placement,-1*this.offset()),e=function(){"slide-out"==this.state&&(this.state=null,this.placement=null,this.$element.removeClass("in"),c.removeClass("canvas-sliding"),c.add(this.$element).add("body").each(function(){a(this).attr("style",a(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas"))};c.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(a.proxy(function(){this.slide(c,d,a.proxy(e,this))},this),1)}}},b.prototype.toggle=function(){"slide-in"!==this.state&&"slide-out"!==this.state&&this["slid"===this.state?"hide":"show"]()},b.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(a("body"))},b.prototype.recalc=function(){if("none"!==this.$calcClone.css("display")&&("slid"===this.state||"slide-in"===this.state)){this.state=null,this.placement=null;var b=this.getCanvasElements();this.$element.removeClass("in"),b.removeClass("canvas-slid"),b.add(this.$element).add("body").each(function(){a(this).attr("style",a(this).data("offcanvas-style")).removeData("offcanvas-style")})}},b.prototype.autohide=function(b){0===a(b.target).closest(this.$element).length&&this.hide()};var c=a.fn.offcanvas;a.fn.offcanvas=function(c){return this.each(function(){var d=a(this),e=d.data("bs.offcanvas"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.offcanvas",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.offcanvas.Constructor=b,a.fn.offcanvas.noConflict=function(){return a.fn.offcanvas=c,this},a(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.offcanvas"),h=g?"toggle":d.data();b.stopPropagation(),g?g.toggle():f.offcanvas(h)})}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",a.proxy(this.click,this))};b.DEFAULTS={target:"a"},b.prototype.click=function(b){var c=a(b.currentTarget).closest("tr").find(this.options.target)[0];if(a(b.target)[0]!==c)if(b.preventDefault(),c.click)c.click();else if(document.createEvent){var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}};var c=a.fn.rowlink;a.fn.rowlink=function(c){return this.each(function(){var d=a(this),e=d.data("rowlink");e||d.data("rowlink",e=new b(this,c))})},a.fn.rowlink.Constructor=b,a.fn.rowlink.noConflict=function(){return a.fn.rowlink=c,this},a(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(b){if(0===a(b.target).closest(".rowlink-skip").length){var c=a(this);c.data("rowlink")||(c.rowlink(c.data()),a(b.target).trigger("click.bs.rowlink"))}})}(window.jQuery),+function(a){"use strict";var b=void 0!==window.orientation,c=navigator.userAgent.toLowerCase().indexOf("android")>-1,d="Microsoft Internet Explorer"==window.navigator.appName,e=function(b,d){c||(this.$element=a(b),this.options=a.extend({},e.DEFAULTS,d),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};e.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."}},e.prototype.init=function(){var b=this.options.definitions,c=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,a.each(this.mask.split(""),a.proxy(function(a,d){"?"==d?(c--,this.partialPosition=a):b[d]?(this.tests.push(new RegExp(b[d])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=a.map(this.mask.split(""),a.proxy(function(a){return"?"!=a?b[a]?this.options.placeholder:a:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",a.proxy(function(){return a.map(this.buffer,function(a,b){return this.tests[b]&&a!=this.options.placeholder?a:null}).join("")},this))},e.prototype.listen=function(){if(!this.$element.attr("readonly")){var b=(d?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",a.proxy(this.unmask,this)).on("focus.bs.inputmask",a.proxy(this.focusEvent,this)).on("blur.bs.inputmask",a.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",a.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",a.proxy(this.keypressEvent,this)).on(b,a.proxy(this.pasteEvent,this))}},e.prototype.caret=function(a,b){if(0!==this.$element.length){if("number"==typeof a)return b="number"==typeof b?b:a,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()}});if(this.$element[0].setSelectionRange)a=this.$element[0].selectionStart,b=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{begin:a,end:b}}},e.prototype.seekNext=function(a){for(var b=this.mask.length;++a<=b&&!this.tests[a];);return a},e.prototype.seekPrev=function(a){for(;--a>=0&&!this.tests[a];);return a},e.prototype.shiftL=function(a,b){var c=this.mask.length;if(!(0>a)){for(var d=a,e=this.seekNext(b);c>d;d++)if(this.tests[d]){if(!(c>e&&this.tests[d].test(this.buffer[e])))break;this.buffer[d]=this.buffer[e],this.buffer[e]=this.options.placeholder,e=this.seekNext(e)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,a))}},e.prototype.shiftR=function(a){for(var b=this.mask.length,c=a,d=this.options.placeholder;b>c;c++)if(this.tests[c]){var e=this.seekNext(c),f=this.buffer[c];if(this.buffer[c]=d,!(b>e&&this.tests[e].test(f)))break;d=f}},e.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},e.prototype.focusEvent=function(){this.focusText=this.$element.val();var a=this.mask.length,b=this.checkVal();this.writeBuffer();var c=this,d=function(){b==a?c.caret(0,b):c.caret(b)};d(),setTimeout(d,50)},e.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},e.prototype.keydownEvent=function(a){var c=a.which;if(8==c||46==c||b&&127==c){var d=this.caret(),e=d.begin,f=d.end;return f-e===0&&(e=46!=c?this.seekPrev(e):f=this.seekNext(e-1),f=46==c?this.seekNext(f):f),this.clearBuffer(e,f),this.shiftL(e,f-1),!1}return 27==c?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},e.prototype.keypressEvent=function(a){var b=this.mask.length,c=a.which,d=this.caret();if(a.ctrlKey||a.altKey||a.metaKey||32>c)return!0;if(c){d.end-d.begin!==0&&(this.clearBuffer(d.begin,d.end),this.shiftL(d.begin,d.end-1));var e=this.seekNext(d.begin-1);if(b>e){var f=String.fromCharCode(c);if(this.tests[e].test(f)){this.shiftR(e),this.buffer[e]=f,this.writeBuffer();var g=this.seekNext(e);this.caret(g)}}return!1}},e.prototype.pasteEvent=function(){var a=this;setTimeout(function(){a.caret(a.checkVal(!0))},0)},e.prototype.clearBuffer=function(a,b){for(var c=this.mask.length,d=a;b>d&&c>d;d++)this.tests[d]&&(this.buffer[d]=this.options.placeholder)},e.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},e.prototype.checkVal=function(a){for(var b=this.mask.length,c=this.$element.val(),d=-1,e=0,f=0;b>e;e++)if(this.tests[e]){for(this.buffer[e]=this.options.placeholder;f++<c.length;){var g=c.charAt(f-1);if(this.tests[e].test(g)){this.buffer[e]=g,d=e;break}}if(f>c.length)break}else this.buffer[e]==c.charAt(f)&&e!=this.partialPosition&&(f++,d=e);return!a&&d+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,b)):(a||d+1>=this.partialPosition)&&(this.writeBuffer(),a||this.$element.val(this.$element.val().substring(0,d+1))),this.partialPosition?e:this.firstNonMaskPos};var f=a.fn.inputmask;a.fn.inputmask=function(b){return this.each(function(){var c=a(this),d=c.data("inputmask");d||c.data("inputmask",d=new e(this,b))})},a.fn.inputmask.Constructor=e,a.fn.inputmask.noConflict=function(){return a.fn.inputmask=f,this},a(document).on("focus.bs.inputmask.data-api","[data-mask]",function(){var b=a(this);b.data("inputmask")||b.inputmask(b.data())})}(window.jQuery),+function(a){"use strict";var b="Microsoft Internet Explorer"==window.navigator.appName,c=function(b,c){if(this.$element=a(b),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||c.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=a('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var d=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==d&&"none"!==d&&this.$preview.css("line-height",d),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};c.prototype.listen=function(){this.$input.on("change.bs.fileinput",a.proxy(this.change,this)),a(this.$input[0].form).on("reset.bs.fileinput",a.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",a.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",a.proxy(this.clear,this))},c.prototype.change=function(b){var c=void 0===b.target.files?b.target&&b.target.value?[{name:b.target.value.replace(/^.+\\/,"")}]:[]:b.target.files;if(b.stopPropagation(),0===c.length)return void this.clear();this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var d=c[0];if(this.$preview.length>0&&("undefined"!=typeof d.type?d.type.match(/^image\/(gif|png|jpeg)$/):d.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var e=new FileReader,f=this.$preview,g=this.$element;e.onload=function(b){var e=a("<img>");e[0].src=b.target.result,c[0].result=b.target.result,g.find(".fileinput-filename").text(d.name),"none"!=f.css("max-height")&&e.css("max-height",parseInt(f.css("max-height"),10)-parseInt(f.css("padding-top"),10)-parseInt(f.css("padding-bottom"),10)-parseInt(f.css("border-top"),10)-parseInt(f.css("border-bottom"),10)),f.html(e),g.addClass("fileinput-exists").removeClass("fileinput-new"),g.trigger("change.bs.fileinput",c)},e.readAsDataURL(d)}else this.$element.find(".fileinput-filename").text(d.name),this.$preview.text(d.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},c.prototype.clear=function(a){if(a&&a.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),b){var c=this.$input.clone(!0);this.$input.after(c),this.$input.remove(),this.$input=c}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==a&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},c.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},c.prototype.trigger=function(a){this.$input.trigger("click"),a.preventDefault()};var d=a.fn.fileinput;a.fn.fileinput=function(b){return this.each(function(){var d=a(this),e=d.data("fileinput");e||d.data("fileinput",e=new c(this,b)),"string"==typeof b&&e[b]()})},a.fn.fileinput.Constructor=c,a.fn.fileinput.noConflict=function(){return a.fn.fileinput=d,this},a(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(b){var c=a(this);if(!c.data("fileinput")){c.fileinput(c.data());var d=a(b.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');d.length>0&&(b.preventDefault(),d.trigger("click.bs.fileinput"))}})}(window.jQuery);

/*!
 * Bootstrap-select v1.12.2 (http://silviomoreto.github.io/bootstrap-select)
 *
 * Copyright 2013-2017 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){!function(a){"use strict";function b(b){var c=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return a.each(c,function(){b=b?b.replace(this.re,this.ch):""}),b}function c(b){var c=arguments,d=b;[].shift.apply(c);var e,f=this.each(function(){var b=a(this);if(b.is("select")){var f=b.data("selectpicker"),g="object"==typeof d&&d;if(f){if(g)for(var h in g)g.hasOwnProperty(h)&&(f.options[h]=g[h])}else{var i=a.extend({},k.DEFAULTS,a.fn.selectpicker.defaults||{},b.data(),g);i.template=a.extend({},k.DEFAULTS.template,a.fn.selectpicker.defaults?a.fn.selectpicker.defaults.template:{},b.data().template,g.template),b.data("selectpicker",f=new k(this,i))}"string"==typeof d&&(e=f[d]instanceof Function?f[d].apply(f,c):f.options[d])}});return"undefined"!=typeof e?e:f}String.prototype.includes||!function(){var a={}.toString,b=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(a){}return c}(),c="".indexOf,d=function(b){if(null==this)throw new TypeError;var d=String(this);if(b&&"[object RegExp]"==a.call(b))throw new TypeError;var e=d.length,f=String(b),g=f.length,h=arguments.length>1?arguments[1]:void 0,i=h?Number(h):0;i!=i&&(i=0);var j=Math.min(Math.max(i,0),e);return!(g+j>e)&&c.call(d,f,i)!=-1};b?b(String.prototype,"includes",{value:d,configurable:!0,writable:!0}):String.prototype.includes=d}(),String.prototype.startsWith||!function(){var a=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(a){}return c}(),b={}.toString,c=function(a){if(null==this)throw new TypeError;var c=String(this);if(a&&"[object RegExp]"==b.call(a))throw new TypeError;var d=c.length,e=String(a),f=e.length,g=arguments.length>1?arguments[1]:void 0,h=g?Number(g):0;h!=h&&(h=0);var i=Math.min(Math.max(h,0),d);if(f+i>d)return!1;for(var j=-1;++j<f;)if(c.charCodeAt(i+j)!=e.charCodeAt(j))return!1;return!0};a?a(String.prototype,"startsWith",{value:c,configurable:!0,writable:!0}):String.prototype.startsWith=c}(),Object.keys||(Object.keys=function(a,b,c){c=[];for(b in a)c.hasOwnProperty.call(a,b)&&c.push(b);return c});var d={useDefault:!1,_set:a.valHooks.select.set};a.valHooks.select.set=function(b,c){return c&&!d.useDefault&&a(b).data("selected",!0),d._set.apply(this,arguments)};var e=null;a.fn.triggerNative=function(a){var b,c=this[0];c.dispatchEvent?("function"==typeof Event?b=new Event(a,{bubbles:!0}):(b=document.createEvent("Event"),b.initEvent(a,!0,!1)),c.dispatchEvent(b)):c.fireEvent?(b=document.createEventObject(),b.eventType=a,c.fireEvent("on"+a,b)):this.trigger(a)},a.expr.pseudos.icontains=function(b,c,d){var e=a(b),f=(e.data("tokens")||e.text()).toString().toUpperCase();return f.includes(d[3].toUpperCase())},a.expr.pseudos.ibegins=function(b,c,d){var e=a(b),f=(e.data("tokens")||e.text()).toString().toUpperCase();return f.startsWith(d[3].toUpperCase())},a.expr.pseudos.aicontains=function(b,c,d){var e=a(b),f=(e.data("tokens")||e.data("normalizedText")||e.text()).toString().toUpperCase();return f.includes(d[3].toUpperCase())},a.expr.pseudos.aibegins=function(b,c,d){var e=a(b),f=(e.data("tokens")||e.data("normalizedText")||e.text()).toString().toUpperCase();return f.startsWith(d[3].toUpperCase())};var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"},h=function(a){var b=function(b){return a[b]},c="(?:"+Object.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}},i=h(f),j=h(g),k=function(b,c){d.useDefault||(a.valHooks.select.set=d._set,d.useDefault=!0),this.$element=a(b),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=c,null===this.options.title&&(this.options.title=this.$element.attr("title"));var e=this.options.windowPadding;"number"==typeof e&&(this.options.windowPadding=[e,e,e,e]),this.val=k.prototype.val,this.render=k.prototype.render,this.refresh=k.prototype.refresh,this.setStyle=k.prototype.setStyle,this.selectAll=k.prototype.selectAll,this.deselectAll=k.prototype.deselectAll,this.destroy=k.prototype.destroy,this.remove=k.prototype.remove,this.show=k.prototype.show,this.hide=k.prototype.hide,this.init()};k.VERSION="1.12.2",k.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"\u6CA1\u6709\u5339\u914D\u6761\u4EF6\u7684\u8BB0\u5F55\uFF1A{0}",countSelectedText:function(a,b){return 1==a?"{0} item selected":"{0} items selected"},maxOptionsText:function(a,b){return[1==a?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==b?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0},k.prototype={constructor:k,init:function(){var b=this,c=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement).appendTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),this.options.dropdownAlignRight===!0&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof c&&(this.$button.attr("data-id",c),a('label[for="'+c+'"]').click(function(a){a.preventDefault(),b.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(a){b.$menuInner.attr("aria-expanded",!1),b.$element.trigger("hide.bs.select",a)},"hidden.bs.dropdown":function(a){b.$element.trigger("hidden.bs.select",a)},"show.bs.dropdown":function(a){b.$menuInner.attr("aria-expanded",!0),b.$element.trigger("show.bs.select",a)},"shown.bs.dropdown":function(a){b.$element.trigger("shown.bs.select",a)}}),b.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){b.$button.addClass("bs-invalid").focus(),b.$element.on({"focus.bs.select":function(){b.$button.focus(),b.$element.off("focus.bs.select")},"shown.bs.select":function(){b.$element.val(b.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&b.$button.removeClass("bs-invalid"),b.$element.off("rendered.bs.select")}})}),setTimeout(function(){b.$element.trigger("loaded.bs.select")})},createDropdown:function(){var b=this.multiple||this.options.showTick?" show-tick":"",c=this.$element.parent().hasClass("input-group")?" input-group-btn":"",d=this.autofocus?" autofocus":"",e=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",f=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+i(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>':"",g=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",h=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",j='<div class="btn-group bootstrap-select'+b+c+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+d+' role="button"><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open" role="combobox">'+e+f+g+'<ul class="dropdown-menu inner" role="listbox" aria-expanded="false"></ul>'+h+"</div></div>";return a(j)},createView:function(){var a=this.createDropdown(),b=this.createLi();return a.find("ul")[0].innerHTML=b,a},reloadLi:function(){var a=this.createLi();this.$menuInner[0].innerHTML=a},createLi:function(){var c=this,d=[],e=0,f=document.createElement("option"),g=-1,h=function(a,b,c,d){return"<li"+("undefined"!=typeof c&""!==c?' class="'+c+'"':"")+("undefined"!=typeof b&null!==b?' data-original-index="'+b+'"':"")+("undefined"!=typeof d&null!==d?'data-optgroup="'+d+'"':"")+">"+a+"</li>"},j=function(d,e,f,g){return'<a tabindex="0"'+("undefined"!=typeof e?' class="'+e+'"':"")+(f?' style="'+f+'"':"")+(c.options.liveSearchNormalize?' data-normalized-text="'+b(i(a(d).html()))+'"':"")+("undefined"!=typeof g||null!==g?' data-tokens="'+g+'"':"")+' role="option">'+d+'<span class="'+c.options.iconBase+" "+c.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(g--,!this.$element.find(".bs-title-option").length)){var k=this.$element[0];f.className="bs-title-option",f.innerHTML=this.options.title,f.value="",k.insertBefore(f,k.firstChild);var l=a(k.options[k.selectedIndex]);void 0===l.attr("selected")&&void 0===this.$element.data("selected")&&(f.selected=!0)}return this.$element.find("option").each(function(b){var f=a(this);if(g++,!f.hasClass("bs-title-option")){var k=this.className||"",l=this.style.cssText,m=f.data("content")?f.data("content"):f.html(),n=f.data("tokens")?f.data("tokens"):null,o="undefined"!=typeof f.data("subtext")?'<small class="text-muted">'+f.data("subtext")+"</small>":"",p="undefined"!=typeof f.data("icon")?'<span class="'+c.options.iconBase+" "+f.data("icon")+'"></span> ':"",q=f.parent(),r="OPTGROUP"===q[0].tagName,s=r&&q[0].disabled,t=this.disabled||s;if(""!==p&&t&&(p="<span>"+p+"</span>"),c.options.hideDisabled&&(t&&!r||s))return void g--;if(f.data("content")||(m=p+'<span class="text">'+m+o+"</span>"),r&&f.data("divider")!==!0){if(c.options.hideDisabled&&t){if(void 0===q.data("allOptionsDisabled")){var u=q.children();q.data("allOptionsDisabled",u.filter(":disabled").length===u.length)}if(q.data("allOptionsDisabled"))return void g--}var v=" "+q[0].className||"";if(0===f.index()){e+=1;var w=q[0].label,x="undefined"!=typeof q.data("subtext")?'<small class="text-muted">'+q.data("subtext")+"</small>":"",y=q.data("icon")?'<span class="'+c.options.iconBase+" "+q.data("icon")+'"></span> ':"";w=y+'<span class="text">'+i(w)+x+"</span>",0!==b&&d.length>0&&(g++,d.push(h("",null,"divider",e+"div"))),g++,d.push(h(w,null,"dropdown-header"+v,e))}if(c.options.hideDisabled&&t)return void g--;d.push(h(j(m,"opt "+k+v,l,n),b,"",e))}else if(f.data("divider")===!0)d.push(h("",b,"divider"));else if(f.data("hidden")===!0)d.push(h(j(m,k,l,n),b,"hidden is-hidden"));else{var z=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName;if(!z&&c.options.hideDisabled)for(var A=a(this).prevAll(),B=0;B<A.length;B++)if("OPTGROUP"===A[B].tagName){for(var C=0,D=0;D<B;D++){var E=A[D];(E.disabled||a(E).data("hidden")===!0)&&C++}C===B&&(z=!0);break}z&&(g++,d.push(h("",null,"divider",e+"div"))),d.push(h(j(m,k,l,n),b))}c.liObj[b]=g}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),d.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(b){var c,d=this;b!==!1&&this.$element.find("option").each(function(a){var b=d.findLis().eq(d.liObj[a]);d.setDisabled(a,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,b),d.setSelected(a,this.selected,b)}),this.togglePlaceholder(),this.tabIndex();var e=this.$element.find("option").map(function(){if(this.selected){if(d.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var b,c=a(this),e=c.data("icon")&&d.options.showIcon?'<i class="'+d.options.iconBase+" "+c.data("icon")+'"></i> ':"";return b=d.options.showSubtext&&c.data("subtext")&&!d.multiple?' <small class="text-muted">'+c.data("subtext")+"</small>":"","undefined"!=typeof c.attr("title")?c.attr("title"):c.data("content")&&d.options.showContent?c.data("content").toString():e+c.html()+b}}).toArray(),f=this.multiple?e.join(this.options.multipleSeparator):e[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var g=this.options.selectedTextFormat.split(">");if(g.length>1&&e.length>g[1]||1==g.length&&e.length>=2){c=this.options.hideDisabled?", [disabled]":"";var h=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+c).length,i="function"==typeof this.options.countSelectedText?this.options.countSelectedText(e.length,h):this.options.countSelectedText;f=i.replace("{0}",e.length.toString()).replace("{1}",h.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(f=this.options.title),f||(f="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",j(a.trim(f.replace(/<[^>]*>?/g,"")))),this.$button.children(".filter-option").html(f),this.$element.trigger("rendered.bs.select")},setStyle:function(a,b){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var c=a?a:this.options.style;"add"==b?this.$button.addClass(c):"remove"==b?this.$button.removeClass(c):(this.$button.removeClass(this.options.style),this.$button.addClass(c))},liHeight:function(b){if(b||this.options.size!==!1&&!this.sizeInfo){var c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("ul"),f=document.createElement("li"),g=document.createElement("li"),h=document.createElement("a"),i=document.createElement("span"),j=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,k=this.options.liveSearch?document.createElement("div"):null,l=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(i.className="text",c.className=this.$menu[0].parentNode.className+" open",d.className="dropdown-menu open",e.className="dropdown-menu inner",f.className="divider",i.appendChild(document.createTextNode("Inner text")),h.appendChild(i),g.appendChild(h),e.appendChild(g),e.appendChild(f),j&&d.appendChild(j),k){var n=document.createElement("input");k.className="bs-searchbox",n.className="form-control",k.appendChild(n),d.appendChild(k)}l&&d.appendChild(l),d.appendChild(e),m&&d.appendChild(m),c.appendChild(d),document.body.appendChild(c);var o=h.offsetHeight,p=j?j.offsetHeight:0,q=k?k.offsetHeight:0,r=l?l.offsetHeight:0,s=m?m.offsetHeight:0,t=a(f).outerHeight(!0),u="function"==typeof getComputedStyle&&getComputedStyle(d),v=u?null:a(d),w={vert:parseInt(u?u.paddingTop:v.css("paddingTop"))+parseInt(u?u.paddingBottom:v.css("paddingBottom"))+parseInt(u?u.borderTopWidth:v.css("borderTopWidth"))+parseInt(u?u.borderBottomWidth:v.css("borderBottomWidth")),horiz:parseInt(u?u.paddingLeft:v.css("paddingLeft"))+parseInt(u?u.paddingRight:v.css("paddingRight"))+parseInt(u?u.borderLeftWidth:v.css("borderLeftWidth"))+parseInt(u?u.borderRightWidth:v.css("borderRightWidth"))},x={vert:w.vert+parseInt(u?u.marginTop:v.css("marginTop"))+parseInt(u?u.marginBottom:v.css("marginBottom"))+2,horiz:w.horiz+parseInt(u?u.marginLeft:v.css("marginLeft"))+parseInt(u?u.marginRight:v.css("marginRight"))+2};document.body.removeChild(c),this.sizeInfo={liHeight:o,headerHeight:p,searchHeight:q,actionsHeight:r,doneButtonHeight:s,dividerHeight:t,menuPadding:w,menuExtras:x}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var b,c,d,e,f,g,h,i,j=this,k=this.$menu,l=this.$menuInner,m=a(window),n=this.$newElement[0].offsetHeight,o=this.$newElement[0].offsetWidth,p=this.sizeInfo.liHeight,q=this.sizeInfo.headerHeight,r=this.sizeInfo.searchHeight,s=this.sizeInfo.actionsHeight,t=this.sizeInfo.doneButtonHeight,u=this.sizeInfo.dividerHeight,v=this.sizeInfo.menuPadding,w=this.sizeInfo.menuExtras,x=this.options.hideDisabled?".disabled":"",y=function(){var b,c=j.$newElement.offset(),d=a(j.options.container);j.options.container&&!d.is("body")?(b=d.offset(),b.top+=parseInt(d.css("borderTopWidth")),b.left+=parseInt(d.css("borderLeftWidth"))):b={top:0,left:0};var e=j.options.windowPadding;f=c.top-b.top-m.scrollTop(),g=m.height()-f-n-b.top-e[2],h=c.left-b.left-m.scrollLeft(),i=m.width()-h-o-b.left-e[1],f-=e[0],h-=e[3]};if(y(),"auto"===this.options.size){var z=function(){var m,n=function(b,c){return function(d){return c?d.classList?d.classList.contains(b):a(d).hasClass(b):!(d.classList?d.classList.contains(b):a(d).hasClass(b))}},u=j.$menuInner[0].getElementsByTagName("li"),x=Array.prototype.filter?Array.prototype.filter.call(u,n("hidden",!1)):j.$lis.not(".hidden"),z=Array.prototype.filter?Array.prototype.filter.call(x,n("dropdown-header",!0)):x.filter(".dropdown-header");y(),b=g-w.vert,c=i-w.horiz,j.options.container?(k.data("height")||k.data("height",k.height()),d=k.data("height"),k.data("width")||k.data("width",k.width()),e=k.data("width")):(d=k.height(),e=k.width()),j.options.dropupAuto&&j.$newElement.toggleClass("dropup",f>g&&b-w.vert<d),j.$newElement.hasClass("dropup")&&(b=f-w.vert),"auto"===j.options.dropdownAlignRight&&k.toggleClass("dropdown-menu-right",h>i&&c-w.horiz<e-o),m=x.length+z.length>3?3*p+w.vert-2:0,k.css({"max-height":b+"px",overflow:"hidden","min-height":m+q+r+s+t+"px"}),l.css({"max-height":b-q-r-s-t-v.vert+"px","overflow-y":"auto","min-height":Math.max(m-v.vert,0)+"px"})};z(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",z),m.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",z)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(x).length>this.options.size){var A=this.$lis.not(".divider").not(x).children().slice(0,this.options.size).last().parent().index(),B=this.$lis.slice(0,A+1).filter(".divider").length;b=p*this.options.size+B*u+v.vert,j.options.container?(k.data("height")||k.data("height",k.height()),d=k.data("height")):d=k.height(),j.options.dropupAuto&&this.$newElement.toggleClass("dropup",f>g&&b-w.vert<d),k.css({"max-height":b+q+r+s+t+"px",overflow:"hidden","min-height":""}),l.css({"max-height":b-v.vert+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var a=this.$menu.parent().clone().appendTo("body"),b=this.options.container?this.$newElement.clone().appendTo("body"):a,c=a.children(".dropdown-menu").outerWidth(),d=b.css("width","auto").children("button").outerWidth();a.remove(),b.remove(),this.$newElement.css("width",Math.max(c,d)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=a('<div class="bs-container" />');var b,c,d,e=this,f=a(this.options.container),g=function(a){e.$bsContainer.addClass(a.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",a.hasClass("dropup")),b=a.offset(),f.is("body")?c={top:0,left:0}:(c=f.offset(),c.top+=parseInt(f.css("borderTopWidth"))-f.scrollTop(),c.left+=parseInt(f.css("borderLeftWidth"))-f.scrollLeft()),d=a.hasClass("dropup")?0:a[0].offsetHeight,e.$bsContainer.css({top:b.top-c.top+d,left:b.left-c.left,width:a[0].offsetWidth})};this.$button.on("click",function(){var b=a(this);e.isDisabled()||(g(e.$newElement),e.$bsContainer.appendTo(e.options.container).toggleClass("open",!b.hasClass("open")).append(e.$menu))}),a(window).on("resize scroll",function(){g(e.$newElement)}),this.$element.on("hide.bs.select",function(){e.$menu.data("height",e.$menu.height()),e.$bsContainer.detach()})},setSelected:function(a,b,c){c||(this.togglePlaceholder(),c=this.findLis().eq(this.liObj[a])),c.toggleClass("selected",b).find("a").attr("aria-selected",b)},setDisabled:function(a,b,c){c||(c=this.findLis().eq(this.liObj[a])),b?c.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1).attr("aria-disabled",!0):c.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0).attr("aria-disabled",!1)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var a=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled").attr("aria-disabled",!1)),this.$button.attr("tabindex")!=-1||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!a.isDisabled()})},togglePlaceholder:function(){var a=this.$element.val();this.$button.toggleClass("bs-placeholder",null===a||""===a||a.constructor===Array&&0===a.length)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&this.$element.attr("tabindex")!==-98&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var b=this,c=a(document);c.data("spaceSelect",!1),this.$button.on("keyup",function(a){/(32)/.test(a.keyCode.toString(10))&&c.data("spaceSelect")&&(a.preventDefault(),c.data("spaceSelect",!1))}),this.$button.on("click",function(){b.setSize()}),this.$element.on("shown.bs.select",function(){if(b.options.liveSearch||b.multiple){if(!b.multiple){var a=b.liObj[b.$element[0].selectedIndex];if("number"!=typeof a||b.options.size===!1)return;var c=b.$lis.eq(a)[0].offsetTop-b.$menuInner[0].offsetTop;c=c-b.$menuInner[0].offsetHeight/2+b.sizeInfo.liHeight/2,b.$menuInner[0].scrollTop=c}}else b.$menuInner.find(".selected a").focus()}),this.$menuInner.on("click","li a",function(c){var d=a(this),f=d.parent().data("originalIndex"),g=b.$element.val(),h=b.$element.prop("selectedIndex"),i=!0;if(b.multiple&&1!==b.options.maxOptions&&c.stopPropagation(),c.preventDefault(),!b.isDisabled()&&!d.parent().hasClass("disabled")){var j=b.$element.find("option"),k=j.eq(f),l=k.prop("selected"),m=k.parent("optgroup"),n=b.options.maxOptions,o=m.data("maxOptions")||!1;if(b.multiple){if(k.prop("selected",!l),b.setSelected(f,!l),d.blur(),n!==!1||o!==!1){var p=n<j.filter(":selected").length,q=o<m.find("option:selected").length;if(n&&p||o&&q)if(n&&1==n)j.prop("selected",!1),k.prop("selected",!0),b.$menuInner.find(".selected").removeClass("selected"),b.setSelected(f,!0);else if(o&&1==o){m.find("option:selected").prop("selected",!1),k.prop("selected",!0);var r=d.parent().data("optgroup");b.$menuInner.find('[data-optgroup="'+r+'"]').removeClass("selected"),b.setSelected(f,!0)}else{var s="string"==typeof b.options.maxOptionsText?[b.options.maxOptionsText,b.options.maxOptionsText]:b.options.maxOptionsText,t="function"==typeof s?s(n,o):s,u=t[0].replace("{n}",n),v=t[1].replace("{n}",o),w=a('<div class="notify"></div>');t[2]&&(u=u.replace("{var}",t[2][n>1?0:1]),v=v.replace("{var}",t[2][o>1?0:1])),k.prop("selected",!1),b.$menu.append(w),n&&p&&(w.append(a("<div>"+u+"</div>")),i=!1,b.$element.trigger("maxReached.bs.select")),o&&q&&(w.append(a("<div>"+v+"</div>")),i=!1,b.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){b.setSelected(f,!1)},10),w.delay(750).fadeOut(300,function(){a(this).remove()})}}}else j.prop("selected",!1),k.prop("selected",!0),b.$menuInner.find(".selected").removeClass("selected").find("a").attr("aria-selected",!1),b.setSelected(f,!0);!b.multiple||b.multiple&&1===b.options.maxOptions?b.$button.focus():b.options.liveSearch&&b.$searchbox.focus(),i&&(g!=b.$element.val()&&b.multiple||h!=b.$element.prop("selectedIndex")&&!b.multiple)&&(e=[f,k.prop("selected"),l],b.$element.triggerNative("change"))}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(c){c.currentTarget==this&&(c.preventDefault(),c.stopPropagation(),b.options.liveSearch&&!a(c.target).hasClass("close")?b.$searchbox.focus():b.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(a){a.preventDefault(),a.stopPropagation(),b.options.liveSearch?b.$searchbox.focus():b.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){b.$button.click()}),this.$searchbox.on("click",function(a){a.stopPropagation()}),this.$menu.on("click",".actions-btn",function(c){b.options.liveSearch?b.$searchbox.focus():b.$button.focus(),c.preventDefault(),c.stopPropagation(),a(this).hasClass("bs-select-all")?b.selectAll():b.deselectAll()}),this.$element.change(function(){b.render(!1),b.$element.trigger("changed.bs.select",e),e=null})},liveSearchListener:function(){var c=this,d=a('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api",function(){c.$menuInner.find(".active").removeClass("active"),c.$searchbox.val()&&(c.$searchbox.val(""),c.$lis.not(".is-hidden").removeClass("hidden"),d.parent().length&&d.remove()),c.multiple||c.$menuInner.find(".selected").addClass("active"),setTimeout(function(){c.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(a){a.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(c.$lis.not(".is-hidden").removeClass("hidden"),c.$lis.filter(".active").removeClass("active"),d.remove(),c.$searchbox.val()){var e,f=c.$lis.not(".is-hidden, .divider, .dropdown-header");if(e=c.options.liveSearchNormalize?f.find("a").not(":a"+c._searchStyle()+'("'+b(c.$searchbox.val())+'")'):f.find("a").not(":"+c._searchStyle()+'("'+c.$searchbox.val()+'")'),e.length===f.length)d.html(c.options.noneResultsText.replace("{0}",'"'+i(c.$searchbox.val())+'"')),c.$menuInner.append(d),c.$lis.addClass("hidden");else{e.parent().addClass("hidden");var g,h=c.$lis.not(".hidden");h.each(function(b){var c=a(this);c.hasClass("divider")?void 0===g?c.addClass("hidden"):(g&&g.addClass("hidden"),g=c):c.hasClass("dropdown-header")&&h.eq(b+1).data("optgroup")!==c.data("optgroup")?c.addClass("hidden"):g=null}),g&&g.addClass("hidden"),f.not(".hidden").first().addClass("active")}}})},_searchStyle:function(){var a={begins:"ibegins",startsWith:"ibegins"};return a[this.options.liveSearchStyle]||"icontains"},val:function(a){return"undefined"!=typeof a?(this.$element.val(a),this.render(),this.$element):this.$element.val()},changeAll:function(b){if(this.multiple){"undefined"==typeof b&&(b=!0),this.findLis();var c=this.$element.find("option"),d=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden"),e=d.length,f=[];if(b){if(d.filter(".selected").length===d.length)return}else if(0===d.filter(".selected").length)return;d.toggleClass("selected",b);for(var g=0;g<e;g++){var h=d[g].getAttribute("data-original-index");f[f.length]=c.eq(h)[0]}a(f).prop("selected",b),this.render(!1),this.togglePlaceholder(),this.$element.triggerNative("change")}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(a){a=a||window.event,a&&a.stopPropagation(),this.$button.trigger("click")},keydown:function(c){var d,e,f,g,h,i,j,k,l,m=a(this),n=m.is("input")?m.parent().parent():m.parent(),o=n.data("this"),p=":not(.disabled, .hidden, .dropdown-header, .divider)",q={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(o.options.liveSearch&&(n=m.parent().parent()),o.options.container&&(n=o.$menu),d=a('[role="listbox"] li',n),l=o.$newElement.hasClass("open"),!l&&(c.keyCode>=48&&c.keyCode<=57||c.keyCode>=96&&c.keyCode<=105||c.keyCode>=65&&c.keyCode<=90))return o.options.container?o.$button.trigger("click"):(o.setSize(),o.$menu.parent().addClass("open"),l=!0),void o.$searchbox.focus();if(o.options.liveSearch&&(/(^9$|27)/.test(c.keyCode.toString(10))&&l&&(c.preventDefault(),c.stopPropagation(),o.$menuInner.click(),o.$button.focus()),d=a('[role="listbox"] li'+p,n),m.val()||/(38|40)/.test(c.keyCode.toString(10))||0===d.filter(".active").length&&(d=o.$menuInner.find("li"),d=o.options.liveSearchNormalize?d.filter(":a"+o._searchStyle()+"("+b(q[c.keyCode])+")"):d.filter(":"+o._searchStyle()+"("+q[c.keyCode]+")"))),d.length){if(/(38|40)/.test(c.keyCode.toString(10)))e=d.index(d.find("a").filter(":focus").parent()),g=d.filter(p).first().index(),h=d.filter(p).last().index(),f=d.eq(e).nextAll(p).eq(0).index(),i=d.eq(e).prevAll(p).eq(0).index(),j=d.eq(f).prevAll(p).eq(0).index(),o.options.liveSearch&&(d.each(function(b){a(this).hasClass("disabled")||a(this).data("index",b)}),e=d.index(d.filter(".active")),g=d.first().data("index"),h=d.last().data("index"),f=d.eq(e).nextAll().eq(0).data("index"),i=d.eq(e).prevAll().eq(0).data("index"),j=d.eq(f).prevAll().eq(0).data("index")),k=m.data("prevIndex"),38==c.keyCode?(o.options.liveSearch&&e--,e!=j&&e>i&&(e=i),e<g&&(e=g),e==k&&(e=h)):40==c.keyCode&&(o.options.liveSearch&&e++,e==-1&&(e=0),e!=j&&e<f&&(e=f),e>h&&(e=h),e==k&&(e=g)),m.data("prevIndex",e),o.options.liveSearch?(c.preventDefault(),m.hasClass("dropdown-toggle")||(d.removeClass("active").eq(e).addClass("active").children("a").focus(),m.focus())):d.eq(e).children("a").focus();else if(!m.is("input")){var r,s,t=[];d.each(function(){a(this).hasClass("disabled")||a.trim(a(this).children("a").text().toLowerCase()).substring(0,1)==q[c.keyCode]&&t.push(a(this).index())}),r=a(document).data("keycount"),r++,a(document).data("keycount",r),s=a.trim(a(":focus").text().toLowerCase()).substring(0,1),s!=q[c.keyCode]?(r=1,a(document).data("keycount",r)):r>=t.length&&(a(document).data("keycount",0),r>t.length&&(r=1)),d.eq(t[r-1]).children("a").focus()}if((/(13|32)/.test(c.keyCode.toString(10))||/(^9$)/.test(c.keyCode.toString(10))&&o.options.selectOnTab)&&l){if(/(32)/.test(c.keyCode.toString(10))||c.preventDefault(),o.options.liveSearch)/(32)/.test(c.keyCode.toString(10))||(o.$menuInner.find(".active a").click(),
m.focus());else{var u=a(":focus");u.click(),u.focus(),c.preventDefault(),a(document).data("spaceSelect",!0)}a(document).data("keycount",0)}(/(^9$|27)/.test(c.keyCode.toString(10))&&l&&(o.multiple||o.options.liveSearch)||/(27)/.test(c.keyCode.toString(10))&&!l)&&(o.$menu.parent().removeClass("open"),o.options.container&&o.$newElement.removeClass("open"),o.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var l=a.fn.selectpicker;a.fn.selectpicker=c,a.fn.selectpicker.Constructor=k,a.fn.selectpicker.noConflict=function(){return a.fn.selectpicker=l,this},a(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',k.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',function(a){a.stopPropagation()}),a(window).on("load.bs.select.data-api",function(){a(".selectpicker").each(function(){var b=a(this);c.call(b,b.data())})})}(a)});
//# sourceMappingURL=bootstrap-select.js.map
!function(a){a.fn.bsSuggest=function(a){return"string"==typeof a&&b[a]?b[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void 0:b.init.apply(this,arguments)};var b={init:function(b){function c(a,b){var c,d,e;return-1===b.indexId&&!b.idField||b.multiWord?a:(c=a.css("background-color").replace(/ /g,"").split(",",3).join(","),d="rgba(255,255,255,0.1)",e=b.inputWarnColor||"rgba(255,255,0,0.1)",!a.val()||a.attr("data-id")?a.css("background",d):(-1===e.indexOf(c)&&(a.trigger("onUnsetSelectValue"),a.css("background",e)),a))}function d(a,b){var c,d,e=a.parent().find("tbody tr."+r.listHoverCSS);e.length>0&&(c=(e.index()+3)*e.height(),d=Number(b.css("max-height").replace("px","")),b.scrollTop(c>d||b.scrollTop()>d?c-d:0))}function e(a,b){a=a||$dropdownMenu,b=b||r,a.find("tr."+b.listHoverCSS).removeClass(b.listHoverCSS)}function f(b){var c=a(b),d=c.parent(".input-group").find("ul.dropdown-menu"),e=c.data("bsSuggest");return 0===d.length?!1:e?!1:(c.data("bsSuggest",{target:b,options:r}),!0)}function g(b,c,d,e){var f,g,h,l,m,n,o,q={value:[]};if(b=b||"",e=e||r,e.url)m=-1!==e.url.indexOf("?")?"&":"?",n=e.jsonp?[e.url+b,m,e.jsonp,"=?"].join(""):e.url+b,a.ajax({type:"GET",url:n,dataType:"json",timeout:3e3}).done(function(a){d(c,a,e),c.trigger("onDataRequestSuccess",a),"firstByUrl"===r.getDataMethod&&(r.data=a,r.url=null)}).fail(p);else{if(f=e.data,g=i(f))if(b){for(o=f.value.length,h=0;o>h;h++)for(l in f.value[h])if(a.trim(f.value[h][l])&&(k(l,e)||j(l,e))&&(-1!==f.value[h][l].toString().indexOf(b)||-1!==b.indexOf(f.value[h][l]))){q.value.push(f.value[h]);break}}else q=f;d(c,q,e)}}function h(a){return validData=i(a)}function i(a){var b=!0;for(var c in a)if("value"===c){b=!1;break}return b?(p("???????????!"),!1):0===a.value.length?!1:a}function j(b,c){return c=c||r,a.isArray(c.effectiveFields)&&c.effectiveFields.length>0&&-1===a.inArray(b,c.effectiveFields)?!1:!0}function k(b,c){return-1!==a.inArray(b,c.searchFields)?!0:!1}function l(a,b,c){var d,e,f,g,i,k,l,n=a.parent().find("ul.dropdown-menu"),o=0,p=['<table class="table table-condensed">'];if(c=c||r,b=h(b),b===!1||0===(d=b.value.length))return n.empty().hide(),a;if(c.showHeader){g="<thead><tr>";for(f in b.value[0])j(f)!==!1&&(g+=0===o?"<th>"+(c.effectiveFieldsAlias[f]||f)+"("+d+")</th>":"<th>"+(c.effectiveFieldsAlias[f]||f)+"</th>",o++);g+="</tr></thead>",p.push(g)}for(p.push("<tbody>"),e=0;d>e;e++){o=0,i="",k=b.value[e][c.idField]||"",l=b.value[e][c.keyField]||"";for(f in b.value[e])l||c.indexKey!==o||(l=b.value[e][f]),k||c.indexId!==o||(k=b.value[e][f]),o++,j(f)!==!1&&(i+='<td data-name="'+f+'">'+b.value[e][f]+"</td>");i='<tr data-index="'+e+'" data-id="'+k+'" data-key="'+l+'">'+i+"</tr>",p.push(i)}return p.push("</tbody></table>"),n.html(p.join("")).show(),m(a,n,c),n.css("max-height")&&Number(n.css("max-height").replace("px",""))<Number(n.find("table:eq(0)").css("height").replace("px",""))&&Number(n.css("min-width").replace("px",""))<Number(n.css("width").replace("px",""))?n.css("padding-right","20px").find("table:eq(0)").css("margin-bottom","20px"):n.css("padding-right",0).find("table:eq(0)").css("margin-bottom",0),a}function m(b,d,f){d=d||$dropdownMenu,f=f||r,d.find("tbody tr").each(function(){a(this).off("mouseenter").on("mouseenter",function(){e(d,f),a(this).addClass(f.listHoverCSS)}).off("mousedown").on("mousedown",function(){o(b,n(a(this)),f),c(b,f)})})}function n(a){var b={};return b.id=a.attr("data-id"),b.key=a.attr("data-key"),b}function o(a,b,c){var d,e=b||{},f=e.id||"",g=e.key||"";c&&c.multiWord?(d=a.val().split(c.separator||" "),d[d.length-1]=g,a.val(d.join(c.separator||" ")).focus()):a.attr("data-id",f).focus().val(g),a.trigger("onSetSelectValue",e)}function p(a,b){console.log(a),b&&console.log(b)}var q=this,r=a.extend({url:null,jsonp:null,data:{},getDataMethod:"firstByUrl",indexId:0,indexKey:0,idField:"",keyField:"",effectiveFields:[],effectiveFieldsAlias:{},searchFields:[],showHeader:!1,showBtn:!0,allowNoKeyword:!0,multiWord:!1,separator:",",processData:h,getData:g,autoMinWidth:!1,listAlign:"left",inputWarnColor:"rgba(255,0,0,.1)",listStyle:{"padding-top":0,"max-height":"375px","max-width":"800px",overflow:"auto",width:"auto",transition:"0.5s","-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s"},listHoverStyle:"background: #07d; color:#fff",listHoverCSS:"jhover",keyLeft:37,keyUp:38,keyRight:39,keyDown:40,keyEnter:13},b);if(a.isFunction(r.processData)&&(h=r.processData),a.isFunction(r.getData)&&(g=r.getData),!b.showHeader&&r.effectiveFields&&r.effectiveFields.length>1&&(r.showHeader=!0),"firstByUrl"===r.getDataMethod&&r.url){var s=-1!==b.url.indexOf("?")?"&":"?",t=b.jsonp?[b.url,s,b.jsonp,"=?"].join(""):b.url;a.ajax({type:"GET",url:t,dataType:"json",timeout:5e3}).done(function(b){r.data=b,r.url=null,a(q).trigger("onDataRequestSuccess",b)}).fail(function(a,b){throw new Error(t+" : "+b)})}return a("head:eq(0)").append("<style>."+r.listHoverCSS+"{"+r.listHoverStyle+"}</style>"),q.each(function(){var h=a(this),i=h.parents(".input-group:eq(0)").find("ul.dropdown-menu");return f(this)===!1?void console.warn("not a dropdown-menu"):(r.showBtn||h.parents(".input-group:eq(0)").css("width","100%").find(".input-group-btn>.btn.dropdown-toggle").hide(),h.removeClass("disabled").attr("disabled",!1).attr("autocomplete","off"),i.css(r.listStyle||{"max-height":"300px","max-width":"800px",overflow:"auto"}),r.autoMinWidth===!1?i.css({"min-width":h.parent().width()}):i.css("width","auto"),"left"===r.listAlign?i.css({left:h.siblings("div").width()-h.parent().width(),right:"auto"}):"right"===r.listAlign&&i.css({left:"auto",right:"0"}),h.on("keydown",function(b){var c,f="";"none"!==i.css("display")&&(c=i.find("."+r.listHoverCSS),f="",b.keyCode===r.keyDown?(0===c.length?f=n(i.find("table tbody tr:first").mouseover()):0===c.next().length?(e(i,r),a(this).val(a(this).attr("alt")).attr("data-id","")):(e(i,r),0!==c.next().length&&(f=n(c.next().mouseover()))),d(h,i)):b.keyCode===r.keyUp?(0===c.length?f=n(i.find("table tbody tr:last").mouseover()):0===c.prev().length?(e(i,r),a(this).val(a(this).attr("alt")).attr("data-id","")):(e(i,r),0!==c.prev().length&&(f=n(c.prev().mouseover()))),d(h,i)):b.keyCode===r.keyEnter?i.hide().empty():a(this).attr("data-id",""),f&&""!==f.key&&o(a(this),f,r))}).on("keyup",function(d){var e,f;return d.keyCode===r.keyDown||d.keyCode===r.keyUp||d.keyCode===r.keyEnter?(a(this).val(a(this).val()),void c(h,r)):(a(this).attr("data-id",""),c(h,r),e=a(this).val(),void((""===a.trim(e)||e!==a(this).attr("alt"))&&(a(this).attr("alt",a(this).val()),b.multiWord&&(f=e.split(r.separator||" "),e=f[f.length-1]),(0!==e.length||r.allowNoKeyword)&&g(a.trim(e),h,l,r))))}).on("focus",function(){}).on("blur",function(){i.css("display",""),-1===b.indexId&&!b.idField||b.multiWord}).on("click",function(){var b,c=a(this).val();return""!==a.trim(c)&&c===a(this).attr("alt")&&i.find("table tr").length?i.show():void("none"===i.css("display")&&(r.multiWord&&(b=c.split(r.separator||" "),c=b[b.length-1]),(0!==c.length||r.allowNoKeyword)&&g(a.trim(c),h,l,r)))}),h.parent().find("button:eq(0)").attr("data-toggle","").on("click",function(){var a;"none"===i.css("display")?(a="block",r.url?h.click().focus():l(h,r.data,r)):a="none",i.css("display",a)}),void i.on("mouseenter",function(){h.blur(),a(this).show()}).on("mouseleave",function(){h.focus()}))})},show:function(){var a=this.data("bsSuggest");return a&&a.options&&this.parent().find("ul.dropdown-menu").show(),this},hide:function(){var a=this.data("bsSuggest");return a&&a.options&&this.parent().find("ul.dropdown-menu").css("display",""),this},disable:function(){return a(this).data("bsSuggest")?void a(this).attr("disabled",!0).parent().find(".input-group-btn>.btn").addClass("disabled"):!1},enable:function(){return a(this).data("bsSuggest")?void a(this).attr("disabled",!1).parent().find(".input-group-btn>.btn").removeClass("disabled"):!1},destroy:function(){a(this).off().removeData("bsSuggest").parent().find(".input-group-btn>.btn").off()}}}(window.jQuery);
/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(t,e){function n(e){t.extend(!0,Ce,e)}function r(n,r,c){function u(t){ae?p()&&(S(),M(t)):f()}function f(){oe=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),ae=t("<div class='fc-content' style='position:relative'/>").prependTo(n),ne=new a(ee,r),re=ne.render(),re&&n.prepend(re),y(r.defaultView),r.handleWindowResize&&t(window).resize(x),m()||v()}function v(){setTimeout(function(){!ie.start&&m()&&C()},0)}function h(){ie&&(te("viewDestroy",ie,ie,ie.element),ie.triggerEventDestroy()),t(window).unbind("resize",x),ne.destroy(),ae.remove(),n.removeClass("fc fc-rtl ui-widget")}function p(){return n.is(":visible")}function m(){return t("body").is(":visible")}function y(t){ie&&t==ie.name||D(t)}function D(e){he++,ie&&(te("viewDestroy",ie,ie,ie.element),Y(),ie.triggerEventDestroy(),G(),ie.element.remove(),ne.deactivateButton(ie.name)),ne.activateButton(e),ie=new Se[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(ae),ee),C(),$(),he--}function C(t){(!ie.start||t||ie.start>ge||ge>=ie.end)&&p()&&M(t)}function M(t){he++,ie.start&&(te("viewDestroy",ie,ie,ie.element),Y(),N()),G(),ie.render(ge,t||0),T(),$(),(ie.afterRender||A)(),_(),P(),te("viewRender",ie,ie,ie.element),ie.trigger("viewDisplay",de),he--,z()}function E(){p()&&(Y(),N(),S(),T(),F())}function S(){le=r.contentHeight?r.contentHeight:r.height?r.height-(re?re.height():0)-R(ae):Math.round(ae.width()/Math.max(r.aspectRatio,.5))}function T(){le===e&&S(),he++,ie.setHeight(le),ie.setWidth(ae.width()),he--,se=n.outerWidth()}function x(){if(!he)if(ie.start){var t=++ve;setTimeout(function(){t==ve&&!he&&p()&&se!=(se=n.outerWidth())&&(he++,E(),ie.trigger("windowResize",de),he--)},200)}else v()}function k(){N(),W()}function H(t){N(),F(t)}function F(t){p()&&(ie.setEventData(pe),ie.renderEvents(pe,t),ie.trigger("eventAfterAllRender"))}function N(){ie.triggerEventDestroy(),ie.clearEvents(),ie.clearEventData()}function z(){!r.lazyFetching||ue(ie.visStart,ie.visEnd)?W():F()}function W(){fe(ie.visStart,ie.visEnd)}function O(t){pe=t,F()}function L(t){H(t)}function _(){ne.updateTitle(ie.title)}function P(){var t=new Date;t>=ie.start&&ie.end>t?ne.disableButton("today"):ne.enableButton("today")}function q(t,n,r){ie.select(t,n,r===e?!0:r)}function Y(){ie&&ie.unselect()}function B(){C(-1)}function j(){C(1)}function I(){i(ge,-1),C()}function X(){i(ge,1),C()}function J(){ge=new Date,C()}function V(t,e,n){t instanceof Date?ge=d(t):g(ge,t,e,n),C()}function U(t,n,r){t!==e&&i(ge,t),n!==e&&s(ge,n),r!==e&&l(ge,r),C()}function Z(){return d(ge)}function G(){ae.css({width:"100%",height:ae.height(),overflow:"hidden"})}function $(){ae.css({width:"",height:"",overflow:""})}function Q(){return ie}function K(t,n){return n===e?r[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(r[t]=n,E()),e)}function te(t,n){return r[t]?r[t].apply(n||de,Array.prototype.slice.call(arguments,2)):e}var ee=this;ee.options=r,ee.render=u,ee.destroy=h,ee.refetchEvents=k,ee.reportEvents=O,ee.reportEventChange=L,ee.rerenderEvents=H,ee.changeView=y,ee.select=q,ee.unselect=Y,ee.prev=B,ee.next=j,ee.prevYear=I,ee.nextYear=X,ee.today=J,ee.gotoDate=V,ee.incrementDate=U,ee.formatDate=function(t,e){return w(t,e,r)},ee.formatDates=function(t,e,n){return b(t,e,n,r)},ee.getDate=Z,ee.getView=Q,ee.option=K,ee.trigger=te,o.call(ee,r,c);var ne,re,ae,oe,ie,se,le,ce,ue=ee.isFetchNeeded,fe=ee.fetchEvents,de=n[0],ve=0,he=0,ge=new Date,pe=[];g(ge,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(ce=a,ie.dragStart(ce,e,n))}}).bind("dragstop",function(t,e){ce&&(ie.dragStop(ce,t,e),ce=null)})}function a(n,r){function a(){v=r.theme?"ui":"fc";var n=r.header;return n?h=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(i("left")).append(i("center")).append(i("right"))):e}function o(){h.remove()}function i(e){var a=t("<td class='fc-header-"+e+"'/>"),o=r.header[e];return o&&t.each(o.split(" "),function(e){e>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(e,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(v+"-corner-right"),o=null;else{var s;if(n[i]?s=n[i]:Se[i]&&(s=function(){u.removeClass(v+"-state-hover"),n.changeView(i)}),s){var l=r.theme?P(r.buttonIcons,i):null,c=P(r.buttonText,i),u=t("<span class='fc-button fc-button-"+i+" "+v+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){u.hasClass(v+"-state-disabled")||s()}).mousedown(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-down")}).mouseup(function(){u.removeClass(v+"-state-down")}).hover(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-hover")},function(){u.removeClass(v+"-state-hover").removeClass(v+"-state-down")}).appendTo(a);Y(u),o||u.addClass(v+"-corner-left"),o=u}}}),o&&o.addClass(v+"-corner-right")}),a}function s(t){h.find("h2").html(t)}function l(t){h.find("span.fc-button-"+t).addClass(v+"-state-active")}function c(t){h.find("span.fc-button-"+t).removeClass(v+"-state-active")}function u(t){h.find("span.fc-button-"+t).addClass(v+"-state-disabled")}function f(t){h.find("span.fc-button-"+t).removeClass(v+"-state-disabled")}var d=this;d.render=a,d.destroy=o,d.updateTitle=s,d.activateButton=l,d.deactivateButton=c,d.disableButton=u,d.enableButton=f;var v,h=t([])}function o(n,r){function a(t,e){return!E||E>t||e>S}function o(t,e){E=t,S=e,W=[];var n=++R,r=F.length;N=r;for(var a=0;r>a;a++)i(F[a],n)}function i(e,r){s(e,function(a){if(r==R){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;a.length>o;o++)a[o].source=e,w(a[o]);W=W.concat(a)}N--,N||k(W)}})}function s(r,a){var o,i,l=Ee.sourceFetchers;for(o=0;l.length>o;o++){if(i=l[o](r,E,S,a),i===!0)return;if("object"==typeof i)return s(i,a),e}var c=r.events;if(c)t.isFunction(c)?(m(),c(d(E),d(S),function(t){a(t),y()})):t.isArray(c)?a(c):a();else{var u=r.url;if(u){var f,v=r.success,h=r.error,g=r.complete;f=t.isFunction(r.data)?r.data():r.data;var p=t.extend({},f||{}),w=X(r.startParam,n.startParam),b=X(r.endParam,n.endParam);w&&(p[w]=Math.round(+E/1e3)),b&&(p[b]=Math.round(+S/1e3)),m(),t.ajax(t.extend({},Te,r,{data:p,success:function(e){e=e||[];var n=I(v,this,arguments);t.isArray(n)&&(e=n),a(e)},error:function(){I(h,this,arguments),a()},complete:function(){I(g,this,arguments),y()}}))}else a()}}function l(t){t=c(t),t&&(N++,i(t,R))}function c(n){return t.isFunction(n)||t.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(b(n),F.push(n),n):e}function u(e){F=t.grep(F,function(t){return!D(t,e)}),W=t.grep(W,function(t){return!D(t.source,e)}),k(W)}function f(t){var e,n,r=W.length,a=x().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=W[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),n.end=t.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,w(n));w(t),k(W)}function v(t,e){w(t),t.source||(e&&(H.events.push(t),t.source=H),W.push(t)),k(W)}function h(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}W=t.grep(W,e,!0);for(var r=0;F.length>r;r++)t.isArray(F[r].events)&&(F[r].events=t.grep(F[r].events,e,!0))}else{W=[];for(var r=0;F.length>r;r++)t.isArray(F[r].events)&&(F[r].events=[])}k(W)}function g(e){return t.isFunction(e)?t.grep(W,e):e?(e+="",t.grep(W,function(t){return t._id==e})):W}function m(){z++||T("loading",null,!0,x())}function y(){--z||T("loading",null,!1,x())}function w(t){var r=t.source||{},a=X(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+xe++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=p(t.start,a)),t.end=p(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=X(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function b(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Ee.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}function D(t,e){return t&&e&&C(t)==C(e)}function C(t){return("object"==typeof t?t.events||t.url:"")||t}var M=this;M.isFetchNeeded=a,M.fetchEvents=o,M.addEventSource=l,M.removeEventSource=u,M.updateEvent=f,M.renderEvent=v,M.removeEvents=h,M.clientEvents=g,M.normalizeEvent=w;for(var E,S,T=M.trigger,x=M.getView,k=M.reportEvents,H={events:[]},F=[H],R=0,N=0,z=0,W=[],A=0;r.length>A;A++)c(r[A])}function i(t,e,n){return t.setFullYear(t.getFullYear()+e),n||f(t),t}function s(t,e,n){if(+t){var r=t.getMonth()+e,a=d(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||f(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function l(t,e,n){if(+t){var r=t.getDate()+e,a=d(t);a.setHours(9),a.setDate(r),t.setDate(r),n||f(t),c(t,a)}return t}function c(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Fe)}function u(t,e){return t.setMinutes(t.getMinutes()+e),t}function f(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?f(new Date(+t)):new Date(+t)}function v(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function h(t,e){return Math.round((d(t,!0)-d(e,!0))/He)}function g(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function p(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),m(t,n)||(t?new Date(t):null)):null}function m(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),c(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),c(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+1e3*60*o)}return r}function y(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function w(t,e,n){return b(t,null,e,n)}function b(t,e,n,r){r=r||Ce;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;u>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;u>i;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;u>i;i++)if(")"==n.charAt(i)){var d=w(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;u>i;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),d=w(l,v,r);d!=w(c,v,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;i>a;i--)if(s=Ne[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}function D(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function C(t){return t.end?M(t.end,t.allDay):l(d(t.start),1)}function M(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):f(t)}function E(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function S(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.width(Math.max(0,n-x(a,r)))}function T(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.height(Math.max(0,n-R(a,r)))}function x(t,e){return k(t)+F(t)+(e?H(t):0)}function k(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function H(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function F(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function R(t,e){return N(t)+W(t)+(e?z(t):0)}function N(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function z(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function W(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function A(){}function O(t,e){return t-e}function L(t){return Math.max.apply(Math,t)}function _(t){return(10>t?"0":"")+t}function P(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if(r=t[a[o].toLowerCase()],r!==e)return r;return t[""]}function q(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Y(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function B(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function j(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function I(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;e.length>a;a++)o=e[a].apply(n,r)||o;return o}}function X(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function J(t,e){function n(t,e){e&&(s(t,e),t.setDate(1));var n=a("firstDay"),f=d(t,!0);f.setDate(1);var v=s(d(f),1),g=d(f);l(g,-((g.getDay()-n+7)%7)),i(g);var p=d(v);l(p,(7-p.getDay()+n)%7),i(p,-1,!0);var m=c(),y=Math.round(h(p,g)/7);"fixed"==a("weekMode")&&(l(p,7*(6-y)),y=6),r.title=u(f,a("titleFormat")),r.start=f,r.end=v,r.visStart=g,r.visEnd=p,o(y,m,!0)}var r=this;r.render=n,Z.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,c=r.getCellsPerWeek,u=e.formatDate}function V(t,e){function n(t,e){e&&l(t,7*e);var n=l(d(t),-((t.getDay()-a("firstDay")+7)%7)),u=l(d(n),7),f=d(n);i(f);var v=d(u);i(v,-1,!0);var h=s();r.start=n,r.end=u,r.visStart=f,r.visEnd=v,r.title=c(f,l(d(v),-1),a("titleFormat")),o(1,h,!1)}var r=this;r.render=n,Z.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,c=e.formatDates}function U(t,e){function n(t,e){e&&l(t,e),i(t,0>e?-1:1);var n=d(t,!0),c=l(d(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=c,o(1,1,!1)}var r=this;r.render=n,Z.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=e.formatDate}function Z(e,n,r){function a(t,e,n){ee=t,ne=e,re=n,o(),j||i(),s()}function o(){le=he("theme")?"ui":"fc",ce=he("columnFormat"),ue=he("weekNumbers"),de=he("weekNumberTitle"),ve="iso"!=he("weekNumberCalculation")?"w":"W"}function i(){Z=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(){var n=c();L&&L.remove(),L=t(n).appendTo(e),_=L.find("thead"),P=_.find(".fc-day-header"),j=L.find("tbody"),I=j.find("tr"),X=j.find(".fc-day"),J=I.find("td:first-child"),V=I.eq(0).find(".fc-day > div"),U=I.eq(0).find(".fc-day-content > div"),B(_.add(_.find("tr"))),B(I),I.eq(0).addClass("fc-first"),I.filter(":last").addClass("fc-last"),X.each(function(e,n){var r=Ee(Math.floor(e/ne),e%ne);ge("dayRender",O,r,t(n))}),y(X)}function c(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+u()+v()+"</table>";return t}function u(){var t,e,n=le+"-widget-header",r="";for(r+="<thead><tr>",ue&&(r+="<th class='fc-week-number "+n+"'>"+q(de)+"</th>"),t=0;ne>t;t++)e=Ee(0,t),r+="<th class='fc-day-header fc-"+ke[e.getDay()]+" "+n+"'>"+q(xe(e,ce))+"</th>";return r+="</tr></thead>"}function v(){var t,e,n,r=le+"-widget-content",a="";for(a+="<tbody>",t=0;ee>t;t++){for(a+="<tr class='fc-week'>",ue&&(n=Ee(t,0),a+="<td class='fc-week-number "+r+"'>"+"<div>"+q(xe(n,ve))+"</div>"+"</td>"),e=0;ne>e;e++)n=Ee(t,e),a+=h(n);a+="</tr>"}return a+="</tbody>"}function h(t){var e=le+"-widget-content",n=O.start.getMonth(),r=f(new Date),a="",o=["fc-day","fc-"+ke[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",le+"-state-highlight"):r>t?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"'"+" data-date='"+xe(t,"yyyy-MM-dd")+"'"+">"+"<div>",re&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(e){Q=e;var n,r,a,o=Q-_.height();"variable"==he("weekMode")?n=r=Math.floor(o/(1==ee?2:6)):(n=Math.floor(o/ee),r=o-n*(ee-1)),J.each(function(e,o){ee>e&&(a=t(o),a.find("> div").css("min-height",(e==ee-1?r:n)-R(a)))})}function p(t){$=t,ie.clear(),se.clear(),te=0,ue&&(te=_.find("th.fc-week-number").outerWidth()),K=Math.floor(($-te)/ne),S(P.slice(0,-1),K)}function y(t){t.click(w).mousedown(Me)}function w(e){if(!he("selectable")){var n=m(t(this).data("date"));ge("dayClick",this,n,!0,e)}}function b(t,e,n){n&&ae.build();for(var r=Te(t,e),a=0;r.length>a;a++){var o=r[a];y(D(o.row,o.leftCol,o.row,o.rightCol))}}function D(t,n,r,a){var o=ae.rect(t,n,r,a,e);return be(o,e)}function C(t){return d(t)}function M(t,e){b(t,l(d(e),1),!0)}function E(){Ce()}function T(t,e,n){var r=Se(t),a=X[r.row*ne+r.col];ge("dayClick",a,t,e,n)}function x(t,e){oe.start(function(t){Ce(),t&&D(t.row,t.col,t.row,t.col)},e)}function k(t,e,n){var r=oe.stop();if(Ce(),r){var a=Ee(r);ge("drop",t,a,!0,e,n)}}function H(t){return d(t.start)}function F(t){return ie.left(t)}function N(t){return ie.right(t)}function z(t){return se.left(t)}function W(t){return se.right(t)}function A(t){return I.eq(t)}var O=this;O.renderBasic=a,O.setHeight=g,O.setWidth=p,O.renderDayOverlay=b,O.defaultSelectionEnd=C,O.renderSelection=M,O.clearSelection=E,O.reportDayClick=T,O.dragStart=x,O.dragStop=k,O.defaultEventEnd=H,O.getHoverListener=function(){return oe},O.colLeft=F,O.colRight=N,O.colContentLeft=z,O.colContentRight=W,O.getIsCellAllDay=function(){return!0},O.allDayRow=A,O.getRowCnt=function(){return ee},O.getColCnt=function(){return ne},O.getColWidth=function(){return K},O.getDaySegmentContainer=function(){return Z},fe.call(O,e,n,r),me.call(O),pe.call(O),G.call(O);var L,_,P,j,I,X,J,V,U,Z,$,Q,K,te,ee,ne,re,ae,oe,ie,se,le,ce,ue,de,ve,he=O.opt,ge=O.trigger,be=O.renderOverlay,Ce=O.clearOverlays,Me=O.daySelectionMousedown,Ee=O.cellToDate,Se=O.dateToCell,Te=O.rangeToSegments,xe=n.formatDate;Y(e.addClass("fc-grid")),ae=new ye(function(e,n){var r,a,o;P.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),I.each(function(n,i){ee>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),oe=new we(ae),ie=new De(function(t){return V.eq(t)}),se=new De(function(t){return U.eq(t)})}function G(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,de.call(n)}function $(t,e){function n(t,e){e&&l(t,7*e);var n=l(d(t),-((t.getDay()-a("firstDay")+7)%7)),u=l(d(n),7),f=d(n);i(f);var v=d(u);i(v,-1,!0);var h=s();r.title=c(f,l(d(v),-1),a("titleFormat")),r.start=n,r.end=u,r.visStart=f,r.visEnd=v,o(h)}var r=this;r.render=n,K.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=r.getCellsPerWeek,c=e.formatDates}function Q(t,e){function n(t,e){e&&l(t,e),i(t,0>e?-1:1);var n=d(t,!0),c=l(d(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=c,o(1)}var r=this;r.render=n,K.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=e.formatDate}function K(n,r,a){function o(t){We=t,i(),K?c():s()}function i(){qe=Ue("theme")?"ui":"fc",Ye=Ue("isRTL"),Be=y(Ue("minTime")),je=y(Ue("maxTime")),Ie=Ue("columnFormat"),Xe=Ue("weekNumbers"),Je=Ue("weekNumberTitle"),Ve="iso"!=Ue("weekNumberCalculation")?"w":"W",Re=Ue("snapMinutes")||Ue("slotMinutes")}function s(){var e,r,a,o,i,s=qe+"-widget-header",l=qe+"-widget-content",f=0==Ue("slotMinutes")%15;for(c(),ce=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Ue("allDaySlot")?(ue=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Ue("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",de=t(e).appendTo(ce),ve=de.find("tr"),C(ve.find("td")),ce.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ue=t([]),he=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),ge=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(he),be=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ge),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=v(),o=u(d(r),je),u(r,Be),Ae=0,a=0;o>r;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(f&&i?"&nbsp;":on(r,Ue("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(r,Ue("slotMinutes")),Ae++;e+="</tbody></table>",Ce=t(e).appendTo(ge),M(Ce.find("td"))}function c(){var e=h();K&&K.remove(),K=t(e).appendTo(n),ee=K.find("thead"),ne=ee.find("th").slice(1,-1),re=K.find("tbody"),ae=re.find("td").slice(0,-1),oe=ae.find("> div"),ie=ae.find(".fc-day-content > div"),se=ae.eq(0),le=oe.eq(0),B(ee.add(ee.find("tr"))),B(re.add(re.find("tr")))}function h(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+g()+p()+"</table>";return t}function g(){var t,e,n,r=qe+"-widget-header",a="";for(a+="<thead><tr>",Xe?(t=nn(0,0),e=on(t,Ve),Ye?e+=Je:e=Je+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+q(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;We>n;n++)t=nn(0,n),a+="<th class='fc-"+ke[t.getDay()]+" fc-col"+n+" "+r+"'>"+q(on(t,Ie))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function p(){var t,e,n,r,a,o=qe+"-widget-header",i=qe+"-widget-content",s=f(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;We>e;e++)t=nn(0,e),a=["fc-col"+e,"fc-"+ke[t.getDay()],i],+t==+s?a.push(qe+"-state-highlight","fc-today"):s>t?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function m(t){t===e&&(t=Se),Se=t,sn={};var n=re.position().top,r=he.position().top,a=Math.min(t-n,Ce.height()+r+1);le.height(a-R(se)),ce.css("top",n),he.height(a-r-1),Fe=Ce.find("tr:first").height()+1,Ne=Ue("slotMinutes")/Re,ze=Fe/Ne}function w(e){Ee=e,_e.clear(),Pe.clear();var n=ee.find("th:first");de&&(n=n.add(de.find("th:first"))),n=n.add(Ce.find("th:first")),Te=0,S(n.width("").each(function(e,n){Te=Math.max(Te,t(n).outerWidth())}),Te);var r=K.find(".fc-agenda-gutter");de&&(r=r.add(de.find("th.fc-agenda-gutter")));var a=he[0].clientWidth;He=he.width()-a,He?(S(r,He),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),xe=Math.floor((a-Te)/We),S(ne.slice(0,-1),xe)}function b(){function t(){he.scrollTop(r)}var e=v(),n=d(e);n.setHours(Ue("firstHour"));var r=_(e,n)+1;t(),setTimeout(t,0)}function D(){b()}function C(t){t.click(E).mousedown(tn)}function M(t){t.click(E).mousedown(U)}function E(t){if(!Ue("selectable")){var e=Math.min(We-1,Math.floor((t.pageX-K.offset().left-Te)/xe)),n=nn(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Ue("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Be),Ze("dayClick",ae[e],n,!1,t)}else Ze("dayClick",ae[e],n,!0,t)}}function x(t,e,n){n&&Oe.build();for(var r=an(t,e),a=0;r.length>a;a++){var o=r[a];C(k(o.row,o.leftCol,o.row,o.rightCol))}}function k(t,e,n,r){var a=Oe.rect(t,e,n,r,ce);return Ge(a,ce)}function H(t,e){for(var n=0;We>n;n++){var r=nn(0,n),a=l(d(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(i>o){var s=Oe.rect(0,n,0,n,ge),c=_(r,o),u=_(r,i);s.top=c,s.height=u-c,M(Ge(s,ge))}}}function F(t){return _e.left(t)}function N(t){return Pe.left(t)}function z(t){return _e.right(t)}function W(t){return Pe.right(t)}function A(t){return Ue("allDaySlot")&&!t.row}function L(t){var e=nn(0,t.col),n=t.row;return Ue("allDaySlot")&&n--,n>=0&&u(e,Be+n*Re),e}function _(t,n){if(t=d(t,!0),u(d(t),Be)>n)return 0;if(n>=u(d(t),je))return Ce.height();var r=Ue("slotMinutes"),a=60*n.getHours()+n.getMinutes()-Be,o=Math.floor(a/r),i=sn[o];return i===e&&(i=sn[o]=Ce.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+Fe*(a%r/r)))}function P(){return ve}function j(t){var e=d(t.start);return t.allDay?e:u(e,Ue("defaultEventMinutes"))}function I(t,e){return e?d(t):u(d(t),Ue("slotMinutes"))}function X(t,e,n){n?Ue("allDaySlot")&&x(t,l(d(e),1),!0):J(t,e)}function J(e,n){var r=Ue("selectHelper");if(Oe.build(),r){var a=rn(e).col;if(a>=0&&We>a){var o=Oe.rect(0,a,0,a,ge),i=_(e,e),s=_(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",Me=t(l).css(o).appendTo(ge))}else o.isStart=!0,o.isEnd=!0,Me=t(en({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),Me.css("opacity",Ue("dragOpacity"));Me&&(M(Me),ge.append(Me),S(Me,o.width,!0),T(Me,o.height,!0))}}}else H(e,n)}function V(){$e(),Me&&(Me.remove(),Me=null)}function U(e){if(1==e.which&&Ue("selectable")){Ke(e);var n;Le.start(function(t,e){if(V(),t&&t.col==e.col&&!A(t)){var r=L(e),a=L(t);n=[r,u(d(r),Re),a,u(d(a),Re)].sort(O),J(n[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){Le.stop(),n&&(+n[0]==+n[1]&&Z(n[0],!1,t),Qe(n[0],n[3],!1,t))})}}function Z(t,e,n){Ze("dayClick",ae[rn(t).col],t,e,n)}function G(t,e){Le.start(function(t){if($e(),t)if(A(t))k(t.row,t.col,t.row,t.col);else{var e=L(t),n=u(d(e),Ue("defaultEventMinutes"));H(e,n)}},e)}function $(t,e,n){var r=Le.stop();$e(),r&&Ze("drop",t,L(r),A(r),e,n)}var Q=this;Q.renderAgenda=o,Q.setWidth=w,Q.setHeight=m,Q.afterRender=D,Q.defaultEventEnd=j,Q.timePosition=_,Q.getIsCellAllDay=A,Q.allDayRow=P,Q.getCoordinateGrid=function(){return Oe},Q.getHoverListener=function(){return Le},Q.colLeft=F,Q.colRight=z,Q.colContentLeft=N,Q.colContentRight=W,Q.getDaySegmentContainer=function(){return ue},Q.getSlotSegmentContainer=function(){return be},Q.getMinMinute=function(){return Be},Q.getMaxMinute=function(){return je},Q.getSlotContainer=function(){return ge},Q.getRowCnt=function(){return 1},Q.getColCnt=function(){return We},Q.getColWidth=function(){return xe},Q.getSnapHeight=function(){return ze},Q.getSnapMinutes=function(){return Re},Q.defaultSelectionEnd=I,Q.renderDayOverlay=x,Q.renderSelection=X,Q.clearSelection=V,Q.reportDayClick=Z,Q.dragStart=G,Q.dragStop=$,fe.call(Q,n,r,a),me.call(Q),pe.call(Q),te.call(Q);var K,ee,ne,re,ae,oe,ie,se,le,ce,ue,de,ve,he,ge,be,Ce,Me,Ee,Se,Te,xe,He,Fe,Re,Ne,ze,We,Ae,Oe,Le,_e,Pe,qe,Ye,Be,je,Ie,Xe,Je,Ve,Ue=Q.opt,Ze=Q.trigger,Ge=Q.renderOverlay,$e=Q.clearOverlays,Qe=Q.reportSelection,Ke=Q.unselect,tn=Q.daySelectionMousedown,en=Q.slotSegHtml,nn=Q.cellToDate,rn=Q.dateToCell,an=Q.rangeToSegments,on=r.formatDate,sn={};Y(n.addClass("fc-agenda")),Oe=new ye(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;ne.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Ue("allDaySlot")&&(a=ve,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=ge.offset().top,l=he.offset().top,c=l+he.outerHeight(),u=0;Ae*Ne>u;u++)e.push([r(s+ze*u),r(s+ze*(u+1))])}),Le=new we(Oe),_e=new De(function(t){return oe.eq(t)}),Pe=new De(function(t){return ie.eq(t)})}function te(){function n(t,e){var n,r=t.length,o=[],i=[];for(n=0;r>n;n++)t[n].allDay?o.push(t[n]):i.push(t[n]);y("allDaySlot")&&(te(o,e),k()),s(a(i),e)}function r(){H().empty(),F().empty()}function a(e){var n,r,a,s,l,c=Y(),f=W(),v=z(),h=t.map(e,i),g=[];for(r=0;c>r;r++)for(n=P(0,r),u(n,f),l=o(e,h,n,u(d(n),v-f)),l=ee(l),a=0;l.length>a;a++)s=l[a],s.col=r,g.push(s);return g}function o(t,e,n,r){var a,o,i,s,l,c,u,f,v=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=d(n),u=!1):(l=i,u=!0),s>r?(c=d(r),f=!1):(c=s,f=!0),v.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return v.sort(ue)}function i(t){return t.end?d(t.end):u(d(t.start),y("defaultEventMinutes"))}function s(n,r){var a,o,i,s,l,u,d,v,h,g,p,m,b,D,C,M,S=n.length,T="",k=F(),H=y("isRTL");for(a=0;S>a;a++)o=n[a],i=o.event,s=A(o.start,o.start),l=A(o.start,o.end),u=L(o.col),d=_(o.col),v=d-u,d-=.025*v,v=d-u,h=v*(o.forwardCoord-o.backwardCoord),y("slotEventOverlap")&&(h=Math.max(2*(h-10),h)),H?(p=d-o.backwardCoord*v,g=p-h):(g=u+o.backwardCoord*v,p=g+h),g=Math.max(g,u),p=Math.min(p,d),h=p-g,o.top=s,o.left=g,o.outerWidth=h,o.outerHeight=l-s,T+=c(i,o);for(k[0].innerHTML=T,m=k.children(),a=0;S>a;a++)o=n[a],i=o.event,b=t(m[a]),D=w("eventRender",i,i,b),D===!1?b.remove():(D&&D!==!0&&(b.remove(),b=t(D).css({position:"absolute",top:o.top,left:o.left}).appendTo(k)),o.element=b,i._id===r?f(i,b,o):b[0]._fci=a,V(i,b));for(E(k,n,f),a=0;S>a;a++)o=n[a],(b=o.element)&&(o.vsides=R(b,!0),o.hsides=x(b,!0),C=b.find(".fc-event-title"),C.length&&(o.contentTop=C[0].offsetTop));for(a=0;S>a;a++)o=n[a],(b=o.element)&&(b[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",M=Math.max(0,o.outerHeight-o.vsides),b[0].style.height=M+"px",i=o.event,o.contentTop!==e&&10>M-o.contentTop&&(b.find("div.fc-event-time").text(re(i.start,y("timeFormat"))+" - "+i.title),b.find("div.fc-event-title").remove()),w("eventAfterRender",i,i,b))}function c(t,e){var n="<",r=t.url,a=j(t,y),o=["fc-event","fc-event-vert"];return b(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+q(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+q(ae(t.start,t.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+q(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&D(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function f(t,e,n){var r=e.find("div.fc-event-time");b(t)&&g(t,e,r),n.isEnd&&D(t)&&p(t,e,r),S(t,e)}function v(t,e,n){function r(){c||(e.width(a).height("").draggable("option","grid",null),c=!0)}var a,o,i,s=n.isStart,c=!0,u=N(),f=B(),v=I(),g=X(),p=W();e.draggable({opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,p){w("eventDragStart",e,t,n,p),Z(t,e),a=e.width(),u.start(function(n,a){if(K(),n){o=!1;var u=P(0,a.col),p=P(0,n.col);i=h(p,u),n.row?s?c&&(e.width(f-10),T(e,v*Math.round((t.end?(t.end-t.start)/Re:y("defaultEventMinutes"))/g)),e.draggable("option","grid",[f,1]),c=!1):o=!0:(Q(l(d(t.start),i),l(C(t),i)),r()),o=o||c&&!i
}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(u.stop(),K(),w("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),U(t,e);else{var s=0;c||(s=Math.round((e.offset().top-J().offset().top)/v)*g+p-(60*t.start.getHours()+t.start.getMinutes())),G(this,t,i,s,c,n,a)}}})}function g(t,e,n){function r(){K(),s&&(f?(n.hide(),e.draggable("option","grid",null),Q(l(d(t.start),b),l(C(t),b))):(a(D),n.css("display",""),e.draggable("option","grid",[T,x])))}function a(e){var r,a=u(d(t.start),e);t.end&&(r=u(d(t.end),e)),n.text(ae(a,r,y("timeFormat")))}var o,i,s,c,f,v,g,p,b,D,M,E=m.getCoordinateGrid(),S=Y(),T=B(),x=I(),k=X();e.draggable({scroll:!1,grid:[T,x],axis:1==S?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,r){w("eventDragStart",e,t,n,r),Z(t,e),E.build(),o=e.position(),i=E.cell(n.pageX,n.pageY),s=c=!0,f=v=O(i),g=p=0,b=0,D=M=0},drag:function(t,n){var a=E.cell(t.pageX,t.pageY);if(s=!!a){if(f=O(a),g=Math.round((n.position.left-o.left)/T),g!=p){var l=P(0,i.col),u=i.col+g;u=Math.max(0,u),u=Math.min(S-1,u);var d=P(0,u);b=h(d,l)}f||(D=Math.round((n.position.top-o.top)/x)*k)}(s!=c||f!=v||g!=p||D!=M)&&(r(),c=s,v=f,p=g,M=D),e.draggable("option","revert",!s)},stop:function(n,a){K(),w("eventDragStop",e,t,n,a),s&&(f||b||D)?G(this,t,b,f?0:D,f,n,a):(s=!0,f=!1,g=0,b=0,D=0,r(),e.css("filter",""),e.css(o),U(t,e))}})}function p(t,e,n){var r,a,o=I(),i=X();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,Z(t,e),w("eventResizeStart",this,t,n,o)},resize:function(s,l){r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o),r!=a&&(n.text(ae(t.start,r||t.end?u(M(t),i*r):null,y("timeFormat"))),a=r)},stop:function(n,a){w("eventResizeStop",this,t,n,a),r?$(this,t,0,i*r,n,a):U(t,e)}})}var m=this;m.renderEvents=n,m.clearEvents=r,m.slotSegHtml=c,de.call(m);var y=m.opt,w=m.trigger,b=m.isEventDraggable,D=m.isEventResizable,M=m.eventEnd,S=m.eventElementHandlers,k=m.setHeight,H=m.getDaySegmentContainer,F=m.getSlotSegmentContainer,N=m.getHoverListener,z=m.getMaxMinute,W=m.getMinMinute,A=m.timePosition,O=m.getIsCellAllDay,L=m.colContentLeft,_=m.colContentRight,P=m.cellToDate,Y=m.getColCnt,B=m.getColWidth,I=m.getSnapHeight,X=m.getSnapMinutes,J=m.getSlotContainer,V=m.reportEventElement,U=m.showEvents,Z=m.hideEvents,G=m.eventDrop,$=m.eventResize,Q=m.renderDayOverlay,K=m.clearOverlays,te=m.renderDayEvents,ne=m.calendar,re=ne.formatDate,ae=ne.formatDates;m.draggableDayEvent=v}function ee(t){var e,n=ne(t),r=n[0];if(re(n),r){for(e=0;r.length>e;e++)ae(r[e]);for(e=0;r.length>e;e++)oe(r[e],0,0)}return ie(n)}function ne(t){var e,n,r,a=[];for(e=0;t.length>e;e++){for(n=t[e],r=0;a.length>r&&se(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function re(t){var e,n,r,a,o;for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)for(a=n[r],a.forwardSegs=[],o=e+1;t.length>o;o++)se(a,t[o],a.forwardSegs)}function ae(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;a.length>n;n++)r=a[n],ae(r),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function oe(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(ce),oe(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;o.length>a;a++)oe(o[a],0,t.forwardCoord)}function ie(t){var e,n,r,a=[];for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)a.push(n[r]);return a}function se(t,e,n){n=n||[];for(var r=0;e.length>r;r++)le(t,e[r])&&n.push(e[r]);return n}function le(t,e){return t.end>e.start&&t.start<e.end}function ce(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ue(t,e)}function ue(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function fe(n,r,a){function o(e,n){var r=V[e];return t.isPlainObject(r)?P(r,n||a):r}function i(t,e){return r.trigger.apply(r,[t,e||_].concat(Array.prototype.slice.call(arguments,2),[_]))}function s(t){var e=t.source||{};return X(t.startEditable,e.startEditable,o("eventStartEditable"),t.editable,e.editable,o("editable"))&&!o("disableDragging")}function c(t){var e=t.source||{};return X(t.durationEditable,e.durationEditable,o("eventDurationEditable"),t.editable,e.editable,o("editable"))&&!o("disableResizing")}function f(t){j={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],j[n._id]?j[n._id].push(n):j[n._id]=[n]}function v(){j={},I={},J=[]}function g(t){return t.end?d(t.end):q(t)}function p(t,e){J.push({event:t,element:e}),I[t._id]?I[t._id].push(e):I[t._id]=[e]}function m(){t.each(J,function(t,e){_.trigger("eventDestroy",e.event,e.event,e.element)})}function y(t,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?e:i("eventClick",this,t,r)}).hover(function(e){i("eventMouseover",this,t,e)},function(e){i("eventMouseout",this,t,e)})}function w(t,e){D(t,e,"show")}function b(t,e){D(t,e,"hide")}function D(t,e,n){var r,a=I[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function C(t,e,n,r,a,o,s){var l=e.allDay,c=e._id;E(j[c],n,r,a),i("eventDrop",t,e,n,r,a,function(){E(j[c],-n,-r,l),B(c)},o,s),B(c)}function M(t,e,n,r,a,o){var s=e._id;S(j[s],n,r),i("eventResize",t,e,n,r,function(){S(j[s],-n,-r),B(s)},a,o),B(s)}function E(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;i>s;s++)o=t[s],a!==e&&(o.allDay=a),u(l(o.start,n,!0),r),o.end&&(o.end=u(l(o.end,n,!0),r)),Y(o,V)}function S(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=u(l(g(r),e,!0),n),Y(r,V)}function T(t){return"object"==typeof t&&(t=t.getDay()),G[t]}function x(){return U}function k(t,e,n){for(e=e||1;G[(t.getDay()+(n?e:0)+7)%7];)l(t,e)}function H(){var t=F.apply(null,arguments),e=R(t),n=N(e);return n}function F(t,e){var n=_.getColCnt(),r=K?-1:1,a=K?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var o=t*n+(e*r+a);return o}function R(t){var e=_.visStart.getDay();return t+=$[e],7*Math.floor(t/U)+Q[(t%U+U)%U]-e}function N(t){var e=d(_.visStart);return l(e,t),e}function z(t){var e=W(t),n=A(e),r=O(n);return r}function W(t){return h(t,_.visStart)}function A(t){var e=_.visStart.getDay();return t+=e,Math.floor(t/7)*U+$[(t%7+7)%7]-$[e]}function O(t){var e=_.getColCnt(),n=K?-1:1,r=K?e-1:0,a=Math.floor(t/e),o=(t%e+e)%e*n+r;return{row:a,col:o}}function L(t,e){for(var n=_.getRowCnt(),r=_.getColCnt(),a=[],o=W(t),i=W(e),s=A(o),l=A(i)-1,c=0;n>c;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),v=Math.min(l,f);if(v>=d){var h=O(d),g=O(v),p=[h.col,g.col].sort(),m=R(d)==o,y=R(v)+1==i;a.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return a}var _=this;_.element=n,_.calendar=r,_.name=a,_.opt=o,_.trigger=i,_.isEventDraggable=s,_.isEventResizable=c,_.setEventData=f,_.clearEventData=v,_.eventEnd=g,_.reportEventElement=p,_.triggerEventDestroy=m,_.eventElementHandlers=y,_.showEvents=w,_.hideEvents=b,_.eventDrop=C,_.eventResize=M;var q=_.defaultEventEnd,Y=r.normalizeEvent,B=r.reportEventChange,j={},I={},J=[],V=r.options;_.isHiddenDay=T,_.skipHiddenDays=k,_.getCellsPerWeek=x,_.dateToCell=z,_.dateToDayOffset=W,_.dayOffsetToCellOffset=A,_.cellOffsetToCell=O,_.cellToDate=H,_.cellToCellOffset=F,_.cellOffsetToDayOffset=R,_.dayOffsetToDate=N,_.rangeToSegments=L;var U,Z=o("hiddenDays")||[],G=[],$=[],Q=[],K=o("isRTL");(function(){o("weekends")===!1&&Z.push(0,6);for(var e=0,n=0;7>e;e++)$[e]=n,G[e]=-1!=t.inArray(e,Z),G[e]||(Q[n]=e,n++);if(U=n,!U)throw"invalid hiddenDays"})()}function de(){function e(t,e){var n=r(t,!1,!0);he(n,function(t,e){N(t.event,e)}),w(n,e),he(n,function(t,e){k("eventAfterRender",t.event,t.event,e)})}function n(t,e,n){var a=r([t],!0,!1),o=[];return he(a,function(t,r){t.row===e&&r.css("top",n),o.push(r[0])}),o}function r(e,n,r){var o,l,c=Z(),d=n?t("<div/>"):c,v=a(e);return i(v),o=s(v),d[0].innerHTML=o,l=d.children(),n&&c.append(l),u(v,l),he(v,function(t,e){t.hsides=x(e,!0)}),he(v,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),he(v,function(t,e){t.outerHeight=e.outerHeight(!0)}),f(v,r),v}function a(t){for(var e=[],n=0;t.length>n;n++){var r=o(t[n]);e.push.apply(e,r)}return e}function o(t){for(var e=t.start,n=C(t),r=ee(e,n),a=0;r.length>a;a++)r[a].event=t;return r}function i(t){for(var e=T("isRTL"),n=0;t.length>n;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?V:X,o=(e?r.isStart:r.isEnd)?U:J,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function s(t){for(var e="",n=0;t.length>n;n++)e+=c(t[n]);return e}function c(t){var e="",n=T("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];H(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=j(r,T);return e+=a?"<a href='"+q(a)+"'":"<div",e+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+q(G(r.start,r.end,T("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+q(r.title||"")+"</span>"+"</div>",t.isEnd&&F(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),e+="</"+(a?"a":"div")+">"}function u(e,n){for(var r=0;e.length>r;r++){var a=e[r],o=a.event,i=n.eq(r),s=k("eventRender",o,o,i);s===!1?i.remove():(s&&s!==!0&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}}function f(t,e){var n=v(t),r=y(),a=[];if(e)for(var o=0;r.length>o;o++)r[o].height(n[o]);for(var o=0;r.length>o;o++)a.push(r[o].position().top);he(t,function(t,e){e.css("top",a[t.row]+t.top)})}function v(t){for(var e=P(),n=B(),r=[],a=g(t),o=0;e>o;o++){for(var i=a[o],s=[],l=0;n>l;l++)s.push(0);for(var c=0;i.length>c;c++){var u=i[c];u.top=L(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;u.rightCol>=l;l++)s[l]=u.top+u.outerHeight}r.push(L(s))}return r}function g(t){var e,n,r,a=P(),o=[];for(e=0;t.length>e;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;a>r;r++)o[r]=p(o[r]||[]);return o}function p(t){for(var e=[],n=m(t),r=0;n.length>r;r++)e.push.apply(e,n[r]);return e}function m(t){t.sort(ge);for(var e=[],n=0;t.length>n;n++){for(var r=t[n],a=0;e.length>a&&ve(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function y(){var t,e=P(),n=[];for(t=0;e>t;t++)n[t]=I(t).find("div.fc-day-content > div");return n}function w(t,e){var n=Z();he(t,function(t,n,r){var a=t.event;a._id===e?b(a,n,t):n[0]._fci=r}),E(n,t,b)}function b(t,e,n){H(t)&&S.draggableDayEvent(t,e,n),n.isEnd&&F(t)&&S.resizableDayEvent(t,e,n),z(t,e)}function D(t,e){var n,r=te();e.draggable({delay:50,opacity:T("dragOpacity"),revertDuration:T("dragRevertDuration"),start:function(a,o){k("eventDragStart",e,t,a,o),A(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),Q(),r){var s=ne(a),c=ne(r);n=h(c,s),$(l(d(t.start),n),l(C(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),Q(),k("eventDragStop",e,t,a,o),n?O(this,t,n,0,t.allDay,a,o):(e.css("filter",""),W(t,e))}})}function M(e,r,a){var o=T("isRTL"),i=o?"w":"e",s=r.find(".ui-resizable-"+i),c=!1;Y(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){c&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(o){function s(n){k("eventResizeStop",this,e,n),t("body").css("cursor",""),u.stop(),Q(),f&&_(this,e,f,0,n),setTimeout(function(){c=!1},0)}if(1==o.which){c=!0;var u=te();P(),B();var f,d,v=r.css("top"),h=t.extend({},e),g=ie(oe(e.start));K(),t("body").css("cursor",i+"-resize").one("mouseup",s),k("eventResizeStart",this,e,o),u.start(function(r,o){if(r){var s=re(o),c=re(r);if(c=Math.max(c,g),f=ae(c)-ae(s)){h.end=l(R(e),f,!0);var u=d;d=n(h,a.row,v),d=t(d),d.find("*").css("cursor",i+"-resize"),u&&u.remove(),A(e)}else d&&(W(e),d.remove(),d=null);Q(),$(e.start,l(C(e),f))}},o)}})}var S=this;S.renderDayEvents=e,S.draggableDayEvent=D,S.resizableDayEvent=M;var T=S.opt,k=S.trigger,H=S.isEventDraggable,F=S.isEventResizable,R=S.eventEnd,N=S.reportEventElement,z=S.eventElementHandlers,W=S.showEvents,A=S.hideEvents,O=S.eventDrop,_=S.eventResize,P=S.getRowCnt,B=S.getColCnt;S.getColWidth;var I=S.allDayRow,X=S.colLeft,J=S.colRight,V=S.colContentLeft,U=S.colContentRight;S.dateToCell;var Z=S.getDaySegmentContainer,G=S.calendar.formatDates,$=S.renderDayOverlay,Q=S.clearOverlays,K=S.clearSelection,te=S.getHoverListener,ee=S.rangeToSegments,ne=S.cellToDate,re=S.cellToCellOffset,ae=S.cellOffsetToDayOffset,oe=S.dateToDayOffset,ie=S.dayOffsetToCellOffset}function ve(t,e){for(var n=0;e.length>n;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function he(t,e){for(var n=0;t.length>n;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function ge(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function pe(){function e(t,e,a){n(),e||(e=l(t,a)),c(t,e,a),r(t,e,a)}function n(t){f&&(f=!1,u(),s("unselect",null,t))}function r(t,e,n,r){f=!0,s("select",null,t,e,n,r)}function a(e){var a=o.cellToDate,s=o.getIsCellAllDay,l=o.getHoverListener(),f=o.reportDayClick;if(1==e.which&&i("selectable")){n(e);var d;l.start(function(t,e){u(),t&&s(t)?(d=[a(e),a(t)].sort(O),c(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),r(d[0],d[1],!0,t))})}}var o=this;o.select=e,o.unselect=n,o.reportSelection=r,o.daySelectionMousedown=a;var i=o.opt,s=o.trigger,l=o.defaultSelectionEnd,c=o.renderSelection,u=o.clearSelection,f=!1;i("selectable")&&i("unselectAuto")&&t(document).mousedown(function(e){var r=i("unselectCancel");r&&t(e.target).parents(r).length||n(e)})}function me(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function ye(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;o>a;a++)if(r>=e[a][0]&&e[a][1]>r){s=a;break}for(a=0;i>a;a++)if(t>=n[a][0]&&n[a][1]>t){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function we(e){function n(t){be(t);var n=e.cell(t.pageX,t.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,l,c){a=s,o=i=null,e.build(),n(l),r=c||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function be(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function De(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var Ce={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["???","???","???","????","???","????","???","????","???","????","????","?????"],monthNamesShort:["?","?","?","??","?","??","?","??","?","??","???","???"],dayNames:["??????","?????","?????","?????","??????","?????","??????"],dayNamesShort:["??","?","?","?","??","?","??"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"??",month:"??",week:"??",day:"?"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Me={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ee=t.fullCalendar={version:"1.6.4"},Se=Ee.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}n=n||{};var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},Ce,n.isRTL||n.isRTL===e&&Ce.isRTL?Me:{},n),this.each(function(e,a){var o=t(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},Ee.sourceNormalizers=[],Ee.sourceFetchers=[];var Te={dataType:"json",cache:!1},xe=1;Ee.addDays=l,Ee.cloneDate=d,Ee.parseDate=p,Ee.parseISO8601=m,Ee.parseTime=y,Ee.formatDate=w,Ee.formatDates=b;var ke=["??","?","?","?","??","?","??"],He=864e5,Fe=36e5,Re=6e4,Ne={s:function(t){return t.getSeconds()},ss:function(t){return _(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return _(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return _(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return _(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return _(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return _(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"???":"???"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"???":"???"},u:function(t){return w(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return D(t)}};Ee.dateFormatters=Ne,Ee.applyAll=I,Se.month=J,Se.basicWeek=V,Se.basicDay=U,n({weekMode:"fixed"}),Se.agendaWeek=$,Se.agendaDay=Q,n({allDaySlot:!0,allDayText:"?",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);
(function(A){if(typeof define==="function"&&define.amd){define(["jquery"],A)}else{if(typeof exports==="object"){A(require("jquery"))}else{A(jQuery)}}}(function(I,E){function M(){return new Date(Date.UTC.apply(Date,arguments))}function F(){var R=new Date();return M(R.getFullYear(),R.getMonth(),R.getDate())}function Q(S,R){return(S.getUTCFullYear()===R.getUTCFullYear()&&S.getUTCMonth()===R.getUTCMonth()&&S.getUTCDate()===R.getUTCDate())}function K(R){return function(){return this[R].apply(this,arguments)}}var D=(function(){var R={get:function(S){return this.slice(S)[0]},contains:function(V){var U=V&&V.valueOf();for(var T=0,S=this.length;T<S;T++){if(this[T].valueOf()===U){return T}}return -1},remove:function(S){this.splice(S,1)},replace:function(S){if(!S){return }if(!I.isArray(S)){S=[S]}this.clear();this.push.apply(this,S)},clear:function(){this.length=0},copy:function(){var S=new D();S.replace(this);return S}};return function(){var S=[];S.push.apply(S,arguments);I.extend(S,R);return S}})();var J=function(S,R){this._process_options(R);this.dates=new D();this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=I(S);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.picker=I(L.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl")}this.viewMode=this.o.startView;if(this.o.calendarWeeks){this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(T,U){return parseInt(U)+1})}this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted);this.setDatesDisabled(this.o.datesDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};J.prototype={constructor:J,_process_options:function(R){this._o=I.extend({},this._o,R);var T=this.o=I.extend({},this._o);var U=T.language;if(!B[U]){U=U.split("-")[0];if(!B[U]){U=G.language}}T.language=U;switch(T.startView){case 2:case"decade":T.startView=2;break;case 1:case"year":T.startView=1;break;default:T.startView=0}switch(T.minViewMode){case 1:case"months":T.minViewMode=1;break;case 2:case"years":T.minViewMode=2;break;default:T.minViewMode=0}switch(T.maxViewMode){case 0:case"days":T.maxViewMode=0;break;case 1:case"months":T.maxViewMode=1;break;default:T.maxViewMode=2}T.startView=Math.min(T.startView,T.maxViewMode);T.startView=Math.max(T.startView,T.minViewMode);if(T.multidate!==true){T.multidate=Number(T.multidate)||false;if(T.multidate!==false){T.multidate=Math.max(0,T.multidate)}}T.multidateSeparator=String(T.multidateSeparator);T.weekStart%=7;T.weekEnd=((T.weekStart+6)%7);var a=L.parseFormat(T.format);if(T.startDate!==-Infinity){if(!!T.startDate){if(T.startDate instanceof Date){T.startDate=this._local_to_utc(this._zero_time(T.startDate))}else{T.startDate=L.parseDate(T.startDate,a,T.language)}}else{T.startDate=-Infinity}}if(T.endDate!==Infinity){if(!!T.endDate){if(T.endDate instanceof Date){T.endDate=this._local_to_utc(this._zero_time(T.endDate))}else{T.endDate=L.parseDate(T.endDate,a,T.language)}}else{T.endDate=Infinity}}T.daysOfWeekDisabled=T.daysOfWeekDisabled||[];if(!I.isArray(T.daysOfWeekDisabled)){T.daysOfWeekDisabled=T.daysOfWeekDisabled.split(/[,\s]*/)}T.daysOfWeekDisabled=I.map(T.daysOfWeekDisabled,function(b){return parseInt(b,10)});T.daysOfWeekHighlighted=T.daysOfWeekHighlighted||[];if(!I.isArray(T.daysOfWeekHighlighted)){T.daysOfWeekHighlighted=T.daysOfWeekHighlighted.split(/[,\s]*/)}T.daysOfWeekHighlighted=I.map(T.daysOfWeekHighlighted,function(b){return parseInt(b,10)});T.datesDisabled=T.datesDisabled||[];if(!I.isArray(T.datesDisabled)){var S=[];S.push(L.parseDate(T.datesDisabled,a,T.language));T.datesDisabled=S}T.datesDisabled=I.map(T.datesDisabled,function(b){return L.parseDate(b,a,T.language)});var V=String(T.orientation).toLowerCase().split(/\s+/g),X=T.orientation.toLowerCase();V=I.grep(V,function(b){return/^auto|left|right|top|bottom$/.test(b)});T.orientation={x:"auto",y:"auto"};if(!X||X==="auto"){}else{if(V.length===1){switch(V[0]){case"top":case"bottom":T.orientation.y=V[0];break;case"left":case"right":T.orientation.x=V[0];break}}else{X=I.grep(V,function(b){return/^left|right$/.test(b)});T.orientation.x=X[0]||"auto";X=I.grep(V,function(b){return/^top|bottom$/.test(b)});T.orientation.y=X[0]||"auto"}}if(T.defaultViewDate){var Y=T.defaultViewDate.year||new Date().getFullYear();var W=T.defaultViewDate.month||0;var Z=T.defaultViewDate.day||1;T.defaultViewDate=M(Y,W,Z)}else{T.defaultViewDate=F()}T.showOnFocus=T.showOnFocus!==E?T.showOnFocus:true},_events:[],_secondaryEvents:[],_applyEvents:function(R){for(var S=0,U,T,V;S<R.length;S++){U=R[S][0];if(R[S].length===2){T=E;V=R[S][1]}else{if(R[S].length===3){T=R[S][1];V=R[S][2]}}U.on(V,T)}},_unapplyEvents:function(R){for(var S=0,U,V,T;S<R.length;S++){U=R[S][0];if(R[S].length===2){T=E;V=R[S][1]}else{if(R[S].length===3){T=R[S][1];V=R[S][2]}}U.off(V,T)}},_buildEvents:function(){var R={keyup:I.proxy(function(S){if(I.inArray(S.keyCode,[27,37,39,38,40,32,13,9])===-1){this.update()}},this),keydown:I.proxy(this.keydown,this),paste:I.proxy(this.paste,this)};if(this.o.showOnFocus===true){R.focus=I.proxy(this.show,this)}if(this.isInput){this._events=[[this.element,R]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),R],[this.component,{click:I.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:I.proxy(this.show,this)}]]}}}this._events.push([this.element,"*",{blur:I.proxy(function(S){this._focused_from=S.target},this)}],[this.element,{blur:I.proxy(function(S){this._focused_from=S.target},this)}]);if(this.o.immediateUpdates){this._events.push([this.element,{"changeYear changeMonth":I.proxy(function(S){this.update(S.date)},this)}])}this._secondaryEvents=[[this.picker,{click:I.proxy(this.click,this)}],[I(window),{resize:I.proxy(this.place,this)}],[I(document),{mousedown:I.proxy(function(S){if(!(this.element.is(S.target)||this.element.find(S.target).length||this.picker.is(S.target)||this.picker.find(S.target).length||this.picker.hasClass("datepicker-inline"))){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(T,U){var S=U||this.dates.get(-1),R=this._utc_to_local(S);this.element.trigger({type:T,date:R,dates:I.map(this.dates,this._utc_to_local),format:I.proxy(function(V,X){if(arguments.length===0){V=this.dates.length-1;X=this.o.format}else{if(typeof V==="string"){X=V;V=this.dates.length-1}}X=X||this.o.format;var W=this.dates.get(V);return L.formatDate(W,X,this.o.language)},this)})},show:function(){if(this.element.attr("readonly")&&this.o.enableOnReadonly===false){return }if(!this.isInline){this.picker.appendTo(this.o.container)}this.place();this.picker.show();this._attachSecondaryEvents();this._trigger("show");if((window.navigator.msMaxTouchPoints||"ontouchstart" in document)&&this.o.disableTouchKeyboard){I(this.element).blur()}return this},hide:function(){if(this.isInline){return this}if(!this.picker.is(":visible")){return this}this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this._trigger("hide");return this},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}return this},paste:function(R){var S;if(R.originalEvent.clipboardData&&R.originalEvent.clipboardData.types&&I.inArray("text/plain",R.originalEvent.clipboardData.types)!==-1){S=R.originalEvent.clipboardData.getData("text/plain")}else{if(window.clipboardData){S=window.clipboardData.getData("Text")}else{return }}this.setDate(S);this.update();R.preventDefault()},_utc_to_local:function(R){return R&&new Date(R.getTime()+(R.getTimezoneOffset()*60000))},_local_to_utc:function(R){return R&&new Date(R.getTime()-(R.getTimezoneOffset()*60000))},_zero_time:function(R){return R&&new Date(R.getFullYear(),R.getMonth(),R.getDate())},_zero_utc_time:function(R){return R&&new Date(Date.UTC(R.getUTCFullYear(),R.getUTCMonth(),R.getUTCDate()))},getDates:function(){return I.map(this.dates,this._utc_to_local)},getUTCDates:function(){return I.map(this.dates,function(R){return new Date(R)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var R=this.dates.get(-1);if(typeof R!=="undefined"){return new Date(R)}else{return null}},clearDates:function(){var R;if(this.isInput){R=this.element}else{if(this.component){R=this.element.find("input")}}if(R){R.val("")}this.update();this._trigger("changeDate");if(this.o.autoclose){this.hide()}},setDates:function(){var R=I.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,R);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var R=I.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,I.map(R,this._utc_to_local));this._trigger("changeDate");this.setValue();return this},setDate:K("setDates"),setUTCDate:K("setUTCDates"),setValue:function(){var R=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(R)}}else{this.element.val(R)}return this},getFormattedDate:function(R){if(R===E){R=this.o.format}var S=this.o.language;return I.map(this.dates,function(T){return L.formatDate(T,R,S)}).join(this.o.multidateSeparator)},setStartDate:function(R){this._process_options({startDate:R});this.update();this.updateNavArrows();return this},setEndDate:function(R){this._process_options({endDate:R});this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(R){this._process_options({daysOfWeekDisabled:R});this.update();this.updateNavArrows();return this},setDaysOfWeekHighlighted:function(R){this._process_options({daysOfWeekHighlighted:R});this.update();return this},setDatesDisabled:function(R){this._process_options({datesDisabled:R});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return this}var g=this.picker.outerWidth(),c=this.picker.outerHeight(),Z=10,X=I(this.o.container),j=X.width(),W=X.height(),R=X.scrollTop(),f=X.offset();var V=[];this.element.parents().each(function(){var k=I(this).css("z-index");if(k!=="auto"&&k!==0){V.push(parseInt(k))}});var b=Math.max.apply(Math,V)+10;var U=this.component?this.component.parent().offset():this.element.offset();var a=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var e=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var T=U.left-f.left,Y=U.top-f.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");if(this.o.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);if(this.o.orientation.x==="right"){T-=g-e}}else{if(U.left<0){this.picker.addClass("datepicker-orient-left");T-=U.left-Z}else{if(T+g>j){this.picker.addClass("datepicker-orient-right");T=U.left+e-g}else{this.picker.addClass("datepicker-orient-left")}}}var d=this.o.orientation.y,h,S;if(d==="auto"){h=-R+Y-c;S=R+W-(Y+a+c);if(Math.max(h,S)===S){d="top"}else{d="bottom"}}this.picker.addClass("datepicker-orient-"+d);if(d==="top"){Y-=c+parseInt(this.picker.css("padding-top"))}else{Y+=a}if(this.o.rtl){var i=j-(T+e);this.picker.css({top:Y,right:i,zIndex:b})}else{this.picker.css({top:Y,left:T,zIndex:b})}return this},_allow_update:true,update:function(){if(!this._allow_update){return this}var S=this.dates.copy(),T=[],R=false;if(arguments.length){I.each(arguments,I.proxy(function(V,U){if(U instanceof Date){U=this._local_to_utc(U)}T.push(U)},this));R=true}else{T=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(T&&this.o.multidate){T=T.split(this.o.multidateSeparator)}else{T=[T]}delete this.element.data().date}T=I.map(T,I.proxy(function(U){return L.parseDate(U,this.o.format,this.o.language)},this));T=I.grep(T,I.proxy(function(U){return(U<this.o.startDate||U>this.o.endDate||!U)},this),true);this.dates.replace(T);if(this.dates.length){this.viewDate=new Date(this.dates.get(-1))}else{if(this.viewDate<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else{if(this.viewDate>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=this.o.defaultViewDate}}}if(R){this.setValue()}else{if(T.length){if(String(S)!==String(this.dates)){this._trigger("changeDate")}}}if(!this.dates.length&&S.length){this._trigger("clearDate")}this.fill();this.element.change();return this},fillDow:function(){var R=this.o.weekStart,S="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(T,U){return parseInt(U)+1});S+='<th class="cw">&#160;</th>'}while(R<this.o.weekStart+7){S+='<th class="dow">'+B[this.o.language].daysMin[(R++)%7]+"</th>"}S+="</tr>";this.picker.find(".datepicker-days thead").append(S)},fillMonths:function(){var S="",R=0;while(R<12){S+='<span class="month">'+B[this.o.language].monthsShort[R++]+"</span>"}this.picker.find(".datepicker-months td").html(S)},setRange:function(R){if(!R||!R.length){delete this.range}else{this.range=I.map(R,function(S){return S.valueOf()})}this.fill()},getClassNames:function(T){var R=[],U=this.viewDate.getUTCFullYear(),V=this.viewDate.getUTCMonth(),S=new Date();if(T.getUTCFullYear()<U||(T.getUTCFullYear()===U&&T.getUTCMonth()<V)){R.push("old")}else{if(T.getUTCFullYear()>U||(T.getUTCFullYear()===U&&T.getUTCMonth()>V)){R.push("new")}}if(this.focusDate&&T.valueOf()===this.focusDate.valueOf()){R.push("focused")}if(this.o.todayHighlight&&T.getUTCFullYear()===S.getFullYear()&&T.getUTCMonth()===S.getMonth()&&T.getUTCDate()===S.getDate()){R.push("today")}if(this.dates.contains(T)!==-1){R.push("active")}if(T.valueOf()<this.o.startDate||T.valueOf()>this.o.endDate||I.inArray(T.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){R.push("disabled")}if(T.valueOf()<this.o.startDate||T.valueOf()>this.o.endDate||I.inArray(T.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1){R.push("highlighted")}if(this.o.datesDisabled.length>0&&I.grep(this.o.datesDisabled,function(W){return Q(T,W)}).length>0){R.push("disabled","disabled-date")}if(this.range){if(T>this.range[0]&&T<this.range[this.range.length-1]){R.push("range")}if(I.inArray(T.valueOf(),this.range)!==-1){R.push("selected")}}return R},fill:function(){var r=new Date(this.viewDate),c=r.getUTCFullYear(),s=r.getUTCMonth(),l=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,p=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,Z=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,m=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,a=B[this.o.language].today||B.en.today||"",T=B[this.o.language].clear||B.en.clear||"",j=B[this.o.language].titleFormat||B.en.titleFormat,V;if(isNaN(c)||isNaN(s)){return }this.picker.find(".datepicker-days thead .datepicker-switch").text(L.formatDate(new Date(c,s),j,this.o.language));this.picker.find("tfoot .today").text(a).toggle(this.o.todayBtn!==false);this.picker.find("tfoot .clear").text(T).toggle(this.o.clearBtn!==false);this.picker.find("thead .datepicker-title").text(this.o.title).toggle(this.o.title!=="");this.updateNavArrows();this.fillMonths();var u=M(c,s-1,28),o=L.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(o);u.setUTCDate(o-(u.getUTCDay()-this.o.weekStart+7)%7);var R=new Date(u);R.setUTCDate(R.getUTCDate()+42);R=R.valueOf();var b=[];var h;while(u.valueOf()<R){if(u.getUTCDay()===this.o.weekStart){b.push("<tr>");if(this.o.calendarWeeks){var S=new Date(+u+(this.o.weekStart-u.getUTCDay()-7)%7*86400000),W=new Date(Number(S)+(7+4-S.getUTCDay())%7*86400000),U=new Date(Number(U=M(W.getUTCFullYear(),0,1))+(7+4-U.getUTCDay())%7*86400000),e=(W-U)/86400000/7+1;b.push('<td class="cw">'+e+"</td>")}}h=this.getClassNames(u);h.push("day");if(this.o.beforeShowDay!==I.noop){var g=this.o.beforeShowDay(this._utc_to_local(u));if(g===E){g={}}else{if(typeof (g)==="boolean"){g={enabled:g}}else{if(typeof (g)==="string"){g={classes:g}}}}if(g.enabled===false){h.push("disabled")}if(g.classes){h=h.concat(g.classes.split(/\s+/))}if(g.tooltip){V=g.tooltip}}h=I.unique(h);b.push('<td class="'+h.join(" ")+'"'+(V?' title="'+V+'"':"")+">"+u.getUTCDate()+"</td>");V=null;if(u.getUTCDay()===this.o.weekEnd){b.push("</tr>")}u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var Y=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?"Months":c).end().find("span").removeClass("active");I.each(this.dates,function(v,w){if(w.getUTCFullYear()===c){Y.eq(w.getUTCMonth()).addClass("active")}});if(c<l||c>Z){Y.addClass("disabled")}if(c===l){Y.slice(0,p).addClass("disabled")}if(c===Z){Y.slice(m+1).addClass("disabled")}if(this.o.beforeShowMonth!==I.noop){var X=this;I.each(Y,function(d,w){if(!I(w).hasClass("disabled")){var x=new Date(c,d,1);var v=X.o.beforeShowMonth(x);if(v===false){I(w).addClass("disabled")}}})}b="";c=parseInt(c/10,10)*10;var t=this.picker.find(".datepicker-years").find(".datepicker-switch").text(c+"-"+(c+9)).end().find("td");c-=1;var k=I.map(this.dates,function(i){return i.getUTCFullYear()}),q;for(var n=-1;n<11;n++){q=["year"];V=null;if(n===-1){q.push("old")}else{if(n===10){q.push("new")}}if(I.inArray(c,k)!==-1){q.push("active")}if(c<l||c>Z){q.push("disabled")}if(this.o.beforeShowYear!==I.noop){var f=this.o.beforeShowYear(new Date(c,0,1));if(f===E){f={}}else{if(typeof (f)==="boolean"){f={enabled:f}}else{if(typeof (f)==="string"){f={classes:f}}}}if(f.enabled===false){q.push("disabled")}if(f.classes){q=q.concat(f.classes.split(/\s+/))}if(f.tooltip){V=f.tooltip}}b+='<span class="'+q.join(" ")+'"'+(V?' title="'+V+'"':"")+">"+c+"</span>";c+=1}t.html(b)},updateNavArrows:function(){if(!this._allow_update){return }var T=new Date(this.viewDate),R=T.getUTCFullYear(),S=T.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&R<=this.o.startDate.getUTCFullYear()&&S<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&R>=this.o.endDate.getUTCFullYear()&&S>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&R<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&R>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(X){X.preventDefault();X.stopPropagation();var W=I(X.target).closest("span, td, th"),U,V,R;if(W.length===1){switch(W[0].nodeName.toLowerCase()){case"th":switch(W[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var T=L.modes[this.viewMode].navStep*(W[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,T);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,T);if(this.viewMode===1){this._trigger("changeYear",this.viewDate)}break}this.fill();break;case"today":var S=new Date();S=M(S.getFullYear(),S.getMonth(),S.getDate(),0,0,0);this.showMode(-2);var Y=this.o.todayBtn==="linked"?null:"view";this._setDate(S,Y);break;case"clear":this.clearDates();break}break;case"span":if(!W.hasClass("disabled")){this.viewDate.setUTCDate(1);if(W.hasClass("month")){R=1;V=W.parent().find("span").index(W);U=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(V);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(M(U,V,R));this.showMode()}else{this.showMode(-1)}}else{R=1;V=0;U=parseInt(W.text(),10)||0;this.viewDate.setUTCFullYear(U);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(M(U,V,R))}this.showMode(-1)}this.fill()}break;case"td":if(W.hasClass("day")&&!W.hasClass("disabled")){R=parseInt(W.text(),10)||1;U=this.viewDate.getUTCFullYear();V=this.viewDate.getUTCMonth();if(W.hasClass("old")){if(V===0){V=11;U-=1}else{V-=1}}else{if(W.hasClass("new")){if(V===11){V=0;U+=1}else{V+=1}}}this._setDate(M(U,V,R))}break}}if(this.picker.is(":visible")&&this._focused_from){I(this._focused_from).focus()}delete this._focused_from},_toggle_multidate:function(S){var R=this.dates.contains(S);if(!S){this.dates.clear()}if(R!==-1){if(this.o.multidate===true||this.o.multidate>1||this.o.toggleActive){this.dates.remove(R)}}else{if(this.o.multidate===false){this.dates.clear();this.dates.push(S)}else{this.dates.push(S)}}if(typeof this.o.multidate==="number"){while(this.dates.length>this.o.multidate){this.dates.remove(0)}}},_setDate:function(R,T){if(!T||T==="date"){this._toggle_multidate(R&&new Date(R))}if(!T||T==="view"){this.viewDate=R&&new Date(R)}this.fill();this.setValue();if(!T||T!=="view"){this._trigger("changeDate")}var S;if(this.isInput){S=this.element}else{if(this.component){S=this.element.find("input")}}if(S){S.change()}if(this.o.autoclose&&(!T||T==="date")){this.hide()}},moveMonth:function(R,S){if(!R){return E}if(!S){return R}var V=new Date(R.valueOf()),Z=V.getUTCDate(),W=V.getUTCMonth(),U=Math.abs(S),Y,X;S=S>0?1:-1;if(U===1){X=S===-1?function(){return V.getUTCMonth()===W}:function(){return V.getUTCMonth()!==Y};Y=W+S;V.setUTCMonth(Y);if(Y<0||Y>11){Y=(Y+12)%12}}else{for(var T=0;T<U;T++){V=this.moveMonth(V,S)}Y=V.getUTCMonth();V.setUTCDate(Z);X=function(){return Y!==V.getUTCMonth()}}while(X()){V.setUTCDate(--Z);V.setUTCMonth(Y)}return V},moveYear:function(S,R){return this.moveMonth(S,R*12)},dateWithinRange:function(R){return R>=this.o.startDate&&R<=this.o.endDate},keydown:function(X){if(!this.picker.is(":visible")){if(X.keyCode===40||X.keyCode===27){this.show()}return }var T=false,S,R,V,W=this.focusDate||this.viewDate;switch(X.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else{this.hide()}X.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}S=X.keyCode===37?-1:1;if(X.ctrlKey){R=this.moveYear(this.dates.get(-1)||F(),S);V=this.moveYear(W,S);this._trigger("changeYear",this.viewDate)}else{if(X.shiftKey){R=this.moveMonth(this.dates.get(-1)||F(),S);V=this.moveMonth(W,S);this._trigger("changeMonth",this.viewDate)}else{R=new Date(this.dates.get(-1)||F());R.setUTCDate(R.getUTCDate()+S);V=new Date(W);V.setUTCDate(W.getUTCDate()+S)}}if(this.dateWithinRange(V)){this.focusDate=this.viewDate=V;this.setValue();this.fill();X.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation){break}S=X.keyCode===38?-1:1;if(X.ctrlKey){R=this.moveYear(this.dates.get(-1)||F(),S);V=this.moveYear(W,S);this._trigger("changeYear",this.viewDate)}else{if(X.shiftKey){R=this.moveMonth(this.dates.get(-1)||F(),S);V=this.moveMonth(W,S);this._trigger("changeMonth",this.viewDate)}else{R=new Date(this.dates.get(-1)||F());R.setUTCDate(R.getUTCDate()+S*7);V=new Date(W);V.setUTCDate(W.getUTCDate()+S*7)}}if(this.dateWithinRange(V)){this.focusDate=this.viewDate=V;this.setValue();this.fill();X.preventDefault()}break;case 32:break;case 13:W=this.focusDate||this.dates.get(-1)||this.viewDate;if(this.o.keyboardNavigation){this._toggle_multidate(W);T=true}this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(":visible")){X.preventDefault();if(typeof X.stopPropagation==="function"){X.stopPropagation()}else{X.cancelBubble=true}if(this.o.autoclose){this.hide()}}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(T){if(this.dates.length){this._trigger("changeDate")}else{this._trigger("clearDate")}var U;if(this.isInput){U=this.element}else{if(this.component){U=this.element.find("input")}}if(U){U.change()}}},showMode:function(R){if(R){this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+R))}this.picker.children("div").hide().filter(".datepicker-"+L.modes[this.viewMode].clsName).show();this.updateNavArrows()}};var P=function(S,R){this.element=I(S);this.inputs=I.map(R.inputs,function(T){return T.jquery?T[0]:T});delete R.inputs;N.call(I(this.inputs),R).on("changeDate",I.proxy(this.dateUpdated,this));this.pickers=I.map(this.inputs,function(T){return I(T).data("datepicker")});this.updateDates()};P.prototype={updateDates:function(){this.dates=I.map(this.pickers,function(R){return R.getUTCDate()});this.updateRanges()},updateRanges:function(){var R=I.map(this.dates,function(S){return S.valueOf()});I.each(this.pickers,function(S,T){T.setRange(R)})},dateUpdated:function(W){if(this.updating){return }this.updating=true;var X=I(W.target).data("datepicker");if(typeof (X)==="undefined"){return }var V=X.getUTCDate(),U=I.inArray(W.target,this.inputs),T=U-1,S=U+1,R=this.inputs.length;if(U===-1){return }I.each(this.pickers,function(Y,Z){if(!Z.getUTCDate()){Z.setUTCDate(V)}});if(V<this.dates[T]){while(T>=0&&V<this.dates[T]){this.pickers[T--].setUTCDate(V)}}else{if(V>this.dates[S]){while(S<R&&V>this.dates[S]){this.pickers[S++].setUTCDate(V)}}}this.updateDates();delete this.updating},remove:function(){I.map(this.pickers,function(R){R.remove()});delete this.element.data().datepicker}};function H(U,X){var W=I(U).data(),R={},V,T=new RegExp("^"+X.toLowerCase()+"([A-Z])");X=new RegExp("^"+X.toLowerCase());function Y(b,Z){return Z.toLowerCase()}for(var S in W){if(X.test(S)){V=S.replace(T,Y);R[V]=W[S]}}return R}function A(T){var R={};if(!B[T]){T=T.split("-")[0];if(!B[T]){return }}var S=B[T];I.each(O,function(V,U){if(U in S){R[U]=S[U]}});return R}var C=I.fn.datepicker;var N=function(T){var R=Array.apply(null,arguments);R.shift();var S;this.each(function(){var b=I(this),Z=b.data("datepicker"),V=typeof T==="object"&&T;if(!Z){var X=H(this,"date"),U=I.extend({},G,X,V),W=A(U.language),Y=I.extend({},G,W,X,V);if(b.hasClass("input-daterange")||Y.inputs){var a={inputs:Y.inputs||b.find("input").toArray()};b.data("datepicker",(Z=new P(this,I.extend(Y,a))))}else{b.data("datepicker",(Z=new J(this,Y)))}}if(typeof T==="string"&&typeof Z[T]==="function"){S=Z[T].apply(Z,R);if(S!==E){return false}}});if(S!==E){return S}else{return this}};I.fn.datepicker=N;var G=I.fn.datepicker.defaults={autoclose:false,beforeShowDay:I.noop,beforeShowMonth:I.noop,beforeShowYear:I.noop,calendarWeeks:false,clearBtn:false,toggleActive:false,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"cn",minViewMode:0,maxViewMode:2,multidate:false,multidateSeparator:",",orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0,disableTouchKeyboard:false,enableOnReadonly:true,container:"body",immediateUpdates:false,title:""};var O=I.fn.datepicker.locale_opts=["format","rtl","weekStart"];I.fn.datepicker.Constructor=J;var B=I.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"},cn:{days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],daysShort:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],daysMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],today:"\u4eca\u5929",clear:"\u6e05\u9664",titleFormat:"yyyy-MM"}};var L={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(R){return(((R%4===0)&&(R%100!==0))||(R%400===0))},getDaysInMonth:function(R,S){return[31,(L.isLeapYear(R)?29:28),31,30,31,30,31,31,30,31,30,31][S]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(T){var R=T.replace(this.validParts,"\0").split("\0"),S=T.match(this.validParts);if(!R||!R.length||!S||S.length===0){throw new Error("Invalid date format.")}return{separators:R,parts:S}},parseDate:function(h,e,b){if(!h){return E}if(h instanceof Date){return h}if(typeof e==="string"){e=L.parseFormat(e)}var T=/([\-+]\d+)([dmwy])/,Z=h.match(/([\-+]\d+)([dmwy])/g),a,Y,d;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(h)){h=new Date();for(d=0;d<Z.length;d++){a=T.exec(Z[d]);Y=parseInt(a[1]);switch(a[2]){case"d":h.setUTCDate(h.getUTCDate()+Y);break;case"m":h=J.prototype.moveMonth.call(J.prototype,h,Y);break;case"w":h.setUTCDate(h.getUTCDate()+Y*7);break;case"y":h=J.prototype.moveYear.call(J.prototype,h,Y);break}}return M(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),0,0,0)}Z=h&&h.match(this.nonpunctuation)||[];h=new Date();var U={},f=["yyyy","yy","M","MM","m","mm","d","dd"],X={yyyy:function(k,i){return k.setUTCFullYear(i)},yy:function(k,i){return k.setUTCFullYear(2000+i)},m:function(k,i){if(isNaN(k)){return k}i-=1;while(i<0){i+=12}i%=12;k.setUTCMonth(i);while(k.getUTCMonth()!==i){k.setUTCDate(k.getUTCDate()-1)}return k},d:function(k,i){return k.setUTCDate(i)}},j,S;X.M=X.MM=X.mm=X.m;X.dd=X.d;h=M(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0);var R=e.parts.slice();if(Z.length!==R.length){R=I(R).filter(function(k,l){return I.inArray(l,f)!==-1}).toArray()}function g(){var i=this.slice(0,Z[d].length),k=Z[d].slice(0,i.length);return i.toLowerCase()===k.toLowerCase()}if(Z.length===R.length){var c;for(d=0,c=R.length;d<c;d++){j=parseInt(Z[d],10);a=R[d];if(isNaN(j)){switch(a){case"MM":S=I(B[b].months).filter(g);j=I.inArray(S[0],B[b].months)+1;break;case"M":S=I(B[b].monthsShort).filter(g);j=I.inArray(S[0],B[b].monthsShort)+1;break}}U[a]=j}var V,W;for(d=0;d<f.length;d++){W=f[d];if(W in U&&!isNaN(U[W])){V=new Date(h);X[W](V,U[W]);if(!isNaN(V)){h=V}}}}return h},formatDate:function(R,V,X){if(!R){return""}if(typeof V==="string"){V=L.parseFormat(V)}var W={d:R.getUTCDate(),D:B[X].daysShort[R.getUTCDay()],DD:B[X].days[R.getUTCDay()],m:R.getUTCMonth()+1,M:B[X].monthsShort[R.getUTCMonth()],MM:B[X].months[R.getUTCMonth()],yy:R.getUTCFullYear().toString().substring(2),yyyy:R.getUTCFullYear()};W.dd=(W.d<10?"0":"")+W.d;W.mm=(W.m<10?"0":"")+W.m;R=[];var U=I.extend([],V.separators);for(var T=0,S=V.parts.length;T<=S;T++){if(U.length){R.push(U.shift())}R.push(W[V.parts[T]])}return R.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};L.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+L.headTemplate+"<tbody></tbody>"+L.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+L.headTemplate+L.contTemplate+L.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+L.headTemplate+L.contTemplate+L.footTemplate+"</table></div></div>";I.fn.datepicker.DPGlobal=L;I.fn.datepicker.noConflict=function(){I.fn.datepicker=C;return this};I.fn.datepicker.version="1.4.1-dev";I(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(S){var R=I(this);if(R.data("datepicker")){return }S.preventDefault();N.call(R,"show")});I(function(){N.call(I('[data-provide="datepicker-inline"]'))})}));
(function($){var settings={},roots={},caches={},zId=0,_consts={event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:true,dblClickExpand:true,expandSpeed:"fast",fontCss:{},nameIsHTML:false,selectedMulti:true,showIcon:true,showLine:true,showTitle:true},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:false,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:false,leaf:false}},async:{enable:false,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(setting){var r=data.getRoot(setting);if(!r){r={};data.setRoot(setting,r)}r.children=[];r.expandTriggerFlag=false;r.curSelectedList=[];r.noSelection=true;r.createdNodes=[]},_initCache=function(setting){var c=data.getCache(setting);if(!c){c={};data.setCache(setting,c)}c.nodes=[];c.doms=[]},_bindEvent=function(setting){var o=setting.treeObj,c=consts.event;o.unbind(c.NODECREATED);o.bind(c.NODECREATED,function(event,treeId,node){tools.apply(setting.callback.onNodeCreated,[event,treeId,node])});o.unbind(c.CLICK);o.bind(c.CLICK,function(event,srcEvent,treeId,node,clickFlag){tools.apply(setting.callback.onClick,[srcEvent,treeId,node,clickFlag])});o.unbind(c.EXPAND);o.bind(c.EXPAND,function(event,treeId,node){tools.apply(setting.callback.onExpand,[event,treeId,node])});o.unbind(c.COLLAPSE);o.bind(c.COLLAPSE,function(event,treeId,node){tools.apply(setting.callback.onCollapse,[event,treeId,node])});o.unbind(c.ASYNC_SUCCESS);o.bind(c.ASYNC_SUCCESS,function(event,treeId,node,msg){tools.apply(setting.callback.onAsyncSuccess,[event,treeId,node,msg])});o.unbind(c.ASYNC_ERROR);o.bind(c.ASYNC_ERROR,function(event,treeId,node,XMLHttpRequest,textStatus,errorThrown){tools.apply(setting.callback.onAsyncError,[event,treeId,node,XMLHttpRequest,textStatus,errorThrown])})},_eventProxy=function(event){var target=event.target,setting=settings[event.data.treeId],tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null,tmp=null;if(tools.eqs(event.type,"mousedown")){treeEventType="mousedown"}else{if(tools.eqs(event.type,"mouseup")){treeEventType="mouseup"}else{if(tools.eqs(event.type,"contextmenu")){treeEventType="contextmenu"}else{if(tools.eqs(event.type,"click")){if(tools.eqs(target.tagName,"span")&&target.getAttribute("treeNode"+consts.id.SWITCH)!==null){tId=target.parentNode.id;nodeEventType="switchNode"}else{tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=tmp.parentNode.id;nodeEventType="clickNode"}}}else{if(tools.eqs(event.type,"dblclick")){treeEventType="dblclick";tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=tmp.parentNode.id;nodeEventType="switchNode"}}}}}}if(treeEventType.length>0&&tId.length==0){tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]);if(tmp){tId=tmp.parentNode.id}}if(tId.length>0){node=data.getNodeCache(setting,tId);switch(nodeEventType){case"switchNode":if(!node.isParent){nodeEventType=""}else{if(tools.eqs(event.type,"click")||(tools.eqs(event.type,"dblclick")&&tools.apply(setting.view.dblClickExpand,[setting.treeId,node],setting.view.dblClickExpand))){nodeEventCallback=handler.onSwitchNode}else{nodeEventType=""}}break;case"clickNode":nodeEventCallback=handler.onClickNode;break}}switch(treeEventType){case"mousedown":treeEventCallback=handler.onZTreeMousedown;break;case"mouseup":treeEventCallback=handler.onZTreeMouseup;break;case"dblclick":treeEventCallback=handler.onZTreeDblclick;break;case"contextmenu":treeEventCallback=handler.onZTreeContextmenu;break}var proxyResult={stop:false,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback};return proxyResult},_initNode=function(setting,level,n,parentNode,isFirstNode,isLastNode,openFlag){if(!n){return }var childKey=setting.data.key.children;n.level=level;n.tId=setting.treeId+"_"+(++zId);n.parentTId=parentNode?parentNode.tId:null;if(n[childKey]&&n[childKey].length>0){if(typeof n.open=="string"){n.open=tools.eqs(n.open,"true")}n.open=!!n.open;n.isParent=true;n.zAsync=true}else{n.open=false;if(typeof n.isParent=="string"){n.isParent=tools.eqs(n.isParent,"true")}n.isParent=!!n.isParent;n.zAsync=!n.isParent}n.isFirstNode=isFirstNode;n.isLastNode=isLastNode;n.getParentNode=function(){return data.getNodeCache(setting,n.parentTId)};n.getPreNode=function(){return data.getPreNode(setting,n)};n.getNextNode=function(){return data.getNextNode(setting,n)};n.isAjaxing=false;data.fixPIdKeyValue(setting,n)},_init={bind:[_bindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(setting,node){data.getCache(setting).nodes[node.tId]=node},addAfterA:function(afterA){_init.afterA.push(afterA)},addBeforeA:function(beforeA){_init.beforeA.push(beforeA)},addInnerAfterA:function(innerAfterA){_init.innerAfterA.push(innerAfterA)},addInnerBeforeA:function(innerBeforeA){_init.innerBeforeA.push(innerBeforeA)},addInitBind:function(bindEvent){_init.bind.push(bindEvent)},addInitCache:function(initCache){_init.caches.push(initCache)},addInitNode:function(initNode){_init.nodes.push(initNode)},addInitProxy:function(initProxy){_init.proxys.push(initProxy)},addInitRoot:function(initRoot){_init.roots.push(initRoot)},addNodesData:function(setting,parentNode,nodes){var childKey=setting.data.key.children;if(!parentNode[childKey]){parentNode[childKey]=[]}if(parentNode[childKey].length>0){parentNode[childKey][parentNode[childKey].length-1].isLastNode=false;view.setNodeLineIcos(setting,parentNode[childKey][parentNode[childKey].length-1])}parentNode.isParent=true;parentNode[childKey]=parentNode[childKey].concat(nodes)},addSelectedNode:function(setting,node){var root=data.getRoot(setting);if(!data.isSelectedNode(setting,node)){root.curSelectedList.push(node)}},addCreatedNode:function(setting,node){if(!!setting.callback.onNodeCreated||!!setting.view.addDiyDom){var root=data.getRoot(setting);root.createdNodes.push(node)}},addZTreeTools:function(zTreeTools){_init.zTreeTools.push(zTreeTools)},exSetting:function(s){$.extend(true,_setting,s)},fixPIdKeyValue:function(setting,node){if(setting.data.simpleData.enable){node[setting.data.simpleData.pIdKey]=node.parentTId?node.getParentNode()[setting.data.simpleData.idKey]:setting.data.simpleData.rootPId}},getAfterA:function(setting,node,array){for(var i=0,j=_init.afterA.length;i<j;i++){_init.afterA[i].apply(this,arguments)}},getBeforeA:function(setting,node,array){for(var i=0,j=_init.beforeA.length;i<j;i++){_init.beforeA[i].apply(this,arguments)}},getInnerAfterA:function(setting,node,array){for(var i=0,j=_init.innerAfterA.length;i<j;i++){_init.innerAfterA[i].apply(this,arguments)}},getInnerBeforeA:function(setting,node,array){for(var i=0,j=_init.innerBeforeA.length;i<j;i++){_init.innerBeforeA[i].apply(this,arguments)}},getCache:function(setting){return caches[setting.treeId]},getNextNode:function(setting,node){if(!node){return null}var childKey=setting.data.key.children,p=node.parentTId?node.getParentNode():data.getRoot(setting);if(node.isLastNode){return null}else{if(node.isFirstNode){return p[childKey][1]}else{for(var i=1,l=p[childKey].length-1;i<l;i++){if(p[childKey][i]===node){return p[childKey][i+1]}}}}return null},getNodeByParam:function(setting,nodes,key,value){if(!nodes||!key){return null}var childKey=setting.data.key.children;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value){return nodes[i]}var tmp=data.getNodeByParam(setting,nodes[i][childKey],key,value);if(tmp){return tmp}}return null},getNodeCache:function(setting,tId){if(!tId){return null}var n=caches[setting.treeId].nodes[tId];return n?n:null},getNodes:function(setting){return data.getRoot(setting)[setting.data.key.children]},getNodesByParam:function(setting,nodes,key,value){if(!nodes||!key){return[]}var childKey=setting.data.key.children,result=[];for(var i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value){result.push(nodes[i])}result=result.concat(data.getNodesByParam(setting,nodes[i][childKey],key,value))}return result},getNodesByParamFuzzy:function(setting,nodes,key,value){if(!nodes||!key){return[]}var childKey=setting.data.key.children,result=[];for(var i=0,l=nodes.length;i<l;i++){if(typeof nodes[i][key]=="string"&&nodes[i][key].indexOf(value)>-1){result.push(nodes[i])}result=result.concat(data.getNodesByParamFuzzy(setting,nodes[i][childKey],key,value))}return result},getNodesByFilter:function(setting,nodes,filter,isSingle){if(!nodes){return(isSingle?null:[])}var childKey=setting.data.key.children,result=isSingle?null:[];for(var i=0,l=nodes.length;i<l;i++){if(tools.apply(filter,[nodes[i]],false)){if(isSingle){return nodes[i]}result.push(nodes[i])}var tmpResult=data.getNodesByFilter(setting,nodes[i][childKey],filter,isSingle);if(isSingle&&!!tmpResult){return tmpResult}result=isSingle?tmpResult:result.concat(tmpResult)}return result},getPreNode:function(setting,node){if(!node){return null}var childKey=setting.data.key.children,p=node.parentTId?node.getParentNode():data.getRoot(setting);if(node.isFirstNode){return null}else{if(node.isLastNode){return p[childKey][p[childKey].length-2]}else{for(var i=1,l=p[childKey].length-1;i<l;i++){if(p[childKey][i]===node){return p[childKey][i-1]}}}}return null},getRoot:function(setting){return setting?roots[setting.treeId]:null},getSetting:function(treeId){return settings[treeId]},getSettings:function(){return settings},getTitleKey:function(setting){return setting.data.key.title===""?setting.data.key.name:setting.data.key.title},getZTreeTools:function(treeId){var r=this.getRoot(this.getSetting(treeId));return r?r.treeTools:null},initCache:function(setting){for(var i=0,j=_init.caches.length;i<j;i++){_init.caches[i].apply(this,arguments)}},initNode:function(setting,level,node,parentNode,preNode,nextNode){for(var i=0,j=_init.nodes.length;i<j;i++){_init.nodes[i].apply(this,arguments)}},initRoot:function(setting){for(var i=0,j=_init.roots.length;i<j;i++){_init.roots[i].apply(this,arguments)}},isSelectedNode:function(setting,node){var root=data.getRoot(setting);for(var i=0,j=root.curSelectedList.length;i<j;i++){if(node===root.curSelectedList[i]){return true}}return false},removeNodeCache:function(setting,node){var childKey=setting.data.key.children;if(node[childKey]){for(var i=0,l=node[childKey].length;i<l;i++){arguments.callee(setting,node[childKey][i])}}delete data.getCache(setting).nodes[node.tId]},removeSelectedNode:function(setting,node){var root=data.getRoot(setting);for(var i=0,j=root.curSelectedList.length;i<j;i++){if(node===root.curSelectedList[i]||!data.getNodeCache(setting,root.curSelectedList[i].tId)){root.curSelectedList.splice(i,1);i--;j--}}},setCache:function(setting,cache){caches[setting.treeId]=cache},setRoot:function(setting,root){roots[setting.treeId]=root},setZTreeTools:function(setting,zTreeTools){for(var i=0,j=_init.zTreeTools.length;i<j;i++){_init.zTreeTools[i].apply(this,arguments)}},transformToArrayFormat:function(setting,nodes){if(!nodes){return[]}var childKey=setting.data.key.children,r=[];if(tools.isArray(nodes)){for(var i=0,l=nodes.length;i<l;i++){r.push(nodes[i]);if(nodes[i][childKey]){r=r.concat(data.transformToArrayFormat(setting,nodes[i][childKey]))}}}else{r.push(nodes);if(nodes[childKey]){r=r.concat(data.transformToArrayFormat(setting,nodes[childKey]))}}return r},transformTozTreeFormat:function(setting,sNodes){var i,l,key=setting.data.simpleData.idKey,parentKey=setting.data.simpleData.pIdKey,childKey=setting.data.key.children;if(!key||key==""||!sNodes){return[]}if(tools.isArray(sNodes)){var r=[];var tmpMap=[];for(i=0,l=sNodes.length;i<l;i++){tmpMap[sNodes[i][key]]=sNodes[i]}for(i=0,l=sNodes.length;i<l;i++){if(tmpMap[sNodes[i][parentKey]]&&sNodes[i][key]!=sNodes[i][parentKey]){if(!tmpMap[sNodes[i][parentKey]][childKey]){tmpMap[sNodes[i][parentKey]][childKey]=[]}tmpMap[sNodes[i][parentKey]][childKey].push(sNodes[i])}else{r.push(sNodes[i])}}return r}else{return[sNodes]}}},event={bindEvent:function(setting){for(var i=0,j=_init.bind.length;i<j;i++){_init.bind[i].apply(this,arguments)}},bindTree:function(setting){var eventParam={treeId:setting.treeId},o=setting.treeObj;o.unbind("click",event.proxy);o.bind("click",eventParam,event.proxy);o.unbind("dblclick",event.proxy);o.bind("dblclick",eventParam,event.proxy);o.unbind("mouseover",event.proxy);o.bind("mouseover",eventParam,event.proxy);o.unbind("mouseout",event.proxy);o.bind("mouseout",eventParam,event.proxy);o.unbind("mousedown",event.proxy);o.bind("mousedown",eventParam,event.proxy);o.unbind("mouseup",event.proxy);o.bind("mouseup",eventParam,event.proxy);o.unbind("contextmenu",event.proxy);o.bind("contextmenu",eventParam,event.proxy)},doProxy:function(e){var results=[];for(var i=0,j=_init.proxys.length;i<j;i++){var proxyResult=_init.proxys[i].apply(this,arguments);results.push(proxyResult);if(proxyResult.stop){break}}return results},proxy:function(e){var setting=data.getSetting(e.data.treeId);if(!tools.uCanDo(setting,e)){return true}var results=event.doProxy(e),r=true,x=false;for(var i=0,l=results.length;i<l;i++){var proxyResult=results[i];if(proxyResult.nodeEventCallback){x=true;r=proxyResult.nodeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r}if(proxyResult.treeEventCallback){x=true;r=proxyResult.treeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r}}try{if(x&&$("input:focus").length==0){tools.noSel(setting)}}catch(e){}return r}},handler={onSwitchNode:function(event,node){var setting=settings[event.data.treeId];if(node.open){if(tools.apply(setting.callback.beforeCollapse,[setting.treeId,node],true)==false){return true}data.getRoot(setting).expandTriggerFlag=true;view.switchNode(setting,node)}else{if(tools.apply(setting.callback.beforeExpand,[setting.treeId,node],true)==false){return true}data.getRoot(setting).expandTriggerFlag=true;view.switchNode(setting,node)}return true},onClickNode:function(event,node){var setting=settings[event.data.treeId],clickFlag=((setting.view.autoCancelSelected)&&data.isSelectedNode(setting,node))?0:(setting.view.autoCancelSelected&&setting.view.selectedMulti)?2:1;if(tools.apply(setting.callback.beforeClick,[setting.treeId,node,clickFlag],true)==false){return true}if(clickFlag===0){view.cancelPreSelectedNode(setting,node)}else{view.selectNode(setting,node,clickFlag===2)}setting.treeObj.trigger(consts.event.CLICK,[event,setting.treeId,node,clickFlag]);return true},onZTreeMousedown:function(event,node){var setting=settings[event.data.treeId];if(tools.apply(setting.callback.beforeMouseDown,[setting.treeId,node],true)){tools.apply(setting.callback.onMouseDown,[event,setting.treeId,node])}return true},onZTreeMouseup:function(event,node){var setting=settings[event.data.treeId];if(tools.apply(setting.callback.beforeMouseUp,[setting.treeId,node],true)){tools.apply(setting.callback.onMouseUp,[event,setting.treeId,node])}return true},onZTreeDblclick:function(event,node){var setting=settings[event.data.treeId];if(tools.apply(setting.callback.beforeDblClick,[setting.treeId,node],true)){tools.apply(setting.callback.onDblClick,[event,setting.treeId,node])}return true},onZTreeContextmenu:function(event,node){var setting=settings[event.data.treeId];if(tools.apply(setting.callback.beforeRightClick,[setting.treeId,node],true)){tools.apply(setting.callback.onRightClick,[event,setting.treeId,node])}return(typeof setting.callback.onRightClick)!="function"}},tools={apply:function(fun,param,defaultValue){if((typeof fun)=="function"){return fun.apply(zt,param?param:[])}return defaultValue},canAsync:function(setting,node){var childKey=setting.data.key.children;return(setting.async.enable&&node&&node.isParent&&!(node.zAsync||(node[childKey]&&node[childKey].length>0)))},clone:function(jsonObj){var buf;if(jsonObj instanceof Array){buf=[];var i=jsonObj.length;while(i--){buf[i]=arguments.callee(jsonObj[i])}return buf}else{if(typeof jsonObj=="function"){return jsonObj}else{if(jsonObj instanceof Object){buf={};for(var k in jsonObj){buf[k]=arguments.callee(jsonObj[k])}return buf}else{return jsonObj}}}},eqs:function(str1,str2){return str1.toLowerCase()===str2.toLowerCase()},isArray:function(arr){return Object.prototype.toString.apply(arr)==="[object Array]"},getMDom:function(setting,curDom,targetExpr){if(!curDom){return null}while(curDom&&curDom.id!==setting.treeId){for(var i=0,l=targetExpr.length;curDom.tagName&&i<l;i++){if(tools.eqs(curDom.tagName,targetExpr[i].tagName)&&curDom.getAttribute(targetExpr[i].attrName)!==null){return curDom}}curDom=curDom.parentNode}return null},noSel:function(setting){var r=data.getRoot(setting);if(r.noSelection){try{window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}catch(e){}}},uCanDo:function(setting,e){return true}},view={addNodes:function(setting,parentNode,newNodes,isSilent){if(setting.data.keep.leaf&&parentNode&&!parentNode.isParent){return }if(!tools.isArray(newNodes)){newNodes=[newNodes]}if(setting.data.simpleData.enable){newNodes=data.transformTozTreeFormat(setting,newNodes)}if(parentNode){var target_switchObj=$("#"+parentNode.tId+consts.id.SWITCH),target_icoObj=$("#"+parentNode.tId+consts.id.ICON),target_ulObj=$("#"+parentNode.tId+consts.id.UL);if(!parentNode.open){view.replaceSwitchClass(parentNode,target_switchObj,consts.folder.CLOSE);view.replaceIcoClass(parentNode,target_icoObj,consts.folder.CLOSE);parentNode.open=false;target_ulObj.css({display:"none"})}data.addNodesData(setting,parentNode,newNodes);view.createNodes(setting,parentNode.level+1,newNodes,parentNode);if(!isSilent){view.expandCollapseParentNode(setting,parentNode,true)}}else{data.addNodesData(setting,data.getRoot(setting),newNodes);view.createNodes(setting,0,newNodes,null)}},appendNodes:function(setting,level,nodes,parentNode,initFlag,openFlag){if(!nodes){return[]}var html=[],childKey=setting.data.key.children,nameKey=setting.data.key.name,titleKey=data.getTitleKey(setting);for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i],tmpPNode=(parentNode)?parentNode:data.getRoot(setting),tmpPChild=tmpPNode[childKey],isFirstNode=((tmpPChild.length==nodes.length)&&(i==0)),isLastNode=(i==(nodes.length-1));if(initFlag){data.initNode(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag);data.addNodeCache(setting,node)}var childHtml=[];if(node[childKey]&&node[childKey].length>0){childHtml=view.appendNodes(setting,level+1,node[childKey],node,initFlag,openFlag&&node.open)}if(openFlag){var url=view.makeNodeUrl(setting,node),fontcss=view.makeNodeFontCss(setting,node),fontStyle=[];for(var f in fontcss){fontStyle.push(f,":",fontcss[f],";")}html.push("<li id='",node.tId,"' class='level",node.level,"' tabindex='0' hidefocus='true' treenode>","<span id='",node.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(setting,node),"' treeNode",consts.id.SWITCH,"></span>");data.getBeforeA(setting,node,html);html.push("<a id='",node.tId,consts.id.A,"' class='level",node.level,"' treeNode",consts.id.A,' onclick="',(node.click||""),'" ',((url!=null&&url.length>0)?"href='"+url+"'":"")," target='",view.makeNodeTarget(node),"' style='",fontStyle.join(""),"'");if(tools.apply(setting.view.showTitle,[setting.treeId,node],setting.view.showTitle)&&node[titleKey]){html.push("title='",node[titleKey].replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'")}html.push(">");data.getInnerBeforeA(setting,node,html);var name=setting.view.nameIsHTML?node[nameKey]:node[nameKey].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");html.push("<span id='",node.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(setting,node),"' style='",view.makeNodeIcoStyle(setting,node),"'></span><span id='",node.tId,consts.id.SPAN,"'>",name,"</span>");data.getInnerAfterA(setting,node,html);html.push("</a>");data.getAfterA(setting,node,html);if(node.isParent&&node.open){view.makeUlHtml(setting,node,html,childHtml.join(""))}html.push("</li>");data.addCreatedNode(setting,node)}}return html},appendParentULDom:function(setting,node){var html=[],nObj=$("#"+node.tId),ulObj=$("#"+node.tId+consts.id.UL),childKey=setting.data.key.children,childHtml=view.appendNodes(setting,node.level+1,node[childKey],node,false,true);view.makeUlHtml(setting,node,html,childHtml.join(""));if(!nObj.get(0)&&!!node.parentTId){view.appendParentULDom(setting,node.getParentNode());nObj=$("#"+node.tId)}if(ulObj.get(0)){ulObj.remove()}nObj.append(html.join(""));view.createNodeCallback(setting)},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent){tools.apply(callback);return false}else{if(node&&node.isAjaxing){return false}else{if(tools.apply(setting.callback.beforeAsync,[setting.treeId,node],true)==false){tools.apply(callback);return false}}}if(node){node.isAjaxing=true;var icoObj=$("#"+node.tId+consts.id.ICON);icoObj.attr({style:"","class":"button ico_loading"})}var isJson=(setting.async.contentType=="application/json"),tmpParam=isJson?"{":"",jTemp="";for(i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;if(pKey.length>1){spKey=pKey[1];pKey=pKey[0]}if(isJson){jTemp=(typeof node[pKey]=="string")?'"':"";tmpParam+='"'+spKey+('":'+jTemp+node[pKey]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=spKey+("="+node[pKey]).replace(/&/g,"%26")+"&"}}if(tools.isArray(setting.async.otherParam)){for(i=0,l=setting.async.otherParam.length;i<l;i+=2){if(isJson){jTemp=(typeof setting.async.otherParam[i+1]=="string")?'"':"";tmpParam+='"'+setting.async.otherParam[i]+('":'+jTemp+setting.async.otherParam[i+1]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=setting.async.otherParam[i]+("="+setting.async.otherParam[i+1]).replace(/&/g,"%26")+"&"}}}else{for(var p in setting.async.otherParam){if(isJson){jTemp=(typeof setting.async.otherParam[p]=="string")?'"':"";tmpParam+='"'+p+('":'+jTemp+setting.async.otherParam[p]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=p+("="+setting.async.otherParam[p]).replace(/&/g,"%26")+"&"}}}if(tmpParam.length>1){tmpParam=tmpParam.substring(0,tmpParam.length-1)}if(isJson){tmpParam+="}"}$.ajax({contentType:setting.async.contentType,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){var newNodes=[];try{if(!msg||msg.length==0){newNodes=[]}else{if(typeof msg=="string"){newNodes=eval("("+msg+")")}else{newNodes=msg}}}catch(err){}if(node){node.isAjaxing=null;node.zAsync=true}view.setNodeLineIcos(setting,node);if(newNodes&&newNodes!=""){newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes);view.addNodes(setting,node,!!newNodes?tools.clone(newNodes):[],!!isSilent)}else{view.addNodes(setting,node,[],!!isSilent)}setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]);tools.apply(callback)},error:function(XMLHttpRequest,textStatus,errorThrown){if(node){node.isAjaxing=null}view.setNodeLineIcos(setting,node);setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,XMLHttpRequest,textStatus,errorThrown])}});return true},cancelPreSelectedNode:function(setting,node){var list=data.getRoot(setting).curSelectedList;for(var i=0,j=list.length-1;j>=i;j--){if(!node||node===list[j]){$("#"+list[j].tId+consts.id.A).removeClass(consts.node.CURSELECTED);view.setNodeName(setting,list[j]);if(node){data.removeSelectedNode(setting,node);break}}}if(!node){data.getRoot(setting).curSelectedList=[]}},createNodeCallback:function(setting){if(!!setting.callback.onNodeCreated||!!setting.view.addDiyDom){var root=data.getRoot(setting);while(root.createdNodes.length>0){var node=root.createdNodes.shift();tools.apply(setting.view.addDiyDom,[setting.treeId,node]);if(!!setting.callback.onNodeCreated){setting.treeObj.trigger(consts.event.NODECREATED,[setting.treeId,node])}}}},createNodes:function(setting,level,nodes,parentNode){if(!nodes||nodes.length==0){return }var root=data.getRoot(setting),childKey=setting.data.key.children,openFlag=!parentNode||parentNode.open||!!$("#"+parentNode[childKey][0].tId).get(0);root.createdNodes=[];var zTreeHtml=view.appendNodes(setting,level,nodes,parentNode,true,openFlag);if(!parentNode){setting.treeObj.append(zTreeHtml.join(""))}else{var ulObj=$("#"+parentNode.tId+consts.id.UL);if(ulObj.get(0)){ulObj.append(zTreeHtml.join(""))}}view.createNodeCallback(setting)},expandCollapseNode:function(setting,node,expandFlag,animateFlag,callback){var root=data.getRoot(setting),childKey=setting.data.key.children;if(!node){tools.apply(callback,[]);return }if(root.expandTriggerFlag){var _callback=callback;callback=function(){if(_callback){_callback()}if(node.open){setting.treeObj.trigger(consts.event.EXPAND,[setting.treeId,node])}else{setting.treeObj.trigger(consts.event.COLLAPSE,[setting.treeId,node])}};root.expandTriggerFlag=false}if(node.open==expandFlag){tools.apply(callback,[]);return }if(!node.open&&node.isParent&&((!$("#"+node.tId+consts.id.UL).get(0))||(node[childKey]&&node[childKey].length>0&&!$("#"+node[childKey][0].tId).get(0)))){view.appendParentULDom(setting,node)}var ulObj=$("#"+node.tId+consts.id.UL),switchObj=$("#"+node.tId+consts.id.SWITCH),icoObj=$("#"+node.tId+consts.id.ICON);if(node.isParent){node.open=!node.open;if(node.iconOpen&&node.iconClose){icoObj.attr("style",view.makeNodeIcoStyle(setting,node))}if(node.open){view.replaceSwitchClass(node,switchObj,consts.folder.OPEN);view.replaceIcoClass(node,icoObj,consts.folder.OPEN);if(animateFlag==false||setting.view.expandSpeed==""){ulObj.show();tools.apply(callback,[])}else{if(node[childKey]&&node[childKey].length>0){ulObj.slideDown(setting.view.expandSpeed,callback)}else{ulObj.show();tools.apply(callback,[])}}}else{view.replaceSwitchClass(node,switchObj,consts.folder.CLOSE);view.replaceIcoClass(node,icoObj,consts.folder.CLOSE);if(animateFlag==false||setting.view.expandSpeed==""||!(node[childKey]&&node[childKey].length>0)){ulObj.hide();tools.apply(callback,[])}else{ulObj.slideUp(setting.view.expandSpeed,callback)}}}else{tools.apply(callback,[])}},expandCollapseParentNode:function(setting,node,expandFlag,animateFlag,callback){if(!node){return }if(!node.parentTId){view.expandCollapseNode(setting,node,expandFlag,animateFlag,callback);return }else{view.expandCollapseNode(setting,node,expandFlag,animateFlag)}if(node.parentTId){view.expandCollapseParentNode(setting,node.getParentNode(),expandFlag,animateFlag,callback)}},expandCollapseSonNode:function(setting,node,expandFlag,animateFlag,callback){var root=data.getRoot(setting),childKey=setting.data.key.children,treeNodes=(node)?node[childKey]:root[childKey],selfAnimateSign=(node)?false:animateFlag,expandTriggerFlag=data.getRoot(setting).expandTriggerFlag;data.getRoot(setting).expandTriggerFlag=false;if(treeNodes){for(var i=0,l=treeNodes.length;i<l;i++){if(treeNodes[i]){view.expandCollapseSonNode(setting,treeNodes[i],expandFlag,selfAnimateSign)}}}data.getRoot(setting).expandTriggerFlag=expandTriggerFlag;view.expandCollapseNode(setting,node,expandFlag,animateFlag,callback)},makeNodeFontCss:function(setting,node){var fontCss=tools.apply(setting.view.fontCss,[setting.treeId,node],setting.view.fontCss);return(fontCss&&((typeof fontCss)!="function"))?fontCss:{}},makeNodeIcoClass:function(setting,node){var icoCss=["ico"];if(!node.isAjaxing){icoCss[0]=(node.iconSkin?node.iconSkin+"_":"")+icoCss[0];if(node.isParent){icoCss.push(node.open?consts.folder.OPEN:consts.folder.CLOSE)}else{icoCss.push(consts.folder.DOCU)}}return"button "+icoCss.join("_")},makeNodeIcoStyle:function(setting,node){var icoStyle=[];if(!node.isAjaxing){var icon=(node.isParent&&node.iconOpen&&node.iconClose)?(node.open?node.iconOpen:node.iconClose):node.icon;if(icon){icoStyle.push("background:url(",icon,") 0 0 no-repeat;")}if(setting.view.showIcon==false||!tools.apply(setting.view.showIcon,[setting.treeId,node],true)){icoStyle.push("width:0px;height:0px;")}}return icoStyle.join("")},makeNodeLineClass:function(setting,node){var lineClass=[];if(setting.view.showLine){if(node.level==0&&node.isFirstNode&&node.isLastNode){lineClass.push(consts.line.ROOT)}else{if(node.level==0&&node.isFirstNode){lineClass.push(consts.line.ROOTS)}else{if(node.isLastNode){lineClass.push(consts.line.BOTTOM)}else{lineClass.push(consts.line.CENTER)}}}}else{lineClass.push(consts.line.NOLINE)}if(node.isParent){lineClass.push(node.open?consts.folder.OPEN:consts.folder.CLOSE)}else{lineClass.push(consts.folder.DOCU)}return view.makeNodeLineClassEx(node)+lineClass.join("_")},makeNodeLineClassEx:function(node){return"button level"+node.level+" switch "},makeNodeTarget:function(node){return(node.target||"_blank")},makeNodeUrl:function(setting,node){var urlKey=setting.data.key.url;return node[urlKey]?node[urlKey]:null},makeUlHtml:function(setting,node,html,content){html.push("<ul id='",node.tId,consts.id.UL,"' class='level",node.level," ",view.makeUlLineClass(setting,node),"' style='display:",(node.open?"block":"none"),"'>");html.push(content);html.push("</ul>")},makeUlLineClass:function(setting,node){return((setting.view.showLine&&!node.isLastNode)?consts.line.LINE:"")},removeChildNodes:function(setting,node){if(!node){return }var childKey=setting.data.key.children,nodes=node[childKey];if(!nodes){return }for(var i=0,l=nodes.length;i<l;i++){data.removeNodeCache(setting,nodes[i])}data.removeSelectedNode(setting);delete node[childKey];if(!setting.data.keep.parent){node.isParent=false;node.open=false;var tmp_switchObj=$("#"+node.tId+consts.id.SWITCH),tmp_icoObj=$("#"+node.tId+consts.id.ICON);view.replaceSwitchClass(node,tmp_switchObj,consts.folder.DOCU);view.replaceIcoClass(node,tmp_icoObj,consts.folder.DOCU);$("#"+node.tId+consts.id.UL).remove()}else{$("#"+node.tId+consts.id.UL).empty()}},removeNode:function(setting,node){var root=data.getRoot(setting),childKey=setting.data.key.children,parentNode=(node.parentTId)?node.getParentNode():root;node.isFirstNode=false;node.isLastNode=false;node.getPreNode=function(){return null};node.getNextNode=function(){return null};$("#"+node.tId).remove();data.removeNodeCache(setting,node);data.removeSelectedNode(setting,node);for(var i=0,l=parentNode[childKey].length;i<l;i++){if(parentNode[childKey][i].tId==node.tId){parentNode[childKey].splice(i,1);break}}var tmp_ulObj,tmp_switchObj,tmp_icoObj;if(!setting.data.keep.parent&&parentNode[childKey].length<1){parentNode.isParent=false;parentNode.open=false;tmp_ulObj=$("#"+parentNode.tId+consts.id.UL);tmp_switchObj=$("#"+parentNode.tId+consts.id.SWITCH);tmp_icoObj=$("#"+parentNode.tId+consts.id.ICON);view.replaceSwitchClass(parentNode,tmp_switchObj,consts.folder.DOCU);view.replaceIcoClass(parentNode,tmp_icoObj,consts.folder.DOCU);tmp_ulObj.css("display","none")}else{if(setting.view.showLine&&parentNode[childKey].length>0){var newLast=parentNode[childKey][parentNode[childKey].length-1];newLast.isLastNode=true;newLast.isFirstNode=(parentNode[childKey].length==1);tmp_ulObj=$("#"+newLast.tId+consts.id.UL);tmp_switchObj=$("#"+newLast.tId+consts.id.SWITCH);tmp_icoObj=$("#"+newLast.tId+consts.id.ICON);if(parentNode==root){if(parentNode[childKey].length==1){view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.ROOT)}else{var tmp_first_switchObj=$("#"+parentNode[childKey][0].tId+consts.id.SWITCH);view.replaceSwitchClass(parentNode[childKey][0],tmp_first_switchObj,consts.line.ROOTS);view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)}}else{view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)}tmp_ulObj.removeClass(consts.line.LINE)}}},replaceIcoClass:function(node,obj,newName){if(!obj||node.isAjaxing){return }var tmpName=obj.attr("class");if(tmpName==undefined){return }var tmpList=tmpName.split("_");switch(newName){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:tmpList[tmpList.length-1]=newName;break}obj.attr("class",tmpList.join("_"))},replaceSwitchClass:function(node,obj,newName){if(!obj){return }var tmpName=obj.attr("class");if(tmpName==undefined){return }var tmpList=tmpName.split("_");switch(newName){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:tmpList[0]=view.makeNodeLineClassEx(node)+newName;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:tmpList[1]=newName;break}obj.attr("class",tmpList.join("_"));if(newName!==consts.folder.DOCU){obj.removeAttr("disabled")}else{obj.attr("disabled","disabled")}},selectNode:function(setting,node,addFlag){if(!addFlag){view.cancelPreSelectedNode(setting)}$("#"+node.tId+consts.id.A).addClass(consts.node.CURSELECTED);data.addSelectedNode(setting,node)},setNodeFontCss:function(setting,treeNode){var aObj=$("#"+treeNode.tId+consts.id.A),fontCss=view.makeNodeFontCss(setting,treeNode);if(fontCss){aObj.css(fontCss)}},setNodeLineIcos:function(setting,node){if(!node){return }var switchObj=$("#"+node.tId+consts.id.SWITCH),ulObj=$("#"+node.tId+consts.id.UL),icoObj=$("#"+node.tId+consts.id.ICON),ulLine=view.makeUlLineClass(setting,node);if(ulLine.length==0){ulObj.removeClass(consts.line.LINE)}else{ulObj.addClass(ulLine)}switchObj.attr("class",view.makeNodeLineClass(setting,node));if(node.isParent){switchObj.removeAttr("disabled")}else{switchObj.attr("disabled","disabled")}icoObj.removeAttr("style");icoObj.attr("style",view.makeNodeIcoStyle(setting,node));icoObj.attr("class",view.makeNodeIcoClass(setting,node))},setNodeName:function(setting,node){var nameKey=setting.data.key.name,titleKey=data.getTitleKey(setting),nObj=$("#"+node.tId+consts.id.SPAN);nObj.empty();if(setting.view.nameIsHTML){nObj.html(node[nameKey])}else{nObj.text(node[nameKey])}if(tools.apply(setting.view.showTitle,[setting.treeId,node],setting.view.showTitle)&&node[titleKey]){var aObj=$("#"+node.tId+consts.id.A);aObj.attr("title",node[titleKey])}},setNodeTarget:function(node){var aObj=$("#"+node.tId+consts.id.A);aObj.attr("target",view.makeNodeTarget(node))},setNodeUrl:function(setting,node){var aObj=$("#"+node.tId+consts.id.A),url=view.makeNodeUrl(setting,node);if(url==null||url.length==0){aObj.removeAttr("href")}else{aObj.attr("href",url)}},switchNode:function(setting,node){if(node.open||!tools.canAsync(setting,node)){view.expandCollapseNode(setting,node,!node.open)}else{if(setting.async.enable){if(!view.asyncNode(setting,node)){view.expandCollapseNode(setting,node,!node.open);return }}else{if(node){view.expandCollapseNode(setting,node,!node.open)}}}}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(treeId){var o=data.getZTreeTools(treeId);return o?o:null},init:function(obj,zSetting,zNodes){var setting=tools.clone(_setting);$.extend(true,setting,zSetting);setting.treeId=obj.attr("id");setting.treeObj=obj;setting.treeObj.empty();settings[setting.treeId]=setting;data.initRoot(setting);var root=data.getRoot(setting),childKey=setting.data.key.children;zNodes=zNodes?tools.clone(tools.isArray(zNodes)?zNodes:[zNodes]):[];if(setting.data.simpleData.enable){root[childKey]=data.transformTozTreeFormat(setting,zNodes)}else{root[childKey]=zNodes}data.initCache(setting);event.bindTree(setting);event.bindEvent(setting);var zTreeTools={setting:setting,addNodes:function(parentNode,newNodes,isSilent){if(!newNodes){return null}if(!parentNode){parentNode=null}if(parentNode&&!parentNode.isParent&&setting.data.keep.leaf){return null}var xNewNodes=tools.clone(tools.isArray(newNodes)?newNodes:[newNodes]);function addCallback(){view.addNodes(setting,parentNode,xNewNodes,(isSilent==true))}if(tools.canAsync(setting,parentNode)){view.asyncNode(setting,parentNode,isSilent,addCallback)}else{addCallback()}return xNewNodes},cancelSelectedNode:function(node){view.cancelPreSelectedNode(this.setting,node)},expandAll:function(expandFlag){expandFlag=!!expandFlag;view.expandCollapseSonNode(this.setting,null,expandFlag,true);return expandFlag},expandNode:function(node,expandFlag,sonSign,focus,callbackFlag){if(!node||!node.isParent){return null}if(expandFlag!==true&&expandFlag!==false){expandFlag=!node.open}callbackFlag=!!callbackFlag;if(callbackFlag&&expandFlag&&(tools.apply(setting.callback.beforeExpand,[setting.treeId,node],true)==false)){return null}else{if(callbackFlag&&!expandFlag&&(tools.apply(setting.callback.beforeCollapse,[setting.treeId,node],true)==false)){return null}}if(expandFlag&&node.parentTId){view.expandCollapseParentNode(this.setting,node.getParentNode(),expandFlag,false)}if(expandFlag===node.open&&!sonSign){return null}data.getRoot(setting).expandTriggerFlag=callbackFlag;if(sonSign){view.expandCollapseSonNode(this.setting,node,expandFlag,true,function(){if(focus!==false){$("#"+node.tId).focus().blur()}})}else{node.open=!expandFlag;view.switchNode(this.setting,node);if(focus!==false){$("#"+node.tId).focus().blur()}}return expandFlag},getNodes:function(){return data.getNodes(this.setting)},getNodeByParam:function(key,value,parentNode){if(!key){return null}return data.getNodeByParam(this.setting,parentNode?parentNode[this.setting.data.key.children]:data.getNodes(this.setting),key,value)},getNodeByTId:function(tId){return data.getNodeCache(this.setting,tId)},getNodesByParam:function(key,value,parentNode){if(!key){return null}return data.getNodesByParam(this.setting,parentNode?parentNode[this.setting.data.key.children]:data.getNodes(this.setting),key,value)},getNodesByParamFuzzy:function(key,value,parentNode){if(!key){return null}return data.getNodesByParamFuzzy(this.setting,parentNode?parentNode[this.setting.data.key.children]:data.getNodes(this.setting),key,value)},getNodesByFilter:function(filter,isSingle,parentNode){isSingle=!!isSingle;if(!filter||(typeof filter!="function")){return(isSingle?null:[])}return data.getNodesByFilter(this.setting,parentNode?parentNode[this.setting.data.key.children]:data.getNodes(this.setting),filter,isSingle)},getNodeIndex:function(node){if(!node){return null}var childKey=setting.data.key.children,parentNode=(node.parentTId)?node.getParentNode():data.getRoot(this.setting);for(var i=0,l=parentNode[childKey].length;i<l;i++){if(parentNode[childKey][i]==node){return i}}return -1},getSelectedNodes:function(){var r=[],list=data.getRoot(this.setting).curSelectedList;for(var i=0,l=list.length;i<l;i++){r.push(list[i])}return r},isSelectedNode:function(node){return data.isSelectedNode(this.setting,node)},reAsyncChildNodes:function(parentNode,reloadType,isSilent){if(!this.setting.async.enable){return }var isRoot=!parentNode;if(isRoot){parentNode=data.getRoot(this.setting)}if(reloadType=="refresh"){parentNode[this.setting.data.key.children]=[];if(isRoot){this.setting.treeObj.empty()}else{var ulObj=$("#"+parentNode.tId+consts.id.UL);ulObj.empty()}}view.asyncNode(this.setting,isRoot?null:parentNode,!!isSilent)},refresh:function(){this.setting.treeObj.empty();var root=data.getRoot(this.setting),nodes=root[this.setting.data.key.children];data.initRoot(this.setting);root[this.setting.data.key.children]=nodes;data.initCache(this.setting);view.createNodes(this.setting,0,root[this.setting.data.key.children])},removeChildNodes:function(node){if(!node){return null}var childKey=setting.data.key.children,nodes=node[childKey];view.removeChildNodes(setting,node);return nodes?nodes:null},removeNode:function(node,callbackFlag){if(!node){return }callbackFlag=!!callbackFlag;if(callbackFlag&&tools.apply(setting.callback.beforeRemove,[setting.treeId,node],true)==false){return }view.removeNode(setting,node);if(callbackFlag){this.setting.treeObj.trigger(consts.event.REMOVE,[setting.treeId,node])}},selectNode:function(node,addFlag){if(!node){return }if(tools.uCanDo(this.setting)){addFlag=setting.view.selectedMulti&&addFlag;if(node.parentTId){view.expandCollapseParentNode(this.setting,node.getParentNode(),true,false,function(){$("#"+node.tId).focus().blur()})}else{$("#"+node.tId).focus().blur()}view.selectNode(this.setting,node,addFlag)}},transformTozTreeNodes:function(simpleNodes){return data.transformTozTreeFormat(this.setting,simpleNodes)},transformToArray:function(nodes){return data.transformToArrayFormat(this.setting,nodes)},updateNode:function(node,checkTypeFlag){if(!node){return }var nObj=$("#"+node.tId);if(nObj.get(0)&&tools.uCanDo(this.setting)){view.setNodeName(this.setting,node);view.setNodeTarget(node);view.setNodeUrl(this.setting,node);view.setNodeLineIcos(this.setting,node);view.setNodeFontCss(this.setting,node)}}};root.treeTools=zTreeTools;data.setZTreeTools(setting,zTreeTools);if(root[childKey]&&root[childKey].length>0){view.createNodes(setting,0,root[childKey])}else{if(setting.async.enable&&setting.async.url&&setting.async.url!==""){view.asyncNode(setting)}}return zTreeTools}};var zt=$.fn.zTree,consts=zt.consts})(jQuery);(function(F){var X={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},L={check:{enable:false,autoCheckTrigger:false,chkStyle:X.checkbox.STYLE,nocheckInherit:false,radioType:X.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},U=function(Y){var Z=W.getRoot(Y);Z.radioCheckedList=[]},D=function(Y){},M=function(Y){var Z=Y.treeObj,a=P.event;Z.unbind(a.CHECK);Z.bind(a.CHECK,function(c,d,b){S.apply(Y.callback.onCheck,[c,d,b])})},N=function(f){var g=f.target,i=W.getSetting(f.data.treeId),c="",Z=null,a="",d="",Y=null,b=null;if(S.eqs(f.type,"mouseover")){if(i.check.enable&&S.eqs(g.tagName,"span")&&g.getAttribute("treeNode"+P.id.CHECK)!==null){c=g.parentNode.id;a="mouseoverCheck"}}else{if(S.eqs(f.type,"mouseout")){if(i.check.enable&&S.eqs(g.tagName,"span")&&g.getAttribute("treeNode"+P.id.CHECK)!==null){c=g.parentNode.id;a="mouseoutCheck"}}else{if(S.eqs(f.type,"click")){if(i.check.enable&&S.eqs(g.tagName,"span")&&g.getAttribute("treeNode"+P.id.CHECK)!==null){c=g.parentNode.id;a="checkNode"}}}}if(c.length>0){Z=W.getNodeCache(i,c);switch(a){case"checkNode":Y=K.onCheckNode;break;case"mouseoverCheck":Y=K.onMouseoverCheck;break;case"mouseoutCheck":Y=K.onMouseoutCheck;break}}var h={stop:false,node:Z,nodeEventType:a,nodeEventCallback:Y,treeEventType:d,treeEventCallback:b};return h},T=function(b,f,e,Y,d,a,c){if(!e){return }var Z=b.data.key.checked;if(typeof e[Z]=="string"){e[Z]=S.eqs(e[Z],"true")}e[Z]=!!e[Z];e.checkedOld=e[Z];e.nocheck=!!e.nocheck||(b.check.nocheckInherit&&Y&&!!Y.nocheck);e.chkDisabled=!!e.chkDisabled||(Y&&!!Y.chkDisabled);if(typeof e.halfCheck=="string"){e.halfCheck=S.eqs(e.halfCheck,"true")}e.halfCheck=!!e.halfCheck;e.check_Child_State=-1;e.check_Focus=false;e.getCheckStatus=function(){return W.getCheckStatus(b,e)};if(a){W.makeChkFlag(b,Y)}},A=function(a,c,Z){var Y=a.data.key.checked;if(a.check.enable){W.makeChkFlag(a,c);if(a.check.chkStyle==P.radio.STYLE&&a.check.radioType==P.radio.TYPE_ALL&&c[Y]){var b=W.getRoot(a);b.radioCheckedList.push(c)}Z.push("<span ID='",c.tId,P.id.CHECK,"' class='",I.makeChkClass(a,c),"' treeNode",P.id.CHECK,(c.nocheck===true?" style='display:none;'":""),"></span>")}},J=function(a,Z){Z.checkNode=function(f,e,g,d){var b=this.setting.data.key.checked;if(f.chkDisabled===true){return }if(e!==true&&e!==false){e=!f[b]}d=!!d;if(f[b]===e&&!g){return }else{if(d&&S.apply(this.setting.callback.beforeCheck,[this.setting.treeId,f],true)==false){return }}if(S.uCanDo(this.setting)&&this.setting.check.enable&&f.nocheck!==true){f[b]=e;var c=F("#"+f.tId+P.id.CHECK);if(g||this.setting.check.chkStyle===P.radio.STYLE){I.checkNodeRelation(this.setting,f)}I.setChkClass(this.setting,c,f);I.repairParentChkClassWithSelf(this.setting,f);if(d){a.treeObj.trigger(P.event.CHECK,[a.treeId,f])}}};Z.checkAllNodes=function(b){I.repairAllChk(this.setting,!!b)};Z.getCheckedNodes=function(c){var b=this.setting.data.key.children;c=(c!==false);return W.getTreeCheckedNodes(this.setting,W.getRoot(a)[b],c)};Z.getChangeCheckedNodes=function(){var b=this.setting.data.key.children;return W.getTreeChangeCheckedNodes(this.setting,W.getRoot(a)[b])};Z.setChkDisabled=function(c,b){b=!!b;I.repairSonChkDisabled(this.setting,c,b);if(!b){I.repairParentChkDisabled(this.setting,c,b)}};var Y=Z.updateNode;Z.updateNode=function(d,e){if(Y){Y.apply(Z,arguments)}if(!d||!this.setting.check.enable){return }var b=F("#"+d.tId);if(b.get(0)&&S.uCanDo(this.setting)){var c=F("#"+d.tId+P.id.CHECK);if(e==true||this.setting.check.chkStyle===P.radio.STYLE){I.checkNodeRelation(this.setting,d)}I.setChkClass(this.setting,c,d);I.repairParentChkClassWithSelf(this.setting,d)}}},O={getRadioCheckedList:function(b){var a=W.getRoot(b).radioCheckedList;for(var Z=0,Y=a.length;Z<Y;Z++){if(!W.getNodeCache(b,a[Z].tId)){a.splice(Z,1);Z--;Y--}}return a},getCheckStatus:function(Z,b){if(!Z.check.enable||b.nocheck){return null}var Y=Z.data.key.checked,a={checked:b[Y],half:b.halfCheck?b.halfCheck:(Z.check.chkStyle==P.radio.STYLE?(b.check_Child_State===2):(b[Y]?(b.check_Child_State>-1&&b.check_Child_State<2):(b.check_Child_State>0)))};return a},getTreeCheckedNodes:function(d,a,f,c){if(!a){return[]}var e=d.data.key.children,Z=d.data.key.checked;c=!c?[]:c;for(var b=0,Y=a.length;b<Y;b++){if(a[b].nocheck!==true&&a[b][Z]==f){c.push(a[b])}W.getTreeCheckedNodes(d,a[b][e],f,c)}return c},getTreeChangeCheckedNodes:function(d,a,c){if(!a){return[]}var e=d.data.key.children,Z=d.data.key.checked;c=!c?[]:c;for(var b=0,Y=a.length;b<Y;b++){if(a[b].nocheck!==true&&a[b][Z]!=a[b].checkedOld){c.push(a[b])}W.getTreeChangeCheckedNodes(d,a[b][e],c)}return c},makeChkFlag:function(h,b){if(!b){return }var a=h.data.key.children,Y=h.data.key.checked,d=-1;if(b[a]){var Z=false;for(var f=0,c=b[a].length;f<c;f++){var g=b[a][f];var e=-1;if(h.check.chkStyle==P.radio.STYLE){if(g.nocheck===true){e=g.check_Child_State}else{if(g.halfCheck===true){e=2}else{if(g.nocheck!==true&&g[Y]){e=2}else{e=g.check_Child_State>0?2:0}}}if(e==2){d=2;break}else{if(e==0){d=0}}}else{if(h.check.chkStyle==P.checkbox.STYLE){if(g.nocheck===true){e=g.check_Child_State}else{if(g.halfCheck===true){e=1}else{if(g.nocheck!==true&&g[Y]){e=(g.check_Child_State===-1||g.check_Child_State===2)?2:1}else{e=(g.check_Child_State>0)?1:0}}}if(e===1){d=1;break}else{if(e===2&&Z&&e!==d){d=1;break}else{if(d===2&&e>-1&&e<2){d=1;break}else{if(e>-1){d=e}}}}if(!Z){Z=(g.nocheck!==true)}}}}}b.check_Child_State=d}},G={},K={onCheckNode:function(c,b){if(b.chkDisabled===true){return false}var a=W.getSetting(c.data.treeId),Y=a.data.key.checked;if(S.apply(a.callback.beforeCheck,[a.treeId,b],true)==false){return true}b[Y]=!b[Y];I.checkNodeRelation(a,b);var Z=F("#"+b.tId+P.id.CHECK);I.setChkClass(a,Z,b);I.repairParentChkClassWithSelf(a,b);a.treeObj.trigger(P.event.CHECK,[a.treeId,b]);return true},onMouseoverCheck:function(b,a){if(a.chkDisabled===true){return false}var Z=W.getSetting(b.data.treeId),Y=F("#"+a.tId+P.id.CHECK);a.check_Focus=true;I.setChkClass(Z,Y,a);return true},onMouseoutCheck:function(b,a){if(a.chkDisabled===true){return false}var Z=W.getSetting(b.data.treeId),Y=F("#"+a.tId+P.id.CHECK);a.check_Focus=false;I.setChkClass(Z,Y,a);return true}},H={},E={checkNodeRelation:function(h,b){var f,d,c,a=h.data.key.children,Z=h.data.key.checked,Y=P.radio;if(h.check.chkStyle==Y.STYLE){var g=W.getRadioCheckedList(h);if(b[Z]){if(h.check.radioType==Y.TYPE_ALL){for(d=g.length-1;d>=0;d--){f=g[d];f[Z]=false;g.splice(d,1);I.setChkClass(h,F("#"+f.tId+P.id.CHECK),f);if(f.parentTId!=b.parentTId){I.repairParentChkClassWithSelf(h,f)}}g.push(b)}else{var e=(b.parentTId)?b.getParentNode():W.getRoot(h);for(d=0,c=e[a].length;d<c;d++){f=e[a][d];if(f[Z]&&f!=b){f[Z]=false;I.setChkClass(h,F("#"+f.tId+P.id.CHECK),f)}}}}else{if(h.check.radioType==Y.TYPE_ALL){for(d=0,c=g.length;d<c;d++){if(b==g[d]){g.splice(d,1);break}}}}}else{if(b[Z]&&(!b[a]||b[a].length==0||h.check.chkboxType.Y.indexOf("s")>-1)){I.setSonNodeCheckBox(h,b,true)}if(!b[Z]&&(!b[a]||b[a].length==0||h.check.chkboxType.N.indexOf("s")>-1)){I.setSonNodeCheckBox(h,b,false)}if(b[Z]&&h.check.chkboxType.Y.indexOf("p")>-1){I.setParentNodeCheckBox(h,b,true)}if(!b[Z]&&h.check.chkboxType.N.indexOf("p")>-1){I.setParentNodeCheckBox(h,b,false)}}},makeChkClass:function(Z,d){var Y=Z.data.key.checked,f=P.checkbox,b=P.radio,e="";if(d.chkDisabled===true){e=f.DISABLED}else{if(d.halfCheck){e=f.PART}else{if(Z.check.chkStyle==b.STYLE){e=(d.check_Child_State<1)?f.FULL:f.PART}else{e=d[Y]?((d.check_Child_State===2||d.check_Child_State===-1)?f.FULL:f.PART):((d.check_Child_State<1)?f.FULL:f.PART)}}}var a=Z.check.chkStyle+"_"+(d[Y]?f.TRUE:f.FALSE)+"_"+e;a=(d.check_Focus&&d.chkDisabled!==true)?a+"_"+f.FOCUS:a;return"button "+f.DEFAULT+" "+a},repairAllChk:function(c,f){if(c.check.enable&&c.check.chkStyle===P.checkbox.STYLE){var a=c.data.key.checked,e=c.data.key.children,Z=W.getRoot(c);for(var b=0,Y=Z[e].length;b<Y;b++){var d=Z[e][b];if(d.nocheck!==true){d[a]=f}I.setSonNodeCheckBox(c,d,f)}}},repairChkClass:function(Z,a){if(!a){return }W.makeChkFlag(Z,a);var Y=F("#"+a.tId+P.id.CHECK);I.setChkClass(Z,Y,a)},repairParentChkClass:function(Z,a){if(!a||!a.parentTId){return }var Y=a.getParentNode();I.repairChkClass(Z,Y);I.repairParentChkClass(Z,Y)},repairParentChkClassWithSelf:function(Y,a){if(!a){return }var Z=Y.data.key.children;if(a[Z]&&a[Z].length>0){I.repairParentChkClass(Y,a[Z][0])}else{I.repairParentChkClass(Y,a)}},repairSonChkDisabled:function(c,e,b){if(!e){return }var d=c.data.key.children;if(e.chkDisabled!=b){e.chkDisabled=b;if(e.nocheck!==true){I.repairChkClass(c,e)}}if(e[d]){for(var a=0,Z=e[d].length;a<Z;a++){var Y=e[d][a];I.repairSonChkDisabled(c,Y,b)}}},repairParentChkDisabled:function(Z,a,Y){if(!a){return }if(a.chkDisabled!=Y){a.chkDisabled=Y;if(a.nocheck!==true){I.repairChkClass(Z,a)}}I.repairParentChkDisabled(Z,a.getParentNode(),Y)},setChkClass:function(Y,a,Z){if(!a){return }if(Z.nocheck===true){a.hide()}else{a.show()}a.removeClass();a.addClass(I.makeChkClass(Y,Z))},setParentNodeCheckBox:function(j,b,h,e){var a=j.data.key.children,Y=j.data.key.checked,f=F("#"+b.tId+P.id.CHECK);if(!e){e=b}W.makeChkFlag(j,b);if(b.nocheck!==true&&b.chkDisabled!==true){b[Y]=h;I.setChkClass(j,f,b);if(j.check.autoCheckTrigger&&b!=e&&b.nocheck!==true){j.treeObj.trigger(P.event.CHECK,[j.treeId,b])}}if(b.parentTId){var g=true;if(!h){var Z=b.getParentNode()[a];for(var d=0,c=Z.length;d<c;d++){if((Z[d].nocheck!==true&&Z[d][Y])||(Z[d].nocheck===true&&Z[d].check_Child_State>0)){g=false;break}}}if(g){I.setParentNodeCheckBox(j,b.getParentNode(),h,e)}}},setSonNodeCheckBox:function(j,b,h,e){if(!b){return }var a=j.data.key.children,Y=j.data.key.checked,f=F("#"+b.tId+P.id.CHECK);if(!e){e=b}var Z=false;if(b[a]){for(var d=0,c=b[a].length;d<c&&b.chkDisabled!==true;d++){var g=b[a][d];I.setSonNodeCheckBox(j,g,h,e);if(g.chkDisabled===true){Z=true}}}if(b!=W.getRoot(j)&&b.chkDisabled!==true){if(Z&&b.nocheck!==true){W.makeChkFlag(j,b)}if(b.nocheck!==true){b[Y]=h;if(!Z){b.check_Child_State=(b[a]&&b[a].length>0)?(h?2:0):-1}}else{b.check_Child_State=-1}I.setChkClass(j,f,b);if(j.check.autoCheckTrigger&&b!=e&&b.nocheck!==true){j.treeObj.trigger(P.event.CHECK,[j.treeId,b])}}}},R={tools:H,view:E,event:G,data:O};F.extend(true,F.fn.zTree.consts,X);F.extend(true,F.fn.zTree._z,R);var C=F.fn.zTree,S=C._z.tools,P=C.consts,I=C._z.view,W=C._z.data,Q=C._z.event;W.exSetting(L);W.addInitBind(M);W.addInitCache(D);W.addInitNode(T);W.addInitProxy(N);W.addInitRoot(U);W.addBeforeA(A);W.addZTreeTools(J);var V=I.createNodes;I.createNodes=function(a,b,Z,Y){if(V){V.apply(I,arguments)}if(!Z){return }I.repairParentChkClassWithSelf(a,Y)};var B=I.removeNode;I.removeNode=function(Z,a){var Y=a.getParentNode();if(B){B.apply(I,arguments)}if(!a||!Y){return }I.repairChkClass(Z,Y);I.repairParentChkClass(Z,Y)}})(jQuery);(function(F){var Z={event:{DRAG:"ztree_drag",DROP:"ztree_drop",REMOVE:"ztree_remove",RENAME:"ztree_rename"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},L={edit:{enable:false,editNameSelectAll:false,showRemoveBtn:true,showRenameBtn:true,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:false,isCopy:true,isMove:true,prev:true,next:true,inner:true,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDrop:null,onRename:null}},V=function(a){var b=X.getRoot(a);b.curEditNode=null;b.curEditInput=null;b.curHoverNode=null;b.dragFlag=0;b.dragNodeShowBefore=[];b.dragMaskList=new Array();b.showHoverDom=true},C=function(a){},M=function(a){var b=a.treeObj;var d=P.event;b.unbind(d.RENAME);b.bind(d.RENAME,function(c,f,e){T.apply(a.callback.onRename,[c,f,e])});b.unbind(d.REMOVE);b.bind(d.REMOVE,function(c,f,e){T.apply(a.callback.onRemove,[c,f,e])});b.unbind(d.DRAG);b.bind(d.DRAG,function(e,c,g,f){T.apply(a.callback.onDrag,[c,g,f])});b.unbind(d.DROP);b.bind(d.DROP,function(g,f,i,h,j,e,c){T.apply(a.callback.onDrop,[f,i,h,j,e,c])})},N=function(i){var j=i.target,m=X.getSetting(i.data.treeId),k=i.relatedTarget,g="",b=null,c="",h="",a=null,f=null,d=null;if(T.eqs(i.type,"mouseover")){d=T.getMDom(m,j,[{tagName:"a",attrName:"treeNode"+P.id.A}]);if(d){g=d.parentNode.id;c="hoverOverNode"}}else{if(T.eqs(i.type,"mouseout")){d=T.getMDom(m,k,[{tagName:"a",attrName:"treeNode"+P.id.A}]);if(!d){g="remove";c="hoverOutNode"}}else{if(T.eqs(i.type,"mousedown")){d=T.getMDom(m,j,[{tagName:"a",attrName:"treeNode"+P.id.A}]);if(d){g=d.parentNode.id;c="mousedownNode"}}}}if(g.length>0){b=X.getNodeCache(m,g);switch(c){case"mousedownNode":a=K.onMousedownNode;break;case"hoverOverNode":a=K.onHoverOverNode;break;case"hoverOutNode":a=K.onHoverOutNode;break}}var l={stop:false,node:b,nodeEventType:c,nodeEventCallback:a,treeEventType:h,treeEventCallback:f};return l},U=function(c,g,f,a,e,b,d){if(!f){return }f.isHover=false;f.editNameFlag=false},J=function(b,a){a.cancelEditName=function(d){var c=X.getRoot(b),e=b.data.key.name,f=c.curEditNode;if(!c.curEditNode){return }I.cancelCurEditNode(b,d?d:f[e])};a.copyNode=function(g,f,e,h){if(!f){return null}if(g&&!g.isParent&&b.data.keep.leaf&&e===P.move.TYPE_INNER){return null}var c=T.clone(f);if(!g){g=null;e=P.move.TYPE_INNER}if(e==P.move.TYPE_INNER){function d(){I.addNodes(b,g,[c],h)}if(T.canAsync(b,g)){I.asyncNode(b,g,h,d)}else{d()}}else{I.addNodes(b,g.parentNode,[c],h);I.moveNode(b,g,c,e,false,h)}return c};a.editName=function(c){if(!c||!c.tId||c!==X.getNodeCache(b,c.tId)){return }if(c.parentTId){I.expandCollapseParentNode(b,c.getParentNode(),true)}I.editNode(b,c)};a.moveNode=function(e,d,c,g){if(!d){return d}if(e&&!e.isParent&&b.data.keep.leaf&&c===P.move.TYPE_INNER){return null}else{if(e&&((d.parentTId==e.tId&&c==P.move.TYPE_INNER)||F("#"+d.tId).find("#"+e.tId).length>0)){return null}else{if(!e){e=null}}}function f(){I.moveNode(b,e,d,c,false,g)}if(T.canAsync(b,e)){I.asyncNode(b,e,g,f)}else{f()}return d};a.setEditable=function(c){b.edit.enable=c;return this.refresh()}},O={setSonNodeLevel:function(d,a,f){if(!f){return }var e=d.data.key.children;f.level=(a)?a.level+1:0;if(!f[e]){return }for(var c=0,b=f[e].length;c<b;c++){if(f[e][c]){X.setSonNodeLevel(d,f,f[e][c])}}}},G={},K={onHoverOverNode:function(d,c){var b=X.getSetting(d.data.treeId),a=X.getRoot(b);if(a.curHoverNode!=c){K.onHoverOutNode(d)}a.curHoverNode=c;I.addHoverDom(b,c)},onHoverOutNode:function(d,c){var b=X.getSetting(d.data.treeId),a=X.getRoot(b);if(a.curHoverNode&&!X.isSelectedNode(b,a.curHoverNode)){I.removeTreeDom(b,a.curHoverNode);a.curHoverNode=null}},onMousedownNode:function(o,g){var w,t,n=X.getSetting(o.data.treeId),s=X.getRoot(n);if(o.button==2||!n.edit.enable||(!n.edit.drag.isCopy&&!n.edit.drag.isMove)){return true}var z=o.target,f=X.getRoot(n).curSelectedList,p=[];if(!X.isSelectedNode(n,g)){p=[g]}else{for(w=0,t=f.length;w<t;w++){if(f[w].editNameFlag&&T.eqs(z.tagName,"input")&&z.getAttribute("treeNode"+P.id.INPUT)!==null){return true}p.push(f[w]);if(p[0].parentTId!==f[w].parentTId){p=[g];break}}}I.editNodeBlur=true;I.cancelCurEditNode(n,null,true);var AC=F(document),v,h,x,y=false,AA=n,a,e,q=null,d=null,m=null,b=P.move.TYPE_INNER,u=o.clientX,r=o.clientY,j=(new Date()).getTime();if(T.uCanDo(n)){AC.bind("mousemove",k)}function k(A0){if(s.dragFlag==0&&Math.abs(u-A0.clientX)<n.edit.drag.minMoveSize&&Math.abs(r-A0.clientY)<n.edit.drag.minMoveSize){return true}var Av,Ar,AT,Am,Ae,Al=n.data.key.children;T.noSel(n);F("body").css("cursor","pointer");if(s.dragFlag==0){if(T.apply(n.callback.beforeDrag,[n.treeId,p],true)==false){AB(A0);return true}for(Av=0,Ar=p.length;Av<Ar;Av++){if(Av==0){s.dragNodeShowBefore=[]}AT=p[Av];if(AT.isParent&&AT.open){I.expandCollapseNode(n,AT,!AT.open);s.dragNodeShowBefore[AT.tId]=true}else{s.dragNodeShowBefore[AT.tId]=false}}s.dragFlag=1;s.showHoverDom=false;T.showIfameMask(n,true);var AE=true,AH=-1;if(p.length>1){var AR=p[0].parentTId?p[0].getParentNode()[Al]:X.getNodes(n);Ae=[];for(Av=0,Ar=AR.length;Av<Ar;Av++){if(s.dragNodeShowBefore[AR[Av].tId]!==undefined){if(AE&&AH>-1&&(AH+1)!==Av){AE=false}Ae.push(AR[Av]);AH=Av}if(p.length===Ae.length){p=Ae;break}}}if(AE){a=p[0].getPreNode();e=p[p.length-1].getNextNode()}v=F("<ul class='zTreeDragUL'></ul>");for(Av=0,Ar=p.length;Av<Ar;Av++){AT=p[Av];AT.editNameFlag=false;I.selectNode(n,AT,Av>0);I.removeTreeDom(n,AT);Am=F("<li id='"+AT.tId+"_tmp'></li>");Am.append(F("#"+AT.tId+P.id.A).clone());Am.css("padding","0");Am.children("#"+AT.tId+P.id.A).removeClass(P.node.CURSELECTED);v.append(Am);if(Av==n.edit.drag.maxShowNodeNum-1){Am=F("<li id='"+AT.tId+"_moretmp'><a>  ...  </a></li>");v.append(Am);break}}v.attr("id",p[0].tId+P.id.UL+"_tmp");v.addClass(n.treeObj.attr("class"));v.appendTo("body");h=F("<span class='tmpzTreeMove_arrow'></span>");h.attr("id","zTreeMove_arrow_tmp");h.appendTo("body");n.treeObj.trigger(P.event.DRAG,[A0,n.treeId,p])}if(s.dragFlag==1){if(x&&h.attr("id")==A0.target.id&&m&&(A0.clientX+AC.scrollLeft()+2)>(F("#"+m+P.id.A,x).offset().left)){var Az=F("#"+m+P.id.A,x);A0.target=(Az.length>0)?Az.get(0):A0.target}else{if(x){x.removeClass(P.node.TMPTARGET_TREE);if(m){F("#"+m+P.id.A,x).removeClass(P.node.TMPTARGET_NODE+"_"+P.move.TYPE_PREV).removeClass(P.node.TMPTARGET_NODE+"_"+Z.move.TYPE_NEXT).removeClass(P.node.TMPTARGET_NODE+"_"+Z.move.TYPE_INNER)}}}x=null;m=null;y=false;AA=n;var Aw=X.getSettings();for(var An in Aw){if(Aw[An].treeId&&Aw[An].edit.enable&&Aw[An].treeId!=n.treeId&&(A0.target.id==Aw[An].treeId||F(A0.target).parents("#"+Aw[An].treeId).length>0)){y=true;AA=Aw[An]}}var AQ=AC.scrollTop(),Ay=AC.scrollLeft(),AF=AA.treeObj.offset(),AY=AA.treeObj.get(0).scrollHeight,Ao=AA.treeObj.get(0).scrollWidth,Ax=(A0.clientY+AQ-AF.top),Ak=(AA.treeObj.height()+AF.top-A0.clientY-AQ),Af=(A0.clientX+Ay-AF.left),AP=(AA.treeObj.width()+AF.left-A0.clientX-Ay),AS=(Ax<n.edit.drag.borderMax&&Ax>n.edit.drag.borderMin),A1=(Ak<n.edit.drag.borderMax&&Ak>n.edit.drag.borderMin),Ai=(Af<n.edit.drag.borderMax&&Af>n.edit.drag.borderMin),AN=(AP<n.edit.drag.borderMax&&AP>n.edit.drag.borderMin),AG=Ax>n.edit.drag.borderMin&&Ak>n.edit.drag.borderMin&&Af>n.edit.drag.borderMin&&AP>n.edit.drag.borderMin,Ac=(AS&&AA.treeObj.scrollTop()<=0),Ab=(A1&&(AA.treeObj.scrollTop()+AA.treeObj.height()+10)>=AY),AJ=(Ai&&AA.treeObj.scrollLeft()<=0),AW=(AN&&(AA.treeObj.scrollLeft()+AA.treeObj.width()+10)>=Ao);if(A0.target.id&&AA.treeObj.find("#"+A0.target.id).length>0){var AO=A0.target;while(AO&&AO.tagName&&!T.eqs(AO.tagName,"li")&&AO.id!=AA.treeId){AO=AO.parentNode}var AV=true;for(Av=0,Ar=p.length;Av<Ar;Av++){AT=p[Av];if(AO.id===AT.tId){AV=false;break}else{if(F("#"+AT.tId).find("#"+AO.id).length>0){AV=false;break}}}if(AV){if(A0.target.id&&(A0.target.id==(AO.id+P.id.A)||F(A0.target).parents("#"+AO.id+P.id.A).length>0)){x=F(AO);m=AO.id}}}AT=p[0];if(AG&&(A0.target.id==AA.treeId||F(A0.target).parents("#"+AA.treeId).length>0)){if(!x&&(A0.target.id==AA.treeId||Ac||Ab||AJ||AW)&&(y||(!y&&AT.parentTId))){x=AA.treeObj}if(AS){AA.treeObj.scrollTop(AA.treeObj.scrollTop()-10)}else{if(A1){AA.treeObj.scrollTop(AA.treeObj.scrollTop()+10)}}if(Ai){AA.treeObj.scrollLeft(AA.treeObj.scrollLeft()-10)}else{if(AN){AA.treeObj.scrollLeft(AA.treeObj.scrollLeft()+10)}}if(x&&x!=AA.treeObj&&x.offset().left<AA.treeObj.offset().left){AA.treeObj.scrollLeft(AA.treeObj.scrollLeft()+x.offset().left-AA.treeObj.offset().left)}}v.css({top:(A0.clientY+AQ+3)+"px",left:(A0.clientX+Ay+3)+"px"});var Aa=0;var AZ=0;if(x&&x.attr("id")!=AA.treeId){var Aj=m==null?null:X.getNodeCache(AA,m),Ad=(A0.ctrlKey&&n.edit.drag.isMove&&n.edit.drag.isCopy)||(!n.edit.drag.isMove&&n.edit.drag.isCopy),AL=!!(a&&m===a.tId),Ah=!!(e&&m===e.tId),At=(AT.parentTId&&AT.parentTId==m),Ag=(Ad||!Ah)&&T.apply(AA.edit.drag.prev,[AA.treeId,p,Aj],!!AA.edit.drag.prev),AK=(Ad||!AL)&&T.apply(AA.edit.drag.next,[AA.treeId,p,Aj],!!AA.edit.drag.next),AD=(Ad||!At)&&!(AA.data.keep.leaf&&!Aj.isParent)&&T.apply(AA.edit.drag.inner,[AA.treeId,p,Aj],!!AA.edit.drag.inner);if(!Ag&&!AK&&!AD){x=null;m="";b=P.move.TYPE_INNER;h.css({display:"none"});if(window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer);window.zTreeMoveTargetNodeTId=null}}else{var AX=F("#"+m+P.id.A,x),Aq=Aj.isLastNode?null:F("#"+Aj.getNextNode().tId+P.id.A,x.next()),As=AX.offset().top,Au=AX.offset().left,Ap=Ag?(AD?0.25:(AK?0.5:1)):-1,AM=AK?(AD?0.75:(Ag?0.5:0)):-1,AI=(A0.clientY+AQ-As)/AX.height();if((Ap==1||AI<=Ap&&AI>=-0.2)&&Ag){Aa=1-h.width();AZ=As-h.height()/2;b=P.move.TYPE_PREV}else{if((AM==0||AI>=AM&&AI<=1.2)&&AK){Aa=1-h.width();AZ=(Aq==null||(Aj.isParent&&Aj.open))?(As+AX.height()-h.height()/2):(Aq.offset().top-h.height()/2);b=P.move.TYPE_NEXT}else{Aa=5-h.width();AZ=As;b=P.move.TYPE_INNER}}h.css({display:"block",top:AZ+"px",left:(Au+Aa)+"px"});AX.addClass(P.node.TMPTARGET_NODE+"_"+b);if(q!=m||d!=b){j=(new Date()).getTime()}if(Aj&&Aj.isParent&&b==P.move.TYPE_INNER){var AU=true;if(window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==Aj.tId){clearTimeout(window.zTreeMoveTimer);window.zTreeMoveTargetNodeTId=null}else{if(window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===Aj.tId){AU=false}}if(AU){window.zTreeMoveTimer=setTimeout(function(){if(b!=P.move.TYPE_INNER){return }if(Aj&&Aj.isParent&&!Aj.open&&(new Date()).getTime()-j>AA.edit.drag.autoOpenTime&&T.apply(AA.callback.beforeDragOpen,[AA.treeId,Aj],true)){I.switchNode(AA,Aj);if(AA.edit.drag.autoExpandTrigger){AA.treeObj.trigger(P.event.EXPAND,[AA.treeId,Aj])}}},AA.edit.drag.autoOpenTime+50);window.zTreeMoveTargetNodeTId=Aj.tId}}}}else{b=P.move.TYPE_INNER;if(x&&T.apply(AA.edit.drag.inner,[AA.treeId,p,null],!!AA.edit.drag.inner)){x.addClass(P.node.TMPTARGET_TREE)}else{x=null}h.css({display:"none"});if(window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer);window.zTreeMoveTargetNodeTId=null}}q=m;d=b}return false}AC.bind("mouseup",AB);function AB(AK){if(window.zTreeMoveTimer){clearTimeout(window.zTreeMoveTimer);window.zTreeMoveTargetNodeTId=null}q=null;d=null;AC.unbind("mousemove",k);AC.unbind("mouseup",AB);AC.unbind("selectstart",c);F("body").css("cursor","auto");if(x){x.removeClass(P.node.TMPTARGET_TREE);if(m){F("#"+m+P.id.A,x).removeClass(P.node.TMPTARGET_NODE+"_"+P.move.TYPE_PREV).removeClass(P.node.TMPTARGET_NODE+"_"+Z.move.TYPE_NEXT).removeClass(P.node.TMPTARGET_NODE+"_"+Z.move.TYPE_INNER)}}T.showIfameMask(n,false);s.showHoverDom=true;if(s.dragFlag==0){return }s.dragFlag=0;var AI,AE,AJ;for(AI=0,AE=p.length;AI<AE;AI++){AJ=p[AI];if(AJ.isParent&&s.dragNodeShowBefore[AJ.tId]&&!AJ.open){I.expandCollapseNode(n,AJ,!AJ.open);delete s.dragNodeShowBefore[AJ.tId]}}if(v){v.remove()}if(h){h.remove()}var AD=(AK.ctrlKey&&n.edit.drag.isMove&&n.edit.drag.isCopy)||(!n.edit.drag.isMove&&n.edit.drag.isCopy);if(!AD&&x&&m&&p[0].parentTId&&m==p[0].parentTId&&b==P.move.TYPE_INNER){x=null}if(x){var AF=m==null?null:X.getNodeCache(AA,m);if(T.apply(n.callback.beforeDrop,[AA.treeId,p,AF,b,AD],true)==false){return }var AG=AD?T.clone(p):p;function AH(){if(y){if(!AD){for(var AM=0,AL=p.length;AM<AL;AM++){I.removeNode(n,p[AM])}}if(b==P.move.TYPE_INNER){I.addNodes(AA,AF,AG)}else{I.addNodes(AA,AF.getParentNode(),AG);if(b==P.move.TYPE_PREV){for(AM=0,AL=AG.length;AM<AL;AM++){I.moveNode(AA,AF,AG[AM],b,false)}}else{for(AM=-1,AL=AG.length-1;AM<AL;AL--){I.moveNode(AA,AF,AG[AL],b,false)}}}}else{if(AD&&b==P.move.TYPE_INNER){I.addNodes(AA,AF,AG)}else{if(AD){I.addNodes(AA,AF.getParentNode(),AG)}if(b==P.move.TYPE_PREV){for(AM=0,AL=AG.length;AM<AL;AM++){I.moveNode(AA,AF,AG[AM],b,false)}}else{for(AM=-1,AL=AG.length-1;AM<AL;AL--){I.moveNode(AA,AF,AG[AL],b,false)}}}}for(AM=0,AL=AG.length;AM<AL;AM++){I.selectNode(AA,AG[AM],AM>0)}F("#"+AG[0].tId).focus().blur()}if(b==P.move.TYPE_INNER&&T.canAsync(AA,AF)){I.asyncNode(AA,AF,false,AH)}else{AH()}n.treeObj.trigger(P.event.DROP,[AK,AA.treeId,AG,AF,b,AD])}else{for(AI=0,AE=p.length;AI<AE;AI++){I.selectNode(AA,p[AI],AI>0)}n.treeObj.trigger(P.event.DROP,[AK,n.treeId,p,null,null,null])}}AC.bind("selectstart",c);function c(){return false}if(o.preventDefault){o.preventDefault()}return true}},H={getAbs:function(a){var b=a.getBoundingClientRect();return[b.left,b.top]},inputFocus:function(a){if(a.get(0)){a.focus();T.setCursorPosition(a.get(0),a.val().length)}},inputSelect:function(a){if(a.get(0)){a.focus();a.select()}},setCursorPosition:function(b,c){if(b.setSelectionRange){b.focus();b.setSelectionRange(c,c)}else{if(b.createTextRange){var a=b.createTextRange();a.collapse(true);a.moveEnd("character",c);a.moveStart("character",c);a.select()}}},showIfameMask:function(h,f){var e=X.getRoot(h);while(e.dragMaskList.length>0){e.dragMaskList[0].remove();e.dragMaskList.shift()}if(f){var j=F("iframe");for(var d=0,b=j.length;d<b;d++){var c=j.get(d),a=T.getAbs(c),g=F("<div id='zTreeMask_"+d+"' class='zTreeMask' style='background-color:yellow;opacity: 0.3;filter: alpha(opacity=30);    top:"+a[1]+"px; left:"+a[0]+"px; width:"+c.offsetWidth+"px; height:"+c.offsetHeight+"px;'></div>");g.appendTo("body");e.dragMaskList.push(g)}}}},D={addEditBtn:function(b,c){if(c.editNameFlag||F("#"+c.tId+P.id.EDIT).length>0){return }if(!T.apply(b.edit.showRenameBtn,[b.treeId,c],b.edit.showRenameBtn)){return }var d=F("#"+c.tId+P.id.A),a="<span class='button edit' id='"+c.tId+P.id.EDIT+"' title='"+T.apply(b.edit.renameTitle,[b.treeId,c],b.edit.renameTitle)+"' treeNode"+P.id.EDIT+" style='display:none;'></span>";d.append(a);F("#"+c.tId+P.id.EDIT).bind("click",function(){if(!T.uCanDo(b)||T.apply(b.callback.beforeEditName,[b.treeId,c],true)==false){return false}I.editNode(b,c);return false}).show()},addRemoveBtn:function(a,b){if(b.editNameFlag||F("#"+b.tId+P.id.REMOVE).length>0){return }if(!T.apply(a.edit.showRemoveBtn,[a.treeId,b],a.edit.showRemoveBtn)){return }var d=F("#"+b.tId+P.id.A),c="<span class='button remove' id='"+b.tId+P.id.REMOVE+"' title='"+T.apply(a.edit.removeTitle,[a.treeId,b],a.edit.removeTitle)+"' treeNode"+P.id.REMOVE+" style='display:none;'></span>";d.append(c);F("#"+b.tId+P.id.REMOVE).bind("click",function(){if(!T.uCanDo(a)||T.apply(a.callback.beforeRemove,[a.treeId,b],true)==false){return false}I.removeNode(a,b);a.treeObj.trigger(P.event.REMOVE,[a.treeId,b]);return false}).bind("mousedown",function(e){return true}).show()},addHoverDom:function(a,b){if(X.getRoot(a).showHoverDom){b.isHover=true;if(a.edit.enable){I.addEditBtn(a,b);I.addRemoveBtn(a,b)}T.apply(a.view.addHoverDom,[a.treeId,b])}},cancelCurEditNode:function(f,d){var b=X.getRoot(f),e=f.data.key.name,g=b.curEditNode;if(g){var c=b.curEditInput;var a=d?d:c.val();if(!d&&T.apply(f.callback.beforeRename,[f.treeId,g,a],true)===false){g.editNameFlag=true;return false}else{g[e]=a?a:c.val();if(!d){f.treeObj.trigger(P.event.RENAME,[f.treeId,g])}}var h=F("#"+g.tId+P.id.A);h.removeClass(P.node.CURSELECTED_EDIT);c.unbind();I.setNodeName(f,g);g.editNameFlag=false;b.curEditNode=null;b.curEditInput=null;I.selectNode(f,g,false)}b.noSelection=true;return true},editNode:function(d,e){var a=X.getRoot(d);I.editNodeBlur=false;if(X.isSelectedNode(d,e)&&a.curEditNode==e&&e.editNameFlag){setTimeout(function(){T.inputFocus(a.curEditInput)},0);return }var c=d.data.key.name;e.editNameFlag=true;I.removeTreeDom(d,e);I.cancelCurEditNode(d);I.selectNode(d,e,false);F("#"+e.tId+P.id.SPAN).html("<input type=text class='rename' id='"+e.tId+P.id.INPUT+"' treeNode"+P.id.INPUT+" >");var b=F("#"+e.tId+P.id.INPUT);b.attr("value",e[c]);if(d.edit.editNameSelectAll){T.inputSelect(b)}else{T.inputFocus(b)}b.bind("blur",function(f){if(!I.editNodeBlur){I.cancelCurEditNode(d)}}).bind("keydown",function(f){if(f.keyCode=="13"){I.editNodeBlur=true;I.cancelCurEditNode(d,null,true)}else{if(f.keyCode=="27"){I.cancelCurEditNode(d,e[c])}}}).bind("click",function(f){return false}).bind("dblclick",function(f){return false});F("#"+e.tId+P.id.A).addClass(P.node.CURSELECTED_EDIT);a.curEditInput=b;a.noSelection=false;a.curEditNode=e},moveNode:function(m,d,p,c,AA,e){var r=X.getRoot(m),j=m.data.key.children;if(d==p){return }if(m.data.keep.leaf&&d&&!d.isParent&&c==P.move.TYPE_INNER){return }var u=(p.parentTId?p.getParentNode():r),o=(d===null||d==r);if(o&&d===null){d=r}if(o){c=P.move.TYPE_INNER}var a=(d.parentTId?d.getParentNode():r);if(c!=P.move.TYPE_PREV&&c!=P.move.TYPE_NEXT){c=P.move.TYPE_INNER}if(c==P.move.TYPE_INNER){if(o){p.parentTId=null}else{if(!d.isParent){d.isParent=true;d.open=!!d.open;I.setNodeLineIcos(m,d)}p.parentTId=d.tId}}var f,h;if(o){f=m.treeObj;h=f}else{if(!e&&c==P.move.TYPE_INNER){I.expandCollapseNode(m,d,true,false)}else{if(!e){I.expandCollapseNode(m,d.getParentNode(),true,false)}}f=F("#"+d.tId);h=F("#"+d.tId+P.id.UL);if(!h.get(0)){var y=[];I.makeUlHtml(m,d,y,"");f.append(y.join(""))}h=F("#"+d.tId+P.id.UL)}var w=F("#"+p.tId);if(h.get(0)&&c==P.move.TYPE_INNER){h.append(w)}else{if(f.get(0)&&c==P.move.TYPE_PREV){f.before(w)}else{if(f.get(0)&&c==P.move.TYPE_NEXT){f.after(w)}}}var t,s,g=-1,v=0,z=null,b=null,x=p.level;if(p.isFirstNode){g=0;if(u[j].length>1){z=u[j][1];z.isFirstNode=true}}else{if(p.isLastNode){g=u[j].length-1;z=u[j][g-1];z.isLastNode=true}else{for(t=0,s=u[j].length;t<s;t++){if(u[j][t].tId==p.tId){g=t;break}}}}if(g>=0){u[j].splice(g,1)}if(c!=P.move.TYPE_INNER){for(t=0,s=a[j].length;t<s;t++){if(a[j][t].tId==d.tId){v=t}}}if(c==P.move.TYPE_INNER){if(!d[j]){d[j]=new Array()}if(d[j].length>0){b=d[j][d[j].length-1];b.isLastNode=false}d[j].splice(d[j].length,0,p);p.isLastNode=true;p.isFirstNode=(d[j].length==1)}else{if(d.isFirstNode&&c==P.move.TYPE_PREV){a[j].splice(v,0,p);b=d;b.isFirstNode=false;p.parentTId=d.parentTId;p.isFirstNode=true;p.isLastNode=false}else{if(d.isLastNode&&c==P.move.TYPE_NEXT){a[j].splice(v+1,0,p);b=d;b.isLastNode=false;p.parentTId=d.parentTId;p.isFirstNode=false;p.isLastNode=true}else{if(c==P.move.TYPE_PREV){a[j].splice(v,0,p)}else{a[j].splice(v+1,0,p)}p.parentTId=d.parentTId;p.isFirstNode=false;p.isLastNode=false}}}X.fixPIdKeyValue(m,p);X.setSonNodeLevel(m,p.getParentNode(),p);I.setNodeLineIcos(m,p);I.repairNodeLevelClass(m,p,x);if(!m.data.keep.parent&&u[j].length<1){u.isParent=false;u.open=false;var n=F("#"+u.tId+P.id.UL),q=F("#"+u.tId+P.id.SWITCH),k=F("#"+u.tId+P.id.ICON);I.replaceSwitchClass(u,q,P.folder.DOCU);I.replaceIcoClass(u,k,P.folder.DOCU);n.css("display","none")}else{if(z){I.setNodeLineIcos(m,z)}}if(b){I.setNodeLineIcos(m,b)}if(!!m.check&&m.check.enable&&I.repairChkClass){I.repairChkClass(m,u);I.repairParentChkClassWithSelf(m,u);if(u!=p.parent){I.repairParentChkClassWithSelf(m,p)}}if(!e){I.expandCollapseParentNode(m,p.getParentNode(),true,AA)}},removeEditBtn:function(a){F("#"+a.tId+P.id.EDIT).unbind().remove()},removeRemoveBtn:function(a){F("#"+a.tId+P.id.REMOVE).unbind().remove()},removeTreeDom:function(a,b){b.isHover=false;I.removeEditBtn(b);I.removeRemoveBtn(b);T.apply(a.view.removeHoverDom,[a.treeId,b])},repairNodeLevelClass:function(b,d,c){if(c===d.level){return }var e=F("#"+d.tId),h=F("#"+d.tId+P.id.A),g=F("#"+d.tId+P.id.UL),a="level"+c,f="level"+d.level;e.removeClass(a);e.addClass(f);h.removeClass(a);h.addClass(f);g.removeClass(a);g.addClass(f)}},R={tools:H,view:D,event:Q,data:O};F.extend(true,F.fn.zTree.consts,Z);F.extend(true,F.fn.zTree._z,R);var B=F.fn.zTree,T=B._z.tools,P=B.consts,I=B._z.view,X=B._z.data,Q=B._z.event;X.exSetting(L);X.addInitBind(M);X.addInitCache(C);X.addInitNode(U);X.addInitProxy(N);X.addInitRoot(V);X.addZTreeTools(J);var S=I.cancelPreSelectedNode;I.cancelPreSelectedNode=function(c,d){var e=X.getRoot(c).curSelectedList;for(var b=0,a=e.length;b<a;b++){if(!d||d===e[b]){I.removeTreeDom(c,e[b]);if(d){break}}}if(S){S.apply(I,arguments)}};var W=I.createNodes;I.createNodes=function(c,d,b,a){if(W){W.apply(I,arguments)}if(!b){return }if(I.repairParentChkClassWithSelf){I.repairParentChkClassWithSelf(c,a)}};I.makeNodeUrl=function(a,b){return(b.url&&!a.edit.enable)?b.url:null};var A=I.removeNode;I.removeNode=function(b,c){var a=X.getRoot(b);if(a.curEditNode===c){a.curEditNode=null}if(A){A.apply(I,arguments)}};var Y=I.selectNode;I.selectNode=function(c,d,b){var a=X.getRoot(c);if(X.isSelectedNode(c,d)&&a.curEditNode==d&&d.editNameFlag){return false}if(Y){Y.apply(I,arguments)}I.addHoverDom(c,d);return true};var E=T.uCanDo;T.uCanDo=function(b,c){var a=X.getRoot(b);if(c&&(T.eqs(c.type,"mouseover")||T.eqs(c.type,"mouseout")||T.eqs(c.type,"mousedown")||T.eqs(c.type,"mouseup"))){return true}return(!a.curEditNode)&&(E?E.apply(I,arguments):true)}})(jQuery);
(function($){var zt=$.fn.zTree,tools=zt._z.tools,consts=zt.consts,view=zt._z.view,data=zt._z.data,event=zt._z.event;_view={addNodes:function(setting,parentNode,newNodes,isSilent){if(setting.data.keep.leaf&&parentNode&&!parentNode.isParent){return }if(!tools.isArray(newNodes)){newNodes=[newNodes]}if(setting.data.simpleData.enable){newNodes=data.transformTozTreeFormat(setting,newNodes)}if(parentNode){var target_switchObj=$("#"+parentNode.tId+consts.id.SWITCH),target_icoObj=$("#"+parentNode.tId+consts.id.ICON),target_ulObj=$("#"+parentNode.tId+consts.id.UL);if(!parentNode.open){view.replaceSwitchClass(parentNode,target_switchObj,consts.folder.CLOSE);view.replaceIcoClass(parentNode,target_icoObj,consts.folder.CLOSE);parentNode.open=false;target_ulObj.css({display:"none"})}data.addNodesData(setting,parentNode,newNodes);view.createNodes(setting,parentNode.level+1,newNodes,parentNode);if(!isSilent){view.expandCollapseParentNode(setting,parentNode,true)}}else{data.addNodesData(setting,data.getRoot(setting),newNodes);view.createNodes(setting,0,newNodes,null)}for(var i=0;i<newNodes.length;i++){newNodes[i].data[setting.data.simpleData.pIdKey]=newNodes[i][setting.data.simpleData.pIdKey]}},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent){tools.apply(callback);return false}else{if(node&&node.isAjaxing){return false}else{if(tools.apply(setting.callback.beforeAsync,[setting.treeId,node],true)==false){tools.apply(callback);return false}}}if(node){node.isAjaxing=true;var icoObj=$("#"+node.tId+consts.id.ICON);icoObj.attr({style:"","class":"button ico_loading"})}var isJson=(setting.async.contentType=="application/json"),tmpParam=isJson?"{":"",jTemp="";for(i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;if(pKey.length>1){spKey=pKey[1];pKey=pKey[0]}if(isJson){jTemp=(typeof node[pKey]=="string")?'"':"";tmpParam+='"'+spKey+('":'+jTemp+node[pKey]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=spKey+("="+node[pKey]).replace(/&/g,"%26")+"&"}}if(tools.isArray(setting.async.otherParam)){for(i=0,l=setting.async.otherParam.length;i<l;i+=2){if(isJson){jTemp=(typeof setting.async.otherParam[i+1]=="string")?'"':"";tmpParam+='"'+setting.async.otherParam[i]+('":'+jTemp+setting.async.otherParam[i+1]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=setting.async.otherParam[i]+("="+setting.async.otherParam[i+1]).replace(/&/g,"%26")+"&"}}}else{for(var p in setting.async.otherParam){if(isJson){jTemp=(typeof setting.async.otherParam[p]=="string")?'"':"";tmpParam+='"'+p+('":'+jTemp+setting.async.otherParam[p]).replace(/'/g,"\\'")+jTemp+","}else{tmpParam+=p+("="+setting.async.otherParam[p]).replace(/&/g,"%26")+"&"}}}if(tmpParam.length>1){tmpParam=tmpParam.substring(0,tmpParam.length-1)}if(isJson){tmpParam+="}"}var managerName=setting.managerName,managerMethod=setting.managerMethod;if(managerName&&!setting._managerLoaded){$("head").append("<script src='"+_ctxPath+"/ajax.do?managerName="+managerName+"' type='text/javascript'><\/script>");setting._managerLoaded=true}if(managerName&&managerMethod&&window[managerName]){var _bs=new window[managerName]();_bs[managerMethod]($.parseJSON(tmpParam),{success:function(msg){var newNodes=[];try{if(!msg||msg.length==0){newNodes=[]}else{if(typeof msg=="string"){newNodes=eval("("+msg+")")}else{newNodes=msg}}}catch(err){}if(node){node.isAjaxing=null;node.zAsync=true}view.setNodeLineIcos(setting,node);if(newNodes&&newNodes!=""){newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes);view.addNodes(setting,node,!!newNodes?tools.clone(newNodes):[],!!isSilent)}else{view.addNodes(setting,node,[],!!isSilent)}setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]);tools.apply(callback)},error:function(request,textStatus,errorThrown){if(node){node.isAjaxing=null}view.setNodeLineIcos(setting,node);setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,request,textStatus,errorThrown])}})}return true},appendNodes:function(setting,level,nodes,parentNode,initFlag,openFlag){if(!nodes){return[]}var html=[],childKey=setting.data.key.children,nameKey=setting.data.key.name,titleKey=data.getTitleKey(setting);for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i],tmpPNode=(parentNode)?parentNode:data.getRoot(setting),tmpPChild=tmpPNode[childKey],isFirstNode=((tmpPChild.length==nodes.length)&&(i==0)),isLastNode=(i==(nodes.length-1));if(initFlag){data.initNode(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag);data.addNodeCache(setting,node)}var childHtml=[];if(node[childKey]&&node[childKey].length>0){childHtml=view.appendNodes(setting,level+1,node[childKey],node,initFlag,openFlag&&node.open)}if(openFlag){var url=view.makeNodeUrl(setting,node),fontcss=view.makeNodeFontCss(setting,node),fontStyle=[];for(var f in fontcss){fontStyle.push(f,":",fontcss[f],";")}html.push("<li id='",node.tId,"' class='level",node.level,"' tabindex='0' hidefocus='true' treenode>","<span id='",node.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(setting,node),"' treeNode",consts.id.SWITCH,"></span>");data.getBeforeA(setting,node,html);html.push("<a id='",node.tId,consts.id.A,"' class='level",node.level,"' treeNode",consts.id.A,' onclick="',(node.click||""),'" ',((url!=null&&url.length>0)?"href='"+url+"'":"")," target='",view.makeNodeTarget(node),"' style='",fontStyle.join(""),"'");if(tools.apply(setting.view.showTitle,[setting.treeId,node],setting.view.showTitle)&&node[titleKey]&&node[titleKey].indexOf("title")==-1){html.push("title='",node[titleKey].replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'")}html.push(">");data.getInnerBeforeA(setting,node,html);var name=setting.view.nameIsHTML?node[nameKey]:node[nameKey].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");html.push("<span id='",node.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(setting,node),"' style='",view.makeNodeIcoStyle(setting,node),"'></span><span id='",node.tId,consts.id.SPAN,"'>",name,"</span>");data.getInnerAfterA(setting,node,html);html.push("</a>");data.getAfterA(setting,node,html);if(node.isParent&&node.open){view.makeUlHtml(setting,node,html,childHtml.join(""))}html.push("</li>");data.addCreatedNode(setting,node)}}return html}},_data={fixPIdKeyValue:function(setting,node){if(setting.data.simpleData.enable){node.data[setting.data.simpleData.pIdKey]=node[setting.data.simpleData.pIdKey]=node.parentTId?node.getParentNode()[setting.data.simpleData.idKey]:setting.data.simpleData.rootPId}},transformTozTreeFormat:function(setting,sNodes){var i,l,key=setting.data.simpleData.idKey,parentKey=setting.data.simpleData.pIdKey,childKey=setting.data.key.children;if(!key||key==""||!sNodes){return[]}if(!tools.isArray(sNodes)){sNodes=[sNodes]}var d=[],nm=setting.data.key.name,titleKey=data.getTitleKey(setting);for(var i=0;i<sNodes.length;i++){var no={};no[key]=sNodes[i][key];no[parentKey]=sNodes[i][parentKey];if(setting.render){no[nm]=setting.render(sNodes[i][nm],sNodes[i])}else{no[nm]=sNodes[i][nm]}if(titleKey&&titleKey!=""){if(nm==titleKey){no[titleKey]=no[nm]}else{no[titleKey]=sNodes[i][titleKey]}}no.data=sNodes[i];var _iconSkin=sNodes[i]["iconSkin"];if(_iconSkin){no.iconSkin=_iconSkin}if(setting.nodeHandler){setting.nodeHandler(no)}d.push(no)}sNodes=d;var r=[];var tmpMap=[];for(i=0,l=sNodes.length;i<l;i++){tmpMap[sNodes[i][key]]=sNodes[i]}for(i=0,l=sNodes.length;i<l;i++){if(tmpMap[sNodes[i][parentKey]]&&sNodes[i][key]!=sNodes[i][parentKey]){if(!tmpMap[sNodes[i][parentKey]][childKey]){tmpMap[sNodes[i][parentKey]][childKey]=[]}tmpMap[sNodes[i][parentKey]][childKey].push(sNodes[i])}else{r.push(sNodes[i])}}return r}},_z={view:_view,data:_data};$.extend(true,$.fn.zTree._z,_z);$.fn.tree=function(options){var settings={selectedMulti:false,checkEnable:false};options=$.extend(settings,options);var opts={async:{enable:false,autoParam:["id"],contentType:"application/json"},edit:{enable:false,showRemoveBtn:false,showRenameBtn:false},callback:{},check:{enable:options.checkEnable},data:{simpleData:{enable:true,idKey:"id",pIdKey:"pId",rootPId:0},key:{name:"name"}},view:{selectedMulti:options.selectedMulti}},oe=opts.edit,oc=opts.callback,od=opts.data,ods=od.simpleData,odk=od.key;if(options.onClick){oc.onClick=options.onClick}if(options.onDblClick){oc.onDblClick=options.onDblClick}if(options.beforeDrag){oc.beforeDrag=options.beforeDrag}if(options.beforeDrop){oc.beforeDrop=options.beforeDrop}if(options.onAsyncSuccess){oc.onAsyncSuccess=options.onAsyncSuccess}if(options.onAsyncError){oc.onAsyncError=options.onAsyncError}if(options.beforeAsync){oc.beforeAsync=options.beforeAsync}if(options.idKey){ods.idKey=options.idKey}if(options.pIdKey){ods.pIdKey=options.pIdKey}if(options.rootPId){ods.rootPId=options.rootPId}if(options.nameKey){odk.name=options.nameKey}if(options.enableEdit){oe.enable=true}if(options.enableRename){oe.showRenameBtn=true}if(options.enableRemove){oe.showRemoveBtn=true}if(options.enableCheck){opts.check.enable=true}if(options.managerName){opts.async.enable=true;opts.async.autoParam=[ods.idKey];if(options.asyncParam){opts.async.otherParam=options.asyncParam}}if(options.addHoverDom){opts.view.addHoverDom=options.addHoverDom}if(options.removeHoverDom){opts.view.removeHoverDom=options.removeHoverDom}if(options.dblClickExpand){opts.view.dblClickExpand=options.dblClickExpand}if(options.render){opts.view.nameIsHTML=true;opts.render=options.render}if(options.nodeHandler){opts.nodeHandler=options.nodeHandler}if(options.managerName){opts.managerName=options.managerName}if(options.managerMethod){opts.managerMethod=options.managerMethod}if(options.title){odk.title=options.title}oc.onRename=function(evt,tid,tNode){tNode.data[odk.name]=tNode[odk.name]};var t=this[0],id=t.id,d=[];$(this).replaceWith("<ul id='"+id+"' class='ztree'></ul>");t=$("#"+id);if($._autofill){var $af=$._autofill,$afg=$af.filllists;if($afg&&$afg[id]){d=$afg[id]}}$.fn.zTree.init(t,opts,d)};$.fn.treeObj=function(){var id=this[0].id;return $.fn.zTree.getZTreeObj(id)}})(jQuery);
window.eh=window.eh||{version:"beta 0.1"};eh.utils=eh.utils||{};eh.ui=eh.ui||{};
var GPS={PI:3.141592653589793,x_pi:3.141592653589793*3000/180,delta:function(G,B){var I=6378245;var E=0.006693421622965943;var F=this.transformLat(B-105,G-35);var A=this.transformLon(B-105,G-35);var C=G/180*this.PI;var H=Math.sin(C);H=1-E*H*H;var D=Math.sqrt(H);F=(F*180)/((I*(1-E))/(H*D)*this.PI);A=(A*180)/(I/D*Math.cos(C)*this.PI);return{lat:F,lon:A}},gcj_encrypt:function(A,B){if(this.outOfChina(A,B)){return{lat:A,lon:B}}var C=this.delta(A,B);return{lat:A+C.lat,lon:B+C.lon}},gcj_decrypt:function(A,B){if(this.outOfChina(A,B)){return{lat:A,lon:B}}var C=this.delta(A,B);return{lat:A-C.lat,lon:B-C.lon}},gcj_decrypt_exact:function(B,G){var M=0.01;var H=1e-9;var K=M,A=M;var D=B-K,L=G-A;var I=B+K,N=G+A;var C,J,F=0;while(1){C=(D+I)/2;J=(L+N)/2;var E=this.gcj_encrypt(C,J);K=E.lat-B;A=E.lon-G;if((Math.abs(K)<H)&&(Math.abs(A)<H)){break}if(K>0){I=C}else{D=C}if(A>0){N=J}else{L=J}if(++F>10000){break}}return{lat:C,lon:J}},bd_encrypt:function(B,D){var A=D,F=B;var E=Math.sqrt(A*A+F*F)+0.00002*Math.sin(F*this.x_pi);var C=Math.atan2(F,A)+0.000003*Math.cos(A*this.x_pi);bdLon=E*Math.cos(C)+0.0065;bdLat=E*Math.sin(C)+0.006;return{lat:bdLat,lon:bdLon}},bd_decrypt:function(E,F){var A=F-0.0065,H=E-0.006;var G=Math.sqrt(A*A+H*H)-0.00002*Math.sin(H*this.x_pi);var D=Math.atan2(H,A)-0.000003*Math.cos(A*this.x_pi);var C=G*Math.cos(D);var B=G*Math.sin(D);return{lat:B,lon:C}},mercator_encrypt:function(B,C){var A=C*20037508.34/180;var D=Math.log(Math.tan((90+B)*this.PI/360))/(this.PI/180);D=D*20037508.34/180;return{lat:D,lon:A}},mercator_decrypt:function(B,C){var A=C/20037508.34*180;var D=B/20037508.34*180;D=180/this.PI*(2*Math.atan(Math.exp(D*this.PI/180))-this.PI/2);return{lat:D,lon:A}},distance:function(F,I,D,H){var B=6371000;var G=Math.cos(F*this.PI/180)*Math.cos(D*this.PI/180)*Math.cos((I-H)*this.PI/180);var E=Math.sin(F*this.PI/180)*Math.sin(D*this.PI/180);var J=G+E;if(J>1){J=1}if(J<-1){J=-1}var C=Math.acos(J);var A=C*B;return A},outOfChina:function(A,B){if(B<72.004||B>137.8347){return true}if(A<0.8293||A>55.8271){return true}return false},transformLat:function(A,C){var B=-100+2*A+3*C+0.2*C*C+0.1*A*C+0.2*Math.sqrt(Math.abs(A));B+=(20*Math.sin(6*A*this.PI)+20*Math.sin(2*A*this.PI))*2/3;B+=(20*Math.sin(C*this.PI)+40*Math.sin(C/3*this.PI))*2/3;B+=(160*Math.sin(C/12*this.PI)+320*Math.sin(C*this.PI/30))*2/3;return B},transformLon:function(A,C){var B=300+A+2*C+0.1*A*A+0.1*A*C+0.1*Math.sqrt(Math.abs(A));B+=(20*Math.sin(6*A*this.PI)+20*Math.sin(2*A*this.PI))*2/3;B+=(20*Math.sin(A*this.PI)+40*Math.sin(A/3*this.PI))*2/3;B+=(150*Math.sin(A/12*this.PI)+300*Math.sin(A/30*this.PI))*2/3;return B}};
(function(){if(!window.JSON){$("head").append('<script src="'+URL.json+'"><\/script>')}ajax={};ajax.settings={url:"",type:"GET",dataType:"json",data:{},async:true,success:function(){},error:function(){},complete:function(){},ajaxSetHeader:function(){}};ajax.send=function(A){var B,A=A||{},D,C;$.extend(ajax.settings,A);B=ajax.settings;if(eh.utils.objIsNull(B.data)){D="application/x-www-form-urlencoded; charset=UTF-8";C=null}else{D="application/json; charset=UTF-8";if(typeof B.data==="string"){C=B.data}else{C=JSON.stringify(B.data)}}$.ajax({url:B.url,type:B.type,dataType:B.dataType,contentType:D,data:C,async:B.async,beforeSend:function(F){var E=eh.utils.cookie.get(cookieRelative.token);E&&F.setRequestHeader(cookieRelative.token,E);B.ajaxSetHeader.call(null,F)},success:function(E){E=$.extend({status:1,data:{},message:"",entity:{},errors:[]},E);B.data=null;B.success.call(null,E)},error:function(E){if(E.status===404){alert("/error/404.html")}if(E.status===500){if(E.responseJSON.length>0){eh.ui.dialogTip.popup({title:dialogText.title,content:E.responseJSON[0].message,callback:function(){location.reload()}})}else{location.href="/error/500.html"}}if(E.status===401){alert("/error/401.html")}B.data=null;B.error.call(null,E)},complete:function(E){B.complete.call(null,E)}})};ajax.refreshToken=function(){alert("URL.freshToken")};eh.utils.ajax=ajax})();
(function(){Base64={};Base64._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Base64.encode=function(C){var A="";var J,H,F,I,G,E,D;var B=0;C=Base64._utf8_encode(C);while(B<C.length){J=C.charCodeAt(B++);H=C.charCodeAt(B++);F=C.charCodeAt(B++);I=J>>2;G=((J&3)<<4)|(H>>4);E=((H&15)<<2)|(F>>6);D=F&63;if(isNaN(H)){E=D=64}else{if(isNaN(F)){D=64}}A=A+Base64._keyStr.charAt(I)+Base64._keyStr.charAt(G)+Base64._keyStr.charAt(E)+Base64._keyStr.charAt(D)}return A};Base64.decode=function(C){var A="";var J,H,F;var I,G,E,D;var B=0;C=C.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(B<C.length){I=Base64._keyStr.indexOf(C.charAt(B++));G=Base64._keyStr.indexOf(C.charAt(B++));E=Base64._keyStr.indexOf(C.charAt(B++));D=Base64._keyStr.indexOf(C.charAt(B++));J=(I<<2)|(G>>4);H=((G&15)<<4)|(E>>2);F=((E&3)<<6)|D;A=A+String.fromCharCode(J);if(E!=64){A=A+String.fromCharCode(H)}if(D!=64){A=A+String.fromCharCode(F)}}A=Base64._utf8_decode(A);return A};Base64._utf8_encode=function(B){B=B.replace(/\r\n/g,"\n");var A="";for(var D=0;D<B.length;D++){var C=B.charCodeAt(D);if(C<128){A+=String.fromCharCode(C)}else{if((C>127)&&(C<2048)){A+=String.fromCharCode((C>>6)|192);A+=String.fromCharCode((C&63)|128)}else{A+=String.fromCharCode((C>>12)|224);A+=String.fromCharCode(((C>>6)&63)|128);A+=String.fromCharCode((C&63)|128)}}}return A};Base64._utf8_decode=function(A){var B="";var C=0;var D=c1=c2=0;while(C<A.length){D=A.charCodeAt(C);if(D<128){B+=String.fromCharCode(D);C++}else{if((D>191)&&(D<224)){c2=A.charCodeAt(C+1);B+=String.fromCharCode(((D&31)<<6)|(c2&63));C+=2}else{c2=A.charCodeAt(C+1);c3=A.charCodeAt(C+2);B+=String.fromCharCode(((D&15)<<12)|((c2&63)<<6)|(c3&63));C+=3}}}return B};eh.utils.Base64=Base64})();
(function(){cookie={};cookie.set=function(F,H,B){var E=new Date(),G=location.protocol==="https:"?"; secure":"",C=/^[1-9]([0-9]+)?d$/.test(B),A=/^[1-9]([0-9]+)?h$/.test(B),D=/^[1-9]([0-9]+)?s$/.test(B);if(!B||!(C||A||D)){B=""}else{B=parseInt(B.substr(0,B.length-1),10);if(C){E.setDate(E.getDate()+B)}else{if(A){E.setHours(E.getHours()+B)}else{if(D){E.setSeconds(E.getSeconds()+B)}}}B="; expires="+E.toGMTString()}return(document.cookie=[F,"=",!H?"":encodeURIComponent(H.toString()),B,"; path=/","; domain=."+document.domain,G].join(""))};cookie.get=function(A){var B;return(B=new RegExp("(?:^|; )"+A+"=([^;]*)").exec(document.cookie))?B[1]:null};cookie.deleteCookie=function(A){if(!A){return false}var B=cookie.get(A);if(B!=null){cookie.set(A,B,-1)}};eh.utils.cookie=cookie})();
var URL={json:"//cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js",login:_ctxPath+"/login",logout:_ctxPath+"/logout",fileupload:"http://47.93.194.99/dangjian/back/super/file/upload.do",filepage:_ctxPath+"/back/super/file/filepage.do"},dialogText={title:"\u6e29\u99a8\u63d0\u793a",content:"\u64cd\u4f5c\u6210\u529f\uff01",confirmeBtnText:"\u786e\u5b9a",cancelBtnText:"\u53d6\u6d88",width:400,larger:500,quit:"\u60a8\u957f\u65f6\u95f4\u672a\u8fdb\u884c\u64cd\u4f5c\uff0c3\u79d2\u540e\u81ea\u52a8\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762",noaccess:"\u60a8\u65e0\u6b64\u767b\u9646\u6743\u9650"},consolelogText={nosuchdom:"\u6ca1\u6709\u8fd9\u4e2adom\u5bf9\u8c61"},cookieRelative={basic:"Basic",authorization:"Authorization",token:"X-Auth-Token",token_encode:"X-Auth-Token-Encode",userid:"X-Userid",username:"X-Username",userpwd:"X-Password",userrole:"role",tokenTime:"_tokenTime",internal:"message",referrer:"referrer",quitsecond:3000,tokenExpires:1200000,pending_confirm:15,pending_kypay_confirmed:23},pageText={dataNull:"\u6682\u65e0\u4fe1\u606f",pageHeader:"Range",pageEntity:"Entity"};
(function(){function E(F){return function(G){return{}.toString.call(G)=="[object "+F+"]"}}function B(G){for(var F in G){return false}return true}function D(G,F){return"&page="+G+"&size="+F}function C(F){var G=new RegExp("(^|&)"+F+"=([^&]*)(&|$)","i");var H=window.location.search.substr(1).match(G);if(H!=null){return unescape(H[2])}return null}function A(F){return F.replace(/(^\s*)|(\s*$)/g,"")}eh.utils.isObject=E("Object");eh.utils.isString=E("String");eh.utils.isArray=Array.isArray||E("Array");eh.utils.isFunction=E("Function");eh.utils.isNumber=E("Number");eh.utils.objIsNull=B;eh.utils.buildPageParameter=D;eh.utils.getQueryString=C;eh.utils.trim=A})();
(function(){shade={};shade.settings={msg:"\u64cd\u4f5c\u4e2d...\u8bf7\u8010\u5fc3\u7b49\u5f85"};shade.show=function(B){var C,B=B||{};B&&typeof B==="object"&&$.extend(shade.settings,B);typeof B==="string"&&(shade.settings.msg=B);C=shade.settings;var A='<div class="spiner-example"><div class="sk-spinner sk-spinner-chasing-dots"><div class="sk-dot1"></div><div class="sk-dot2"></div></div></div>';$(".swfMask").length===0?($("body").append('<div class="swfMask"><p><span class="fs2">'+A+"</span></p></div>"),$(".swfMask").width($(document).width()).height($(document).height())):($(".swfMask").find("p span").text(C.msg),$(".swfMask").show());$(".swfMask p span").unbind("click").click(function(){$(".swfMask").hide()})};shade.hide=function(){$(".swfMask").length!==0?$(".swfMask").hide():null};$.shade=shade})();
(function(){var B=eh.utils.cookie,A={};A.quit=function(){B.deleteCookie(cookieRelative.token);B.deleteCookie(cookieRelative.token_encode);B.deleteCookie(cookieRelative.userid);B.deleteCookie(cookieRelative.username);B.deleteCookie(cookieRelative.userpwd);B.deleteCookie(cookieRelative.userrole)};A.update=function(){};eh.utils.token=A})();
/*! jQuery UI - v1.11.2 - 2014-10-16
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return n=!a&&o.length?e.widget.extend.apply(null,[n].concat(o)):n,a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))}),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,e.top+p+f+m>u&&(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>d&&(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},u=h&&l.down||l,d=function(){o._toggleComplete(i)};return"number"==typeof u&&(a=u),"string"==typeof u&&(n=u),n=n||u.easing||l.easing,a=a||u.duration||l.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:d,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?r+=i.now:"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,d):e.animate(this.showProps,a,n,d)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)
}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.2"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0
},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,z,H,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),z=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=z,H=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;z>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(H)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[H]):[!0,""],j=H.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>H||$&&H>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(H.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===H.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(H.getTime()===G.getTime()?" "+this._currentClass:"")+(H.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===R.getTime()?" ui-state-highlight":"")+(H.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.2",e.datepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)
},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):e.each(n.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=u-t.height,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;
if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.2",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};
f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})},e.widget("ui.progressbar",{version:"1.11.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this,i=this.element.attr("tabindex");this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:i||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.attr("value"),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=(this.options.max-this._valueMin())%this.options.step;this.max=this.options.max-e},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));
return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.11.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]
}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){o.html(e),s._trigger("load",i,r)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.2",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){e.data("ui-tooltip-open")&&n._delay(function(){t&&(t.type=a),this._open(t,e,i)})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){u.of=e,o.is(":hidden")||o.position(u)}var a,o,r,h,l,u=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(l=s.clone(),l.removeAttr("id").find("[id]").removeAttr("id")):l=s,e("<div>").html(l).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(u.of),clearInterval(h))},e.fx.interval)),this._trigger("open",t,{tooltip:o}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}},i[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(o)}),t&&"mouseover"!==t.type||(r.mouseleave="close"),t&&"focusin"!==t.type||(r.focusout="close"),this._on(!0,i,r)}},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);a&&(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)))},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});
(function(B){var A=1;B.fn.codeoption=function(D){var E={};D=B.extend(E,D);var C=new Array;B(".codecfg",this).add(this).each(function(H){var F=this.tagName;if(!F){return }F=F.toLowerCase();var I=D.codecfg?D.codecfg:B(this).attr("codecfg");if(I){var G=B.codecfgobj(this,I);if(D.tags&&!D.tags.contains(F)&&!G.render){return }C.push(G)}});B.genoption(C,D)};B.codeoption=function(C){var D={tags:["select"]};C=B.extend(D,C);B(document).codeoption(C)};B.fn.codetext=function(D){var E={};D=B.extend(E,D);var C=new Array;B(".codecfg",this).add(this).each(function(H){if(!B(this).attr("codecfg")){return }var F=this.tagName.toLowerCase();if(F!="select"){var I=D.codecfg?D.codecfg:B(this).attr("codecfg");if(I){var G=B.codecfgobj(this,I);if(G.render){return }var J=F=="input"?B(this).val():B(this).text();if(J){G._id=J;C.push(G)}}}});B.genoption(C,D)};B.codetext=function(C){B(document).codetext(C)};B.codecfgobj=function(G,F){if(F){var C=F.indexOf("{");var D=B.parseJSON(C==0?F:("{"+F+"}"));var E=G.name?G.name:G.id;if(!E||E.indexOf("coi_")==0){E="coi_"+A;B(G).attr("id",E);A++}D.eleid=E;return D}else{return{}}};B.genoption=function(D,E){if(D.length>0){var C=B.toJSON(D);B.ajax({type:"POST",url:_ctxPath+"/i/code/selectCode.do",async:false,data:{jsonPara:C},dataType:"json",success:function(F){B.fillOption(B.parseJSON(F))}})}};B.fillOption=function(E){if(E){for(var C=0;C<E.length;C++){var G=B.findTag(E[C]);var D=E[C].options;var F=E[C]["defaultValue"];if(G){G.each(function(){var H=this.tagName.toLowerCase(),K=B(this);var O=E[C].render;if(O=="radioh"){I(K,D)}else{if(O=="radiov"){I(K,D,true)}else{if(H=="select"){B(".tmp",K).remove();for(var J in D){var L=new Option(D[J],J);L.className="tmp";this.options[this.options.length]=L;if(F&&F==J){L.selected=true}}if(O=="new"){var M=B.dropdown({id:this.id});if(F){M.setValue(F)}}K.trigger("change")}else{if(H=="input"){B(this).val(D[B(this).val()])}else{var N=D[B(this).text()];if(!N&&B(this).text()=="0"){N="\u65e0"}B(this).text(N);if(B(this).attr("title")){B(this).attr("title",N)}}}}}function I(S,T,V){var W=S.attr("id"),P=S;S.attr("id",W+"_hid");for(var R in T){var Q=B('<label class="margin_r_10 hand"></label>');Q.text(T[R]);if(V){Q.addClass("display_block")}var U=B('<input class="radio_com" type="radio" name="'+W+'">');U.attr("id",W);U.val(R);Q.prepend(U);P.after(Q);P=Q;if(F&&F==R){U.attr("checked",true)}}S.remove()}})}}}};B.findTag=function(D){var C;if(D.eleid){C=B("[name='"+D.eleid+"']").length==0?B("#"+D.eleid):B("[name='"+D.eleid+"']")}if(!C){B(".codecfg").each(function(F){var E=this.codecfg;if(E){if(E.indexOf("codeType")!=-1&&E.indexOf(D.codeType)!=-1){C=B(this)}if(E.indexOf("codeType")==-1&&E.indexOf(D.tableName)!=-1){C=B(this)}}})}return C}})(jQuery);
var _comp_t,addressComponents;(function(A){A.fn.compThis=function(Q){var P=this;var I=P.attr("comp"),B,K;if(I){B=A.parseJSON("{"+I+"}");if(Q){B=A.extend(B,Q);var F=A.toJSON(B);P.attr("comp",F.substring(1,F.length-1))}K=B.type;P.attr("compType",K);var N=true;var E=P.attr("id");if(!E){E=(Math.random()+"").substring(3);P.attr("id",E);N=false}switch(K){case"htmlEditor":B=A.extend({minHeight:"400px"},B);if(A(".my_ueditor_script").length==0){A("body").append('<script class="my_ueditor_script" src="'+_ctxPath+'/moduleweb/resources/plugins/ueditor/ueditor.config.js"><\/script><script class="my_ueditor_script" src="'+_ctxPath+'/moduleweb/resources/plugins/ueditor/ueditor.all.min.js"><\/script><script class="my_ueditor_script" src="'+_ctxPath+'/moduleweb/resources/plugins/ueditor/ueditor.parse.min.js"><\/script>')}P.attr("id","ueditor_"+E);P.attr("name","ueditor_"+E);P.css("min-height",B.minHeight);P.after('<input type="hidden" id="'+E+'" name="'+E+'" class="my_ueditor">');var M=UE.getEditor("ueditor_"+E,{});A("#"+E).attrObj("ueditor",M);break;case"fileupload":B=A.extend({attachesDiv:"attachesDiv",attachesField:"attaches",imagesDiv:"imagesDiv",imagesField:"imgs",imgWidth:"150px",imgHeight:"200px"},B);if(N){B.attachesField=E;B.imagesField=E}if(A("#_fileupload_div").length==0){A("body").append('<div id="_fileupload_div" class="hidden"><form action="" id="_fileupload_fileForm"><input type="file" rel="msgImage" autocomplete="off" name="_fileupload_onlyFile" id="_fileupload_onlyFile" onchange="_fileupload_changeFile(this)"/></form></div>')}if(B.valueId){if(A("#"+B.valueId).length==0){var D=A('<input type="hidden" name="'+B.valueId+'" id="'+B.valueId+'"/>');if(B.previewImgId){D.attr("_fileupload_previewImgId",B.previewImgId)}P.after(D)}}if(B.showAttach||B.showImage){P.attrObj("_fileupload_fs",[])}P.click(function(){A("#_fileupload_onlyFile").attr("cid",P.attr("id"));A("#_fileupload_onlyFile").click()});break;case"map":B=A.extend({width:"90%",height:"90%",addressField:"address",latitudeField:"gpsPoint.latitude",longitudeField:"gpsPoint.longitude",autoAddress:true},B);var J=B.latitudeField,C=B.longitudeField;var O=J.indexOf("."),H=C.indexOf(".");var L=J,G=C;if(O!=-1){L=J.substring(0,O)}if(H!=-1){G=J.substring(0,H)}if(A("#"+J).length==0){P.after('<input type="hidden" name="'+J+'" id="'+J+'" class="'+L+'"/>')}if(A("#"+C).length==0){P.after('<input type="hidden" name="'+C+'" id="'+C+'"  class="'+G+'"/>')}P.click(function(){var S=_ctxPath+"/common/toMap.do?TB_iframe=true&lat="+A("#"+J.replace(".","\\.")).val()+"&lng="+A("#"+C.replace(".","\\.")).val();var R=layer.open({type:2,title:"\u9009\u62e9\u5750\u6807",shadeClose:false,area:[B.width,B.height],content:S});P.attr("_comp_map_layerId",R);_comp_t=P});break}P.attrObj("_compCfg",B)}};A.fn.comp=function(B){A(".comp",this).add(this).each(function(C){A(this).compThis(B)})};A.fn.fileuploadDisplay=function(L){var E=this,G=E.attrObj("_compCfg"),H=E.attr("id");var F=E.attrObj("_fileupload_fs");if(!F){F=[]}if(G.showAttach){if(G.showAttachCallback){G.showAttachCallback(F,G,E)}else{A(".attach_"+H).remove();for(var D=0;D<F.length;D++){var K=F[D].split("|");var B=K[2];var C=K[1];var J=A('<div class="attach_'+H+' m-r-10"><a target="_blank" href="'+B+'" class="m-r-5">'+C+"</a></div>");var I=A('<i class="fa fa-times" style="cursor:pointer;"></i>');I.attr("attach_i",D);I.attr("attach_cid",H);I.click(function(){var Q=A(this),O=Q.attr("attach_i"),P=Q.attr("attach_cid"),M=A("#"+P);var N=M.attrObj("_fileupload_fs");if(O&&N&&N.length>O){F.splice(O,1);M.fileuploadDisplay()}});J.append(I);A("#"+G.attachesDiv).append(J);E.after(A('<input type="hidden" id="'+G.attachesField+"["+D+']" name="'+G.attachesField+"["+D+']" value="'+K[0]+'" class="attach_'+H+'">'))}}}if(G.showImage){if(G.showImageCallback){G.showImageCallback(F,G,E)}else{A(".attach_"+H).remove();for(var D=0;D<F.length;D++){var K=F[D].split("|");var B=K[2];var C=K[1];var J=A('<div style="width: '+G.imgWidth+";height:"+G.imgHeight+';float:left" class="m-r-10 attach_'+H+'"><img alt="'+C+'" src="'+B+'" style="width: 100%; height: 100%;" /></div>');A("#"+G.imagesDiv).append(J);J.attr("attach_i",D);J.attr("attach_cid",H);J.dblclick(function(){var Q=A(this),O=Q.attr("attach_i"),P=Q.attr("attach_cid"),M=A("#"+P);var N=M.attrObj("_fileupload_fs");if(O&&N&&N.length>O){F.splice(O,1);M.fileuploadDisplay()}});E.after(A('<input type="hidden" id="'+G.imagesField+"["+D+']" name="'+G.imagesField+"["+D+']" value="'+K[0]+'" class="attach_'+H+'">'))}}}}})(jQuery);function selectAddress(F){addressComponents=F.addressComponents;if(_comp_t){var D=_comp_t.attrObj("_compCfg");if(D.selectAddress){D.selectAddress(F)}else{if(!D.autoAddress||!$("#"+D.addressField).val()){$("#"+D.addressField).val(F.address)}$("#"+D.latitudeField.replace(".","\\.")).val(F.point.lat);$("#"+D.longitudeField.replace(".","\\.")).val(F.point.lng);if(D.provinceField){var C=$("#"+D.provinceField);var G=addressComponents.province;if(C.length==1){var E=C[0].options;for(var B=0;B<E.length;B++){var A=E[B];if(A.value==G||A.text==G){A.selected=true;break}}}$(C).trigger("change")}}layer.close(_comp_t.attr("_comp_map_layerId"))}}function _fileupload_changeFile(D){$.shade.show();var C=$(D).attr("cid");var B=$("#"+C);if(B.length!=0){var A=B.attrObj("_compCfg");$("#_fileupload_fileForm").ajaxSubmit({type:"post",headers:{isPrivate:A.isPrivate,"X-Auth-Token":eh.utils.cookie.get("X-Auth-Token")},url:URL.fileupload,success:function(K){if(A.success){A.success(K)}else{$.shade.hide();var G=K.data[0],H;var I=G.split("~");if(I.length>1){G=I[0];H=I[1]}else{H=_qiniuImageHost+"/"+G}if(A.previewImgId){var F=H;$("#"+A.previewImgId).attr("src",F)}if(A.valueId){$("#"+A.valueId).val(G)}var L=getFileName(D);if(A.showAttach||A.showImage){var J=G+"|"+L+"|"+H;var E=B.attrObj("_fileupload_fs");if(!E){E=[]}E.push(J);B.attrObj("_fileupload_fs",E);B.fileuploadDisplay()}$("#_fileupload_onlyFile").val("");toastr.success("\u4e0a\u4f20\u6210\u529f")}},error:function(E,G,F){if(A.error){A.error(E,G,F)}else{$.shade.hide();toastr.success("\u4e0a\u4f20\u5931\u8d25")}}})}}function getFileName(B){var C=B.value;var A=C.lastIndexOf("/");if(A==-1){A=C.lastIndexOf("\\")}return C.substring(A+1)};
(function(A){A._autofill=new Object();A.autofillform=function(B){var C={};B=A.extend(C,B);var D=B.fillmaps?B.fillmaps:new Object();A._autofill.filllists=D;for(var E in D){A("#"+E).fillform(D[E])}};A.fn.clearform=function(B){var C={clearHidden:false};B=A.extend(C,B);this.find(":input").each(function(){$t=A(this);switch(this.type){case"passsword":case"select-multiple":case"select-one":case"text":case"number":case"digits":case"textarea":$t.val("");case"hidden":if($t.data("suggest_raw")){$t.val("");$t.attr("selectedIndex","");$t.data("suggest_raw").attr("data-id","")}else{if(B.clearHidden){$t.val("")}}break;case"checkbox":case"radio":this.checked=false}})};A.fn.fillform=function(B,C){if(this[0]==null){return }this.each(function(D){var E=A(this);for(var G in B){if(C){A("[name='"+G+"']",E).fill(B[G],G,E)}else{var F=A("#"+G,E).add(A("."+G,E));if(G==E.attr("id")&&G==E.attr("name")){E.fill(B[G],G,E)}else{F.each(function(H){A(this).fill(B[G],G,E)})}}}E=null})};A.fn.fill=function(M,L,X){var E=this[0],Z=A(E),a=E.tagName.toLowerCase();if(M&&typeof M=="string"){M=M.replace(/<\/\/script>/gi,"<\/script>")}var O=E.type,b=E.value;var G=Z.attrObj("_fileupload_fs");if(G){if(M instanceof Array){G=M}else{G.push(M)}Z.attrObj("_fileupload_fs",G);Z.fileuploadDisplay();return }if(Z.hasClass("comp")){var I=Z.attr("comp"),F;if(I){F=A.parseJSON("{"+I+"}");if(F.type=="fileupload"){return }else{if(F.type=="htmlEditor"){return }}}}switch(a){case"input":switch(O){case"email":case"password":case"number":case"digits":case"text":var V=false;if(M instanceof Array){var Y=Z.attr("class");if(Y){var D=Y.split(" ");for(var U=0;U<M.length;U++){for(var S=0;S<D.length;S++){var K=D[S];if(Z.attr("name")==K+"["+U+"]"){Z.val(M[U]);V=true;break}}if(V){break}}}}else{if(M instanceof Object){for(var Q in M){if(Z.attr("id")==(L+"."+Q)){Z.val(M[Q]);V=true;break}}}}if(!V){Z.val(M)}break;case"hidden":var H=Z.attr("_fileupload_previewImgId");if(H){if(M&&M!==""){A("#"+H).attr("src",_qiniuImageHost+M)}}var R=Z.attrObj("ueditor");if(R){R.ready(function(){R.setContent(M)});break}if(Z.data("suggest_raw")){var W=Z.data("suggest_data");for(var U=0;U<W.length;U++){if(M===W[U]._id){if(Z.attr("selectedIndex")==""||Z.attr("selectedIndex")!=U){Z.val(M);Z.attr("selectedIndex",U);Z.data("suggest_raw").attr("data-id",M);Z.data("suggest_raw").val(W[U][Z.data("suggest_name")]);Z.trigger("change")}break}}}else{if(M instanceof Object){for(var Q in M){if(Z.attr("id")==(L+"."+Q)){Z.val(M[Q]);break}}}else{Z.val(M)}}break;case"checkbox":if(M instanceof Array){var N=false;for(var U=0;U<M.length;U++){if(M[U]==b){E.checked=true;N=true;break}}if(!N){E.checked=false}}else{if(M==true||M+""==b){E.checked=true}else{E.checked=false}}break;case"radio":if(M+""==b){E.checked=true}else{E.checked=false}}break;case"textarea":Z.val(M);break;case"select":switch(O){case"select-one":M=""+M;if(typeof M==="string"){T(Z[0],M)}else{if(M instanceof Array){for(var U=0;U<M.length;U++){T(Z[0],M[U])}}}break;case"select-multiple":var C=E.options;var P=M;if(typeof M==="string"){P=M.split(",")}for(var U=0;U<C.length;U++){var J=C[U];var B=J.value;if(P){for(var S=0;S<P.length;S++){if(B==P[S]){J.selected=true}}}}}break;default:if(!((!M||M=="")&&A(this)[0].innerHTML.indexOf("&nbsp;")!=-1)){if(M&&Z.parent(".text_overflow").length==1){Z.attr("title",M)}if(M&&typeof M=="string"){M=M.replace(/\n/g,"<br/>")}E.innerHTML=M}}function T(e,d){for(var c=0;c<e.options.length;c++){if(e.options[c].value==d){e.options[c].selected=true;break}}A(e).trigger("change")}};A.fn.fillgrid=function(B){this.each(function(D){var C=this.tagName.toLowerCase(),E=A(this);switch(C){case"table":elem.grid.addData(B);break}})}})(jQuery);
/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory((typeof(jQuery)!="undefined")?jQuery:window.Zepto)}}(function($){var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp){return this.attr.apply(this,arguments)}var val=this.prop.apply(this,arguments);if((val&&val.jquery)||typeof val==="string"){return val}return this.attr.apply(this,arguments)};$.fn.ajaxSubmit=function(options){if(!this.length){log("ajaxSubmit: skipping submit process - no element selected");return this}var method,action,url,$form=this;if(typeof options=="function"){options={success:options}}else{if(options===undefined){options={}}}method=options.type||this.attr2("method");action=options.url||this.attr2("action");url=(typeof action==="string")?$.trim(action):"";url=url||window.location.href||"";if(url){url=(url.match(/^([^#]+)/)||[])[1]}options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},options);var veto={};this.trigger("form-pre-serialize",[this,options,veto]);if(veto.veto){log("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional}var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional)}if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[a,this,options,veto]);if(veto.veto){log("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var q=$.param(a,traditional);if(qx){q=(q?(q+"&"+qx):qx)}if(options.type.toUpperCase()=="GET"){options.url+=(options.url.indexOf("?")>=0?"&":"?")+q;options.data=null}else{options.data=q}var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm()})}if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden)})}if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?"replaceWith":"html";$(options.target)[fn](data).each(oldSuccess,arguments)})}else{if(options.success){callbacks.push(options.success)}}options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form])}};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form])}}if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form])}}var fileInputs=$("input[type=file]:enabled",this).filter(function(){return $(this).val()!==""});var hasFileInputs=fileInputs.length>0;var mp="multipart/form-data";var multipart=($form.attr("enctype")==mp||$form.attr("encoding")==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a)})}else{jqxhr=fileUploadIframe(a)}}else{if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a)}else{jqxhr=$.ajax(options)}}$form.removeData("jqxhr").data("jqxhr",jqxhr);for(var k=0;k<elements.length;k++){elements[k]=null}this.trigger("form-submit-notify",[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split("&");var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g," ");part=serialized[i].split("=");result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])])}return result}function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value)}if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++){if(serializedData[i]){formdata.append(serializedData[i][0],serializedData[i][1])
}}}options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||"POST"});if(options.uploadProgress){s.xhr=function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener("progress",function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100)}options.uploadProgress(event,position,total,percent)},false)}return xhr}}s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){if(options.formData){o.data=options.formData}else{o.data=formdata}if(beforeSend){beforeSend.call(this,xhr,o)}};return $.ajax(s)}function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var deferred=$.Deferred();deferred.abort=function(status){xhr.abort(status)};if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp){el.prop("disabled",false)}else{el.removeAttr("disabled")}}}s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id="jqFormIO"+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2("name");if(!n){$io.attr2("name",id)}else{id=n}}else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:"absolute",top:"-1000px",left:"-1000px"})}io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==="timeout"?"timeout":"aborted");log("aborting upload... "+e);this.aborted=1;try{if(io.contentWindow.document.execCommand){io.contentWindow.document.execCommand("Stop")}}catch(ignore){}$io.attr("src",s.iframeSrc);xhr.error=e;if(s.error){s.error.call(s.context,xhr,e,status)}if(g){$.event.trigger("ajaxError",[xhr,s,e])}if(s.complete){s.complete.call(s.context,xhr,e)}}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart")}if(g){$.event.trigger("ajaxSend",[xhr,s])}if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--}deferred.reject();return deferred}if(xhr.aborted){deferred.reject();return deferred}sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+".x"]=form.clk_x;s.extraData[n+".y"]=form.clk_y}}}var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow){doc=frame.contentWindow.document}}catch(err){log("cannot get iframe.contentWindow document: "+err)}if(doc){return doc}try{doc=frame.contentDocument?frame.contentDocument:frame.document}catch(err){log("cannot get iframe.contentDocument: "+err);doc=frame.document}return doc}var csrf_token=$("meta[name=csrf-token]").attr("content");var csrf_param=$("meta[name=csrf-param]").attr("content");if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token}function doSubmit(){var t=$form.attr2("target"),a=$form.attr2("action"),mp="multipart/form-data",et=$form.attr("enctype")||$form.attr("encoding")||mp;form.setAttribute("target",id);if(!method||/post/i.test(method)){form.setAttribute("method","POST")}if(a!=s.url){form.setAttribute("action",s.url)}if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT)},s.timeout)}function checkState(){try{var state=getDoc(io).readyState;log("state = "+state);if(state&&state.toLowerCase()=="uninitialized"){setTimeout(checkState,50)}}catch(e){log("Server abort: ",e," (",e.name,")");cb(SERVER_ABORT);if(timeoutHandle){clearTimeout(timeoutHandle)}timeoutHandle=undefined}}var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty("name")&&s.extraData[n].hasOwnProperty("value")){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0])}else{extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0])}}}}if(!s.iframeTarget){$io.appendTo("body")}if(io.attachEvent){io.attachEvent("onload",cb)}else{io.addEventListener("load",cb,false)}setTimeout(checkState,15);try{form.submit()}catch(err){var submitFn=document.createElement("form").submit;submitFn.apply(form)}}finally{form.setAttribute("action",a);form.setAttribute("enctype",et);if(t){form.setAttribute("target",t)}else{$form.removeAttr("target")}$(extraInputs).remove()}}if(s.forceSync){doSubmit()}else{setTimeout(doSubmit,10)}var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return}doc=getDoc(io);if(!doc){log("cannot access response document");e=SERVER_ABORT}if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort("timeout");deferred.reject(xhr,"timeout");return}else{if(e==SERVER_ABORT&&xhr){xhr.abort("server abort");
deferred.reject(xhr,"error","server abort");return}}if(!doc||doc.location.href==s.iframeSrc){if(!timedOut){return}}if(io.detachEvent){io.detachEvent("onload",cb)}else{io.removeEventListener("load",cb,false)}var status="success",errMsg;try{if(timedOut){throw"timeout"}var isXml=s.dataType=="xml"||doc.XMLDocument||$.isXMLDoc(doc);log("isXml="+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log("requeing onLoad callback, DOM not available");setTimeout(cb,250);return}}var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml){s.dataType="xml"}xhr.getResponseHeader=function(header){var headers={"content-type":s.dataType};return headers[header.toLowerCase()]};if(docRoot){xhr.status=Number(docRoot.getAttribute("status"))||xhr.status;xhr.statusText=docRoot.getAttribute("statusText")||xhr.statusText}var dt=(s.dataType||"").toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName("textarea")[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute("status"))||xhr.status;xhr.statusText=ta.getAttribute("statusText")||xhr.statusText}else{if(scr){var pre=doc.getElementsByTagName("pre")[0];var b=doc.getElementsByTagName("body")[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText}else{if(b){xhr.responseText=b.textContent?b.textContent:b.innerText}}}}}else{if(dt=="xml"&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText)}}try{data=httpData(xhr,dt,s)}catch(err){status="parsererror";xhr.error=errMsg=(err||status)}}catch(err){log("error caught: ",err);status="error";xhr.error=errMsg=(err||status)}if(xhr.aborted){log("upload aborted");status=null}if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?"success":"error"}if(status==="success"){if(s.success){s.success.call(s.context,data,"success",xhr)}deferred.resolve(xhr.responseText,"success",xhr);if(g){$.event.trigger("ajaxSuccess",[xhr,s])}}else{if(status){if(errMsg===undefined){errMsg=xhr.statusText}if(s.error){s.error.call(s.context,xhr,status,errMsg)}deferred.reject(xhr,"error",errMsg);if(g){$.event.trigger("ajaxError",[xhr,s,errMsg])}}}if(g){$.event.trigger("ajaxComplete",[xhr,s])}if(g&&!--$.active){$.event.trigger("ajaxStop")}if(s.complete){s.complete.call(s.context,xhr,status)}callbackProcessed=true;if(s.timeout){clearTimeout(timeoutHandle)}setTimeout(function(){if(!s.iframeTarget){$io.remove()}else{$io.attr("src",s.iframeSrc)}xhr.responseXML=null},100)}var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject("Microsoft.XMLDOM");doc.async="false";doc.loadXML(s)}else{doc=(new DOMParser()).parseFromString(s,"text/xml")}return(doc&&doc.documentElement&&doc.documentElement.nodeName!="parsererror")?doc:null};var parseJSON=$.parseJSON||function(s){return window["eval"]("("+s+")")};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml=type==="xml"||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==="parsererror"){if($.error){$.error("parsererror")}}if(s&&s.dataFilter){data=s.dataFilter(data,type)}if(typeof data==="string"){if(type==="json"||!type&&ct.indexOf("json")>=0){data=parseJSON(data)}else{if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data)}}}return data};return deferred}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log("DOM not ready, queuing ajaxForm");$(function(){$(o.s,o.c).ajaxForm(options)});return this}log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)"));return this}if(options.delegation){$(document).off("submit.form-plugin",this.selector,doAjaxSubmit).off("click.form-plugin",this.selector,captureSubmittingElement).on("submit.form-plugin",this.selector,options,doAjaxSubmit).on("click.form-plugin",this.selector,options,captureSubmittingElement);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",options,doAjaxSubmit).bind("click.form-plugin",options,captureSubmittingElement)};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(e.target).ajaxSubmit(options)}}function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest("[type=submit]");if(t.length===0){return}target=t[0]}var form=this;form.clk=target;if(target.type=="image"){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY}else{if(typeof $.fn.offset=="function"){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop}}}setTimeout(function(){form.clk=form.clk_x=form.clk_y=null
},100)}$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a}var form=this[0];var formId=this.attr("id");var els=semantic?form.getElementsByTagName("*"):form.elements;var els2;if(els&&!/MSIE [678]/.test(navigator.userAgent)){els=$(els).get()}if(formId){els2=$(':input[form="'+formId+'"]').get();if(els2.length){els=(els||[]).concat(els2)}}if(!els||!els.length){return a}var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled){continue}if(semantic&&form.clk&&el.type=="image"){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y})}continue}v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements){elements.push(el)}for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]})}}else{if(feature.fileapi&&el.type=="file"){if(elements){elements.push(el)}var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type})}}else{a.push({name:n,value:"",type:el.type})}}else{if(v!==null&&typeof v!="undefined"){if(elements){elements.push(el)}a.push({name:n,value:v,type:el.type,required:el.required})}}}}if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=="image"){a.push({name:n,value:$input.val()});a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y})}}return a};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic))};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return}var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]})}}else{if(v!==null&&typeof v!="undefined"){a.push({name:this.name,value:v})}}});return $.param(a)};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=="undefined"||(v.constructor==Array&&!v.length)){continue}if(v.constructor==Array){$.merge(val,v)}else{val.push(v)}}return val};$.fieldValue=function(el,successful,idb){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true}if(successful&&(!n||(!idb&&el.disabled)||t=="reset"||t=="button"||(t=="checkbox"||t=="radio")&&!el.checked||(t=="submit"||t=="image")&&el.form&&el.form.clk!=el||tag=="select"&&el.selectedIndex==-1)){return null}if(tag=="select"){var index=el.selectedIndex;if(index<0){return null}var a=[],ops=el.options;var one=(t=="select-one");var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes.value&&!(op.attributes.value.specified))?op.text:op.value}if(one){return v}a.push(v)}}return a}return $(el).val()};$.fn.clearForm=function(includeHidden){return this.each(function(){$("input,select,textarea",this).clearFields(includeHidden)})};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=="textarea"){this.value=""}else{if(t=="checkbox"||t=="radio"){this.checked=false}else{if(tag=="select"){this.selectedIndex=-1}else{if(t=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true))}else{$(this).val("")}}else{if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=="string"&&$(this).is(includeHidden))){this.value=""}}}}}}})};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};$.fn.enable=function(b){if(b===undefined){b=true}return this.each(function(){this.disabled=!b})};$.fn.selected=function(select){if(select===undefined){select=true}return this.each(function(){var t=this.type;if(t=="checkbox"||t=="radio"){this.checked=select}else{if(this.tagName.toLowerCase()=="option"){var $sel=$(this).parent("select");if(select&&$sel[0]&&$sel[0].type=="select-one"){$sel.find("option").selected(false)}this.selected=select}}})};$.fn.ajaxSubmit.debug=false;$.fn.formObj=function(semantic){var data=this.formToArray(semantic);var resultdata={};$(data).each(function(index,element){var value=element.value;if(value==""){eval("resultdata."+element.name+"=null")}else{try{eval("resultdata."+element.name+"='"+value+"'")}catch(e){eval("resultdata."+element.name+"=null")}}});return resultdata};function log(){if(!$.fn.ajaxSubmit.debug){return}var msg="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(msg)}else{if(window.opera&&window.opera.postError){window.opera.postError(msg)}}}}));
(function($){var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s={array:function(x){var a=["["],b,f,i,l=x.length,v;for(var i=0;i<l;i+=1){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=="string"){if(b){a[a.length]=","}a[a.length]=v;b=true}}}a[a.length]="]";return a.join("")},date:function(x){return s.string(x.dateFormat("Y-m-d"))},"boolean":function(x){return String(x)},"null":function(x){return"null"},number:function(x){return isFinite(x)?String(x):"null"},object:function(x){if(!(typeof (x)==="object")){return"null"}if(x){if(x instanceof Array){return s.array(x)}else{if(x instanceof Date){return s.date(x)}}var a=["{"],b,f,i,v;for(var i in x){v=x[i];f=s[typeof v];if(f){v=f(v);if(typeof v=="string"){if(b){a[a.length]=","}a.push(s.string(i),":",v);b=true}}}a[a.length]="}";return a.join("")}return"null"},string:function(x){if(/["\\\x00-\x1f]/.test(x)){x=x.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})}return'"'+x+'"'},"function":function(x){return x.toString().match(/function\s+([^\s\(]+)/)[1]}};jQuery.toJSON=function(v){var f;if(isNaN(v)){f=s[typeof v]}else{f=(v instanceof Array)?s.array:s.number}if(f){return f(v)}};jQuery.parseJSON=function(v,safe){if(safe===undefined){safe=jQuery.parseJSON.safe}if(safe&&!/^("(\\.|[^"\\\n\r])*?"|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/.test(v)){return undefined}return eval("("+v+")")};jQuery.parseJSON.safe=false})(jQuery);
(function(B){var A=null;B.fn.jsonSubmit=function(M){A&&A();var K="_js_frm"+new Date().getTime();var G={validate:true,ajax:false};M=B.extend(G,M);var L=this.formobj(M);if(M.paramObj){if(B.isArray(L)){L={}}for(var C in M.paramObj){L[C]=M.paramObj[C]}}var H=M.action||this.attr("action");if(!M.debug&&(H==null||B.trim(H)=="")){alert("you don't set action attribute!");hideMask&&hideMask();return }if(M.validate&&B._isInValid(L)){hideMask&&hideMask();return }if(M.beforeSubmit&&M.beforeSubmit(L,this,M)===false){hideMask&&hideMask();return }var F=B.toJSON(L);if(M.ajax==true){B.ajax({async:false,type:"post",url:H,data:{_json_params:F},error:function(){alert("error\uff0cform submit fail!")},success:function(N){if(typeof M.callback=="function"){M.callback(N)}}})}else{var E=window;if(M.targetWindow){E=M.targetWindow}var I=B('<form method="post" action="'+H+'"><input type="hidden" id="_json_params" name="_json_params" value=""/></form>',E.document);B(E.document.body).append(I);E=null;if(typeof M.callback=="function"){var D=B('<iframe id="'+K+'" name="'+K+'" style="display:none;"></iframe>',I[0].ownerDocument);B("body",I[0].ownerDocument).append(D);D.load(function(){var N=B(this).contents().find("body").html();N=N.replace(/<embed[^<>]*>/,"");if(N&&N.trim().startsWith("<pre>")){N=N.trim();N=N.substr(5,N.length-11)}M.callback(N);B(this).remove()});D=null;I.attr("target",K)}else{if(M.target){I.attr("target",M.target)}}I.find("#_json_params").val(F);if(M.debug){alert("JSON data format:\n"+F)}if(H){I.submit()}I.remove();I=null}try{hideMask&&hideMask()}catch(J){}};B.fn.formobj=function(N){if(this[0]==null){return{}}var G={gridFilter:null,validate:true,errorIcon:false,errorAlert:true,errorBg:false,includeDisabled:true};N=B.extend(G,N);var O=N.domains;if(O&&O.length>0){var H={};if(B("#attachmentArea").length>0){var L=B("<div></div>");L.attr("id","attachmentInputs");L.attr("style","display:none;");L.attr("isGrid","true");this.append(L);saveAttachment();O.push("attachmentInputs")}for(var K=0;K<O.length;K++){var C=O[K],M=C==this.attr("id")?this:B("#"+C,this),F;var J=B("."+C),E=J.length;if(E>0&&N.matchClass){F=[];var D=[];for(var I=0;I<O.length;I++){if(I!=K){D.push(O[I])}}J.each(function(R){M=B(this);var S=B.jsonDomain(M,N);if(N.validate&&B._isInValid(S)&&!B._isInValid(F)){B._invalidObj(F)}F.push(S);for(var P=0;P<D.length;P++){var Q=B.jsonDomain(B("#"+D[P],M),N);if(N.validate&&B._isInValid(Q)&&!B._isInValid(F)){B._invalidObj(F)}S[D[P]]=Q}});if(N.isGrid){H=F}else{if(F.length==1){H=F[0]}}break}else{F=B.jsonDomain(M,N);H[C]=F;if(N.validate&&B._isInValid(F)&&!B._isInValid(H)){B._invalidObj(H)}}}return H}else{return B.jsonDomain(this,N)}};B.jsonDomain=function(J,P){P=P||{};var N=[],I=null,L=P.gridFilter,E=J.attr("isGrid")?J.attr("isGrid"):false,F=true,G,K=[],D=P.domains,M=P.includeDisabled;if(D){for(var H=0;H<D.length;H++){var O=D[H];if(J[0]&&O!=J[0].id&&B("#"+O,J).length>0){K.push(O)}}}B("*",J).add(J).filter(function(W){if(!this.id&&!this.name){return false}for(var T=0;T<K.length;T++){var X=K[T];if(B(this).parents("#"+X).length>0){return false}}var Q=this,Y=Q.tagName.toLowerCase(),R=Q.id?Q.id:Q.name;if(Y&&R&&(M||!Q.disabled)&&!Q.ignore){switch(Y){case"table":if(Q.grid&&Q.p.datas){var S=Q.p.datas.rows;B(S).each(function(Z){if(L&&!L(S[Z],B("tbody tr",B(Q)).get(Z))){return }N.push(S[Z])});E=true}break;case"input":var V=Q.type;if(V=="button"||V=="reset"||V=="submit"||V=="image"||R=="_json_params"||B(Q).attr("suggest")){break}case"textarea":if(Y=="textarea"){var U=B(Q).attr("comp");if(U&&B.parseJSON("{"+U+"}").type=="editor"){B(Q).val(B(Q).getEditorContent());break}}case"select":if(I&&R in I){if(Q.type!="radio"){I={};N.push(I)}}if(!I){I=new Object();N.push(I)}var V=Q.type;if(V&&V=="radio"){if(Q.checked){I[Q.name]=Q.value}}else{var X=B.fieldValue(Q,true,M);if(!I[R]){I[R]=X}}}}return false});if(P.validate){F=B(J).validate({errorIcon:P.errorIcon,errorAlert:P.errorAlert,errorBg:P.errorBg})}if(N.length==1&&!E){G=N[0]}else{if(L){var C=[];for(var H=0;H<N.length;H++){if(!L(N[H])){continue}C.push(N[H])}N=C}G=N}if(!F){B._invalidObj(G)}return G}})(jQuery);
